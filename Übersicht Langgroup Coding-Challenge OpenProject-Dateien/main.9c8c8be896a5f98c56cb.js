(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{"+yTb":function(e,n){var t;void 0===(t=jQuery).fn.each2&&t.extend(t.fn,{each2:function(e){for(var n=t([0]),l=-1,i=this.length;++l<i&&(n.context=n[0]=this[l])&&!1!==e.call(n[0],l,n););return this}}),function(e,n){"use strict";function t(n){var t=e(document.createTextNode(""));n.before(t),t.before(n),t.remove()}function l(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return A[e]||e})}function i(e,n){for(var t=0,l=n.length;l>t;t+=1)if(o(e,n[t]))return t;return-1}function o(e,t){return e===t||e!==n&&t!==n&&(null!==e&&null!==t&&(e.constructor===String?e+""==t+"":t.constructor===String&&t+""==e+""))}function r(e,n,t){var l,i,o;if(null===e||e.length<1)return[];for(i=0,o=(l=e.split(n)).length;o>i;i+=1)l[i]=t(l[i]);return l}function a(e){return e.outerWidth(!1)-e.width()}function u(t){var l="keyup-change-value";t.on("keydown",function(){e.data(t,l)===n&&e.data(t,l,t.val())}),t.on("keyup",function(){var i=e.data(t,l);i!==n&&t.val()!==i&&(e.removeData(t,l),t.trigger("keyup-change"))})}function s(t){t.on("mousemove",function(t){var l=O;(l===n||l.x!==t.pageX||l.y!==t.pageY)&&e(t.target).trigger("mousemove-filtered",t)})}function c(e,t,l){var i;return l=l||n,function(){var n=arguments;window.clearTimeout(i),i=window.setTimeout(function(){t.apply(l,n)},e)}}function d(n){var t=0,l=0;if("selectionStart"in(n=e(n)[0]))t=n.selectionStart,l=n.selectionEnd-t;else if("selection"in document){n.focus();var i=document.selection.createRange();l=document.selection.createRange().text.length,i.moveStart("character",-n.value.length),t=i.text.length-l}return{offset:t,length:l}}function p(e){e.preventDefault(),e.stopPropagation()}function h(n){if(!T){var t=n[0].currentStyle||window.getComputedStyle(n[0],null);(T=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:t.fontSize,fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight,letterSpacing:t.letterSpacing,textTransform:t.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e(document.body).append(T)}return T.text(n.val()),T.width()}function f(n,t,l){var i,o,r=[];(i=e.trim(n.attr("class")))&&e((i=""+i).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&r.push(this)}),(i=e.trim(t.attr("class")))&&e((i=""+i).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&((o=l(this))&&r.push(o))}),n.attr("class",r.join(" "))}function g(e,n,t,i){var o=l(e.toUpperCase()).indexOf(l(n.toUpperCase())),r=n.length;return 0>o?void t.push(i(e)):(t.push(i(e.substring(0,o))),t.push("<span class='select2-match'>"),t.push(i(e.substring(o,o+r))),t.push("</span>"),void t.push(i(e.substring(o+r,e.length))))}function m(e){var n={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return n[e]})}function v(t){var l,i=null,o=t.quietMillis||100,r=t.url,a=this;return function(u){window.clearTimeout(l),l=window.setTimeout(function(){var l=t.data,o=r,s=t.transport||e.fn.select2.ajaxDefaults.transport,c={type:t.type||"GET",cache:t.cache||!1,jsonpCallback:t.jsonpCallback||n,dataType:t.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,c);l=l?l.call(a,u.term,u.page,u.context):null,o="function"==typeof o?o.call(a,u.term,u.page,u.context):o,i&&"function"==typeof i.abort&&i.abort(),t.params&&(e.isFunction(t.params)?e.extend(d,t.params.call(a)):e.extend(d,t.params)),e.extend(d,{url:o,dataType:t.dataType,data:l,success:function(e){var n=t.results(e,u.page,u);u.callback(n)},error:function(e,n,t){var l={hasError:!0,jqXHR:e,textStatus:n,errorThrown:t};u.callback(l)}}),i=s.call(a,d)},o)}}function y(n){var t,l,i=n,o=function(e){return""+e.text};e.isArray(i)&&(i={results:l=i}),!1===e.isFunction(i)&&(l=i,i=function(){return l});var r=i();return r.text&&(o=r.text,e.isFunction(o)||(t=r.text,o=function(e){return e[t]})),function(n){var t,l=n.term,r={results:[]};return""===l?void n.callback(i()):(t=function(i,r){var a,u;if((i=i[0]).children){for(u in a={},i)i.hasOwnProperty(u)&&(a[u]=i[u]);a.children=[],e(i.children).each2(function(e,n){t(n,a.children)}),(a.children.length||n.matcher(l,o(a),i))&&r.push(a)}else n.matcher(l,o(i),i)&&r.push(i)},e(i().results).each2(function(e,n){t(n,r.results)}),void n.callback(r))}}function b(t){var l=e.isFunction(t);return function(i){var o=i.term,r={results:[]},a=l?t(i):t;e.isArray(a)&&(e(a).each(function(){var e=this.text!==n,t=e?this.text:this;(""===o||i.matcher(o,t))&&r.results.push(e?this:{id:this,text:this})}),i.callback(r))}}function w(n,t){if(e.isFunction(n))return!0;if(!n)return!1;if("string"==typeof n)return!0;throw new Error(t+" must be a string, function, or falsy value")}function k(n,t){if(e.isFunction(n)){var l=Array.prototype.slice.call(arguments,2);return n.apply(t,l)}return n}function C(n){var t=0;return e.each(n,function(e,n){n.children?t+=C(n.children):t++}),t}function P(){var n=this;e.each(arguments,function(e,t){n[t].remove(),n[t]=null})}function I(n,t){var l=function(){};return l.prototype=new n,l.prototype.constructor=l,l.prototype.parent=n.prototype,l.prototype=e.extend(l.prototype,t),l}if(window.Select2===n){var j,_,S,R,T,x,E,O={x:0,y:0},D={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case D.LEFT:case D.RIGHT:case D.UP:case D.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case D.SHIFT:case D.CTRL:case D.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&123>=e}},F="<div class='select2-measure-scrollbar'></div>",A={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};x=e(document),R=function(){var e=1;return function(){return e++}}(),j=I(Object,{bind:function(e){var n=this;return function(){e.apply(n,arguments)}},init:function(t){var l,o,r=".select2-results";this.opts=t=this.prepareOpts(t),this.id=t.id,t.element.data("select2")!==n&&null!==t.element.data("select2")&&t.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(t.element.attr("id")||"autogen"+R()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",t.element.attr("title")),this.body=e(document.body),f(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",t.element.attr("style")),this.container.css(k(t.containerCss,this.opts.element)),this.container.addClass(k(t.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",p),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),f(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(t.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",p),this.results=l=this.container.find(r),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",p),s(this.results),this.dropdown.on("mousemove-filtered",r,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",r,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",r,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",r,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),function(e,n){var t=c(e,function(e){n.trigger("scroll-debounced",e)});n.on("scroll",function(e){i(e.target,n.get())>=0&&t(e)})}(80,this.results),this.dropdown.on("scroll-debounced",r,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&l.mousewheel(function(e,n,t,i){var o=l.scrollTop();i>0&&0>=o-i?(l.scrollTop(0),p(e)):0>i&&l.get(0).scrollHeight-l.scrollTop()+i<=l.height()&&(l.scrollTop(l.get(0).scrollHeight-l.height()),p(e))}),u(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",r,this.bind(function(n){e(n.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(n),this.selectHighlighted(n))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=n,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==t.maximumInputLength&&this.search.attr("maxlength",t.maximumInputLength);var a=t.element.prop("disabled");a===n&&(a=!1),this.enable(!a);var d=t.element.prop("readonly");d===n&&(d=!1),this.readonly(d),E=E||function(){var n=e(F);n.appendTo(document.body);var t={width:n.width()-n[0].clientWidth,height:n.height()-n[0].clientHeight};return n.remove(),t}(),this.autofocus=t.element.prop("autofocus"),t.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",t.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,t=e.data("select2"),l=this;this.close(),e.length&&e[0].detachEvent&&l._sync&&e.each(function(){l._sync&&this.detachEvent("onpropertychange",l._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,t!==n&&(t.container.remove(),t.liveRegion.remove(),t.dropdown.remove(),e.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),P.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:o(e.attr("locked"),"locked")||o(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(t){var l,i,a,u,s=this;if("select"===(l=t.element).get(0).tagName.toLowerCase()&&(this.select=i=t.element),i&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in t)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(t=e.extend({},{populateResults:function(l,i,o){var r,a=this.opts.id,u=this.liveRegion;(r=function(l,i,c){var d,p,h,f,g,m,v,y,b,w,k=[];for(d=0,p=(l=t.sortResults(l,i,o)).length;p>d;d+=1)f=!(g=!0===(h=l[d]).disabled)&&a(h)!==n,m=h.children&&h.children.length>0,(v=e("<li></li>")).addClass("select2-results-dept-"+c),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),g&&v.addClass("select2-disabled"),m&&v.addClass("select2-result-with-children"),v.addClass(s.opts.formatResultCssClass(h)),v.attr("role","presentation"),(y=e(document.createElement("div"))).addClass("select2-result-label"),y.attr("id","select2-result-label-"+R()),y.attr("role","option"),(w=t.formatResult(h,y,o,s.opts.escapeMarkup))!==n&&(y.html(w),v.append(y)),m&&((b=e("<ul></ul>")).addClass("select2-result-sub"),r(h.children,b,c+1),v.append(b)),v.data("select2-data",h),k.push(v[0]);i.append(k),u.text(t.formatMatches(l.length))})(i,l,0)}},e.fn.select2.defaults,t)).id&&(a=t.id,t.id=function(e){return e[a]}),e.isArray(t.element.data("select2Tags"))){if("tags"in t)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+t.element.attr("id");t.tags=t.element.data("select2Tags")}if(i?(t.query=this.bind(function(e){var t,i,o,r={results:[],more:!1},a=e.term;o=function(n,t){var l;n.is("option")?e.matcher(a,n.text(),n)&&t.push(s.optionToData(n)):n.is("optgroup")&&(l=s.optionToData(n),n.children().each2(function(e,n){o(n,l.children)}),l.children.length>0&&t.push(l))},t=l.children(),this.getPlaceholder()!==n&&t.length>0&&((i=this.getPlaceholderOption())&&(t=t.not(i))),t.each2(function(e,n){o(n,r.results)}),e.callback(r)}),t.id=function(e){return e.id}):"query"in t||("ajax"in t?((u=t.element.data("ajax-url"))&&u.length>0&&(t.ajax.url=u),t.query=v.call(t.element,t.ajax)):"data"in t?t.query=y(t.data):"tags"in t&&(t.query=b(t.tags),t.createSearchChoice===n&&(t.createSearchChoice=function(n){return{id:e.trim(n),text:e.trim(n)}}),t.initSelection===n&&(t.initSelection=function(n,l){var i=[];e(r(n.val(),t.separator,t.transformVal)).each(function(){var n={id:this,text:this},l=t.tags;e.isFunction(l)&&(l=l()),e(l).each(function(){return o(this.id,n.id)?(n=this,!1):void 0}),i.push(n)}),l(i)}))),"function"!=typeof t.query)throw"query function not defined for Select2 "+t.element.attr("id");if("top"===t.createSearchChoicePosition)t.createSearchChoicePosition=function(e,n){e.unshift(n)};else if("bottom"===t.createSearchChoicePosition)t.createSearchChoicePosition=function(e,n){e.push(n)};else if("function"!=typeof t.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return t},monitorSource:function(){var t,l=this.opts.element,i=this;l.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var e=l.prop("disabled");e===n&&(e=!1),this.enable(!e);var t=l.prop("readonly");t===n&&(t=!1),this.readonly(t),this.container&&(f(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(k(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(f(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(this.opts.dropdownCssClass,this.opts.element)))}),l.length&&l[0].attachEvent&&l.each(function(){this.attachEvent("onpropertychange",i._sync)}),(t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==n&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new t(function(n){e.each(n,i._sync)}),this.propertyObserver.observe(l.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(n){var t=e.Event("select2-selecting",{val:this.id(n),object:n,choice:n});return this.opts.element.trigger(t),!t.isDefaultPrevented()},triggerChange:function(n){n=n||{},n=e.extend({},n,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(n),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,n=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",n),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===n&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===n&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var n,t,l,i,o,r=this.dropdown,a=this.container,u=a.offset(),s=a.outerHeight(!1),c=a.outerWidth(!1),d=r.outerHeight(!1),p=e(window),h=p.width(),f=p.height(),g=p.scrollLeft()+h,m=p.scrollTop()+f,v=u.top+s,y=u.left,b=m>=v+d,w=u.top-d>=p.scrollTop(),C=r.outerWidth(!1);r.hasClass("select2-drop-above")?(t=!0,!w&&b&&(l=!0,t=!1)):(t=!1,!b&&w&&(l=!0,t=!0)),l&&(r.hide(),u=this.container.offset(),s=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=r.outerHeight(!1),g=p.scrollLeft()+h,m=p.scrollTop()+f,v=u.top+s,y=u.left,C=r.outerWidth(!1),r.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),(C=r.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:E.width))>c?c=C:C=c,d=r.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(v-=(n=this.body.offset()).top,y-=n.left),!(g>=y+C)&&u.left+g+a.outerWidth(!1)>C&&(y=u.left+this.container.outerWidth(!1)-C),i={left:y,width:c},t?(i.top=u.top-d,i.bottom="auto",this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above")):(i.top=v,i.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),i=e.extend(i,k(this.opts.dropdownCss,this.opts.element)),r.css(i)},shouldOpen:function(){var n;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(n=e.Event("select2-opening"),this.opts.element.trigger(n),!n.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),x.on("mousemove.select2Event",function(e){O.x=e.pageX,O.y=e.pageY}),!0)},opening:function(){var n,l=this.containerEventName,i="scroll."+l,o="resize."+l,r="orientationchange."+l;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(n=e("#select2-drop-mask")).length&&((n=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),n.hide(),n.appendTo(this.body),n.on("mousedown touchstart click",function(l){t(n);var i,o=e("#select2-drop");o.length>0&&((i=o.data("select2")).opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),l.preventDefault(),l.stopPropagation())})),this.dropdown.prev()[0]!==n[0]&&this.dropdown.before(n),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+i+" "+r,function(){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var n=this.containerEventName,t="scroll."+n,l="resize."+n,i="orientationchange."+n;this.container.parents().add(window).each(function(){e(this).off(t).off(l).off(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),x.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return k(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var n,t,l,i,o,r,a,u,s=this.results;if(!(0>(t=this.highlight()))){if(0==t)return void s.scrollTop(0);n=this.findHighlightableChoices().find(".select2-result-label"),i=(u=((l=e(n[t])).offset()||{}).top||0)+l.outerHeight(!0),t===n.length-1&&((a=s.find("li.select2-more-results")).length>0&&(i=a.offset().top+a.outerHeight(!0))),i>(o=s.offset().top+s.outerHeight(!1))&&s.scrollTop(s.scrollTop()+(i-o)),0>(r=u-s.offset().top)&&"none"!=l.css("display")&&s.scrollTop(s.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(n){for(var t=this.findHighlightableChoices(),l=this.highlight();l>-1&&l<t.length;){var i=e(t[l+=n]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(l);break}}},highlight:function(n){var t,l,o=this.findHighlightableChoices();return 0===arguments.length?i(o.filter(".select2-highlighted")[0],o.get()):(n>=o.length&&(n=o.length-1),0>n&&(n=0),this.removeHighlight(),(t=e(o[n])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",t.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(t.text()),void((l=t.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(l),choice:l})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(n){var t=e(n.target).closest(".select2-result-selectable");if(t.length>0&&!t.is(".select2-highlighted")){var l=this.findHighlightableChoices();this.highlight(l.index(t))}else 0==t.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,n=e.find("li.select2-more-results"),t=this.resultsPage+1,l=this,i=this.search.val(),o=this.context;0!==n.length&&(n.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:i,page:t,context:o,matcher:this.opts.matcher,callback:this.bind(function(r){l.opened()&&(l.opts.populateResults.call(this,e,r.results,{term:i,page:t,context:o}),l.postprocessResults(r,!1,!1),!0===r.more?(n.detach().appendTo(e).html(l.opts.escapeMarkup(k(l.opts.formatLoadMore,l.opts.element,t+1))),window.setTimeout(function(){l.loadMoreIfNeeded()},10)):n.remove(),l.positionDropdown(),l.resultsPage=t,l.context=r.context,this.opts.element.trigger({type:"select2-loaded",items:r}))})})))},tokenize:function(){},updateResults:function(t){function l(){s.removeClass("select2-active"),p.positionDropdown(),c.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?p.liveRegion.text(c.text()):p.liveRegion.text(p.opts.formatMatches(c.find('.select2-result-selectable:not(".select2-selected")').length))}function i(e){c.html(e),l()}var r,a,u,s=this.search,c=this.results,d=this.opts,p=this,h=s.val(),f=e.data(this.container,"select2-last-term");if((!0===t||!f||!o(h,f))&&(e.data(this.container,"select2-last-term",h),!0===t||!1!==this.showSearchInput&&this.opened())){u=++this.queryCount;var g=this.getMaximumSelectionSize();if(g>=1&&(r=this.data(),e.isArray(r)&&r.length>=g&&w(d.formatSelectionTooBig,"formatSelectionTooBig")))return void i("<li class='select2-selection-limit'>"+k(d.formatSelectionTooBig,d.element,g)+"</li>");if(s.val().length<d.minimumInputLength)return w(d.formatInputTooShort,"formatInputTooShort")?i("<li class='select2-no-results'>"+k(d.formatInputTooShort,d.element,s.val(),d.minimumInputLength)+"</li>"):i(""),void(t&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&s.val().length>d.maximumInputLength)return void(w(d.formatInputTooLong,"formatInputTooLong")?i("<li class='select2-no-results'>"+k(d.formatInputTooLong,d.element,s.val(),d.maximumInputLength)+"</li>"):i(""));d.formatSearching&&0===this.findHighlightableChoices().length&&i("<li class='select2-searching'>"+k(d.formatSearching,d.element)+"</li>"),s.addClass("select2-active"),this.removeHighlight(),(a=this.tokenize())!=n&&null!=a&&s.val(a),this.resultsPage=1,d.query({element:d.element,term:s.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(r){var a;if(u==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(r.hasError!==n&&w(d.formatAjaxError,"formatAjaxError"))return void i("<li class='select2-ajax-error'>"+k(d.formatAjaxError,d.element,r.jqXHR,r.textStatus,r.errorThrown)+"</li>");if(this.context=r.context===n?null:r.context,this.opts.createSearchChoice&&""!==s.val()&&((a=this.opts.createSearchChoice.call(p,s.val(),r.results))!==n&&null!==a&&p.id(a)!==n&&null!==p.id(a)&&0===e(r.results).filter(function(){return o(p.id(this),p.id(a))}).length&&this.opts.createSearchChoicePosition(r.results,a)),0===r.results.length&&w(d.formatNoMatches,"formatNoMatches"))return void i("<li class='select2-no-results'>"+k(d.formatNoMatches,d.element,s.val())+"</li>");c.empty(),p.opts.populateResults.call(this,c,r.results,{term:s.val(),page:this.resultsPage,context:null}),!0===r.more&&w(d.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+d.escapeMarkup(k(d.formatLoadMore,d.element,this.resultsPage))+"</li>"),window.setTimeout(function(){p.loadMoreIfNeeded()},10)),this.postprocessResults(r,t),l(),this.opts.element.trigger({type:"select2-loaded",items:r})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var e;(e=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var n,t=e[0],l=e.val().length;e.focus(),(t.offsetWidth>0||t.offsetHeight>0)&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(l,l):t.createTextRange&&((n=t.createTextRange()).collapse(!1),n.select()))},0)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var n=this.highlight(),t=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");t?(this.highlight(n),this.onSelect(t,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==n?e.text():n)},getPlaceholderOption:function(){if(this.select){var t=this.select.children("option").first();if(this.opts.placeholderOption!==n)return"first"===this.opts.placeholderOption&&t||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(t.text())&&""===t.val())return t}},initContainerWidth:function(){var t=(function(){var t,l,i,o,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((t=this.opts.element.attr("style"))!==n)for(o=0,r=(l=t.split(";")).length;r>o;o+=1)if(null!==(i=l[o].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&i.length>=1)return i[1];return"resolve"===this.opts.width?(t=this.opts.element.css("width")).indexOf("%")>0?t:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}).call(this);null!==t&&this.container.css("width",t)}}),_=I(j,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,l,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(t=this.search.get(0)).createTextRange?((l=t.createTextRange()).collapse(!1),l.select()):t.setSelectionRange&&(i=this.search.val().length,t.setSelectionRange(i,i))),""===this.search.val()&&this.nextSearchTerm!=n&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),P.call(this,"selection","focusser")},initContainer:function(){var n,l,i=this.container,o=this.dropdown,r=R();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=n=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),n.find(".select2-chosen").attr("id","select2-chosen-"+r),this.focusser.attr("aria-labelledby","select2-chosen-"+r),this.results.attr("id","select2-results-"+r),this.search.attr("aria-owns","select2-results-"+r),this.focusser.attr("id","s2id_autogen"+r),l=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(l.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||l.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)return void p(e);switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),void p(e);case D.ENTER:return this.selectHighlighted(),void p(e);case D.TAB:return void this.selectHighlighted({noFocus:!0});case D.ESC:return this.cancel(e),void p(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.ESC){if(!1===this.opts.openOnEnter&&e.which===D.ENTER)return void p(e);if(e.which==D.DOWN||e.which==D.UP||e.which==D.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void p(e)}return e.which==D.DELETE||e.which==D.BACKSPACE?(this.opts.allowClear&&this.clear(),void p(e)):void 0}})),u(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),n.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),function(e){e.preventDefault(),e.stopImmediatePropagation()}(e),this.close(),this.selection&&this.selection.focus())})),n.on("mousedown touchstart",this.bind(function(l){t(n),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),p(l)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),n.on("focus",this.bind(function(e){p(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(n){var t=this.selection.data("select2-data");if(t){var l=e.Event("select2-clearing");if(this.opts.element.trigger(l),l.isDefaultPrevented())return;var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==n&&(this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==n&&null!==t&&(e.updateSelection(t),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(t,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==n&&((e=this.getPlaceholderOption())!==n&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===n||null===this.opts.element.val())},prepareOpts:function(){var n=this.parent.prepareOpts.apply(this,arguments),t=this;return"select"===n.element.get(0).tagName.toLowerCase()?n.initSelection=function(e,n){var l=e.find("option").filter(function(){return this.selected&&!this.disabled});n(t.optionToData(l))}:"data"in n&&(n.initSelection=n.initSelection||function(t,l){var i=t.val(),r=null;n.query({matcher:function(e,t,l){var a=o(i,n.id(l));return a&&(r=l),a},callback:e.isFunction(l)?function(){l(r)}:e.noop})}),n},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===n?n:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==n){if(this.select&&this.getPlaceholderOption()===n)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,n,t){var l=0,i=this;if(this.findHighlightableChoices().each2(function(e,n){return o(i.id(n.data("select2-data")),i.opts.element.val())?(l=e,!1):void 0}),!1!==t&&(!0===n&&l>=0?this.highlight(l):this.highlight(0)),!0===n){var r=this.opts.minimumResultsForSearch;r>=0&&this.showSearch(C(e.results)>=r)}},showSearch:function(n){this.showSearchInput!==n&&(this.showSearchInput=n,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!n),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!n),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",n))},onSelect:function(e,n){if(this.triggerSelect(e)){var t=this.opts.element.val(),l=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),n&&n.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),o(t,this.id(e))||this.triggerChange({added:e,removed:l})}},updateSelection:function(e){var t,l,i=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),i.empty(),null!==e&&(t=this.opts.formatSelection(e,i,this.opts.escapeMarkup)),t!==n&&i.append(t),(l=this.opts.formatSelectionCssClass(e,i))!==n&&i.addClass(l),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==n&&this.container.addClass("select2-allowclear")},val:function(){var e,t=!1,l=null,i=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(t=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,n){return l=i.optionToData(n),!1}),this.updateSelection(l),this.setPlaceholder(),t&&this.triggerChange({added:l,removed:o});else{if(!e&&0!==e)return void this.clear(t);if(this.opts.initSelection===n)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),t&&i.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var t,l=!1;return 0===arguments.length?((t=this.selection.data("select2-data"))==n&&(t=null),t):(arguments.length>1&&(l=arguments[1]),void(e?(t=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),l&&this.triggerChange({added:e,removed:t})):this.clear(l)))}}),S=I(j,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var n=this.parent.prepareOpts.apply(this,arguments),t=this;return"select"===n.element.get(0).tagName.toLowerCase()?n.initSelection=function(e,n){var l=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,n){l.push(t.optionToData(n))}),n(l)}:"data"in n&&(n.initSelection=n.initSelection||function(t,l){var i=r(t.val(),n.separator,n.transformVal),a=[];n.query({matcher:function(t,l,r){var u=e.grep(i,function(e){return o(e,n.id(r))}).length;return u&&a.push(r),u},callback:e.isFunction(l)?function(){for(var e=[],t=0;t<i.length;t++)for(var r=i[t],u=0;u<a.length;u++){var s=a[u];if(o(r,n.id(s))){e.push(s),a.splice(u,1);break}}l(e)}:e.noop})}),n},selectChoice:function(e){var n=this.container.find(".select2-search-choice-focus");n.length&&e&&e[0]==n[0]||(n.length&&this.opts.element.trigger("choice-deselected",n),n.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),P.call(this,"searchContainer","selection")},initContainer:function(){var n,t=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=n=this.container.find(t);var l=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){l.search[0].focus(),l.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+R()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var t=n.find(".select2-search-choice-focus"),l=t.prev(".select2-search-choice:not(.select2-locked)"),i=t.next(".select2-search-choice:not(.select2-locked)"),o=d(this.search);if(t.length&&(e.which==D.LEFT||e.which==D.RIGHT||e.which==D.BACKSPACE||e.which==D.DELETE||e.which==D.ENTER)){var r=t;return e.which==D.LEFT&&l.length?r=l:e.which==D.RIGHT?r=i.length?i:null:e.which===D.BACKSPACE?this.unselect(t.first())&&(this.search.width(10),r=l.length?l:i):e.which==D.DELETE?this.unselect(t.first())&&(this.search.width(10),r=i.length?i:null):e.which==D.ENTER&&(r=null),this.selectChoice(r),p(e),void(r&&r.length||this.open())}if((e.which===D.BACKSPACE&&1==this.keydowns||e.which==D.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(n.find(".select2-search-choice:not(.select2-locked)").last()),void p(e);if(this.selectChoice(null),this.opened())switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),void p(e);case D.ENTER:return this.selectHighlighted(),void p(e);case D.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case D.ESC:return this.cancel(e),void p(e)}if(e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.BACKSPACE&&e.which!==D.ESC){if(e.which===D.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)&&p(e),e.which===D.ENTER&&p(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(n){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),n.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",t,this.bind(function(n){this.isInterfaceEnabled()&&(e(n.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),n.preventDefault()))})),this.container.on("focus",t,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==n&&null!==t&&(e.updateSelection(t),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),t=this.getMaxSearchWidth();e!==n&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(t>0?t:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=n&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(n){var t=[],l=[],o=this;e(n).each(function(){i(o.id(this),t)<0&&(t.push(o.id(this)),l.push(this))}),n=l,this.selection.find(".select2-search-choice").remove(),e(n).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=n&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=n&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var l,i,o=!t.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),u=o?r:a,s=this.id(t),c=this.getVal();(l=this.opts.formatSelection(t,u.find("div"),this.opts.escapeMarkup))!=n&&u.find("div").replaceWith(e("<div></div>").html(l)),(i=this.opts.formatSelectionCssClass(t,u.find("div")))!=n&&u.addClass(i),o&&u.find(".select2-search-choice-close").on("mousedown",p).on("click dblclick",this.bind(function(n){this.isInterfaceEnabled()&&(this.unselect(e(n.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),p(n),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),u.data("select2-data",t),u.insertBefore(this.searchContainer),c.push(s),this.setVal(c)},unselect:function(n){var t,l,o=this.getVal();if(0===(n=n.closest(".select2-search-choice")).length)throw"Invalid argument: "+n+". Must be .select2-search-choice";if(t=n.data("select2-data")){var r=e.Event("select2-removing");if(r.val=this.id(t),r.choice=t,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(l=i(this.id(t),o))>=0;)o.splice(l,1),this.setVal(o),this.select&&this.postprocessResults();return n.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}),!0}},postprocessResults:function(e,n,t){var l=this.getVal(),o=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),a=this;o.each2(function(e,n){i(a.id(n.data("select2-data")),l)>=0&&(n.addClass("select2-selected"),n.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(e,n){n.is(".select2-result-selectable")||0!==n.find(".select2-result-selectable:not(.select2-selected)").length||n.addClass("select2-selected")}),-1==this.highlight()&&!1!==t&&!0===this.opts.closeOnSelect&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&w(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+k(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-a(this.search)},resizeSearch:function(){var e,n,t,l,i=a(this.search);e=h(this.search)+10,n=this.search.offset().left,e>(l=(t=this.selection.width())-(n-this.selection.offset().left)-i)&&(l=t-i),40>l&&(l=t-i),0>=l&&(l=e),this.search.width(Math.floor(l))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:r(e=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(n){var t;this.select?this.select.val(n):(t=[],e(n).each(function(){i(this,t)<0&&t.push(this)}),this.opts.element.val(0===t.length?"":t.join(this.opts.separator)))},buildChangeDetails:function(e,n){n=n.slice(0),e=e.slice(0);for(var t=0;t<n.length;t++)for(var l=0;l<e.length;l++)o(this.opts.id(n[t]),this.opts.id(e[l]))&&(n.splice(t,1),t>0&&t--,e.splice(l,1),l--);return{added:n,removed:e}},val:function(t,l){var i,o=this;if(0===arguments.length)return this.getVal();if((i=this.data()).length||(i=[]),!t&&0!==t)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(l&&this.triggerChange({added:this.data(),removed:i}));if(this.setVal(t),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),l&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===n)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(n){var t=e.map(n,o.id);o.setVal(t),o.updateSelection(n),o.clearSearch(),l&&o.triggerChange(o.buildChangeDetails(i,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var n=[],t=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){n.push(t.opts.id(e(this).data("select2-data")))}),this.setVal(n),this.triggerChange()},data:function(n,t){var l,i,o=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(i=this.data(),n||(n=[]),l=e.map(n,function(e){return o.opts.id(e)}),this.setVal(l),this.updateSelection(n),this.clearSearch(),void(t&&this.triggerChange(this.buildChangeDetails(i,this.data()))))}}),e.fn.select2=function(){var t,l,o,r,a,u=Array.prototype.slice.call(arguments,0),s=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],d=["val","data"],p={search:"externalSearch"};return this.each(function(){if(0===u.length||"object"==typeof u[0])(t=0===u.length?{}:e.extend({},u[0])).element=e(this),"select"===t.element.get(0).tagName.toLowerCase()?a=t.element.prop("multiple"):(a=t.multiple||!1,"tags"in t&&(t.multiple=a=!0)),(l=a?new window.Select2.class.multi:new window.Select2.class.single).init(t);else{if("string"!=typeof u[0])throw"Invalid arguments to select2 plugin: "+u;if(i(u[0],s)<0)throw"Unknown method: "+u[0];if(r=n,(l=e(this).data("select2"))===n)return;if("container"===(o=u[0])?r=l.container:"dropdown"===o?r=l.dropdown:(p[o]&&(o=p[o]),r=l[o].apply(l,u.slice(1))),i(u[0],c)>=0||i(u[0],d)>=0&&1==u.length)return!1}}),r===n?this:r},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,n,t,l){var i=[];return g(this.text(e),t.term,i,l),i.join("")},transformVal:function(n){return e.trim(n)},formatSelection:function(e,t,l){return e?l(this.text(e)):n},sortResults:function(e){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(){return n},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==n?null:e.id},text:function(n){return n&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(n):n[this.data.text]:n.text},matcher:function(e,n){return l(""+n).toUpperCase().indexOf(l(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,t,l,i){var r,a,u,s,c,d=e,p=!1;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return n;for(;;){for(a=-1,u=0,s=i.tokenSeparators.length;s>u&&(c=i.tokenSeparators[u],!((a=e.indexOf(c))>=0));u++);if(0>a)break;if(r=e.substring(0,a),e=e.substring(a+c.length),r.length>0&&(r=i.createSearchChoice.call(this,r,t))!==n&&null!==r&&i.id(r)!==n&&null!==i.id(r)){for(p=!1,u=0,s=t.length;s>u;u++)if(o(i.id(r),i.id(t[u]))){p=!0;break}p||l(r)}}return d!==e?e:void 0},escapeMarkup:m,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return n},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(e,n){var t=n-e.length;return"Please enter "+t+" or more character"+(1==t?"":"s")},formatInputTooLong:function(e,n){var t=e.length-n;return"Please delete "+t+" character"+(1==t?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results\u2026"},formatSearching:function(){return"Searching\u2026"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:v,local:y,tags:b},util:{debounce:c,markMatch:g,escapeMarkup:m,stripDiacritics:l},class:{abstract:j,single:_,multi:S}}}}(jQuery)},0:function(e,n,t){e.exports=t("zUnb")},"5Lfy":function(e,n,t){"use strict";t.d(n,"a",function(){return o});var l=t("mrSG"),i=t("SqdZ"),o=(t("wZYP"),function(e){function n(n,t,l,i){var o=e.call(this,t,l,n)||this;return o.elementRef=n,o.locals=t,o.cdRef=l,o.I18n=i,o}return l.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.$element.find(".dynamic-content-modal--wrapper").addClass(this.locals.modalClassName).append(this.locals.modalBody),jQuery(document.body).on("click.opdynamicmodal",".dynamic-content-modal--close-button",function(e){n.closeMe(e)})},n.prototype.ngOnDestroy=function(){jQuery(document.body).off("click.opdynamicmodal"),e.prototype.ngOnDestroy.call(this)},n}(i.a))},"7ond":function(e,n,t){"use strict";t.d(n,"a",function(){return l});var l=function(){function e(){this.minimumOffsetForNewSwitchInMs=100,this.lastFocusSwitch=-this.minimumOffsetForNewSwitchInMs,this.lastPriority=-1}return e.prototype.throttleAndCheckIfAllowedFocusChangeBasedOnTimeout=function(){var e=Date.now()-this.lastFocusSwitch>=this.minimumOffsetForNewSwitchInMs;return this.lastFocusSwitch=Date.now(),e},e.prototype.checkIfAllowedFocusChange=function(e){var n=this.throttleAndCheckIfAllowedFocusChangeBasedOnTimeout();if(n)this.lastPriority=-1;else if(e>this.lastPriority)return this.lastPriority=e,!0;return n},e.prototype.getFocusableElement=function(n){var t=n.find("input.ui-select-focusser");if(t.length>0)return t[0];var l=n;return n.is(e.FOCUSABLE_SELECTORS)||(l=n.find(e.FOCUSABLE_SELECTORS)),l[0]},e.prototype.focus=function(e){var n=jQuery(this.getFocusableElement(e)),t=jQuery(n),l=t.is("[disabled]");l&&!t.attr("ng-disabled")&&t.prop("disabled",!1),n.focus(),l&&!t.attr("ng-disabled")&&t.prop("disabled",!0)},e.prototype.focusElement=function(e,n){var t=this;this.checkIfAllowedFocusChange(n)&&setTimeout(function(){t.focus(e)},10)},e.FOCUSABLE_SELECTORS="a, button, :input, [tabindex], select",e}()},AytR:function(e,n,t){"use strict";t.d(n,"a",function(){return l});var l={production:!0}},"E+lO":function(e,n,t){"use strict";t.r(n),t.d(n,"DynamicBootstrapper",function(){return l});var l=function(){function e(){}return e.register=function(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];(e=this.optionalBoostrapComponents).push.apply(e,n)},e.bootstrapOptionalDocument=function(e,n,t){void 0===t&&(t=this.optionalBoostrapComponents),this.performBootstrap(e,n,!1,t)},e.bootstrapOptionalEmbeddable=function(e,n,t){void 0===t&&(t=this.optionalBoostrapComponents),this.performBootstrap(e,n,!0,t)},e.getEmbeddable=function(){return this.optionalBoostrapComponents.filter(function(e){return e.embeddable})},e.performBootstrap=function(e,n,t,l){l.forEach(function(l){if(!t||l.embeddable)for(var i=n.querySelectorAll(l.selector),o=0;o<i.length;o++)e.bootstrap(l.cls,i[o])})},e.optionalBoostrapComponents=[],e}()},E5Dd:function(e,n,t){"use strict";var l;t.d(n,"a",function(){return l}),function(e){e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESCAPE=27]="ESCAPE",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT_ARROW=37]="LEFT_ARROW",e[e.UP_ARROW=38]="UP_ARROW",e[e.RIGHT_ARROW=39]="RIGHT_ARROW",e[e.DOWN_ARROW=40]="DOWN_ARROW",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.KEY_0=48]="KEY_0",e[e.KEY_1=49]="KEY_1",e[e.KEY_2=50]="KEY_2",e[e.KEY_3=51]="KEY_3",e[e.KEY_4=52]="KEY_4",e[e.KEY_5=53]="KEY_5",e[e.KEY_6=54]="KEY_6",e[e.KEY_7=55]="KEY_7",e[e.KEY_8=56]="KEY_8",e[e.KEY_9=57]="KEY_9",e[e.KEY_A=65]="KEY_A",e[e.KEY_B=66]="KEY_B",e[e.KEY_C=67]="KEY_C",e[e.KEY_D=68]="KEY_D",e[e.KEY_E=69]="KEY_E",e[e.KEY_F=70]="KEY_F",e[e.KEY_G=71]="KEY_G",e[e.KEY_H=72]="KEY_H",e[e.KEY_I=73]="KEY_I",e[e.KEY_J=74]="KEY_J",e[e.KEY_K=75]="KEY_K",e[e.KEY_L=76]="KEY_L",e[e.KEY_M=77]="KEY_M",e[e.KEY_N=78]="KEY_N",e[e.KEY_O=79]="KEY_O",e[e.KEY_P=80]="KEY_P",e[e.KEY_Q=81]="KEY_Q",e[e.KEY_R=82]="KEY_R",e[e.KEY_S=83]="KEY_S",e[e.KEY_T=84]="KEY_T",e[e.KEY_U=85]="KEY_U",e[e.KEY_V=86]="KEY_V",e[e.KEY_W=87]="KEY_W",e[e.KEY_X=88]="KEY_X",e[e.KEY_Y=89]="KEY_Y",e[e.KEY_Z=90]="KEY_Z",e[e.LEFT_META=91]="LEFT_META",e[e.RIGHT_META=92]="RIGHT_META",e[e.SELECT=93]="SELECT",e[e.NUMPAD_0=96]="NUMPAD_0",e[e.NUMPAD_1=97]="NUMPAD_1",e[e.NUMPAD_2=98]="NUMPAD_2",e[e.NUMPAD_3=99]="NUMPAD_3",e[e.NUMPAD_4=100]="NUMPAD_4",e[e.NUMPAD_5=101]="NUMPAD_5",e[e.NUMPAD_6=102]="NUMPAD_6",e[e.NUMPAD_7=103]="NUMPAD_7",e[e.NUMPAD_8=104]="NUMPAD_8",e[e.NUMPAD_9=105]="NUMPAD_9",e[e.MULTIPLY=106]="MULTIPLY",e[e.ADD=107]="ADD",e[e.SUBTRACT=109]="SUBTRACT",e[e.DECIMAL=110]="DECIMAL",e[e.DIVIDE=111]="DIVIDE",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUM_LOCK=144]="NUM_LOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.SEMICOLON=186]="SEMICOLON",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.DASH=189]="DASH",e[e.PERIOD=190]="PERIOD",e[e.FORWARD_SLASH=191]="FORWARD_SLASH",e[e.GRAVE_ACCENT=192]="GRAVE_ACCENT",e[e.OPEN_BRACKET=219]="OPEN_BRACKET",e[e.BACK_SLASH=220]="BACK_SLASH",e[e.CLOSE_BRACKET=221]="CLOSE_BRACKET",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE"}(l||(l={}))},FUyZ:function(e,n,t){t("/ur0"),t("7k/7"),t("z2n6"),t("/Su4"),t("RMHK"),t("brli"),t("Iia5"),t("fPeS"),t("Jchv"),t("Vn+K"),t("2nA0"),t("9/yf"),t("NvoQ"),t("+NVk"),t("wEvd"),t("HmDX"),t("cZ/E"),t("2nA0"),t("O2Hw"),t("Oaa7"),t("tGlX"),t("TiIQ"),t("yFkT"),t("/+cc"),t("bKju"),t("+yTb"),t("+WSP"),t("gkXs"),t("VG3H"),t("cK71")},IDIo:function(e,n){jQuery(function(){var e=document.documentElement;(bowser.chrome&&bowser.version>="58"||bowser.firefox&&bowser.version>="59")&&e.classList.add("-supports-sticky-headers"),bowser.chrome&&e.classList.add("-browser-chrome"),bowser.safari&&e.classList.add("-browser-safari"),bowser.msedge&&e.classList.add("-browser-edge"),bowser.firefox&&e.classList.add("-browser-firefox"),bowser.windows&&e.classList.add("-browser-windows"),bowser.ios&&e.classList.add("-browser-ios"),(bowser.mobile||bowser.ios||bowser.android)&&e.classList.add("-browser-mobile")})},INe0:function(e,n){var t;(t=jQuery)(function(){var e=I18n.t("js.unsupported_browser.update_message");bowser.isUnsupportedBrowser({msie:"12",safari:"12",firefox:"60"},window.navigator.userAgent)&&(bowser.msie&&(e=I18n.t("js.unsupported_browser.update_ie_user")),t().topShelf({id:"op.unsupported_browsers",title:I18n.t("js.unsupported_browser.title"),message:I18n.t("js.unsupported_browser.message")+"<br/>"+e,link:I18n.t("js.unsupported_browser.learn_more"),close:I18n.t("js.unsupported_browser.close_warning"),url:"https://www.openproject.org/open-source/download/systemrequirements/"}))})},"IaZ+":function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return a});var l=t("CcnG"),i=t("4c35"),o=(t("+rW8"),t("E5Dd")),r=(t("7ond"),new l.InjectionToken("OP_MODAL_LOCALS")),a=function(){function e(e,n,t,l,r){var a=this;this.componentFactoryResolver=e,this.FocusHelper=n,this.appRef=t,this.$transitions=l,this.injector=r,this.active=null,this.opening=!1;var u=this.portalHostElement=document.createElement("div");u.classList.add("op-modals--overlay"),document.body.appendChild(u),jQuery(window).on("keydown",function(e){return a.active&&a.active.closeOnEscape&&e.which===o.a.ESCAPE&&a.close(e),!0}),jQuery(window).on("click",function(e){a.active&&!a.opening&&a.active.closeOnOutsideClick&&!a.portalHostElement.contains(e.target)&&a.close(e)}),this.bodyPortalHost=new i.b(u,this.componentFactoryResolver,this.appRef,this.injector)}return e.prototype.show=function(e,n,t){var l=this;void 0===n&&(n={}),void 0===t&&(t=this.injector),this.close(),this.opening=!0;var o=new i.a(e,null,this.injectorFor(t,n)),r=this.bodyPortalHost.attach(o).instance;return this.active=r,this.portalHostElement.style.display="block",setTimeout(function(){l.active&&l.active.onOpen(l.activeModal),l.opening=!1},20),this.active},e.prototype.isActive=function(e){return this.active&&this.active===e},e.prototype.close=function(e){this.active&&this.active.onClose()&&(this.active.closingEvent.emit(this.active),this.bodyPortalHost.detach(),this.portalHostElement.style.display="none",this.active=null,e&&(e.preventDefault(),e.stopPropagation()))},Object.defineProperty(e.prototype,"activeModal",{get:function(){return jQuery(this.portalHostElement).find(".op-modal--portal")},enumerable:!0,configurable:!0}),e.prototype.injectorFor=function(e,n){var t=new WeakMap;return n.service=this,t.set(r,n),new i.c(e,t)},e}()},OIUD:function(e,n){!function(e){e.fn.topShelf=function(n){var t=function(n){return"string"==typeof n&&(n={message:n}),e.extend({},e.fn.topShelf.defaults,n)}(n),l=e("<div/>").addClass(t.className),i=e("<a/>").append(" "+t.link).attr({href:t.url});if(!window.OpenProject.guardedLocalStorage(t.id)){var o=e("<a/>").append(t.close);return o.click(function(){window.OpenProject.guardedLocalStorage(t.id,"1"),l.remove()}),0===this.length?l.append(e("<h1/>").append(t.title)).append(e("<p/>").append(t.message).append(i)).append(e("<h2/>").append(o)):l.append(this),e("body").prepend(l),this}},e.fn.topShelf.defaults={className:"top-shelf icon icon-warning",title:"",message:"",link:"",url:""}}(jQuery)},RnhZ:function(e,n,t){var l={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function i(e){var n=o(e);return t(n)}function o(e){var n=l[e];if(!(n+1)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n}i.keys=function(){return Object.keys(l)},i.resolve=o,e.exports=i,i.id="RnhZ"},SU55:function(e,n){!function(e){"use strict";e(function(){e("[data-selected-page].tree-menu--container").each(function(n,t){var l=e(t).data("selected-page");l&&e("[slug="+l+"]",t).toggleClass("-selected",!0)}),e(".pages-hierarchy.-with-hierarchy .tree-menu--hierarchy-span").on("click keypress",function(n){return("keypress"!==n.type||13===n.which)&&(e(n.target).closest("ul.-with-hierarchy > li").toggleClass("-hierarchy-collapsed -hierarchy-expanded"),!1)})})}(jQuery)},SqdZ:function(e,n,t){"use strict";t.d(n,"a",function(){return i});var l=t("CcnG"),i=function(){function e(e,n,t){this.locals=e,this.cdRef=n,this.elementRef=t,this.closeOnEscape=!0,this.closeOnOutsideClick=!0,this.service=this.locals.service,this.closingEvent=new l.EventEmitter,this.openingEvent=new l.EventEmitter}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement)},e.prototype.ngOnDestroy=function(){this.closingEvent.complete(),this.openingEvent.complete()},e.prototype.onClose=function(){return this.afterFocusOn&&this.afterFocusOn.focus(),!0},e.prototype.closeMe=function(e){this.service.close(e)},e.prototype.onOpen=function(e){this.openingEvent.emit(),this.cdRef.detectChanges()},Object.defineProperty(e.prototype,"afterFocusOn",{get:function(){return this.$element},enumerable:!0,configurable:!0}),e}()},ZXPj:function(e,n,t){var l={"./apl/apl":["4kmW",1,0,18],"./apl/apl.js":["4kmW",1,0,18],"./asciiarmor/asciiarmor":["Jt+K",1,0,19],"./asciiarmor/asciiarmor.js":["Jt+K",1,0,19],"./asn.1/asn.1":["0OHD",1,0,20],"./asn.1/asn.1.js":["0OHD",1,0,20],"./asterisk/asterisk":["yGjk",1,0,21],"./asterisk/asterisk.js":["yGjk",1,0,21],"./brainfuck/brainfuck":["oF4/",1,0,22],"./brainfuck/brainfuck.js":["oF4/",1,0,22],"./clike/clike":["S6bl",1,4,0],"./clike/clike.js":["S6bl",1,4,0],"./clojure/clojure":["LA1u",1,0,23],"./clojure/clojure.js":["LA1u",1,0,23],"./cmake/cmake":["qE+Q",1,0,24],"./cmake/cmake.js":["qE+Q",1,0,24],"./cobol/cobol":["JNJg",1,0,25],"./cobol/cobol.js":["JNJg",1,0,25],"./coffeescript/coffeescript":["oL3q",1,0],"./coffeescript/coffeescript.js":["oL3q",1,0],"./commonlisp/commonlisp":["kmAK",1,0,26],"./commonlisp/commonlisp.js":["kmAK",1,0,26],"./crystal/crystal":["JRJP",1,0,27],"./crystal/crystal.js":["JRJP",1,0,27],"./css/css":["ewDg",1,3,0],"./css/css.js":["ewDg",1,3,0],"./cypher/cypher":["vW+e",1,0,28],"./cypher/cypher.js":["vW+e",1,0,28],"./d/d":["zRyg",1,0,29],"./d/d.js":["zRyg",1,0,29],"./dart/dart":["6q/U",1,4,0,30],"./dart/dart.js":["6q/U",1,4,0,30],"./diff/diff":["3fnu",1,0,31],"./diff/diff.js":["3fnu",1,0,31],"./django/django":["SzTn",1,2,3,0,9],"./django/django.js":["SzTn",1,2,3,0,9],"./dockerfile/dockerfile":["R6x9",1,0,32],"./dockerfile/dockerfile.js":["R6x9",1,0,32],"./dtd/dtd":["/YIB",1,0,33],"./dtd/dtd.js":["/YIB",1,0,33],"./dylan/dylan":["PLH4",1,0,34],"./dylan/dylan.js":["PLH4",1,0,34],"./ebnf/ebnf":["AvIz",1,0,35],"./ebnf/ebnf.js":["AvIz",1,0,35],"./ecl/ecl":["rSpl",1,0,36],"./ecl/ecl.js":["rSpl",1,0,36],"./eiffel/eiffel":["t86p",1,0,37],"./eiffel/eiffel.js":["t86p",1,0,37],"./elm/elm":["Rba3",1,0,38],"./elm/elm.js":["Rba3",1,0,38],"./erlang/erlang":["9RTS",1,0,39],"./erlang/erlang.js":["9RTS",1,0,39],"./factor/factor":["yv4w",1,0,40],"./factor/factor.js":["yv4w",1,0,40],"./fcl/fcl":["xvvs",1,0,41],"./fcl/fcl.js":["xvvs",1,0,41],"./forth/forth":["CDkR",1,0,42],"./forth/forth.js":["CDkR",1,0,42],"./fortran/fortran":["UYub",1,0,43],"./fortran/fortran.js":["UYub",1,0,43],"./gas/gas":["Upog",1,0,44],"./gas/gas.js":["Upog",1,0,44],"./gfm/gfm":["RKCW",1,6,0,45],"./gfm/gfm.js":["RKCW",1,6,0,45],"./gherkin/gherkin":["tkAH",1,0,46],"./gherkin/gherkin.js":["tkAH",1,0,46],"./go/go":["T/QY",1,0,47],"./go/go.js":["T/QY",1,0,47],"./groovy/groovy":["X7TR",1,0,48],"./groovy/groovy.js":["X7TR",1,0,48],"./haml/haml":["c+b1",1,2,3,0,10],"./haml/haml.js":["c+b1",1,2,3,0,10],"./handlebars/handlebars":["4d6s",1,0],"./handlebars/handlebars.js":["4d6s",1,0],"./haskell-literate/haskell-literate":["INem",1,0,49],"./haskell-literate/haskell-literate.js":["INem",1,0,49],"./haskell/haskell":["0+DK",1,0],"./haskell/haskell.js":["0+DK",1,0],"./haxe/haxe":["We/1",1,0,50],"./haxe/haxe.js":["We/1",1,0,50],"./htmlembedded/htmlembedded":["dLt8",1,2,3,0,11],"./htmlembedded/htmlembedded.js":["dLt8",1,2,3,0,11],"./htmlmixed/htmlmixed":["1p+/",1,2,3,0,16],"./htmlmixed/htmlmixed.js":["1p+/",1,2,3,0,16],"./http/http":["scEK",1,0,51],"./http/http.js":["scEK",1,0,51],"./idl/idl":["HqpV",1,0,52],"./idl/idl.js":["HqpV",1,0,52],"./javascript/javascript":["+dQi",1,2,0],"./javascript/javascript.js":["+dQi",1,2,0],"./jinja2/jinja2":["ToA7",1,0,53],"./jinja2/jinja2.js":["ToA7",1,0,53],"./jsx/jsx":["onn/",1,2,0,17],"./jsx/jsx.js":["onn/",1,2,0,17],"./julia/julia":["NGrM",1,0,54],"./julia/julia.js":["NGrM",1,0,54],"./livescript/livescript":["5RX+",1,0,55],"./livescript/livescript.js":["5RX+",1,0,55],"./lua/lua":["jrMQ",1,0,56],"./lua/lua.js":["jrMQ",1,0,56],"./markdown/markdown":["lZu9",1,6,0],"./markdown/markdown.js":["lZu9",1,6,0],"./mathematica/mathematica":["ztbM",1,0,57],"./mathematica/mathematica.js":["ztbM",1,0,57],"./mbox/mbox":["6mA5",1,0,58],"./mbox/mbox.js":["6mA5",1,0,58],"./meta":["8EBN",1,0,59],"./meta.js":["8EBN",1,0,59],"./mirc/mirc":["o5kb",1,0,60],"./mirc/mirc.js":["o5kb",1,0,60],"./mllike/mllike":["NU+Z",1,0,61],"./mllike/mllike.js":["NU+Z",1,0,61],"./modelica/modelica":["lQiH",1,0,62],"./modelica/modelica.js":["lQiH",1,0,62],"./mscgen/mscgen":["6gTk",1,0,63],"./mscgen/mscgen.js":["6gTk",1,0,63],"./mumps/mumps":["Q7su",1,0,64],"./mumps/mumps.js":["Q7su",1,0,64],"./nginx/nginx":["srmC",1,0,65],"./nginx/nginx.js":["srmC",1,0,65],"./nsis/nsis":["bYLO",1,0,66],"./nsis/nsis.js":["bYLO",1,0,66],"./ntriples/ntriples":["PWBO",1,0,67],"./ntriples/ntriples.js":["PWBO",1,0,67],"./octave/octave":["mybg",1,0,68],"./octave/octave.js":["mybg",1,0,68],"./oz/oz":["yhmh",1,0,69],"./oz/oz.js":["yhmh",1,0,69],"./pascal/pascal":["lB9V",1,0,70],"./pascal/pascal.js":["lB9V",1,0,70],"./pegjs/pegjs":["ZGb1",1,2,0,71],"./pegjs/pegjs.js":["ZGb1",1,2,0,71],"./perl/perl":["kG+r",1,0,72],"./perl/perl.js":["kG+r",1,0,72],"./php/php":["RNWO",1,2,3,4,0,12],"./php/php.js":["RNWO",1,2,3,4,0,12],"./pig/pig":["860+",1,0,73],"./pig/pig.js":["860+",1,0,73],"./powershell/powershell":["naPG",1,0,74],"./powershell/powershell.js":["naPG",1,0,74],"./properties/properties":["3Fvf",1,0,75],"./properties/properties.js":["3Fvf",1,0,75],"./protobuf/protobuf":["cHwl",1,0,76],"./protobuf/protobuf.js":["cHwl",1,0,76],"./pug/pug":["W+/v",1,2,3,5,0],"./pug/pug.js":["W+/v",1,2,3,5,0],"./puppet/puppet":["cwoo",1,0,77],"./puppet/puppet.js":["cwoo",1,0,77],"./python/python":["25Eh",1,0],"./python/python.js":["25Eh",1,0],"./q/q":["MiqB",1,0,78],"./q/q.js":["MiqB",1,0,78],"./r/r":["kD6b",1,0,79],"./r/r.js":["kD6b",1,0,79],"./rpm/changes/index.html":["S4ZP",120],"./rpm/rpm":["Qs4+",1,0,80],"./rpm/rpm.js":["Qs4+",1,0,80],"./rst/rst":["jIQM",1,0,81],"./rst/rst.js":["jIQM",1,0,81],"./ruby/ruby":["hTYL",1,0],"./ruby/ruby.js":["hTYL",1,0],"./rust/rust":["sY4N",1,0,82],"./rust/rust.js":["sY4N",1,0,82],"./sas/sas":["Sh3j",1,0,83],"./sas/sas.js":["Sh3j",1,0,83],"./sass/sass":["G2Pi",1,3,0],"./sass/sass.js":["G2Pi",1,3,0],"./scheme/scheme":["8wdy",1,0,84],"./scheme/scheme.js":["8wdy",1,0,84],"./shell/shell":["AvDn",1,0,85],"./shell/shell.js":["AvDn",1,0,85],"./sieve/sieve":["1dRh",1,0,86],"./sieve/sieve.js":["1dRh",1,0,86],"./slim/slim":["VI2i",1,2,3,0,13],"./slim/slim.js":["VI2i",1,2,3,0,13],"./smalltalk/smalltalk":["n4Nj",1,0,87],"./smalltalk/smalltalk.js":["n4Nj",1,0,87],"./smarty/smarty":["QWhe",1,0,88],"./smarty/smarty.js":["QWhe",1,0,88],"./solr/solr":["xhF3",1,0,89],"./solr/solr.js":["xhF3",1,0,89],"./soy/soy":["vH+N",1,2,3,0,14],"./soy/soy.js":["vH+N",1,2,3,0,14],"./sparql/sparql":["++e5",1,0,90],"./sparql/sparql.js":["++e5",1,0,90],"./spreadsheet/spreadsheet":["bEWP",1,0,91],"./spreadsheet/spreadsheet.js":["bEWP",1,0,91],"./sql/sql":["/9rB",1,0,92],"./sql/sql.js":["/9rB",1,0,92],"./stex/stex":["+NIl",1,0],"./stex/stex.js":["+NIl",1,0],"./stylus/stylus":["dtKC",1,7,0],"./stylus/stylus.js":["dtKC",1,7,0],"./swift/swift":["wOIU",1,0,93],"./swift/swift.js":["wOIU",1,0,93],"./tcl/tcl":["BEBj",1,0,94],"./tcl/tcl.js":["BEBj",1,0,94],"./textile/textile":["TD3l",1,0,95],"./textile/textile.js":["TD3l",1,0,95],"./tiddlywiki/tiddlywiki":["9+NH",1,0,96],"./tiddlywiki/tiddlywiki.css":["3ZWL",121],"./tiddlywiki/tiddlywiki.js":["9+NH",1,0,96],"./tiki/tiki":["Km7L",1,0,97],"./tiki/tiki.css":["Za/t",122],"./tiki/tiki.js":["Km7L",1,0,97],"./toml/toml":["0sou",1,0,98],"./toml/toml.js":["0sou",1,0,98],"./tornado/tornado":["xbNY",1,2,3,0,15],"./tornado/tornado.js":["xbNY",1,2,3,0,15],"./troff/troff":["s1o1",1,0,99],"./troff/troff.js":["s1o1",1,0,99],"./ttcn-cfg/ttcn-cfg":["hmTv",1,0,100],"./ttcn-cfg/ttcn-cfg.js":["hmTv",1,0,100],"./ttcn/ttcn":["TYrp",1,0,101],"./ttcn/ttcn.js":["TYrp",1,0,101],"./turtle/turtle":["P3N9",1,0,102],"./turtle/turtle.js":["P3N9",1,0,102],"./twig/twig":["SII/",1,0,103],"./twig/twig.js":["SII/",1,0,103],"./vb/vb":["Kr55",1,0,104],"./vb/vb.js":["Kr55",1,0,104],"./vbscript/vbscript":["axah",1,0,105],"./vbscript/vbscript.js":["axah",1,0,105],"./velocity/velocity":["/kYp",1,0,106],"./velocity/velocity.js":["/kYp",1,0,106],"./verilog/verilog":["m2bc",1,0,107],"./verilog/verilog.js":["m2bc",1,0,107],"./vhdl/vhdl":["PP56",1,0,108],"./vhdl/vhdl.js":["PP56",1,0,108],"./vue/vue":["aT2M",1,2,3,7,5,0,109],"./vue/vue.js":["aT2M",1,2,3,7,5,0,109],"./webidl/webidl":["PVgs",1,0,110],"./webidl/webidl.js":["PVgs",1,0,110],"./xml/xml":["1eCo",1,0,111],"./xml/xml.js":["1eCo",1,0,111],"./xquery/xquery":["bJEP",1,0,112],"./xquery/xquery.js":["bJEP",1,0,112],"./yacas/yacas":["WThJ",1,0,113],"./yacas/yacas.js":["WThJ",1,0,113],"./yaml-frontmatter/yaml-frontmatter":["0gIM",1,0,114],"./yaml-frontmatter/yaml-frontmatter.js":["0gIM",1,0,114],"./yaml/yaml":["ztCB",1,0],"./yaml/yaml.js":["ztCB",1,0],"./z80/z80":["dRHf",1,0,115],"./z80/z80.js":["dRHf",1,0,115]};function i(e){var n=l[e];return n?Promise.all(n.slice(1).map(t.e)).then(function(){var e=n[0];return t.t(e,7)}):Promise.resolve().then(function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n})}i.keys=function(){return Object.keys(l)},i.id="ZXPj",e.exports=i},buKu:function(e,n,t){"use strict";t.r(n);var l=t("qHU1"),i=t("FnNU");t("Thmm"),t("tG68"),t("IDIo"),t("E+lO"),t("vPHx"),t("vqYl"),t("OIUD"),t("SU55"),t("INe0"),window.appBasePath=jQuery("meta[name=app_base_path]").attr("content")||"";var o=jQuery("meta[name=openproject_initializer]");I18n.locale=o.data("defaultLocale"),I18n.locale=o.data("locale"),I18n.firstDayOfWeek=parseInt(o.data("firstDayOfWeek"),10),Object(l.c)(function(){window.enableReactiveStatesLogging=function(){return Object(i.f)(!0)},window.disableReactiveStatesLogging=function(){return Object(i.f)(!1)}})},cK71:function(e,n,t){e.exports=global.I18n=t("eFC/")},crnd:function(e,n){function t(e){return Promise.resolve().then(function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n})}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id="crnd"},"eFC/":function(e,n,t){var l,i;i=this,void 0===(l=(function(){return function(e){"use strict";var n=e&&e.I18n||{},t=Array.prototype.slice,l=function(e){return("0"+e.toString()).substr(-2)},i=function(e){var n=typeof e;return"function"===n||"object"===n},o=function(e){var n=typeof e;return"function"===n},r=function(e){return null!=e},a=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},u=function(e){return"string"==typeof value||"[object String]"===Object.prototype.toString.call(e)},s=function(e){return!0===e||!1===e},c=function(e,n,t){return void 0===t||0==+t?Math[e](n):(n=+n,t=+t,isNaN(n)||"number"!=typeof t||t%1!=0?NaN:(n=n.toString().split("e"),+((n=(n=Math[e](+(n[0]+"e"+(n[1]?+n[1]-t:-t)))).toString().split("e"))[0]+"e"+(n[1]?+n[1]+t:t))))},d=function(e,n){return o(e)?e(n):e},p=function(e,n){var t,l,i;for(t in n)n.hasOwnProperty(t)&&(l=n[t],u(l)||"number"==typeof(i=l)||"[object Number]"===Object.prototype.toString.call(i)||s(l)||a(l)?e[t]=l:(null==e[t]&&(e[t]={}),p(e[t],l)));return e},h={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]},f={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1},g={unit:"$",precision:2,format:"%u%n",sign_first:!0,delimiter:",",separator:"."},m={unit:"%",precision:3,format:"%n%u",separator:".",delimiter:""},v=[null,"kb","mb","gb","tb"],y={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:!1,translations:{},missingBehaviour:"message",missingTranslationPrefix:""};return n.reset=function(){var e;for(e in y)this[e]=y[e]},n.initializeOptions=function(){var e;for(e in y)r(this[e])||(this[e]=y[e])},n.initializeOptions(),n.locales={},n.locales.get=function(e){var t=this[e]||this[n.locale]||this.default;return o(t)&&(t=t(e)),!1===a(t)&&(t=[t]),t},n.locales.default=function(e){var t=[],l=[];return e&&t.push(e),!e&&n.locale&&t.push(n.locale),n.fallbacks&&n.defaultLocale&&t.push(n.defaultLocale),t.forEach(function(e){var t=e.split("-"),i=null,o=null;3===t.length?(i=[t[0],t[1]].join("-"),o=t[0]):2===t.length&&(i=t[0]),-1===l.indexOf(e)&&l.push(e),n.fallbacks&&[i,o].forEach(function(n){null!=n&&n!==e&&-1===l.indexOf(n)&&l.push(n)})}),t.length||t.push("en"),l},n.pluralization={},n.pluralization.get=function(e){return this[e]||this[n.locale]||this.default},n.pluralization.default=function(e){switch(e){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}},n.currentLocale=function(){return this.locale||this.defaultLocale},n.isSet=r,n.lookup=function(e,n){n=n||{};var t,l,i,o,a=this.locales.get(n.locale).slice();for(a[0],i=this.getFullScope(e,n);a.length;)if(t=a.shift(),l=i.split(this.defaultSeparator),o=this.translations[t]){for(;l.length&&null!=(o=o[l.shift()]););if(null!=o)return o}if(r(n.defaultValue))return d(n.defaultValue,e)},n.pluralizationLookupWithoutFallback=function(e,n,t){var l,o,a=this.pluralization.get(n)(e);if(i(t))for(;a.length;)if(l=a.shift(),r(t[l])){o=t[l];break}return o},n.pluralizationLookup=function(e,n,t){t=t||{};var l,o,a,u,s=this.locales.get(t.locale).slice();for(s[0],n=this.getFullScope(n,t);s.length;)if(l=s.shift(),o=n.split(this.defaultSeparator),a=this.translations[l]){for(;o.length&&(a=a[o.shift()],i(a));)0==o.length&&(u=this.pluralizationLookupWithoutFallback(e,l,a));if(null!=u&&null!=u)break}return null!=u&&null!=u||r(t.defaultValue)&&(u=i(t.defaultValue)?this.pluralizationLookupWithoutFallback(e,t.locale,t.defaultValue):t.defaultValue,a=t.defaultValue),{message:u,translations:a}},n.meridian=function(){var e=this.lookup("time"),n=this.lookup("date");return e&&e.am&&e.pm?[e.am,e.pm]:n&&n.meridian?n.meridian:h.meridian},n.prepareOptions=function(){for(var e,n=t.call(arguments),l={};n.length;)if("object"==typeof(e=n.shift()))for(var i in e)e.hasOwnProperty(i)&&(r(l[i])||(l[i]=e[i]));return l},n.createTranslationOptions=function(e,n){var t=[{scope:e}];return r(n.defaults)&&(t=t.concat(n.defaults)),r(n.defaultValue)&&t.push({message:n.defaultValue}),t},n.translate=function(e,n){n=n||{};var t,l=this.createTranslationOptions(e,n),o=this.prepareOptions(n);return delete o.defaultValue,l.some(function(n){if(r(n.scope)?t=this.lookup(n.scope,o):r(n.message)&&(t=d(n.message,e)),null!=t)return!0},this)?("string"==typeof t?t=this.interpolate(t,n):i(t)&&r(n.count)&&(t=this.pluralize(n.count,e,n)),t):this.missingTranslation(e,n)},n.interpolate=function(e,n){n=n||{};var t,l,i,o,a=e.match(this.placeholder);if(!a)return e;for(;a.length;)l=(t=a.shift()).replace(this.placeholder,"$1"),o=r(n[l])?n[l].toString().replace(/\$/gm,"_#$#_"):l in n?this.nullPlaceholder(t,e,n):this.missingPlaceholder(t,e,n),i=new RegExp(t.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(i,o);return e.replace(/_#\$#_/g,"$")},n.pluralize=function(e,n,t){var l,i;return t=this.prepareOptions({count:String(e)},t),null==(i=this.pluralizationLookup(e,n,t)).translations||null==i.translations?this.missingTranslation(n,t):null!=i.message&&null!=i.message?this.interpolate(i.message,t):(l=this.pluralization.get(t.locale),this.missingTranslation(n+"."+l(e)[0],t))},n.missingTranslation=function(e,n){if("guess"==this.missingBehaviour){var t=e.split(".").slice(-1)[0];return(this.missingTranslationPrefix.length>0?this.missingTranslationPrefix:"")+t.replace("_"," ").replace(/([a-z])([A-Z])/g,function(e,n,t){return n+" "+t.toLowerCase()})}return'[missing "'+[null!=n&&null!=n.locale?n.locale:this.currentLocale(),this.getFullScope(e,n)].join(this.defaultSeparator)+'" translation]'},n.missingPlaceholder=function(e,n,t){return"[missing "+e+" value]"},n.nullPlaceholder=function(){return n.missingPlaceholder.apply(n,arguments)},n.toNumber=function(e,n){n=this.prepareOptions(n,this.lookup("number.format"),f);var t,l,i=e<0,o=function(e,n){return c("round",e,-n).toFixed(n)}(Math.abs(e),n.precision).toString().split("."),r=[],a=n.format||"%n",u=i?"-":"";for(e=o[0],t=o[1];e.length>0;)r.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);return l=r.join(n.delimiter),n.strip_insignificant_zeros&&t&&(t=t.replace(/0+$/,"")),n.precision>0&&t&&(l+=n.separator+t),l=(a=n.sign_first?"%s"+a:a.replace("%n","%s%n")).replace("%u",n.unit).replace("%n",l).replace("%s",u)},n.toCurrency=function(e,n){return n=this.prepareOptions(n,this.lookup("number.currency.format"),this.lookup("number.format"),g),this.toNumber(e,n)},n.localize=function(e,n,t){switch(t||(t={}),e){case"currency":return this.toCurrency(n);case"number":return e=this.lookup("number.format"),this.toNumber(n,e);case"percentage":return this.toPercentage(n);default:var l;return l=e.match(/^(date|time)/)?this.toTime(e,n):n.toString(),this.interpolate(l,t)}},n.parseDate=function(e){var n,t,l;if("object"==typeof e)return e;if(n=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/)){for(var i=1;i<=6;i++)n[i]=parseInt(n[i],10)||0;n[2]-=1,l=n[7]?1e3*("0"+n[7]):null,t=n[8]?new Date(Date.UTC(n[1],n[2],n[3],n[4],n[5],n[6],l)):new Date(n[1],n[2],n[3],n[4],n[5],n[6],l)}else"number"==typeof e?(t=new Date).setTime(e):e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)?(t=new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" "))):(e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/),(t=new Date).setTime(Date.parse(e)));return t},n.strftime=function(e,t){var i=this.lookup("date"),o=n.meridian();if(i||(i={}),i=this.prepareOptions(i,h),isNaN(e.getTime()))throw new Error("I18n.strftime() requires a valid date object, but received an invalid date.");var r=e.getDay(),a=e.getDate(),u=e.getFullYear(),s=e.getMonth()+1,c=e.getHours(),d=c,p=c>11?1:0,f=e.getSeconds(),g=e.getMinutes(),m=e.getTimezoneOffset(),v=Math.floor(Math.abs(m/60)),y=Math.abs(m)-60*v,b=(m>0?"-":"+")+(v.toString().length<2?"0"+v:v)+(y.toString().length<2?"0"+y:y);return d>12?d-=12:0===d&&(d=12),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%a",i.abbr_day_names[r])).replace("%A",i.day_names[r])).replace("%b",i.abbr_month_names[s])).replace("%B",i.month_names[s])).replace("%d",l(a))).replace("%e",a)).replace("%-d",a)).replace("%H",l(c))).replace("%-H",c)).replace("%I",l(d))).replace("%-I",d)).replace("%m",l(s))).replace("%-m",s)).replace("%M",l(g))).replace("%-M",g)).replace("%p",o[p])).replace("%S",l(f))).replace("%-S",f)).replace("%w",r)).replace("%y",l(u))).replace("%-y",l(u).replace(/^0+/,""))).replace("%Y",u)).replace("%z",b)},n.toTime=function(e,n){var t=this.parseDate(n),l=this.lookup(e);return t.toString().match(/invalid/i)?t.toString():l?this.strftime(t,l):t.toString()},n.toPercentage=function(e,n){return n=this.prepareOptions(n,this.lookup("number.percentage.format"),this.lookup("number.format"),m),this.toNumber(e,n)},n.toHumanSize=function(e,n){for(var t,l,i=e,o=0;i>=1024&&o<4;)i/=1024,o+=1;return 0===o?(t=this.t("number.human.storage_units.units.byte",{count:i}),l=0):(t=this.t("number.human.storage_units.units."+v[o]),l=i-Math.floor(i)==0?0:1),n=this.prepareOptions(n,{unit:t,precision:l,format:"%n%u",delimiter:""}),this.toNumber(i,n)},n.getFullScope=function(e,n){return n=n||{},a(e)&&(e=e.join(this.defaultSeparator)),n.scope&&(e=[n.scope,e].join(this.defaultSeparator)),e},n.extend=function(e,n){return void 0===e&&void 0===n?{}:p(e,n)},n.t=n.translate,n.l=n.localize,n.p=n.pluralize,n}(i)}).call(n,t,n,e))||(e.exports=l)},omw0:function(e,n){window.addEventListener("error",function(e){var n,t=e.target;if("IMG"===t.tagName&&t.classList.contains("avatar--fallback"))for(var l=t.src,i=document.querySelectorAll('img.avatar--fallback[src="'+l+'"]'),o=0,r=i.length;o<r;o++){var a=i[o],u=a.parentElement;if(a.dataset.avatarFallbackRemove)u&&u.removeChild(a);else{var s=a.dataset.avatarFallbackIcon||"icon icon-user avatar",c=document.createElement("i");(n=c.classList).add.apply(n,s.split(/\s+/)),c.setAttribute("aria-hidden","true"),u&&u.replaceChild(c,a)}}},!0)},qHU1:function(e,n,t){"use strict";t.d(n,"c",function(){return i}),t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});var l=t("AytR");function i(e){l.a.production||e()}function o(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i(function(){return console.log("[DEBUG] ",e.join("-- "))})}function r(e,n){if(l.a.production)return n();var t=performance.now(),i=n(),o=performance.now();return console.log("%c"+e+" completed in "+(o-t)+" milliseconds.","color:#00A093;"),i}},tG68:function(e,n,t){"use strict";t.r(n),t.d(n,"ModalWrapperAugmentService",function(){return i});var l=t("5Lfy"),i=(t("IaZ+"),function(){function e(e,n){this.documentElement=e,this.opModalService=n}return e.prototype.setupListener=function(){for(var e=this.documentElement.querySelectorAll("section[data-augmented-model-wrapper]"),n=0;n<e.length;++n)this.wrapElement(jQuery(e[n]))},e.prototype.wrapElement=function(e){var n=this,t=e.find(".modal-wrapper--activation-link"),l=e.data("activationSelector");l&&(t=jQuery(l)),e.data("modalInitializeNow")?this.show(e):t.click(function(t){n.show(e),t.preventDefault()})},e.prototype.show=function(e){var n=e.data("modalClassName"),t=e.data("modalIframeUrl"),i=e.find(".modal-wrapper--content").html();t&&(i=this.appendIframe(i,t)),this.opModalService.show(l.a,{modalBody:i,modalClassName:n})},e.prototype.appendIframe=function(e,n){var t=jQuery(e),l=jQuery('<iframe frameborder="0" height="400" allowfullscreen>></iframe>');return l.attr("src",n),t.find(".iframe-target-wrapper").append(l),t.html()},e}())},vPHx:function(e,n,t){"use strict";var l;t.r(n),(l=jQuery)(function(){l(document.documentElement).on("click",function(e){var n=jQuery(e.target);return function(e,n){n.hasClass("-augmented-datepicker")&&n.attr("autocomplete","off").datepicker().datepicker("show")}(0,n),function(e,n){document.contains(e.target)||e.preventDefault();var t=n.closest("a");if(0!==t.length){var l=t.attr("href")||"",i=l.indexOf("#");""!==l&&0!==i||(-1!==i&&"#"!==l&&(window.location.hash=l),e.preventDefault())}}(e,n),!0}),l(document.documentElement).on("dragover drop",function(e){return e.preventDefault(),!1})})},vqYl:function(e,n,t){"use strict";t.r(n),t.d(n,"OpenProject",function(){return o});var l=t("FnNU"),i=t("t9fZ"),o=function(){function e(){this.pluginContext=Object(l.g)()}return e.prototype.getPluginContext=function(){return this.pluginContext.values$().pipe(Object(i.a)(1)).toPromise()},Object.defineProperty(e.prototype,"urlRoot",{get:function(){return jQuery("meta[name=app_base_path]").attr("content")||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"environment",{get:function(){return jQuery("meta[name=openproject_initializer]").data("environment")},enumerable:!0,configurable:!0}),e.prototype.guardedLocalStorage=function(e,n){try{if(void 0===n){var t=window.localStorage.getItem(e);return null===t?void 0:t}window.localStorage.setItem(e,n)}catch(l){console.error("Failed to access your browsers local storage. Is your local database corrupted?")}},e}();window.OpenProject=new o},wEvd:function(e,n){jQuery(function(e){var n=e.datepicker.regional,t=n[I18n.locale]||n[""];"number"==typeof I18n.firstDayOfWeek&&(t.firstDay=I18n.firstDayOfWeek),e.datepicker.setDefaults(t);var l=e.datepicker._gotoToday;e.datepicker._gotoToday=function(n){l.call(this,n);var t=e(n),i=this._getInst(t[0]),o=e.datepicker._formatDate(i);t.val(o),t.blur(),e.datepicker._hideDatepicker()};var i={showWeek:!0,changeMonth:!0,changeYear:!0,yearRange:"c-100:c+10",dateFormat:"yy-mm-dd",showButtonPanel:!0,calculateWeek:function(n){var t=new Date(+n);return 1!=n.getDay()&&t.setDate(n.getDate()-n.getDay()+1),e.datepicker.iso8601Week(t)}};e.datepicker.setDefaults(i),e.extend(e.datepicker,{_originalGotoToday:e.datepicker._gotoToday,_gotoToday:function(n){var t=e(n),l=this._getInst(t[0]),i=new Date,o=this._formatDate(l,i.getDate(),i.getMonth(),i.getFullYear());this._originalGotoToday(n),this._selectDate(n,o)},_inlineDatepicker2:e.datepicker._inlineDatepicker,_inlineDatepicker:function(n,t){this._inlineDatepicker2(n,t);var l=e.datepicker._get(t,"beforeShow");l&&l.apply(n,[n,t])},_checkOffsetOriginal:e.datepicker._checkOffset,_checkOffset:function(n,t,l){var i=e.datepicker._checkOffsetOriginal(n,t,l),o=this._get(n,"alterOffset");if(o){var r=n.input?n.input[0]:null;return o.apply(r,[i])}return i}})})},wZYP:function(e,n,t){"use strict";t.d(n,"a",function(){return l});var l=function(){function e(){this._i18n=window.I18n}return Object.defineProperty(e.prototype,"locale",{get:function(){return this._i18n.locale},enumerable:!0,configurable:!0}),e.prototype.t=function(e,n){return this._i18n.t(e,n)},e.prototype.lookup=function(e){return this._i18n.lookup(e)},e}()},zUnb:function(e,n,t){"use strict";t.r(n);var l=t("CcnG"),i=t("EVdn"),o=t("AytR"),r=t("mrSG"),a=t("FnNU"),u=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.name="MainStore",n.projects=Object(a.h)(),n.workPackages=Object(a.h)(),n.wikiPages=Object(a.h)(),n.posts=Object(a.h)(),n.schemas=Object(a.h)(),n.types=Object(a.h)(),n.statuses=Object(a.h)(),n.users=Object(a.h)(),n.queries=new s,n.focusedWorkPackage=Object(a.g)(),n}return r.d(n,e),n.prototype.forResource=function(e){return this[_.camelCase(e._type)+"s"].get(e.id)},n.prototype.add=function(e,n){this[e]=n},n}(a.b),s=function(){return function(){this.columns=Object(a.g)(),this.sortBy=Object(a.g)(),this.groupBy=Object(a.g)()}}(),c=t("4c35"),d=t("+rW8"),p=t("7ond"),h=function(){function e(e,n){this.basePath=e,this.path=this.basePath+"/"+n}return e.prototype.id=function(e){return new f(this.path,e)},e.prototype.optionalId=function(e){return _.isNil(e)?this:this.id(e)},e.prototype.toString=function(){return this.path},e.prototype.toPath=function(){return this.path},e}(),f=function(){function e(e,n){this.basePath=e,this.path=this.basePath+"/"+n}return e.prototype.toString=function(){return this.path},e.prototype.toPath=function(){return this.path},e}(),g=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.workPackageId=t,l.relations=l.path+"/relations",l.revisions=l.path+"/revisions",l.activities=l.path+"/activities",l.available_watchers=l.path+"/available_watchers",l.available_projects=l.path+"/available_projects",l}return r.d(n,e),n}(f),m=function(e){function n(n){var t=e.call(this,n,"work_packages")||this;return t.form=new f(t.path,"form"),t}return r.d(n,e),n.prototype.id=function(e){return new g(this.path,e)},n}(h),v=function(e){function n(n){var t=e.call(this,n,"users")||this;return t.me=t.path+"/me",t}return r.d(n,e),n.prototype.id=function(e){return new f(this.path,e)},n}(h),y=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.form=new f(l.path,"form"),l}return r.d(n,e),n}(f),b=function(e){function n(n){var t=e.call(this,n,"queries")||this;return t.form=new f(t.path,"form"),t.default=new f(t.path,"default"),t}return r.d(n,e),n.prototype.id=function(e){return new y(this.path,e)},n}(h),w=function(e){function n(n){return e.call(this,n,"types")||this}return r.d(n,e),n}(h),k=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.projectId=t,l.queries=new b(l.path),l.types=new w(l.path),l.work_packages={form:new f(l.path,"work_packages/form")},l}return r.d(n,e),n}(f),C=function(e){function n(n){return e.call(this,n,"projects")||this}return r.d(n,e),n.prototype.id=function(e){return new k(this.path,e)},n}(h),P=function(){function e(){this.filters=[]}return e.prototype.add=function(e,n,t){var l={};return l[e]={operator:n,values:t},this.filters.push(l),this},e.prototype.toJson=function(){return JSON.stringify(this.filters)},e.prototype.toParams=function(){var e=this,n=[];return n=this.filters.map(function(n){return e.serializeFilter(n)}),"filters="+encodeURI("["+n.join(",")+"]")},e.prototype.serializeFilter=function(e){var n=this,t=Object.keys(e)[0],l=e[t];return'{"'+t+'":{"operator":"'+l.operator+'","values":['+l.values.map(function(e){return n.serializeFilterValue(e)}).join(",")+"]}}"},e.prototype.serializeFilterValue=function(e){return'"'+e+'"'},e}();function I(e,n,t){return(new P).add(e,n,t)}var j,S=function(){function e(e){this.appBasePath=e,this.apiV3Base=this.appBasePath+"/api/v3",this.attachments=new f(this.apiV3Base,"attachments"),this.configuration=new f(this.apiV3Base,"configuration"),this.root=new f(this.apiV3Base,""),this.statuses=new h(this.apiV3Base,"statuses"),this.relations=new h(this.apiV3Base,"relations"),this.priorities=new h(this.apiV3Base,"priorities"),this.types=new w(this.apiV3Base),this.work_packages=new m(this.apiV3Base),this.queries=new b(this.apiV3Base),this.projects=new C(this.apiV3Base),this.users=new v(this.apiV3Base),this.help_texts=new h(this.apiV3Base,"help_texts")}return e.prototype.withOptionalProject=function(e){return _.isNil(e)?this:this.projects.id(e)},e.prototype.previewMarkup=function(e){var n=this.apiV3Base+"/render/markdown";return e?n+"?context="+e:n},e.prototype.principals=function(e,n){var t=new P;return t.add("status","!",["0","3"]),t.add("member","=",[e.toString()]),t.add("type","=",["User","Group"]),t.add("id","!",["me"]),n&&n.length>0&&t.add("name","~",[n]),this.apiV3Base+"/principals?"+t.toParams()+encodeURI('&sortBy=[["name","asc"]]&offset=1&pageSize=10')},e}(),R=function(){function e(){this.appBasePath=window.appBasePath?window.appBasePath:"",this.api={v3:new S(this.appBasePath)}}return Object.defineProperty(e.prototype,"staticBase",{get:function(){return this.appBasePath},enumerable:!0,configurable:!0}),e.prototype.attachmentDownloadPath=function(e,n){var t=this.staticBase+"/attachments/"+e;return n?t+"/"+n:t},e.prototype.highlightingCssPath=function(){return this.staticBase+"/highlighting/styles"},e.prototype.boardPath=function(e,n){return this.projectBoardsPath(e)+"/"+n},e.prototype.keyboardShortcutsHelpPath=function(){return this.staticBase+"/help/keyboard_shortcuts"},e.prototype.messagePath=function(e){return this.staticBase+"/topics/"+e},e.prototype.myPagePath=function(){return this.staticBase+"/my/page"},e.prototype.loginPath=function(){return this.staticBase+"/login"},e.prototype.projectsPath=function(){return this.staticBase+"/projects"},e.prototype.projectPath=function(e){return this.projectsPath()+"/"+e},e.prototype.projectActivityPath=function(e){return this.projectPath(e)+"/activity"},e.prototype.projectBoardsPath=function(e){return this.projectPath(e)+"/boards"},e.prototype.projectCalendarPath=function(e){return this.projectPath(e)+"/work_packages/calendar"},e.prototype.projectNewsPath=function(e){return this.projectPath(e)+"/news"},e.prototype.projectTimelinesPath=function(e){return this.projectPath(e)+"/timelines"},e.prototype.projectTimeEntriesPath=function(e){return this.projectPath(e)+"/time_entries"},e.prototype.projectWikiPath=function(e){return this.projectPath(e)+"/wiki"},e.prototype.projectWorkPackagePath=function(e,n){return this.projectWorkPackagesPath(e)+"/"+n},e.prototype.projectWorkPackagesPath=function(e){return this.projectPath(e)+"/work_packages"},e.prototype.projectWorkPackageNewPath=function(e){return this.projectWorkPackagesPath(e)+"/new"},e.prototype.timeEntriesPath=function(e){return e?this.workPackagePath(e)+"/time_entries":this.staticBase+"/time_entries"},e.prototype.timeEntryPath=function(e){return this.staticBase+"/time_entries/"+e},e.prototype.timeEntryEditPath=function(e){return this.timeEntryPath(e)+"/edit"},e.prototype.usersPath=function(){return this.staticBase+"/users"},e.prototype.userPath=function(e){return this.usersPath()+"/"+e},e.prototype.versionsPath=function(){return this.staticBase+"/versions"},e.prototype.workPackagesPath=function(){return this.staticBase+"/work_packages"},e.prototype.workPackagePath=function(e){return this.staticBase+"/work_packages/"+e},e.prototype.workPackageCopyPath=function(e){return this.workPackagePath(e)+"/copy"},e.prototype.workPackageDetailsCopyPath=function(e,n){return this.projectWorkPackagesPath(e)+"/details/"+n+"/copy"},e.prototype.workPackagesBulkDeletePath=function(){return this.workPackagesPath()+"/bulk"},e.prototype.projectLevelListPath=function(){return this.projectsPath()+"/level_list.json"},e.prototype.textFormattingHelp=function(){return this.staticBase+"/help/text_formatting"},e}(),T=function(){function e(e){this.PathHelper=e,this.detect()}return Object.defineProperty(e.prototype,"inProjectContext",{get:function(){return void 0!==this.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.current?this.PathHelper.projectPath(this.current.identifier):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apiv3Path",{get:function(){return this.current?this.PathHelper.api.v3.projects.id(this.current.id).toString():null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.getCurrent("id")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getCurrent("name")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.getCurrent("identifier")},enumerable:!0,configurable:!0}),e.prototype.getCurrent=function(e){return this.current&&this.current[e]?this.current[e].toString():null},e.prototype.detect=function(){var e=document.querySelector("meta[name=current_project]");e&&(this.current={id:e.dataset.projectId,name:e.dataset.projectName,identifier:e.dataset.projectIdentifier})},e}(),x=t("K9Ia"),E=t("VnD/"),O=function(){function e(){this.contextSwitch$=Object(a.g)()}return e.prototype.transition=function(e){this.validTransition(e)&&this.contextSwitch$.putValue(e)},e.prototype.validTransition=function(e){return this.contextSwitch$.value!==e},Object.defineProperty(e.prototype,"current",{get:function(){return this.contextSwitch$.value},enumerable:!0,configurable:!0}),e.prototype.reset=function(e){this.contextSwitch$.clear(e)},e.prototype.doAndTransition=function(e,n){var t=this;return this.reset("Clearing before transitioning to "+e),n().then(function(){return t.transition(e)})},e.prototype.fireOnTransition=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return Object(a.a)(this.contextSwitch$,function(e){return n.indexOf(e)>-1},e)},e.prototype.fireOnStateChange=function(e){for(var n=this,t=[],l=1;l<arguments.length;l++)t[l-1]=arguments[l];return Object(a.d)(e,function(e){return e.pipe(Object(E.a)(function(){return n.contextSwitch$.hasValue()&&t.indexOf(n.contextSwitch$.value)>-1}))})},e}(),D=t("67Y/"),F=t("aGNc"),A=function(e){function n(){var n=e.call(this)||this;return n.name="TableStore",n.query=Object(a.g)(),n.queryForm=Object(a.g)(),n.results=Object(a.g)(),n.rows=Object(a.g)(),n.groups=Object(a.g)(),n.columns=Object(a.g)(),n.filters=Object(a.g)(),n.sortBy=Object(a.g)(),n.groupBy=Object(a.g)(),n.sum=Object(a.g)(),n.pagination=Object(a.g)(),n.selection=Object(a.g)(),n.collapsedGroups=Object(a.g)(),n.hierarchies=Object(a.g)(),n.highlighting=Object(a.g)(),n.rendered=Object(a.g)(),n.renderedWorkPackages=Object(a.d)(n.rendered,function(e){return e.pipe(Object(D.a)(function(e){return e.filter(function(e){return!!e.workPackageId})}))}),n.timeline=Object(a.g)(),n.stopAllSubscriptions=new x.a,n.refreshRequired=Object(a.g)(),n.relationColumns=Object(a.g)(),n.additionalRequiredWorkPackages=Object(a.g)(),n.tableRendering=new V(n),n.ready=new O,n.updates=new M(n),n}return r.d(n,e),n}(a.b),V=function(){return function(e){this.tableState=e,this.combinedTableStates=Object(a.c)(this.tableState.rows,this.tableState.columns,this.tableState.sum,this.tableState.groupBy,this.tableState.sortBy,this.tableState.additionalRequiredWorkPackages),this.onQueryUpdated=Object(a.d)(this.combinedTableStates,function(e){return e.pipe(Object(F.a)(null))})}}(),M=function(){return function(e){this.tableState=e,this.columnsUpdates=this.tableState.ready.fireOnStateChange(this.tableState.columns,"Query loaded"),this.hierarchyUpdates=this.tableState.ready.fireOnStateChange(this.tableState.hierarchies,"Query loaded"),this.relationUpdates=this.tableState.ready.fireOnStateChange(this.tableState.relationColumns,"Query loaded")}}(),L=function(){return function(){}}(),N=function(){function e(e,n,t){this.page=e,this.total=n,this.perPage=t}return e.prototype.getLowerPageBound=function(){return this.perPage*(this.page-1)+1},e.prototype.getUpperPageBound=function(e){return Math.min(this.perPage*this.page,e)},e.prototype.nextPage=function(){this.page+=1},e.prototype.previousPage=function(){this.page-=1},e}(),$=function(e){function n(n){var t=e.call(this)||this;return t.current=new N(n.offset,n.total,n.pageSize),t}return r.d(n,e),Object.defineProperty(n.prototype,"page",{get:function(){return this.current.page},set:function(e){this.current.page=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"perPage",{get:function(){return this.current.perPage},set:function(e){this.current.perPage=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"total",{get:function(){return this.current.total},set:function(e){this.current.total=e},enumerable:!0,configurable:!0}),n}(L),q=t("ny24"),H=t("t9fZ"),B=function(){function e(e){this.tableState=e}return e.prototype.initialize=function(e,n,t){this.update(this.valueFromQuery(e,n))},e.prototype.update=function(e){this.state.putValue(e)},e.prototype.clear=function(e){this.state.clear(e)},e.prototype.observeUntil=function(e){return this.state.values$().pipe(Object(q.a)(e))},e.prototype.onReady=function(){return this.state.values$().pipe(Object(H.a)(1),Object(F.a)(null)).toPromise()},e}(),W=t("t/Na"),z=t("vLqr"),Q=t("9Z1F"),U=t("wZYP"),K=function(){function e(e,n,t,l,i){this.injector=e,this.source=n,this.$loaded=t,this.halInitializer=l,this.states=this.injector.get(u),this.I18n=this.injector.get(U.a),this.$links={},this.$embedded={},this.$halType=i,this.$initialize(n)}return e.getEmptyResource=function(e){return void 0===e&&(e={href:null}),{_links:{self:e}}},e.idFromLink=function(e){return e.split("/").pop()},Object.defineProperty(e.prototype,"idFromLink",{get:function(){return this.$href?e.idFromLink(this.$href):""},enumerable:!0,configurable:!0}),e.prototype.$initialize=function(e){this.$source=e.$source||e,this.halInitializer(this)},e.prototype.$copy=function(e){return void 0===e&&(e={}),new(0,this.constructor)(this.injector,_.merge(this.$plain(),e),this.$loaded,this.halInitializer,this.$halType)},e.prototype.$plain=function(){return _.cloneDeep(this.$source)},Object.defineProperty(e.prototype,"$isHal",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$link",{get:function(){return this.$links.self.$link},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name||this.$link.title||""},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"href",{get:function(){return this.$link.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$href",{get:function(){return this.$link.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.getId=function(){return this.id||this.idFromLink},e.prototype.$load=function(e){var n=this;if(void 0===e&&(e=!1),!this.state)return this.$loadResource(e);var t=this.state;return e&&t.clear(),t.putFromPromiseIfPristine(function(){return n.$loadResource(e)}),t.valuesPromise().then(function(e){return n.$initialize(e),n.$loaded=!0,n})},e.prototype.$loadResource=function(e){var n=this;if(void 0===e&&(e=!1),!e){if(this.$loaded)return Promise.resolve(this);if(!this.$loaded&&this.$self)return this.$self}return this.$loaded=!1,this.$self=this.$links.self({}).then(function(e){return n.$loaded=!0,n.$initialize(e.$source),n}),this.$self},e.prototype.$update=function(){return this.$load(!0)},e.prototype.$embeddableKeys=function(){var e=Object.keys(this.$source);return _.without(e,"_links","_embedded")},e.prototype.$linkableKeys=function(){var e=Object.keys(this.$links);return _.without(e,"self")},e}(),Y=function(){function e(e,n,t,l,i,o,r,a){void 0===n&&(n=null),void 0===t&&(t=""),void 0===l&&(l="get"),void 0===i&&(i=!1),void 0===r&&(r="application/json"),this.requestMethod=e,this.href=n,this.title=t,this.method=l,this.templated=i,this.payload=o,this.type=r,this.identifier=a}return e.fromObject=function(n,t){return new e(function(e,t,l,i){return n.request(e,t,l,i).toPromise()},t.href,t.title,t.method,t.templated,t.payload,t.type,t.identifier)},e.prototype.$fetch=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[0],l=e[1];return this.requestMethod(this.method,this.href,t,l)},e.prototype.$prepare=function(n){if(!this.templated)throw"The link "+this.href+" is not templated.";var t=_.clone(this.href)||"";return _.each(n,function(e,n){var l=new RegExp("{"+n+"}");t=t.replace(l,e)}),new e(this.requestMethod,t,this.title,this.method,!1,this.payload,this.type,this.identifier).$callable()},e.prototype.$callable=function(){var e=this,n=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.$fetch.apply(e,n)};return _.extend(n,{$link:this,href:this.href,title:this.title,method:this.method,templated:this.templated,payload:this.payload,type:this.type,identifier:this.identifier}),n},e}();!function(e){e.lazy=function(e,n,t,l){if(_.isObject(e)){var i,o=!1,r={get:function(){return o||(i=t(),o=!0),i},set:function(){},configurable:!0,enumerable:!0};l&&(r.set=function(e){i=l(e),o=!0}),Object.defineProperty(e,n,r)}}}(j||(j={}));var G=t("NAZG");function Z(e){return _.isNil(e)?[]:e.map(function(e){return e.$copy()})}function J(e){return _.isNil(e)?e:e.$copy()}var X=function(){function e(){}return e.prototype.encodeKey=function(e){return encodeURIComponent(e)},e.prototype.encodeValue=function(e){return encodeURIComponent(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}(),ee=function(){function e(e,n){this.injector=e,this.http=n,this.config={}}return e.prototype.request=function(e,n,t,l){if(void 0===l&&(l={}),"get"===e)return this.get(n,t,l);var i={body:t||{},headers:l,withCredentials:!0,responseType:"json"};return this._request(e,n,i)},e.prototype._request=function(e,n,t){var l=this;return this.http.request(e,n,t).pipe(Object(D.a)(function(e){return l.createHalResource(e)}),Object(Q.a)(function(t){return console.error("Failed to "+e+" "+n+": "+t.name),Object(z.throwError)(l.createHalResource(t.error))}))},e.prototype.get=function(e,n,t){var l={headers:t,params:new W.i({encoder:new X,fromObject:n}),withCredentials:!0,responseType:"json"};return this._request("get",e,l)},e.prototype.getAllPaginated=function(e,n,t,l){return void 0===t&&(t={}),void 0===l&&(l={}),r.b(this,void 0,void 0,function(){var i,o,a,u;return r.e(this,function(r){switch(r.label){case 0:i=0,o=1,a=[],t.pageSize=n,r.label=1;case 1:return i<n?(t.offset=o,[4,this.request("get",e,t,l).toPromise()]):[3,3];case 2:if(0===(u=r.sent()).count)throw"No more results for this query, but expected more.";return a.push(u),i+=u.count,o+=1,[3,1];case 3:return[2,a]}})})},e.prototype.put=function(e,n,t){return this.request("put",e,n,t)},e.prototype.post=function(e,n,t){return this.request("post",e,n,t)},e.prototype.patch=function(e,n,t){return this.request("patch",e,n,t)},e.prototype.delete=function(e,n,t){return this.request("delete",e,n,t)},e.prototype.registerResource=function(e,n){this.config[e]=n},Object.defineProperty(e.prototype,"defaultClass",{get:function(){return K},enumerable:!0,configurable:!0}),e.prototype.createHalResource=function(e,n){void 0===n&&(n=!0),_.isNil(e)&&(e=K.getEmptyResource());var t=e._type||"HalResource";return this.createHalResourceOfType(t,e,n)},e.prototype.createHalResourceOfType=function(e,n,t){var l=this;void 0===t&&(t=!1);return new(this.getResourceClassOfType(e))(this.injector,n,t,function(e){return function(e,n){function t(n,t){return void 0===t&&(t=!0),_.isNil(n)?n:n._links||n._embedded||n._type?e.createHalResource(n,t):n}function l(e,t){var l="$"+e,i="_"+e,o=n.$source[i];_.isObject(o)&&Object.keys(o).forEach(function(e){j.lazy(n[l],e,function(){return t(o[e])})})}function i(e,t){if(e)if(_.isArray(e))n.$source._links[t]=e.map(function(e){return{href:e.href}});else if(e.hasOwnProperty("$link")){var l=e.$link;l.href&&(n.$source._links[t]=l)}else"href"in e&&(n.$source._links[t]={href:e.href});else n.$source._links[t]={href:null};return n.$embedded&&n.$embedded[t]&&(n.$embedded[t]=e,n.$source._embedded[t]=_.get(e,"$source",e)),e}n.$source._links||(n.$source._links={}),n.$source._links.self||(n.$source._links.self={href:null}),l("links",function(n){return Array.isArray(n)?n.map(function(n){return Y.fromObject(e,n).$callable()}):Y.fromObject(e,n).$callable()}),l("embedded",function(e){return Array.isArray(e)?e.map(function(e){return t(e,!0)}):(_.isObject(e)&&_.each(e,function(n,l){n&&(n._embedded||n._links)&&j.lazy(e,l,function(){return t(n,!0)})}),t(e,!0))}),n.$embeddableKeys().forEach(function(e){Object.defineProperty(n,e,{get:function(){var l=n.$source[e];return t(l,!0)},set:function(t){n.$source[e]=t},enumerable:!0,configurable:!0})}),n.$linkableKeys().forEach(function(t){j.lazy(n,t,function(){var l=n.$links[t].$link||n.$links[t];if(Array.isArray(l)){var i=l.map(function(l){return e.createLinkedResource(n,t,l.$link)}),o=(new(G.bind.apply(G,[void 0].concat(i)))).on("change",function(){o.forEach(function(e){e.$link||o.splice(o.indexOf(e),1)}),n.$source._links[t]=o.map(function(e){return e.$link})});return o}return l.href?"get"!==l.method?Y.fromObject(e,l).$callable():e.createLinkedResource(n,t,l):null},function(e){return i(e,t)})}),n.$source._embedded&&Object.keys(n.$source._embedded).forEach(function(e){j.lazy(n,e,function(){return n.$embedded[e]},function(n){return i(n,e)})})}(l,e)},e)},e.prototype.fromLink=function(e){var n=K.getEmptyResource(Y.fromObject(this,e));return this.createHalResource(n,!1)},e.prototype.fromSelfLink=function(e){var n={_links:{self:{href:e}}};return this.createHalResource(n)},e.prototype.createLinkedResource=function(e,n,t){var l=K.getEmptyResource(),i=e.$halType,o=this.getResourceClassOfAttribute(i,n)||"HalResource";return l._links.self=t,this.createHalResourceOfType(o,l,!1)},e.prototype.getResourceClassOfType=function(e){var n=this.config[e];return n&&n.cls?n.cls:this.defaultClass},e.prototype.getResourceClassOfAttribute=function(e,n){var t=this.config[e];return(t&&t.attrTypes||{})[n]},e}(),ne=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(){return this.halResourceService.get(this.pathHelper.api.v3.configuration.toString()).toPromise()},e}(),te={maxVisiblePageOptions:6,optionsTruncationSize:1},le=function(){function e(e){this.ConfigurationDm=e;var n=this.getInitialPageOptions();this.paginationOptions={perPage:this.getCachedPerPage(n),perPageOptions:n,maxVisiblePageOptions:te.maxVisiblePageOptions,optionsTruncationSize:te.optionsTruncationSize}}return e.prototype.getInitialPageOptions=function(){try{return window.gon.settings.pagination.per_page_options}catch(e){return console.log("Can't load initial page options from gon: "+e),[]}},e.prototype.getCachedPerPage=function(e){var n=window.OpenProject.guardedLocalStorage("pagination.perPage");if(void 0!==n){var t=parseInt(n,10);if(t>0&&(0===e.length||-1!==e.indexOf(t)))return t}return e.length>0?e[0]:20},e.prototype.getPaginationOptions=function(){return this.paginationOptions},e.prototype.getPerPage=function(){return this.paginationOptions.perPage},e.prototype.getMaxVisiblePageOptions=function(){return this.paginationOptions.maxVisiblePageOptions},e.prototype.getOptionsTruncationSize=function(){return this.paginationOptions.optionsTruncationSize},e.prototype.setPerPage=function(e){window.OpenProject.guardedLocalStorage("pagination.perPage",e.toString()),this.paginationOptions.perPage=e},e.prototype.getPerPageOptions=function(){return this.paginationOptions.perPageOptions},e.prototype.setPerPageOptions=function(e){this.paginationOptions.perPageOptions=e},e.prototype.loadPaginationOptions=function(){var e=this;return this.ConfigurationDm.load().then(function(n){return e.setPerPageOptions(n.perPageOptions),e.paginationOptions})},e}(),ie=function(e){function n(n,t){var l=e.call(this,n)||this;return l.paginationService=t,l}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.tableState.pagination},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paginationObject",{get:function(){return this.current?{pageSize:this.current.perPage,offset:this.current.page}:{pageSize:this.paginationService.getCachedPerPage([]),offset:1}},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e,n){return new $(n)},n.prototype.updateFromObject=function(e){var n=this.current;e.page&&(n.page=e.page),e.perPage&&(n.perPage=e.perPage),e.total&&(n.total=e.total),this.state.putValue(n)},n.prototype.updateFromResults=function(e){var n={page:e.offset,perPage:e.pageSize,total:e.total,count:e.count};this.updateFromObject(n)},Object.defineProperty(n.prototype,"current",{get:function(){return this.state.value},enumerable:!0,configurable:!0}),n}(B),oe=function(e){function n(n){var t=e.call(this)||this;return t.current=n,t.last=null,t.collapsed={},t}return r.d(n,e),n.prototype.toggle=function(){this.current=!this.current},Object.defineProperty(n.prototype,"isEnabled",{get:function(){return this.current},enumerable:!0,configurable:!0}),n}(L),re=function(e){function n(n){return e.call(this,n)||this}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.tableState.hierarchies},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){return new oe(e.showHierarchies)},n.prototype.hasChanged=function(e){return e.showHierarchies!==this.isEnabled},n.prototype.applyToQuery=function(e){return e.showHierarchies=this.isEnabled,this.isEnabled},Object.defineProperty(n.prototype,"isEnabled",{get:function(){return this.currentState.isEnabled},enumerable:!0,configurable:!0}),n.prototype.setEnabled=function(e){void 0===e&&(e=!0);var n=this.currentState;if(n.current=e,n.last=null,e){var t=this.tableState.groupBy.value;t.current=void 0,this.tableState.groupBy.putValue(t);var l=this.tableState.sortBy.value;l.current=[],this.tableState.sortBy.putValue(l)}this.state.putValue(n)},n.prototype.toggleState=function(){this.setEnabled(!this.isEnabled)},n.prototype.collapsed=function(e){return this.currentState.collapsed[e]},n.prototype.collapse=function(e){this.setState(e,!0)},n.prototype.expand=function(e){this.setState(e,!1)},n.prototype.toggle=function(e){this.setState(e,!this.collapsed(e))},n.prototype.setState=function(e,n){var t=this.currentState;t.collapsed[e]=n,t.last=e,this.state.putValue(t)},Object.defineProperty(n.prototype,"currentState",{get:function(){var e=this.state.value;return void 0===e?this.initialState:e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initialState",{get:function(){return new oe(!1)},enumerable:!0,configurable:!0}),n}(B),ae=t("wd/R"),ue="timeline-element",se=function(){return function(){this.zoomLevel="days",this.autoZoom=!0}}(),ce=["days","weeks","months","quarters","years"];function de(e){switch(e){case"days":return 30;case"weeks":return 15;case"months":return 6;case"quarters":return 2;case"years":return.5}throw new Error("invalid zoom level: "+e)}var pe=function(){function e(){this.now=ae({hour:0,minute:0,seconds:0}),this.dateDisplayStart=ae({hour:0,minute:0,seconds:0}),this.dateDisplayEnd=this.dateDisplayStart.clone().add(1,"day"),this.settings=new se,this.activeSelectionMode=null,this.selectionModeStart=null}return Object.defineProperty(e.prototype,"pixelPerDay",{get:function(){return de(this.settings.zoomLevel)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidthInPx",{get:function(){return this.maxSteps*this.pixelPerDay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSteps",{get:function(){return this.dateDisplayEnd.diff(this.dateDisplayStart,"days")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dayCountForMarginLeft",{get:function(){return Math.ceil(120/this.pixelPerDay)},enumerable:!0,configurable:!0}),e}();function he(e,n){return n*e.pixelPerDay}function fe(e,n){return he(e,n)+"px"}function ge(e,n,t,l){for(var i=[],o=[],r=t.clone().startOf(n),a=l.clone().endOf(n);r.isBefore(a);){var u=ae.max(r,t).clone(),s=ae.min(r.clone().endOf(n),l).clone();r.add(1,n);var c=e.visibleViewportAtCalculationTime;u.isSameOrAfter(c[0])&&u.isSameOrBefore(c[1])||s.isSameOrAfter(c[0])&&s.isSameOrBefore(c[1])?i.push([u,s]):o.push([u,s])}var d=o.splice(0,1)[0],p=o.pop();return{inViewportAndBoundaries:_.concat([d].filter(function(e){return!_.isNil(e)}),i,[p].filter(function(e){return!_.isNil(e)})),rest:o}}var me=function(e){function n(n){var t=e.call(this)||this;return t.autoZoom=!0,t.visible=n.timelineVisible,t.zoomLevel=n.timelineZoomLevel,t.labels=n.timelineLabels,t}return r.d(n,e),Object.defineProperty(n.prototype,"current",{get:function(){return this.isVisible},enumerable:!0,configurable:!0}),n.prototype.toggle=function(){this.visible=!this.visible},Object.defineProperty(n.prototype,"isVisible",{get:function(){return this.visible},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"defaultLabels",{get:function(){return{left:"",right:"",farRight:"subject"}},enumerable:!0,configurable:!0}),n}(L),ve=function(e){function n(n){return e.call(this,n)||this}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.tableState.timeline},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){return new me(e)},n.prototype.hasChanged=function(e){var n=this.isVisible!==e.timelineVisible,t=this.zoomLevel!==e.timelineZoomLevel,l=!_.isEqual(this.current.labels,e.timelineLabels);return n||t||l},n.prototype.applyToQuery=function(e){return e.timelineVisible=this.isVisible,e.timelineZoomLevel=this.zoomLevel,e.timelineLabels=this.current.labels,!1},n.prototype.toggle=function(){var e=this.current;this.setVisible(!e.isVisible)},n.prototype.setVisible=function(e){var n=this.current;n.visible=e,this.state.putValue(n)},Object.defineProperty(n.prototype,"isVisible",{get:function(){return this.current.isVisible},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"zoomLevel",{get:function(){return this.current.zoomLevel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labels",{get:function(){return _.isEmpty(this.current.labels)?this.current.defaultLabels:this.current.labels},enumerable:!0,configurable:!0}),n.prototype.updateLabels=function(e){var n=this.current;n.labels=e,this.state.putValue(n)},n.prototype.getNormalizedLabels=function(e){var n=_.clone(this.current.defaultLabels);return _.each(this.current.labels,function(e,t){var l=t;n[l]=""===e?null:e}),n},n.prototype.setZoomLevel=function(e){var n=this.current;n.zoomLevel=e,this.state.putValue(n)},n.prototype.updateZoomWithDelta=function(e){this.isAutoZoomEnabled()&&this.toggleAutoZoom();var n=ce.indexOf(this.current.zoomLevel);(n+=e)>=0&&n<ce.length&&this.setZoomLevel(ce[n])},n.prototype.toggleAutoZoom=function(e){void 0===e&&(e=!this.current.autoZoom);var n=this.current;n.autoZoom=e,this.state.putValue(n)},n.prototype.isAutoZoomEnabled=function(){return this.current.autoZoom},Object.defineProperty(n.prototype,"current",{get:function(){return this.state.value},enumerable:!0,configurable:!0}),n}(B),ye=function(e){function n(n){var t=e.call(this)||this;return t.current=n,t}return r.d(n,e),n.prototype.toggle=function(){this.current=!this.current},Object.defineProperty(n.prototype,"isEnabled",{get:function(){return this.current},enumerable:!0,configurable:!0}),n}(L),be=function(e){function n(n){return e.call(this,n)||this}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.tableState.sum},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){return new ye(e.sums)},n.prototype.initialize=function(e){var n=new ye(e.sums);this.state.putValue(n)},n.prototype.hasChanged=function(e){return e.sums!==this.isEnabled},n.prototype.applyToQuery=function(e){return e.sums=this.isEnabled,!0},n.prototype.toggle=function(){var e=this.current;e.toggle(),this.state.putValue(e)},n.prototype.setEnabled=function(e){var n=this.current;n.current=e,this.state.putValue(n)},Object.defineProperty(n.prototype,"isEnabled",{get:function(){return this.current.isEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"current",{get:function(){return this.state.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentSum",{get:function(){return this.current?this.current.current:void 0},enumerable:!0,configurable:!0}),n}(B),we=function(e){function n(n,t){var l=e.call(this)||this;return l.availableSchemas=t,l.current=[],l.hidden=["id","parent","datesInterval","precedes","follows","relates","duplicates","duplicated","blocks","blocked","partof","includes","requires","required"],l.current=n,l}return r.d(n,e),n.prototype.$copy=function(){return new n(Z(this.current),Z(this.availableSchemas))},n.prototype.add=function(e){var n=_.find(this.availableSchemas,function(n){return n.filter.allowedValues[0].href===e.href}).getFilter();return this.current.push(n),n},n.prototype.remove=function(e){var n=this.current.indexOf(e);this.current.splice(n,1)},Object.defineProperty(n.prototype,"remainingFilters",{get:function(){var e=this.currentFilters.map(function(e){return e.href});return _.remove(this.availableFilters,function(n){return-1===e.indexOf(n.href)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"remainingVisibleFilters",{get:function(){var e=this;return this.remainingFilters.filter(function(n){return-1===e.hidden.indexOf(n.id)})},enumerable:!0,configurable:!0}),n.prototype.isComplete=function(){return _.every(this.current,function(e){return e.isCompletelyDefined()})},Object.defineProperty(n.prototype,"currentVisibleFilters",{get:function(){var e=this;return this.currentFilters.filter(function(n){return-1===e.hidden.indexOf(n.id)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentFilters",{get:function(){return this.current.map(function(e){return e.filter})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableFilters",{get:function(){return this.availableSchemas.map(function(e){return e.filter.allowedValues[0]})},enumerable:!0,configurable:!0}),n}(L),ke=function(e){function n(n){var t=e.call(this,n)||this;return t.tableState=n,t}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.tableState.filters},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){},n.prototype.initializeFilters=function(e,n){var t=this,l=_.map(e.filters,function(e){return e.$copy()});this.loadCurrentFiltersSchemas(l).then(function(){var e=new we(l,n.filtersSchemas.elements);t.state.putValue(e)})},n.prototype.hasChanged=function(e){var n=function(e){return e.map(function(e){return e.$source})};return!_.isEqual(n(e.filters),n(this.current))},n.prototype.applyToQuery=function(e){return e.filters=this.current,!0},Object.defineProperty(n.prototype,"currentState",{get:function(){return this.state.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"current",{get:function(){return this.currentState?Z(this.currentState.current):[]},enumerable:!0,configurable:!0}),n.prototype.replace=function(e){this.state.putValue(e)},n.prototype.replaceIfComplete=function(e){e.isComplete()&&this.state.putValue(e)},n.prototype.remove=function(e){this.currentState.remove(e),this.state.putValue(this.currentState)},n.prototype.loadCurrentFiltersSchemas=function(e){var n=this;return Promise.all(_.map(e,function(e){return n.loadFilterSchema(e)}))},n.prototype.loadFilterSchema=function(e){var n=this;return new Promise(function(t,l){e.schema.$load().catch(l).then(function(){_.has(e,["values.length","currentSchema.values.allowedValues.$load"])?e.currentSchema.values.allowedValues.$load().then(function(l){n.setLoadedValues(e,l),t()}):t()})})},n.prototype.setLoadedValues=function(e,n){_.each(e.values,function(t,l){var i=_.find(n.elements,function(e){return e.$href===t.$href});if(!i)throw"HalResource not in list of allowed values.";e.values[l]=i})},n}(B),Ce=function(e){function n(n){var t=e.call(this)||this;return t.current=J(n.groupBy),t}return r.d(n,e),n.prototype.update=function(e){e&&(this.current=J(e.groupBy))},n}(L),Pe=function(e){function n(n,t){var l=e.call(this,t)||this;return l.states=n,l.tableState=t,l}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.tableState.groupBy},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){return new Ce(e)},n.prototype.hasChanged=function(e){var n=function(e){return e?e.href:null};return!_.isEqual(n(e.groupBy),n(this.current))},n.prototype.applyToQuery=function(e){return e.groupBy=J(this.current),!0},n.prototype.isGroupable=function(e){return!!_.find(this.available,function(n){return n.id===e.id})},n.prototype.set=function(e){var n=this.currentState;if(n.current=e,e){var t=this.tableState.hierarchies.value;t.current=!1,this.tableState.hierarchies.putValue(t)}this.state.putValue(n)},n.prototype.setBy=function(e){this.currentState;var n=_.find(this.available,function(n){return n.id===e.id});n&&this.set(n)},Object.defineProperty(n.prototype,"currentState",{get:function(){return this.state.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableState",{get:function(){return this.states.queries.groupBy},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"current",{get:function(){return this.currentState?this.currentState.current:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEnabled",{get:function(){return!!this.current},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"available",{get:function(){return this.availableState.getValueOr([])},enumerable:!0,configurable:!0}),n.prototype.isCurrentlyGroupedBy=function(e){return!(!this.current||this.current.id!==e.id)},n}(B),Ie=function(e){function n(n){var t=e.call(this)||this;return t.update(n),t}return r.d(n,e),n.prototype.update=function(e,n){e&&(this.current=Z(e.columns))},n.prototype.getColumns=function(){return this.current},n}(L),je={PROPERTY:"QueryColumn::Property",RELATION_OF_TYPE:"QueryColumn::RelationOfType",RELATION_TO_TYPE:"QueryColumn::RelationToType"};function _e(e){return[je.RELATION_TO_TYPE,je.RELATION_OF_TYPE].indexOf(e._type)>=0}var Se=function(e){function n(n,t){var l=e.call(this,t)||this;return l.states=n,l.tableState=t,l}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.tableState.columns},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){return new Ie(e)},n.prototype.hasChanged=function(e){var n=function(e){return e.map(function(e){return e.href})};return!_.isEqual(n(e.columns),n(this.getColumns()))},n.prototype.applyToQuery=function(e){var n=this.getColumns(),t=e.columns.map(function(e){return e.id}),l=n.map(function(e){return e.id});return e.columns=Z(n),!(0===_.difference(l,t).length)&&this.hasRelationColumns()},n.prototype.hasRelationColumns=function(){var e=[je.RELATION_OF_TYPE,je.RELATION_TO_TYPE];return!!_.find(this.getColumns(),function(n){return e.indexOf(n._type)>=0})},n.prototype.getColumns=function(){return this.currentState&&this.currentState.getColumns()||[]},n.prototype.index=function(e){return _.findIndex(this.getColumns(),function(n){return n.id===e})},n.prototype.findById=function(e){return _.find(this.getColumns(),function(n){return n.id===e})},n.prototype.previous=function(e){var n=this.index(e.id);return n<=0?null:this.getColumns()[n-1]},n.prototype.next=function(e){var n=this.index(e.id);return-1===n||this.isLast(name)?null:this.getColumns()[n+1]},n.prototype.isFirst=function(e){return 0===this.index(e.id)},n.prototype.isLast=function(e){return this.index(e.id)===this.columnCount-1},n.prototype.setColumns=function(e){var n=this.currentState;n.current=e,this.state.putValue(n)},n.prototype.setColumnsById=function(e){var n=this,t=e.map(function(e){return _.find(n.all,function(n){return n.id===e})});this.setColumns(_.compact(t))},n.prototype.moveColumn=function(e,n){var t=this.getColumns();n>=t.length&&(n=t.length-1),n<0&&(n=0);var l=t[e];t.splice(e,1),t.splice(n,0,l),this.setColumns(t)},n.prototype.shift=function(e,n){var t=this.index(e.id);-1!==t&&this.moveColumn(t,t+n)},n.prototype.addColumn=function(e,n){var t=this.getColumns();if(void 0===n&&(n=t.length),-1===this.index(e)){var l=_.find(this.all,function(n){return n.id===e});if(!l)throw"Column with provided name is not found";t.splice(n,0,l),this.setColumns(t)}},n.prototype.removeColumn=function(e){var n=this.index(e.id);if(-1!==n){var t=this.getColumns();t.splice(n,1),this.setColumns(t)}},Object.defineProperty(n.prototype,"currentState",{get:function(){return this.state.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableState",{get:function(){return this.states.queries.columns},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnCount",{get:function(){return this.getColumns().length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"all",{get:function(){return this.availableState.getValueOr([])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"allPropertyColumns",{get:function(){return this.all.filter(function(e){return e._type===je.PROPERTY})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"unused",{get:function(){return _.differenceBy(this.all,this.getColumns(),"$href")},enumerable:!0,configurable:!0}),n}(B),Re=function(){function e(e,n,t){this.halResourceService=e,this.pathHelper=n,this.states=t}return e.prototype.loadWorkPackageById=function(e,n){void 0===n&&(n=!1);var t=this.pathHelper.api.v3.work_packages.id(e).toString();return this.halResourceService.get(t).toPromise()},e.prototype.loadWorkPackagesCollectionsFor=function(e){return this.halResourceService.getAllPaginated(this.pathHelper.api.v3.work_packages.toString(),e.length,{filters:I("id","=",e).toJson()})},e.prototype.emptyCreateForm=function(e,n){return this.halResourceService.post(this.workPackagesFormPath(n),e).toPromise()},e.prototype.typedCreateForm=function(e,n){var t={_links:{type:{href:this.pathHelper.api.v3.types.id(e).toString()}}};return this.halResourceService.post(this.workPackagesFormPath(n),t).toPromise()},e.prototype.createWorkPackage=function(e){return this.halResourceService.post(this.pathHelper.api.v3.work_packages.path,e).toPromise()},e.prototype.workPackagesFormPath=function(e){return e?this.pathHelper.api.v3.projects.id(e).work_packages.form.toString():this.pathHelper.api.v3.work_packages.form.toString()},e}(),Te=function(){function e(e){void 0===e&&(e=3600),this.holdValuesForSeconds=e,this.cacheDurationInMs=1e3*e}return e.prototype.state=function(e){return this.multiState.get(e)},e.prototype.touch=function(e){var n=this.multiState.get(e);n.putValue(n.value,"Touching the state")},e.prototype.updateValue=function(e,n){this.multiState.get(e).putValue(n)},e.prototype.observe=function(e){return this.state(e).values$()},e.prototype.clearSome=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];n.forEach(function(n){return e.multiState.get(n).clear()})},e.prototype.require=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.multiState.get(e);return(this.stale(l)||n)&&(l.clear(),l.putFromPromiseIfPristine(function(){return t.load(e)})),l.valuesPromise()},e.prototype.requireAll=function(e,n){var t,l=this;return void 0===n&&(n=!1),0===(t=n?e:e.filter(function(e){return l.stale(l.multiState.get(e))})).length?Promise.resolve(void 0):this.loadAll(t)},e.prototype.stale=function(e){return e.isPristine()||e.isValueOlderThan(this.cacheDurationInMs)},e}(),xe=function(){function e(e,n){this.states=e,this.halResourceService=n}return e.prototype.ensureLoaded=function(e){var n=this.state(e);return n.hasValue()?Promise.resolve(n.value):this.load(e).valuesPromise()},e.prototype.state=function(e){var n=e.$links.schema;return this.states.schemas.get(n.href)},e.prototype.load=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.state(e);return n&&l.clear(),l.putFromPromiseIfPristine(function(){return t.halResourceService.createLinkedResource(e,"schema",e.$links.schema.$link).$load()}),l},e}(),Ee=t("qHU1");var Oe=function(e){function n(n,t,l){var i=e.call(this)||this;return i.states=n,i.schemaCacheService=t,i.apiWorkPackages=l,i}return r.d(n,e),n.prototype.updateValue=function(e,n){this.updateWorkPackageList([n],!1)},n.prototype.updateWorkPackage=function(e){this.updateWorkPackageList([e],!1)},n.prototype.updateWorkPackageList=function(e,n){var t=this;void 0===n&&(n=!0);for(var l=function(){var e=a,l=(e.id||"__new_work_package__").toString(),o=i.multiState.get(l);return e.isNew?(o.putValue(e),"continue"):n&&o.hasValue()&&_.isEqual(o.value.$source,e.$source)?(Object(Ee.a)("Skipping identical work package from updating"),"continue"):void i.schemaCacheService.ensureLoaded(e).then(function(){t.multiState.get(l).putValue(e)})},i=this,o=0,r=e;o<r.length;o++){var a=r[o];l()}},n.prototype.loadWorkPackage=function(e,n){void 0===n&&(n=!1);var t=this.state(e);return"new"===e?t:(this.require(e,n),t)},n.prototype.loadAll=function(e){var n=this;return new Promise(function(t,l){n.apiWorkPackages.loadWorkPackagesCollectionsFor(_.uniq(e)).then(function(e){_.each(e,function(e){e.schemas&&_.each(e.schemas.elements,function(e){n.states.schemas.get(e.href).putValue(e)}),e.elements&&n.updateWorkPackageList(e.elements),t(void 0)})},l)})},n.prototype.load=function(e){var n=this;return new Promise(function(t,l){var i=function(e){l(e)};n.apiWorkPackages.loadWorkPackageById(e,!0).then(function(l){n.schemaCacheService.ensureLoaded(l).then(function(){n.multiState.get(e).putValue(l),t(l)},i)},i)})},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.workPackages},enumerable:!0,configurable:!0}),n}(Te),De=function(e){function n(){var n=e.call(this)||this;return n.current={},n}return r.d(n,e),n.prototype.getExpandFor=function(e){return this.current[e]},n.prototype.expandFor=function(e,n){this.current[e]=n},n.prototype.collapse=function(e){delete this.current[e]},n}(L),Fe=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(e){return this.halResourceService.get(this.pathHelper.api.v3.work_packages.id(e).relations,{}).toPromise().then(function(e){return e.elements})},e.prototype.loadInvolved=function(e){var n=_.filter(e,function(e){return/\d+/.test(e)});return 0===n.length?Promise.resolve([]):this.halResourceService.get(this.pathHelper.api.v3.relations.toPath(),{filters:I("involved","=",n).toJson()}).toPromise().then(function(e){return e.elements})},e}(),Ae=function(){function e(e){this.tableState=e}return e.prototype.request=function(e,n,t){void 0===n&&(n=!1),void 0===t&&(t=!1),this.state.putValue([n,t],e)},e.prototype.clear=function(e){this.state.clear(e)},Object.defineProperty(e.prototype,"state",{get:function(){return this.tableState.refreshRequired},enumerable:!0,configurable:!0}),e}(),Ve=function(e){function n(){var n=e.call(this)||this;return n.name="WP-Relations",n.relations=Object(a.h)(),n.initializeMembers(),n}return r.d(n,e),n}(a.b),Me=function(e){function n(n,t,l,i){var o=e.call(this)||this;return o.relationsDm=n,o.wpTableRefresh=t,o.PathHelper=l,o.halResource=i,o.relationStates=new Ve,o}return r.d(n,e),Object.defineProperty(n.prototype,"multiState",{get:function(){return this.relationStates.relations},enumerable:!0,configurable:!0}),n.prototype.load=function(e){var n=this;return new Promise(function(t,l){n.relationsDm.load(e).then(function(l){n.updateRelationsStateTo(e,l),t(n.state(e).value)}).catch(l)})},n.prototype.loadAll=function(e){var n=this;return new Promise(function(t,l){n.relationsDm.loadInvolved(e).then(function(l){n.clearSome.apply(n,e),n.accumulateRelationsFromInvolved(e,l),t()}).catch(l)})},n.prototype.find=function(e,n,t){var l=this.state(e.id).value;if(l)return _.find(l,function(l){var i=l.denormalized(e);return i.target.id.toString()===n.id.toString()&&i.relationType===t})},n.prototype.removeRelation=function(e){var n=this;return e.delete().then(function(){n.removeFromStates(e),n.wpTableRefresh.request("Removing relation ("+e.ids.from+" to "+e.ids.to+")",!0)})},n.prototype.updateRelationType=function(e,n,t,l){var i={_links:{from:{href:e.href},to:{href:n.href}},type:l};return this.updateRelation(t,i)},n.prototype.updateRelation=function(e,n){var t=this;return e.updateImmediately(n).then(function(n){return t.insertIntoStates(n),t.wpTableRefresh.request("Updating relation ("+e.ids.from+" to "+e.ids.to+")",!0),n})},n.prototype.addCommonRelation=function(e,n,t){var l=this,i={_links:{from:{href:this.PathHelper.api.v3.work_packages.id(e).toString()},to:{href:this.PathHelper.api.v3.work_packages.id(t).toString()}},type:n},o=this.PathHelper.api.v3.work_packages.id(e).relations.toString();return this.halResource.post(o,i).toPromise().then(function(e){return l.insertIntoStates(e),l.wpTableRefresh.request("Adding relation ("+e.ids.from+" to "+e.ids.to+")",!0),e})},n.prototype.insertIntoStates=function(e){var n=this;_.values(e.ids).forEach(function(t){n.multiState.get(t).doModify(function(n){return n[e.id]=e,n},function(){var n={};return n[e.id]=e,n})})},n.prototype.removeFromStates=function(e){var n=this;_.values(e.ids).forEach(function(t){n.multiState.get(t).doModify(function(n){return delete n[e.id],n},function(){return{}})})},n.prototype.updateRelationsStateTo=function(e,n){var t=this.multiState.get(e),l=_.keyBy(n,function(e){return e.id});t.putValue(l,"Overriding relations state.")},n.prototype.accumulateRelationsFromInvolved=function(e,n){var t=this;e.forEach(function(e){var l=n.filter(function(n){return n.isInvolved(e)});t.updateRelationsStateTo(e,l)})},n}(Te),Le=function(e){function n(n,t,l,i,o){var r=e.call(this,n)||this;return r.tableState=n,r.wpTableColumns=t,r.halResourceService=l,r.wpCacheService=i,r.wpRelations=o,r}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.tableState.relationColumns},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){},n.prototype.initialize=function(){this.initializeState()},n.prototype.relationsToExtendFor=function(e,n,t){if(this.wpTableColumns.hasRelationColumns()&&!this.state.isPristine()&&!_.isNil(n)){var l=this.current.getExpandFor(e.id);if(void 0!==l){var i=this.wpTableColumns.findById(l),o=this.relationColumnType(i);null!==o&&_.each(this.relationsForColumn(e,n,i),function(e){return t(e,i,o)})}}},n.prototype.relationsForColumn=function(e,n,t){var l=this;if(_.isNil(n))return[];var i=this.relationColumnType(t);if("toType"===i){var o=t.type.href;return _.filter(n,function(n){var t=n.denormalized(e),i=l.wpCacheService.state(t.targetId).value;return _.get(i,"type.href")===o})}if("ofType"===i){var r=t.relationType;return _.filter(n,function(n){return n.denormalized(e).relationType===r})}return[]},n.prototype.relationColumnType=function(e){switch(e._type){case je.RELATION_TO_TYPE:return"toType";case je.RELATION_OF_TYPE:return"ofType";default:return null}},n.prototype.getExpandFor=function(e){return this.current&&this.current.getExpandFor(e)},n.prototype.expandFor=function(e,n){var t=this.current;t.expandFor(e,n),this.state.putValue(t)},n.prototype.collapse=function(e){var n=this.current;n.collapse(e),this.state.putValue(n)},Object.defineProperty(n.prototype,"current",{get:function(){return this.state.value},enumerable:!0,configurable:!0}),n.prototype.initializeState=function(){var e=this.current;return e||(e=new De),this.state.putValue(e),e},n}(B),Ne=function(){function e(e){this.paginationService=e}return e.prototype.buildQueryString=function(e){if(e){var n=[];return _.each(e,function(e,t){e&&(Array.isArray(e)||(e=[e]),_.each(e,function(e){null!==e&&"object"==typeof e&&(e=JSON.stringify(e)),n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}))}),n.join("&")}},e.prototype.encodeQueryJsonParams=function(e,n){void 0===n&&(n={});var t={};return t=this.encodeColumns(t,e),t=this.encodeSums(t,e),t=this.encodeTimelineVisible(t,e),t=this.encodeHighlightingMode(t,e),(t=this.encodeHighlightedAttributes(t,e)).hi=!!e.showHierarchies,t.g=_.get(e.groupBy,"id",""),t=this.encodeSortBy(t,e),(t=this.encodeFilters(t,e)).pa=n.page,t.pp=n.perPage,JSON.stringify(t)},e.prototype.encodeColumns=function(e,n){return e.c=n.columns.map(function(e){return e.id}),e},e.prototype.encodeSums=function(e,n){return n.sums&&(e.s=n.sums),e},e.prototype.encodeHighlightingMode=function(e,n){return n.highlightingMode&&"inline"!==n.highlightingMode&&(e.hl=n.highlightingMode),e},e.prototype.encodeHighlightedAttributes=function(e,n){return"inline"===n.highlightingMode&&Array.isArray(n.highlightedAttributes)&&n.highlightedAttributes.length>0&&(e.hla=n.highlightedAttributes.map(function(e){return e.id})),e},e.prototype.encodeSortBy=function(e,n){return n.sortBy&&(e.t=n.sortBy.map(function(e){return e.id.replace("-",":")}).join()),e},e.prototype.encodeFilters=function(e,n){var t=this;return n.filters&&n.filters.length?e.f=n.filters.map(function(e){return{n:e.id,o:e.operator.id,v:_.map(e.values,function(e){return t.queryFilterValueToParam(e)})}}):e.f=[],e},e.prototype.encode=function(e,n){return e},e.prototype.encodeTimelineVisible=function(e,n){return n.timelineVisible&&(e.tv=n.timelineVisible,_.isEmpty(n.timelineLabels)||(e.tll=JSON.stringify(n.timelineLabels)),e.tzl=n.timelineZoomLevel),e},e.prototype.buildV3GetQueryFromJsonParams=function(e){var n={pageSize:this.paginationService.getPerPage()};if(!e)return n;var t=JSON.parse(e);if(t.c&&(n["columns[]"]=t.c.map(function(e){return e})),t.s&&(n.showSums=t.s),t.tv&&(n.timelineVisible=t.tv,t.tll&&(n.timelineLabels=t.tll),t.tzl&&(n.timelineZoomLevel=t.tzl)),t.hl&&(n.highlightingMode=t.hl),t.hla&&(n["highlightedAttributes[]"]=t.hla.map(function(e){return e})),!1!==t.hi&&!0!==t.hi||(n.showHierarchies=t.hi),n.groupBy=_.get(t,"g",""),t.f){var l=t.f.map(function(e){var n={operator:decodeURIComponent(e.o)};if(e.v){var t=Array.isArray(e.v)?e.v:[e.v];_.extend(n,{values:t})}var l={};return l[e.n]=n,l});n.filters=JSON.stringify(l)}return t.t&&(n.sortBy=JSON.stringify(t.t.split(",").map(function(e){return e.split(":")}))),t.pa&&(n.offset=t.pa),t.pp&&(n.pageSize=t.pp),n},e.prototype.buildV3GetQueryFromQueryResource=function(e,n){void 0===n&&(n={});var t={};return t["columns[]"]=this.buildV3GetColumnsFromQueryResource(e),t.showSums=e.sums,t.timelineVisible=!!e.timelineVisible,e.timelineVisible&&(t.timelineZoomLevel=e.timelineZoomLevel,t.timelineLabels=JSON.stringify(e.timelineLabels)),e.highlightingMode&&(t.highlightingMode=e.highlightingMode),e.highlightedAttributes&&"inline"===e.highlightingMode&&(t.highlightedAttributes=e.highlightedAttributes.map(function(e){return e.href})),t.showHierarchies=!!e.showHierarchies,t.groupBy=_.get(e.groupBy,"id",""),t.filters=this.buildV3GetFiltersFromQueryResoure(e),t.sortBy=this.buildV3GetSortByFromQuery(e),_.extend(n,t)},e.prototype.queryFilterValueToParam=function(e){return"boolean"==typeof e?e?"t":"f":e?e.id?e.id.toString():e.$href&&e.$href.match(/^\/api\/v3\/string_objects/i)?e.$href.match(/value=([^&]+)/)[1].toString():e.$href?e.$href.split("/").pop().toString():e.toString():""},e.prototype.buildV3GetColumnsFromQueryResource=function(e){var n=this;return e.columns?e.columns.map(function(e){return e.id}):e._links.columns?e._links.columns.map(function(e){var t=e.href;return n.idFromHref(t)}):void 0},e.prototype.buildV3GetFiltersFromQueryResoure=function(e){var n=this,t=e.filters.map(function(e){var t=n.buildV3GetFilterIdFromFilter(e),l=n.buildV3GetOperatorIdFromFilter(e),i=n.buildV3GetValuesFromFilter(e),o={};return o[t]={operator:l,values:i},o});return JSON.stringify(t)},e.prototype.buildV3GetFilterIdFromFilter=function(e){var n=e.filter?e.filter.$href:e._links.filter.href;return this.idFromHref(n)},e.prototype.buildV3GetOperatorIdFromFilter=function(e){if(e.operator)return e.operator.id;var n=e._links.operator.href;return this.idFromHref(n)},e.prototype.buildV3GetValuesFromFilter=function(e){var n=this;return e.values?_.map(e.values,function(e){return n.queryFilterValueToParam(e)}):_.map(e._links.values,function(e){return n.idFromHref(e.href)})},e.prototype.buildV3GetSortByFromQuery=function(e){var n=this,t=(e.sortBy?e.sortBy:e._links.sortBy).map(function(e){if(e.id)return e.id;var t=e.href;return n.idFromHref(t)});return JSON.stringify(t.map(function(e){return e.split("-")}))},e.prototype.idFromHref=function(e){var n=e.substring(e.lastIndexOf("/")+1,e.length);return decodeURIComponent(n)},e}(),$e=function(){function e(e,n){this.UrlParamsHelper=e,this.$state=n}return e.prototype.updateIfDifferent=function(e,n){var t=this.getNewChecksum(e,n);this.isUninitialized()||(this.isIdDifferent(e.id)?(this.maintainUrlQueryState(e.id,null),this.clear()):this.isChecksumDifferent(t)&&this.maintainUrlQueryState(e.id,t)),this.set(e.id,t)},e.prototype.update=function(e,n){var t=this.getNewChecksum(e,n);this.set(e.id,t),this.maintainUrlQueryState(e.id,t)},e.prototype.setToQuery=function(e,n){var t=this.getNewChecksum(e,n);this.set(e.id,t),this.maintainUrlQueryState(e.id,null)},e.prototype.isQueryOutdated=function(e,n){var t=this.getNewChecksum(e,n);return this.isOutdated(e.id,t)},e.prototype.executeIfOutdated=function(e,n,t){(this.isUninitialized()||this.isOutdated(e,n))&&(this.set(e,n),t())},e.prototype.set=function(e,n){this.id=e,this.checksum=n},e.prototype.clear=function(){this.id=null,this.checksum=null,this.visibleChecksum=null},e.prototype.isUninitialized=function(){return!this.id&&!this.checksum},e.prototype.isIdDifferent=function(e){return this.id!==e},e.prototype.isChecksumDifferent=function(e){return this.checksum&&e!==this.checksum},e.prototype.isOutdated=function(e,n){var t=!!this.id,l=!!this.checksum,i=this.id!==e,o=n!==this.checksum,r=this.checksum&&!n&&this.visibleChecksum;return(t||l)&&(i||!i&&o&&(n||this.visibleChecksum)||!t&&r)},e.prototype.getNewChecksum=function(e,n){return this.UrlParamsHelper.encodeQueryJsonParams(e,_.pick(n,["page","perPage"]))},e.prototype.maintainUrlQueryState=function(e,n){this.visibleChecksum=n,this.$state.go(".",{query_props:n,query_id:e},{custom:{notify:!1}})},e}(),qe=function(e){function n(n){var t=e.call(this)||this;return t.current=[],t.current=Z(n.sortBy),t}return r.d(n,e),n.prototype.addCurrent=function(e){this.current.unshift(e),this.current=_.uniqBy(this.current,function(e){return e.column.$href}).slice(0,3)},n.prototype.setCurrent=function(e){var n=this;this.current=[],_.reverse(e),_.each(e,function(e){return n.addCurrent(e)})},n}(L),He="urn:openproject-org:api:v3:queries:directions:asc",Be="urn:openproject-org:api:v3:queries:directions:desc",We=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}r.d(n,e)}(K),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}r.d(n,e),Object.defineProperty(n.prototype,"id",{get:function(){return this.$href.split("/").pop()},enumerable:!0,configurable:!0})}(K),function(e){function n(n,t){var l=e.call(this,t)||this;return l.states=n,l.tableState=t,l}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.tableState.sortBy},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e){return new qe(e)},n.prototype.onReadyWithAvailable=function(){return Object(a.c)(this.state,this.states.queries.sortBy).values$().pipe(Object(F.a)(null))},n.prototype.hasChanged=function(e){var n=function(e){return e.map(function(e){return e.href})};return!_.isEqual(n(e.sortBy),n(this.current.current))},n.prototype.applyToQuery=function(e){if(this.current.current.length>0){var n=this.tableState.hierarchies.value;n.current=!1,n.last=null,this.tableState.hierarchies.putValue(n),e.hierarchies=n.current}return e.sortBy=Z(this.current.current),!0},n.prototype.isSortable=function(e){return!!_.find(this.available,function(n){return n.column.$href===e.$href})},n.prototype.addAscending=function(e){var n=this.findAvailableDirection(e,He);n&&this.add(n)},n.prototype.addDescending=function(e){var n=this.findAvailableDirection(e,Be);n&&this.add(n)},n.prototype.findAvailableDirection=function(e,n){return _.find(this.available,function(t){return t.column.$href===e.$href&&t.direction.$href===n})},n.prototype.add=function(e){var n=this.current;n.addCurrent(e),this.state.putValue(n)},n.prototype.set=function(e){var n=this.current;n.setCurrent(e),this.state.putValue(n)},Object.defineProperty(n.prototype,"current",{get:function(){return this.state.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableState",{get:function(){return this.states.queries.sortBy},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentSortBys",{get:function(){return this.current.current},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"available",{get:function(){return this.availableState.getValueOr([])},enumerable:!0,configurable:!0}),n}(B)),ze=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.isValidationError=!1,n}return r.d(n,e),Object.defineProperty(n.prototype,"errorMessages",{get:function(){return this.isMultiErrorMessage()?this.errors.map(function(e){return e.message}):[this.message]},enumerable:!0,configurable:!0}),n.prototype.isMultiErrorMessage=function(){return"urn:openproject-org:api:v3:errors:MultipleErrors"===this.errorIdentifier},n.prototype.getInvolvedAttributes=function(){var e=this,n=[];return this.details?n=[{details:this.details}]:this.errors&&(n=this.errors),_.flatten(n.map(function(n){return"urn:openproject-org:api:v3:errors:MultipleErrors"===n.errorIdentifier?e.extractMultiError(n)[0]:n.details.attribute}))},n.prototype.getMessagesPerAttribute=function(){var e=this,n={};return this.details?n[this.details.attribute]=[this.message]:_.forEach(this.errors,function(t){if("urn:openproject-org:api:v3:errors:MultipleErrors"===t.errorIdentifier){var l=e.extractMultiError(t),i=l[0],o=l[1],r=n[i]||[];n[i]=r.concat(o)}else n[t.details.attribute]?n[t.details.attribute].push(t.message):n[t.details.attribute]=[t.message]}),n},n.prototype.extractMultiError=function(e){return[e.errors[0].details.attribute,e.errors.map(function(e){return e.message})]},n}(K),Qe=function(){function e(e,n){this.indicator=e,this.template=n}return Object.defineProperty(e.prototype,"promise",{set:function(e){var n=this;this.start();var t=function(){setTimeout(function(){return n.stop()},25)};e.then(t).catch(t)},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.stop(),this.indicator.prepend(this.template)},e.prototype.stop=function(){this.indicator.find(".loading-indicator--background").remove()},e}(),Ue=function(){function e(){this.indicatorTemplate='<div class="loading-indicator--background">\n      <div class="loading-indicator">\n        <div class="block-1"></div>\n        <div class="block-2"></div>\n        <div class="block-3"></div>\n        <div class="block-4"></div>\n        <div class="block-5"></div>\n      </div>\n    </div>\n   '}return Object.defineProperty(e.prototype,"table",{get:function(){return this.indicator("table")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wpDetails",{get:function(){return this.indicator("wpDetails")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return this.indicator("modal")},enumerable:!0,configurable:!0}),e.prototype.indicator=function(e){var n=this.getIndicatorAt(e);return new Qe(n,this.indicatorTemplate)},e.prototype.getIndicatorAt=function(e){return jQuery(".loading-indicator--location").filter('[data-indicator-name="'+e+'"]')},e}(),Ke=function(){function e(e,n,t){this.http=e,this.PathHelper=n,this.I18n=t,this.path=this.PathHelper.api.v3.configuration.toString(),this.settings=this.initSettings()}return e.prototype.fetchSettings=function(){return this.http.get(this.path).toPromise()},e.prototype.api=function(){var e=this;return new Promise(function(n,t){e.cache?n(e.cache):e.fetchSettings().then(function(t){e.cache=t,n(t)}).catch(t)})},e.prototype.initSettings=function(){var e={},n=window.gon;return void 0!==n&&(e=n.settings),_.merge({enabled_modules:[],display:{},user_preferences:{impaired:!1,time_zone:"",others:{comments_sorting:"asc",warn_on_leaving_unsaved:!0,auto_hide_popups:!1}}},e)},e.prototype.displaySettingPresent=function(e){return this.settings.display.hasOwnProperty(e)&&!1!==this.settings.display[e]},e.prototype.accessibilityModeEnabled=function(){return this.settings.user_preferences.impaired},e.prototype.commentsSortedInDescendingOrder=function(){return"desc"===this.settings.user_preferences.others.comments_sorting},e.prototype.warnOnLeavingUnsaved=function(){return!0===this.settings.user_preferences.others.warn_on_leaving_unsaved},e.prototype.autoHidePopups=function(){return!0===this.settings.user_preferences.others.auto_hide_popups},e.prototype.isTimezoneSet=function(){return""!==this.settings.user_preferences.time_zone},e.prototype.timezone=function(){return this.settings.user_preferences.time_zone},e.prototype.dateFormatPresent=function(){return this.displaySettingPresent("date_format")&&""!==this.settings.display.date_format},e.prototype.dateFormat=function(){return this.settings.display.date_format},e.prototype.timeFormatPresent=function(){return this.displaySettingPresent("time_format")&&""!==this.settings.display.time_format},e.prototype.timeFormat=function(){return this.settings.display.time_format},e.prototype.isModuleEnabled=function(e){return this.settings.enabled_modules.indexOf(e)>=0},e.prototype.startOfWeekPresent=function(){return this.displaySettingPresent("start_of_week")&&""!==this.settings.display.start_of_week},e.prototype.startOfWeek=function(){return this.startOfWeekPresent()?this.settings.display.start_of_week:"en"===I18n.locale?1:"de"===I18n.locale?0:""},e}();var Ye="op:notifications:add",Ge=function(){function e(e){var n=this;this.configurationService=e,this.stack=Object(a.g)([]),jQuery(window).on(Ye,function(e,t){n.add(t)})}return Object.defineProperty(e.prototype,"current",{get:function(){return this.stack},enumerable:!0,configurable:!0}),e.prototype.add=function(e,n){var t=this;return void 0===n&&(n=5e3),jQuery(".flash.notice").remove(),this.stack.doModify(function(n){var t=[e].concat(n);return _.remove(t,function(e,n){return n>0&&("success"===e.type||"error"===e.type)}),t}),"success"===e.type&&this.configurationService.autoHidePopups()&&setTimeout(function(){return t.remove(e)},n),e},e.prototype.addError=function(e,n){void 0===n&&(n=[]),Array.isArray(n)||(n=[n]);var t=this.createNotification(e,"error");return t.data=n,this.add(t)},e.prototype.addWarning=function(e){return this.add(this.createNotification(e,"warning"))},e.prototype.addSuccess=function(e){return this.add(this.createNotification(e,"success"))},e.prototype.addNotice=function(e){return this.add(this.createNotification(e,"info"))},e.prototype.addAttachmentUpload=function(e,n){return this.add(this.createAttachmentUploadNotification(e,n))},e.prototype.remove=function(e){this.stack.doModify(function(n){return _.remove(n,function(n){return n===e}),n})},e.prototype.clear=function(){this.stack.putValue([])},e.prototype.createNotification=function(e,n){return"string"==typeof e?{message:e,type:n}:(e.type=n,e)},e.prototype.createAttachmentUploadNotification=function(e,n){if(!n.length)throw new Error("Cannot create an upload notification without uploads!");var t=this.createNotification(e,"upload");return t.data=n,t},e}(),Ze=function(){function e(e,n,t,l,i,o){this.I18n=e,this.$state=n,this.wpCacheService=t,this.halResourceService=l,this.NotificationsService=i,this.loadingIndicator=o}return e.prototype.showSave=function(e,n){void 0===n&&(n=!1);var t={message:this.I18n.t("js.notice_successful_"+(n?"create":"update"))};this.$state.includes("work-packages.show")||(t.link=this.showInFullScreenLink(e)),this.NotificationsService.addSuccess(t)},e.prototype.handleRawError=function(e,n){if(console.error("Handling error message %O for work package %O",e,n),e instanceof ze)return this.handleErrorResponse(e,n);var t;if(e instanceof W.f&&(t=e.message||e.error),e&&e.data&&"Error"===e.data._type&&(t=e.data),t&&"Error"===t._type){var l=this.halResourceService.createHalResource(t);return this.handleErrorResponse(l,n)}this.showGeneralError(t||e)},e.prototype.handleErrorResponse=function(e,n){return e instanceof ze?n?this.showError(e,n):void this.showApiErrorMessages(e):this.showGeneralError(e)},e.prototype.showError=function(e,n){this.showCustomError(e,n)||this.showApiErrorMessages(e)},e.prototype.showGeneralError=function(e){var n=this.I18n.t("js.error.internal");e&&(n+=" "+e),this.NotificationsService.addError(n)},e.prototype.showEditingBlockedError=function(e){this.NotificationsService.addError(this.I18n.t("js.work_packages.error.edit_prohibited",{attribute:e}))},e.prototype.showCustomError=function(e,n){var t=this;if("urn:openproject-org:api:v3:errors:UpdateConflict"===e.errorIdentifier)return this.NotificationsService.addError({message:e.message,type:"error",link:{text:this.I18n.t("js.work_packages.error.update_conflict_refresh"),target:function(){return t.wpCacheService.require(n.id,!0)}}}),!0;if("urn:openproject-org:api:v3:errors:PropertyFormatError"===e.errorIdentifier){var l=n.schema[e.details.attribute].name,i="js.work_packages.error.format."+n.schema[e.details.attribute].type.toLowerCase();return void 0!==this.I18n.lookup(i)&&(this.NotificationsService.addError(this.I18n.t(i,{attribute:l})),!0)}return!1},e.prototype.showApiErrorMessages=function(e){var n=e.errorMessages;return n.length>1?this.NotificationsService.addError("",n):this.NotificationsService.addError(n[0]),!0},e.prototype.showInFullScreenLink=function(e){var n=this;return{target:function(){n.loadingIndicator.table.promise=n.$state.go("work-packages.show.activity",{workPackageId:e.id})},text:this.I18n.t("js.work_packages.message_successful_show_in_fullscreen")}},e}(),Je=function(){function e(e,n,t,l,i,o,r){this.tableState=e,this.wpTableHierarchies=n,this.wpTableColumns=t,this.wpNotificationsService=l,this.halResourceService=i,this.wpCacheService=o,this.wpRelations=r}return e.prototype.initialize=function(e){var n=this;Promise.all([this.requireInvolvedRelations(e.map(function(e){return e.id})),this.requireHierarchyElements(e)]).then(function(e){n.loadAdditional(_.flatten(e))})},e.prototype.loadAdditional=function(e){var n=this;this.wpCacheService.requireAll(e).then(function(){n.tableState.additionalRequiredWorkPackages.putValue(null,"All required work packages are loaded")}).catch(function(e){n.tableState.additionalRequiredWorkPackages.putValue(null,"Failure loading required work packages"),n.wpNotificationsService.handleRawError(e)})},e.prototype.requireInvolvedRelations=function(e){var n=this;return this.wpTableColumns.hasRelationColumns()?this.wpRelations.requireAll(e,!0).then(function(){var t=n.getInvolvedWorkPackages(e.map(function(e){return n.wpRelations.state(e).value}));return _.flatten(t)}):Promise.resolve([])},e.prototype.requireHierarchyElements=function(e){if(!this.wpTableHierarchies.isEnabled)return Promise.resolve([]);var n=_.flatten(e.map(function(e){return e.ancestorIds}));return Promise.resolve(n)},e.prototype.getInvolvedWorkPackages=function(e){var n=[];return _.each(e,function(e){_.each(e,function(e){n.push(e.ids.from,e.ids.to)})}),n},e}(),Xe=function(){function e(){this.links={}}return e.prototype.initModelAuth=function(e,n){this.links[e]=n},e.prototype.can=function(e,n){return this.links[e]&&n in this.links[e]},e.prototype.cannot=function(e,n){return!this.can(e,n)},e}(),en=function(){function e(e,n){this.documentElement=e,this.pathHelper=n,this.stylesheets={highlighting:this.pathHelper.staticBase+"/highlighting/styles.css"}}return e.prototype.requireHighlighting=function(){this.require("highlighting")},e.prototype.require=function(e){if(this.assertExists(e),!this.isLoaded(e)){var n=this.documentElement.createElement("link");n.id="dynamic-stylesheet-"+e,n.rel="stylesheet",n.type="text/css",n.href=this.stylesheets[e],n.media="all",this.documentElement.head.appendChild(n)}},e.prototype.assertExists=function(e){if(!this.stylesheets[e])throw"Unknown stylesheet "+e},e.prototype.isLoaded=function(e){return!!this.stylesheets[e]&&!!this.documentElement.getElementById("dynamic-stylesheet-"+e)},e}(),nn=function(){function e(e,n){void 0===e&&(e="inline"),void 0===n&&(n=void 0),this.mode=e,this.selectedAttributes=n}return Object.defineProperty(e.prototype,"selectedAttributes",{get:function(){return this._selectedAttributes},set:function(e){_.isEmpty(e)?this._selectedAttributes=void 0:this._selectedAttributes=e},enumerable:!0,configurable:!0}),e.prototype.update=function(e){if(!e)return this.mode="inline",void(this.selectedAttributes=void 0);this.mode=e.highlightingMode,this.selectedAttributes=e.selectedAttributes},e}(),tn=function(){function e(e){this.documentElement=e,this._banners=!0,this._banners=e.body.classList.contains("ee-banners-visible")}return Object.defineProperty(e.prototype,"eeShowBanners",{get:function(){return this._banners},enumerable:!0,configurable:!0}),e.prototype.conditional=function(e,n){this._banners?this.callMaybe(e):this.callMaybe(n)},e.prototype.callMaybe=function(e){e&&e()},e}(),ln=function(e){function n(n,t,l,i){var o=e.call(this,i)||this;return o.states=n,o.Banners=t,o.dynamicCssService=l,o.tableState=i,o}return r.d(n,e),n.prototype.shouldHighlightInline=function(e){return!(!this.isInline||this.Banners.eeShowBanners)&&(void 0===this.current.selectedAttributes||this.current.selectedAttributes===[]||!!_.find(this.current.selectedAttributes,function(n){return n.id===e}))},Object.defineProperty(n.prototype,"state",{get:function(){return this.tableState.highlighting},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"current",{get:function(){var e=this.state.getValueOr(new nn("inline"));return this.filteredValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isInline",{get:function(){return"inline"===this.current.mode},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDisabled",{get:function(){return"none"===this.current.mode},enumerable:!0,configurable:!0}),n.prototype.update=function(n){e.prototype.update.call(this,this.filteredValue(n)),this.isDisabled||this.dynamicCssService.requireHighlighting()},n.prototype.valueFromQuery=function(e){return this.filteredValue(new nn(e.highlightingMode,e.highlightedAttributes))},n.prototype.hasChanged=function(e){return e.highlightingMode!==this.current.mode||!_.isEqual(e.highlightedAttributes,this.current.selectedAttributes)},n.prototype.applyToQuery=function(e){var n=this.current;return e.highlightingMode=n.mode,e.highlightedAttributes=n.selectedAttributes,!1},n.prototype.filteredValue=function(e){return this.Banners.conditional(function(){e.mode="none",e.selectedAttributes=void 0}),e},n}(B),on=function(){function e(e,n,t,l,i,o,r,a,u,s,c,d,p,h,f,g){this.states=e,this.tableState=n,this.wpTableColumns=t,this.wpTableGroupBy=l,this.wpTableSortBy=i,this.wpTableFilters=o,this.wpTableSum=r,this.wpTableTimeline=a,this.wpTableHierarchies=u,this.wpTableHighlighting=s,this.wpTableRelationColumns=c,this.wpTablePagination=d,this.wpTableAdditionalElements=p,this.wpCacheService=h,this.wpListChecksumService=f,this.authorisationService=g}return e.prototype.initialize=function(e,n){this.clearStates(),this.tableState.query.putValue(e),this.initializeFromQuery(e,n),this.updateTableState(e,n),this.updateChecksum(e,n)},e.prototype.updateStatesFromForm=function(e,n){var t=this,l=n.schema;_.each(l.filtersSchemas.elements,function(e){t.states.schemas.get(e.$href).putValue(e)}),this.wpTableFilters.initializeFilters(e,l),this.tableState.queryForm.putValue(n),this.states.queries.columns.putValue(l.columns.allowedValues),this.states.queries.sortBy.putValue(l.sortBy.allowedValues),this.states.queries.groupBy.putValue(l.groupBy.allowedValues)},e.prototype.updateTableState=function(e,n){var t=this;this.tableState.additionalRequiredWorkPackages.clear("Clearing additional WPs before updating rows"),n.schemas&&_.each(n.schemas.elements,function(e){t.states.schemas.get(e.href).putValue(e)}),this.tableState.query.putValue(e),this.tableState.rows.putValue(n.elements),this.wpCacheService.updateWorkPackageList(n.elements),this.tableState.results.putValue(n),this.tableState.groups.putValue(n.groups),this.wpTablePagination.initialize(e,n),this.wpTableRelationColumns.initialize(),this.wpTableAdditionalElements.initialize(n.elements)},e.prototype.updateChecksum=function(e,n){this.wpListChecksumService.updateIfDifferent(this.tableState.query.value,this.wpTablePagination.current),this.authorisationService.initModelAuth("work_packages",n.$links)},e.prototype.initializeFromQuery=function(e,n){this.tableState.query.putValue(e),this.wpTableSum.initialize(e),this.wpTableColumns.initialize(e,n),this.wpTableSortBy.initialize(e,n),this.wpTableGroupBy.initialize(e,n),this.wpTableTimeline.initialize(e,n),this.wpTableHierarchies.initialize(e,n),this.wpTableHighlighting.initialize(e,n),this.authorisationService.initModelAuth("query",e.$links),this.authorisationService.initModelAuth("work_packages",n.$links)},e.prototype.applyToQuery=function(e){this.wpTableFilters.applyToQuery(e),this.wpTableSum.applyToQuery(e),this.wpTableColumns.applyToQuery(e),this.wpTableSortBy.applyToQuery(e),this.wpTableGroupBy.applyToQuery(e),this.wpTableTimeline.applyToQuery(e),this.wpTableHighlighting.applyToQuery(e),this.wpTableHierarchies.applyToQuery(e)},e.prototype.clearStates=function(){var e="Clearing states before re-initialization.";this.tableState.query.clear(e),this.tableState.rows.clear(e),this.tableState.columns.clear(e),this.tableState.sortBy.clear(e),this.tableState.groupBy.clear(e),this.tableState.sum.clear(e),this.tableState.results.clear(e),this.tableState.groups.clear(e),this.tableState.additionalRequiredWorkPackages.clear(e),this.tableState.rendered.clear(e),this.tableState.query.clear()},e}(),rn=t("/PH2"),an=t("q4SE"),un=function(){return function(e,n){this.injector=e,this.workPackage=n,this.I18n=this.injector.get(U.a)}}();function sn(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var l=document.createElement("i");return l.setAttribute("aria-hidden","true"),(e=l.classList).add.apply(e,n),l}var cn=t("S5bw"),dn=function(){function e(e,n){var t=this;this.$state=e,this.$transitions=n,this.currentTab="overview",this.subject=new cn.a(1),this.updateTabs(),n.onSuccess({},function(e){t.updateTabs(e.to().name)})}return Object.defineProperty(e.prototype,"observable",{get:function(){return this.subject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastActiveTab",{get:function(){return this.isCurrentState("show")?this.currentShowTab:this.currentDetailsTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentShowState",{get:function(){return"work-packages.show."+this.currentShowTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentDetailsState",{get:function(){return"work-packages.list.details."+this.currentDetailsTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentShowTab",{get:function(){return"overview"===this.currentTab?"activity":this.currentTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentDetailsTab",{get:function(){return this.currentTab},enumerable:!0,configurable:!0}),e.prototype.notify=function(){this.subject.next({active:this.lastActiveTab,show:this.currentShowState,details:this.currentDetailsState})},e.prototype.updateTab=function(e){if(this.isCurrentState(e)){var n=this.$state.current.name;this.currentTab=n.split(".").pop(),this.notify()}},e.prototype.isCurrentState=function(e){return"show"===e?this.$state.includes("work-packages.show.*"):"details"===e&&this.$state.includes("work-packages.list.details.*")},e.prototype.updateTabs=function(e){if("work-packages.show.activity"===e)return this.currentTab="overview",this.notify();this.updateTab("show"),this.updateTab("details")},e}(),pn=function(){function e(e,n){this.$state=e,this.keepTab=n}return e.prototype.linkToDetails=function(e,n,t){return this.build(e,"currentDetailsState",n,t)},e.prototype.linkToShow=function(e,n,t){return this.build(e,"currentShowState",n,t)},e.prototype.build=function(e,n,t,l){var i=document.createElement("a");return i.href=this.$state.href(this.keepTab[n],{workPackageId:e}),i.classList.add("__ui-state-link"),i.dataset.workPackageId=e,i.dataset.wpState=n,i.setAttribute("title",t),i.textContent=l,i},e}(),hn=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.identifier="open-details-action",n.uiStatebuilder=new pn(n.injector.get(d.G),n.injector.get(dn)),n.text={button:n.I18n.t("js.button_open_details")},n}return r.d(n,e),n.prototype.buildElement=function(){var e=this.uiStatebuilder.linkToDetails(this.workPackage.id,this.text.button,"");return e.classList.add("wp-table--details-link","wp-table-context-menu-icon","hidden-for-mobile"),e.appendChild(sn("icon","icon-info2")),e},n}(un),fn=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.identifier="open-context-menu-action",n.text={linkTitle:n.I18n.t("js.label_open_context_menu")},n}return r.d(n,e),n.prototype.buildElement=function(){var e=document.createElement("a");return e.href="#",e.classList.add("wp-table-context-menu-link","wp-table-context-menu-icon"),e.title=this.text.linkTitle,e.appendChild(sn("icon","icon-show-more-horizontal")),e},n}(un),gn=function(){function e(e){this.injector=e,this.actions=[function(e,n){return new hn(e,n)},function(e,n){return new fn(e,n)}]}return e.prototype.setActions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.actions=e},e.prototype.render=function(e){var n=this,t=this.actions.map(function(t){return t(n.injector,e).buildElement()});return _.compact(t)},e}(),mn=function(){function e(){}return e.prototype.extract=function(e,n){var t=this,l={_links:{}},i=[];for(var o in n)n.hasOwnProperty(o)&&n[o].writable&&(e.$links[o]?Array.isArray(e[o])?l._links[o]=_.map(e[o],function(e){return{href:e.$href}}):l._links[o]={href:e[o]&&e[o].$href}:i.push(o));return _.each(i,function(n){e.hasOwnProperty(n)&&(Array.isArray(e[n])?l[n]=_.map(e[n],function(e){return e instanceof K?t.extract(e,e.currentSchema||e.schema):e}):l[n]=e[n])}),l},e}(),vn=function(){function e(e,n,t,l){this.halResourceService=e,this.pathHelper=n,this.UrlParamsHelper=t,this.PayloadDm=l}return e.prototype.stream=function(e,n,t){var l;return l=n?this.pathHelper.api.v3.queries.id(n).toString():this.pathHelper.api.v3.withOptionalProject(t).queries.default.toString(),this.halResourceService.get(l,e)},e.prototype.find=function(e,n,t){return this.stream(e,n,t).toPromise()},e.prototype.findDefault=function(e,n){return this.find(e,void 0,n)},e.prototype.reload=function(e,n){var t=this.pathHelper.api.v3.queries.id(e.id).toString();return this.halResourceService.get(t,n).toPromise()},e.prototype.loadResults=function(e,n){if(!e.results)throw"No results embedded when expected";var t=this.UrlParamsHelper.buildV3GetQueryFromQueryResource(e,n),l=URI(e.results.href).path();return this.halResourceService.get(l,t).toPromise()},e.prototype.loadIdsUpdatedSince=function(e,n){var t=[{id:{operator:"=",values:e.filter(function(e){return e})}},{updatedAt:{operator:"<>d",values:[n,""]}}];return this.halResourceService.get(this.pathHelper.api.v3.work_packages.toString(),{filters:JSON.stringify(t)}).toPromise()},e.prototype.update=function(e,n){var t=this;return new Promise(function(l,i){t.extractPayload(e,n).then(function(n){var o=t.pathHelper.api.v3.queries.id(e.id).toString();t.halResourceService.patch(o,n).toPromise().then(l).catch(i)}).catch(i)})},e.prototype.create=function(e,n){var t=this;return this.extractPayload(e,n).then(function(e){var n=t.pathHelper.api.v3.queries.toString();return t.halResourceService.post(n,e).toPromise()})},e.prototype.delete=function(e){return e.delete()},e.prototype.toggleStarred=function(e){return e.starred?e.unstar():e.star()},e.prototype.all=function(e){var n=new P;e?n.add("project_identifier","=",[e]):n.add("project","!*",[]);var t={filters:n.toJson()};return this.halResourceService.get(this.pathHelper.api.v3.queries.toString(),t).toPromise()},e.prototype.extractPayload=function(e,n){var t=this,l=_.map(e.filters,function(e){return e.schema.$load()});return Promise.all(l).then(function(){return t.PayloadDm.extract(e,n.schema)})},e}(),yn=t("SqdZ"),bn=function(){function e(e,n,t,l,i){this.injector=e,this.I18n=n,this.wpTableGroupBy=t,this.wpTableHierarchies=l,this.wpTableSums=i,this.displayMode="default",this.availableGroups=[],this.displaySums=!1,this.text={choose_mode:this.I18n.t("js.work_packages.table_configuration.choose_display_mode"),label_group_by:this.I18n.t("js.label_group_by"),title:this.I18n.t("js.label_group_by"),placeholder:this.I18n.t("js.placeholders.default"),please_select:this.I18n.t("js.placeholders.selection"),default:"\u2014 "+this.I18n.t("js.work_packages.table_configuration.default"),display_sums:this.I18n.t("js.work_packages.query.display_sums"),display_sums_hint:"\u2014 "+this.I18n.t("js.work_packages.table_configuration.display_sums_hint"),display_mode:{default:this.I18n.t("js.work_packages.table_configuration.default_mode"),grouped:this.I18n.t("js.work_packages.table_configuration.grouped_mode"),hierarchy:this.I18n.t("js.work_packages.table_configuration.hierarchy_mode"),hierarchy_hint:"\u2014 "+this.I18n.t("js.work_packages.table_configuration.hierarchy_hint")}}}return e.prototype.onSave=function(){this.wpTableHierarchies.setEnabled("hierarchy"===this.displayMode);var e="grouped"===this.displayMode?this.currentGroup:void 0;this.wpTableGroupBy.set(e),this.wpTableSums.setEnabled(this.displaySums)},e.prototype.updateGroup=function(e){this.displayMode="grouped",this.currentGroup=_.find(this.availableGroups,function(n){return n.href===e})},e.prototype.ngOnInit=function(){var e=this;this.wpTableHierarchies.isEnabled?this.displayMode="hierarchy":this.wpTableGroupBy.current&&(this.displayMode="grouped"),this.displaySums=this.wpTableSums.currentSum||!1,this.wpTableGroupBy.onReady().then(function(){e.availableGroups=_.sortBy(e.wpTableGroupBy.available,"name"),e.currentGroup=e.wpTableGroupBy.current})},e}(),wn=function(){function e(e,n,t,l){var i=this;this.injector=e,this.I18n=n,this.wpTableColumns=t,this.ConfigurationService=l,this.availableColumns=this.wpTableColumns.all,this.availableColumnsMap=_.keyBy(this.availableColumns,function(e){return e.id}),this.selectedColumns=this.wpTableColumns.getColumns().map(function(e){return i.column2Like(e)}),this.impaired=this.ConfigurationService.accessibilityModeEnabled(),this.selectedColumnMap={},this.eeShowBanners=!1,this.text={columnsHelp:this.I18n.t("js.work_packages.table_configuration.columns_help_text"),columnsLabel:this.I18n.t("js.label_columns"),selectedColumns:this.I18n.t("js.description_selected_columns"),multiSelectLabel:this.I18n.t("js.work_packages.label_column_multiselect"),upsaleRelationColumns:this.I18n.t("js.work_packages.table_configuration.upsale.relation_columns"),upsaleCheckOutLink:this.I18n.t("js.work_packages.table_configuration.upsale.check_out_link")}}return e.prototype.onSave=function(){this.wpTableColumns.setColumnsById(this.selectedColumns.map(function(e){return e.id}))},e.prototype.setSelectedColumn=function(e){this.selectedColumnMap[e.id]?this.selectedColumns.push(e):_.remove(this.selectedColumns,function(n){return n.id===e.id})},e.prototype.updateSelect2Columns=function(e){var n=this,t=e.val;this.selectedColumnMap={},this.selectedColumns=t.map(function(e){return n.selectedColumnMap[e]=!0,n.column2Like(n.availableColumnsMap[e])})},e.prototype.ngOnInit=function(){var e=this;this.eeShowBanners=jQuery("body").hasClass("ee-banners-visible"),this.selectedColumns.forEach(function(n){e.selectedColumnMap[n.id]=!0})},e.prototype.ngAfterViewInit=function(){this.impaired||this.setupSelect2()},e.prototype.ngOnDestroy=function(){this.impaired||jQuery(this.select2Columns.nativeElement).select2("close")},e.prototype.setupSelect2=function(){var e=this,n=jQuery(this.select2Columns.nativeElement);n.on("change",this.updateSelect2Columns.bind(this)).select2({multiple:!0,tags:!1,initSelection:function(n,t){return t(e.selectedColumns)},query:function(n){var t=[];e.availableColumns.forEach(function(e){(0===n.term.length||e.name.toUpperCase().indexOf(n.term.toUpperCase())>=0)&&t.push({id:e.id,text:e.name})}),n.callback({results:t,more:!1})}}).select2("val",[]),n.select2("container").find("ul.select2-choices").sortable({containment:"parent",start:function(){n.select2("onSortStart")},update:function(){n.select2("onSortEnd")}}),n.select2("focus")},e.prototype.column2Like=function(e){return{id:e.id,text:e.name}},e}(),kn=function(){function e(){this.visible=!1}return e.prototype.toggleVisibility=function(){this.visible=!this.visible},e}(),Cn=function(){function e(e,n,t,l){this.injector=e,this.I18n=n,this.wpTableFilters=t,this.wpFiltersService=l,this.eeShowBanners=!1,this.text={columnsLabel:this.I18n.t("js.label_columns"),selectedColumns:this.I18n.t("js.description_selected_columns"),multiSelectLabel:this.I18n.t("js.work_packages.label_column_multiselect"),upsaleRelationColumns:this.I18n.t("js.modals.upsale_relation_columns"),upsaleRelationColumnsLink:this.I18n.t("js.modals.upsale_relation_columns_link")}}return e.prototype.ngOnInit=function(){var e=this;this.eeShowBanners=jQuery("body").hasClass("ee-banners-visible"),this.wpTableFilters.onReady().then(function(){return e.filters=e.wpTableFilters.currentState.$copy()})},e.prototype.onSave=function(){this.filters&&this.wpTableFilters.replaceIfComplete(this.filters)},e}(),Pn=function(){return function(e,n){this.column=e,this.direction=n}}(),In=function(){function e(e,n,t){this.injector=e,this.I18n=n,this.wpTableSortBy=t,this.text={title:this.I18n.t("js.label_sort_by"),placeholder:this.I18n.t("js.placeholders.default"),sort_criteria_1:this.I18n.t("js.filter.sorting.criteria.one"),sort_criteria_2:this.I18n.t("js.filter.sorting.criteria.two"),sort_criteria_3:this.I18n.t("js.filter.sorting.criteria.three")},this.availableDirections=[{$href:He,name:this.I18n.t("js.label_ascending")},{$href:Be,name:this.I18n.t("js.label_descending")}],this.availableColumns=[],this.allColumns=[],this.sortationObjects=[],this.emptyColumn={name:this.text.placeholder,href:null}}return e.prototype.onSave=function(){var e=this,n=this.sortationObjects.filter(function(e){return null!==e.column}).map(function(n){return e.getMatchingSort(n.column.href,n.direction)});this.wpTableSortBy.set(_.compact(n))},e.prototype.ngOnInit=function(){var e=this;this.wpTableSortBy.state.values$().pipe(Object(H.a)(1)).toPromise().then(function(){var n=e.wpTableSortBy.available.filter(function(e){return!e.column.$href.endsWith("/parent")}).map(function(e){return{name:e.column.name,href:e.column.$href}});e.allColumns=_.uniqBy(n,"href"),_.each(e.wpTableSortBy.currentSortBys,function(n){n.column.$href.endsWith("/parent")||e.sortationObjects.push(new Pn({name:n.column.name,href:n.column.$href},n.direction.$href))}),e.updateUsedColumns(),e.fillUpSortElements()})},e.prototype.updateSelection=function(e,n){e.column=_.find(this.allColumns,function(e){return e.href===n})||this.emptyColumn,this.updateUsedColumns()},e.prototype.updateUsedColumns=function(){var e=this.sortationObjects.filter(function(e){return null!==e.column}).map(function(e){return e.column});this.availableColumns=_.sortBy(_.differenceBy(this.allColumns,e,"href"),"name")},e.prototype.getMatchingSort=function(e,n){return _.find(this.wpTableSortBy.available,function(t){return t.column.$href===e&&t.direction.$href===n})},e.prototype.fillUpSortElements=function(){for(;this.sortationObjects.length<3;)this.sortationObjects.push(new Pn(this.emptyColumn,He))},e}(),jn=function(){function e(e,n,t,l){this.injector=e,this.I18n=n,this.wpTableTimeline=t,this.wpTableColumns=l,this.timelineVisible=!1,this.availableZoomLevels=ce,this.text={title:this.I18n.t("js.timelines.gantt_chart"),display_timelines:this.I18n.t("js.timelines.button_activate"),display_timelines_hint:this.I18n.t("js.work_packages.table_configuration.show_timeline_hint"),zoom:{level:this.I18n.t("js.tl_toolbar.zooms"),description:this.I18n.t("js.timelines.zoom.description"),days:this.I18n.t("js.timelines.zoom.days"),weeks:this.I18n.t("js.timelines.zoom.weeks"),months:this.I18n.t("js.timelines.zoom.months"),quarters:this.I18n.t("js.timelines.zoom.quarters"),years:this.I18n.t("js.timelines.zoom.years"),autozoom:this.I18n.t("js.timelines.zoom.auto")},labels:{title:this.I18n.t("js.timelines.labels.title"),description:this.I18n.t("js.timelines.labels.description"),bar:this.I18n.t("js.timelines.labels.bar"),none:this.I18n.t("js.timelines.filter.noneSelection"),left:this.I18n.t("js.timelines.labels.left"),right:this.I18n.t("js.timelines.labels.right"),farRight:this.I18n.t("js.timelines.labels.farRight")}}}return e.prototype.onSave=function(){this.wpTableTimeline.toggleAutoZoom(!1);var e=this.wpTableTimeline.current;e.visible=this.timelineVisible,e.labels=this.labels,e.zoomLevel=this.zoomLevel,this.wpTableTimeline.state.putValue(e)},e.prototype.updateLabels=function(e,n){""===n&&(n=null),this.labels[e]=n},e.prototype.ngOnInit=function(){this.timelineVisible=this.wpTableTimeline.isVisible,this.zoomLevel=this.wpTableTimeline.zoomLevel;var e=this.wpTableTimeline.labels;this.labels=_.clone(e),this.availableLabels=Object.keys(this.labels);var n=this.wpTableColumns.allPropertyColumns.sort(function(e,n){return e.name.localeCompare(n.name)});this.availableAttributes=[{id:"",name:this.text.labels.none}].concat(n)},e}(),_n=function(){function e(e,n,t,l,i,o){this.injector=e,this.I18n=n,this.states=t,this.tableState=l,this.Banners=i,this.wpTableHighlight=o,this.highlightingMode="inline",this.entireRowMode=!1,this.lastEntireRowAttribute="status",this.eeShowBanners=!1,this.availableMappedHighlightedAttributes=[],this.selectedAttributes=[],this.text={title:this.I18n.t("js.work_packages.table_configuration.highlighting"),highlighting_mode:{description:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.description"),none:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.none"),inline:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.inline"),inline_all_attributes:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.inline_all"),status:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.status"),type:this.I18n.t("js.work_packages.properties.type"),priority:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.priority"),entire_row_by:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.entire_row_by")},upsaleEnterpriseOnly:this.I18n.t("js.upsale.ee_only"),upsaleAttributeHighlighting:this.I18n.t("js.work_packages.table_configuration.upsale.attribute_highlighting"),upsaleCheckOutLink:this.I18n.t("js.work_packages.table_configuration.upsale.check_out_link")}}return e.prototype.onSave=function(){var e=this.highlightingMode,n=this.selectedAttributesAsHal(),t=new nn(e,n);this.wpTableHighlight.update(t)},e.prototype.selectedAttributesAsHal=function(){return this.isAllOptionSelected()?[]:this.multiToggleValuesToHal(this.selectedAttributes)},e.prototype.multiToggleValuesToHal=function(e){var n=this;return e.map(function(e){return _.find(n.availableHighlightedAttributes,function(n){return n.href===e.value})})},e.prototype.isAllOptionSelected=function(){return 1===this.selectedAttributes.length&&"all"===_.get(this.selectedAttributes[0],"value")},e.prototype.updateMode=function(e){this.highlightingMode="entire-row"===e?this.lastEntireRowAttribute:e,-1!==["status","priority","type"].indexOf(this.highlightingMode)?(this.lastEntireRowAttribute=this.highlightingMode,this.entireRowMode=!0):this.entireRowMode=!1},e.prototype.disabledValue=function(e){return e?"disabled":null},e.prototype.ngOnInit=function(){this.availableMappedHighlightedAttributes=[this.allAttributesOption].concat(this.getAvailableAttributes()),this.setSelectedValues(),this.eeShowBanners=this.Banners.eeShowBanners,this.updateMode(this.wpTableHighlight.current.mode),this.eeShowBanners&&this.updateMode("none")},e.prototype.setSelectedValues=function(){var e=this.wpTableHighlight.current.selectedAttributes;this.selectedAttributes=void 0===e?[this.allAttributesOption]:this.mapAttributes(e)},Object.defineProperty(e.prototype,"availableHighlightedAttributes",{get:function(){return this.tableState.queryForm.value.schema.highlightedAttributes.allowedValues},enumerable:!0,configurable:!0}),e.prototype.getAvailableAttributes=function(){return this.mapAttributes(this.availableHighlightedAttributes)},e.prototype.mapAttributes=function(e){return e.map(function(e){return{name:e.name,value:e.$href}})},Object.defineProperty(e.prototype,"allAttributesOption",{get:function(){return{name:this.text.highlighting_mode.inline_all_attributes,singleOnly:!0,selectWhenEmptySelection:!0,value:"all"}},enumerable:!0,configurable:!0}),e}(),Sn=function(){function e(e){this.I18n=e,this._tabs=[{name:"columns",title:this.I18n.t("js.label_columns"),componentClass:wn},{name:"filters",title:this.I18n.t("js.work_packages.query.filters"),componentClass:Cn},{name:"sort-by",title:this.I18n.t("js.label_sort_by"),componentClass:In},{name:"display-settings",title:this.I18n.t("js.work_packages.table_configuration.display_settings"),componentClass:bn},{name:"highlighting",title:this.I18n.t("js.work_packages.table_configuration.highlighting"),componentClass:_n},{name:"timelines",title:this.I18n.t("js.timelines.gantt_chart"),componentClass:jn}]}return Object.defineProperty(e.prototype,"tabs",{get:function(){return this._tabs},enumerable:!0,configurable:!0}),e}(),Rn=function(){function e(e,n,t,l,i){this.availableTabs=e,this.outletElement=n,this.componentFactoryResolver=t,this.appRef=l,this.injector=i,this.activeTabs={},this.currentTab=null}return Object.defineProperty(e.prototype,"activeComponents",{get:function(){return _.values(this.activeTabs).map(function(e){return e.componentRef.instance})},enumerable:!0,configurable:!0}),e.prototype.switchTo=function(e){var n=_.find(this.availableTabs,function(n){return n.name===e});if(!n)throw"Trying to swtich to unknown tab "+e+".";if(null!=n.disableBecause)return!1;this.detach();var t=this.activateInstance(n);return this.outletElement.innerHTML="",this.outletElement.appendChild(this._getComponentRootNode(t.componentRef)),this.currentTab=t,!1},e.prototype.detach=function(){var e=this.currentTab;null!==e&&(e.portal.setAttachedHost(null),this.currentTab=null)},e.prototype.dispose=function(){_.each(this.activeTabs,function(e){return e.dispose()}),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)},e.prototype.activateInstance=function(e){return this.activeTabs[e.name]||(this.activeTabs[e.name]=this.createComponent(e)),this.activeTabs[e.name]||null},e.prototype.createComponent=function(e){var n=this,t=this.componentFactoryResolver.resolveComponentFactory(e.componentClass).create(this.injector),l=new c.a(e.componentClass,null,this.injector);return this.appRef.attachView(t.hostView),{name:e.name,portal:l,componentRef:t,dispose:function(){n.appRef.detachView(t.hostView),t.destroy()}}},e.prototype._getComponentRootNode=function(e){return e.hostView.rootNodes[0]},e}(),Tn=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(e){var n={name:e.name||"!!!__O__o__O__!!!"};return e.project&&(n._links={project:{href:e.project.$href}}),e.$links.update(n)},e.prototype.loadWithParams=function(e,n,t){var l={};n||(l.name="!!!__O__o__O__!!!"),t&&(l._links={project:{href:this.pathHelper.api.v3.projects.id(t).toString()}});var i=this.pathHelper.api.v3.queries.optionalId(n).form.toString();return i=URI(i).search(e).toString(),this.halResourceService.post(i,l).toPromise()},e}(),xn=new l.InjectionToken("WpTableConfigurationModalPrependComponent"),En=function(e){function n(n,t,i,o,r,a,u,s,c,d,p,h,f,g,m,v){var y=e.call(this,n,g,v)||this;return y.locals=n,y.prependModalComponent=t,y.I18n=i,y.wpTableConfigurationService=o,y.injector=r,y.appRef=a,y.componentFactoryResolver=u,y.loadingIndicator=s,y.tableState=c,y.queryFormDm=d,y.wpStatesInitialization=p,y.wpNotificationsService=h,y.wpTableColumns=f,y.cdRef=g,y.ConfigurationService=m,y.elementRef=v,y.closeOnEscape=!1,y.closeOnOutsideClick=!1,y.text={title:y.I18n.t("js.work_packages.table_configuration.modal_title"),closePopup:y.I18n.t("js.close_popup_title"),columnsLabel:y.I18n.t("js.label_columns"),selectedColumns:y.I18n.t("js.description_selected_columns"),multiSelectLabel:y.I18n.t("js.work_packages.label_column_multiselect"),applyButton:y.I18n.t("js.modals.button_apply"),cancelButton:y.I18n.t("js.modals.button_cancel"),upsaleRelationColumns:y.I18n.t("js.modals.upsale_relation_columns"),upsaleRelationColumnsLink:y.I18n.t("js.modals.upsale_relation_columns_link")},y.onDataUpdated=new l.EventEmitter,y.impaired=y.ConfigurationService.accessibilityModeEnabled(),y.selectedColumnMap={},y}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.tabPortalHost=new Rn(this.wpTableConfigurationService.tabs,this.tabContentOutlet.nativeElement,this.componentFactoryResolver,this.appRef,this.injector),this.loadingIndicator.indicator("modal").promise=this.loadForm().then(function(){var n=e.locals.initialTab||e.availableTabs[0].name;e.switchTo(n)})},n.prototype.ngOnDestroy=function(){this.onDataUpdated.complete(),this.tabPortalHost.dispose()},Object.defineProperty(n.prototype,"availableTabs",{get:function(){return this.tabPortalHost.availableTabs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentTab",{get:function(){return this.tabPortalHost.currentTab},enumerable:!0,configurable:!0}),n.prototype.switchTo=function(e){this.tabPortalHost.switchTo(e)},n.prototype.saveChanges=function(){this.tabPortalHost.activeComponents.forEach(function(e){e.onSave()}),this.onDataUpdated.emit(),this.service.close()},n.prototype.onClose=function(){return this.afterFocusOn.focus(),!0},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return this.$element},enumerable:!0,configurable:!0}),n.prototype.loadForm=function(){var e=this,n=this.tableState.query.value;return this.queryFormDm.load(n).then(function(t){return e.wpStatesInitialization.updateStatesFromForm(n,t),t}).catch(function(n){return e.wpNotificationsService.handleRawError(n)})},n}(yn.a),On=t("IaZ+"),Dn=function(){return function(e){var n=this;this.providedConfig=e,this.tableVisible=!0,this.actionsColumnEnabled=!0,this.contextMenuEnabled=!0,this.columnMenuEnabled=!0,this.projectContext=!0,this.projectIdentifier=null,this.inlineCreateEnabled=!0,this.hierarchyToggleEnabled=!0,this.isEmbedded=!1,_.each(e,function(e,t){n[t]=e})}}(),Fn=function(){function e(e,n,t,l,i,o,r){this.QueryDm=e,this.tableState=n,this.I18n=t,this.urlParamsHelper=l,this.loadingIndicatorService=i,this.wpStatesInitialization=o,this.currentProject=r,this.uniqueEmbeddedTableName="embedded-table-"+Date.now(),this.initialLoadingIndicator=!0,this.tableInformationLoaded=!1,this.showTablePagination=!1,this.error=null}return e.prototype.ngOnInit=function(){this.configuration=new Dn(this.providedConfiguration),this.configuration.isEmbedded=!0},e.prototype.ngAfterViewInit=function(){var e=this;this.refresh(this.initialLoadingIndicator),this.tableState.refreshRequired.values$().pipe(Object(an.b)(this)).subscribe(function(){return e.refresh(!1)})},e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"projectIdentifier",{get:function(){return(this.configuration.projectContext?this.currentProject.identifier:this.configuration.projectIdentifier)||void 0},enumerable:!0,configurable:!0}),e.prototype.buildQueryProps=function(){var e=this.tableState.query.value;return this.wpStatesInitialization.applyToQuery(e),this.urlParamsHelper.buildV3GetQueryFromQueryResource(e)},e.prototype.setLoaded=function(){this.tableInformationLoaded=this.configuration.tableVisible},e.prototype.refresh=function(e){return void 0===e&&(e=!0),this.loadQuery(e)},Object.defineProperty(e.prototype,"isInitialized",{get:function(){return!!this.configuration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadingIndicator",{set:function(e){this.configuration.tableVisible&&(this.loadingIndicatorService.indicator(this.uniqueEmbeddedTableName).promise=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryProjectScope",{get:function(){return this.configuration.projectContext?this.projectIdentifier:void 0},enumerable:!0,configurable:!0}),e}(),An=function(e){function n(n,t,l,i,o,r,a,u,s,c,d,p){var h=e.call(this,n,t,o,r,a,d,p)||this;return h.QueryDm=n,h.tableState=t,h.injector=l,h.opModalService=i,h.I18n=o,h.urlParamsHelper=r,h.loadingIndicatorService=a,h.tableActionsService=u,h.wpTableTimeline=s,h.wpTablePagination=c,h.wpStatesInitialization=d,h.currentProject=p,h.queryProps={},h.tableActions=[],h.compactTableStyle=!1,h.tableInformationLoaded=!1,h.showTablePagination=!1,h.error=null,h}return r.d(n,e),n.prototype.ngAfterViewInit=function(){var n,t=this;e.prototype.ngAfterViewInit.call(this),this.tableActions&&(n=this.tableActionsService).setActions.apply(n,this.tableActions),this.tableState.ready.fireOnStateChange(this.wpTablePagination.state,"Query loaded").values$().pipe(Object(an.b)(this),Object(rn.a)(this.tableState.query.values$())).subscribe(function(e){e[0];var n=e[1];t.loadingIndicator=t.QueryDm.loadResults(n,t.wpTablePagination.paginationObject).then(function(e){return t.initializeStates(n,e)})})},n.prototype.openConfigurationModal=function(e){var n=this;this.tableState.query.valuesPromise().then(function(){n.opModalService.show(En,{},n.injector).onDataUpdated.subscribe(e)})},n.prototype.initializeStates=function(e,n){var t=this;this.tableState.ready.doAndTransition("Query loaded",function(){return t.wpStatesInitialization.clearStates(),t.wpStatesInitialization.initializeFromQuery(e,n),t.wpStatesInitialization.updateTableState(e,n),t.tableState.tableRendering.onQueryUpdated.valuesPromise().then(function(){t.showTablePagination=n.total>n.count,t.setLoaded(),t.wpTableTimeline.isVisible&&(t.compactTableStyle=!1)})})},n.prototype.loadQuery=function(e){var n=this;void 0===e&&(e=!0),this.configuration.tableVisible||(this.queryProps.pageSize=1),this.error=null;var t=this.QueryDm.find(this.queryProps,this.queryId,this.queryProjectScope).then(function(e){return n.initializeStates(e,e.results),e}).catch(function(e){n.error=n.I18n.t("js.error.embedded_table_loading",{message:_.get(e,"message",e)})});return e&&(this.loadingIndicator=t),t},n}(Fn),Vn=function(){function e(e){this.locals=e}return e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.embeddedTable.openConfigurationModal(function(){e.service.detach(),e.locals.callback(e.embeddedTable.buildQueryProps())})})},Object.defineProperty(e.prototype,"service",{get:function(){return this.locals.service},enumerable:!0,configurable:!0}),e}(),Mn=new l.InjectionToken("OpQueryConfigurationLocalsToken"),Ln=function(){function e(e,n,t,l,i){this.componentFactoryResolver=e,this.FocusHelper=n,this.appRef=t,this.$transitions=l,this.injector=i}return e.prototype.setupListener=function(){var e=this;jQuery(window).on("op:queryconfiguration:trigger",function(n,t,l){return e.show(t,l),!1})},Object.defineProperty(e.prototype,"bodyPortalHost",{get:function(){if(!this._portalHostElement){var e=this._portalHostElement=document.createElement("div");e.classList.add("op-external-query-configuration--container"),document.body.appendChild(e),this._bodyPortalHost=new c.b(e,this.componentFactoryResolver,this.appRef,this.injector)}return this._bodyPortalHost},enumerable:!0,configurable:!0}),e.prototype.show=function(e,n,t){void 0===t&&(t={}),this.detach();var l=new c.a(this.externalQueryConfigurationComponent(),null,this.injectorFor({callback:n,currentQuery:e,disabledTabs:t}));this.bodyPortalHost.attach(l),this._portalHostElement.style.display="block"},e.prototype.detach=function(){this.bodyPortalHost.hasAttached()&&(this.bodyPortalHost.detach(),this._portalHostElement.style.display="none")},e.prototype.injectorFor=function(e){var n=new WeakMap;return e.service=this,n.set(Mn,e),new c.c(this.injector,n)},e.prototype.externalQueryConfigurationComponent=function(){return Vn},e}(),Nn=function(){function e(e,n,t,l){this.injector=e,this.I18n=n,this.wpTableFilters=t,this.ConfigurationService=l,this.relationFilterIds=["parent","precedes","follows","relates","duplicates","duplicated","blocks","blocked","partof","includes","requires","required"],this.availableRelationFilters=[],this.selectedRelationFilter=void 0,this.text={please_select:this.I18n.t("js.placeholders.selection"),first_part:this.I18n.t("js.work_packages.table_configuration.relation_filters.first_part"),second_part:this.I18n.t("js.work_packages.table_configuration.relation_filters.second_part"),parent:this.I18n.t("js.types.attribute_groups.filter_types.parent"),precedes:this.I18n.t("js.types.attribute_groups.filter_types.precedes"),follows:this.I18n.t("js.types.attribute_groups.filter_types.follows"),relates:this.I18n.t("js.types.attribute_groups.filter_types.relates"),duplicates:this.I18n.t("js.types.attribute_groups.filter_types.duplicates"),duplicated:this.I18n.t("js.types.attribute_groups.filter_types.duplicated"),blocks:this.I18n.t("js.types.attribute_groups.filter_types.blocks"),blocked:this.I18n.t("js.types.attribute_groups.filter_types.blocked"),requires:this.I18n.t("js.types.attribute_groups.filter_types.requires"),required:this.I18n.t("js.types.attribute_groups.filter_types.required"),partof:this.I18n.t("js.types.attribute_groups.filter_types.partof"),includes:this.I18n.t("js.types.attribute_groups.filter_types.includes")}}return e.prototype.ngOnInit=function(){var e=this;this.wpTableFilters.onReady().then(function(){e.availableRelationFilters=e.relationFiltersOf(e.wpTableFilters.currentState.availableFilters),e.setSelectedRelationFilter()})},e.prototype.setSelectedRelationFilter=function(){var e=this.relationFiltersOf(this.wpTableFilters.currentState.current);e.length>0?this.selectedRelationFilter=_.find(this.availableRelationFilters,{id:e[0].id}):this.selectedRelationFilter=this.availableRelationFilters[0],this.onRelationFilterSelected()},e.prototype.onRelationFilterSelected=function(){this.selectedRelationFilter&&(this.removeRelationFiltersFromCurrentState(),this.addFilterToCurrentState(this.selectedRelationFilter))},e.prototype.removeRelationFiltersFromCurrentState=function(){var e=this,n=this.relationFiltersOf(this.wpTableFilters.currentState.current);_.each(n,function(n){return e.wpTableFilters.currentState.remove(n)})},e.prototype.relationFiltersOf=function(e){var n=this;return _.filter(e,function(e){return _.includes(n.relationFilterIds,e.id)})},e.prototype.addFilterToCurrentState=function(e){var n=this.wpTableFilters.currentState.add(e),t=this.getOperatorForId(n,"=");n.operator=t,n.values=[{href:"/api/v3/work_packages/{id}"}]},e.prototype.getOperatorForId=function(e,n){return _.find(e.schema.availableOperators,{id:n})},e.prototype.compareRelationFilters=function(e,n){return e&&n?e.id===n.id:e===n},e}(),$n=Nn,qn=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(Vn),Hn=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.externalQueryConfigurationComponent=function(){return qn},n}(Ln),Bn=function(){function e(){this.hooks={}}return e.prototype.register=function(e,n){n&&(this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(n))},e.prototype.call=function(e){for(var n,t=[],l=1;l<arguments.length;l++)t[l-1]=arguments[l];var i=[];if(this.hooks[e])for(var o=0;o<this.hooks[e].length;o++){var r=(n=this.hooks[e])[o].apply(n,t);r&&i.push(r)}return i},e}(),Wn=t("tG68"),zn=function(){function e(e,n,t,l,i){this.timezoneService=e,this.isReversed=n,this.activities=t,this.activity=l,this.index=i}return e.prototype.number=function(e){return void 0===e&&(e=!1),this.orderedIndex(this.index,e)},Object.defineProperty(e.prototype,"date",{get:function(){return this.activityDate(this.activity)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateOfPrevious",{get:function(){if(this.index>0)return this.activityDate(this.activities[this.index-1])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"href",{get:function(){return this.activity.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this.activity.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNextDate",{get:function(){return this.date!==this.dateOfPrevious},enumerable:!0,configurable:!0}),e.prototype.isInitial=function(e){void 0===e&&(e=!1);var n=this.number(e);if(0!==this.activity._type.indexOf("Activity"))return!1;if(1===n)return!0;for(;--n>0;){var t=this.orderedIndex(n,e)-1,l=this.activities[t];if(!_.isNil(l)&&0===l._type.indexOf("Activity"))return!1}return!0},e.prototype.activityDate=function(e){return moment(e.createdAt).format("LL")},e.prototype.orderedIndex=function(e,n){return void 0===n&&(n=!1),n||this.isReversed?this.activities.length-e:e+1},e}(),Qn=function(){function e(){this.cacheDurationInSeconds=120,this.cache={id:null,state:Object(a.g)()}}return e.prototype.require=function(e,n){var t=this;void 0===n&&(n=!1);var l=e.id.toString(),i=this.cache.state;return(n||this.cache.id!==l)&&i.clear(),this.isCached(l)?Promise.resolve(i.value):(this.cache.id=l,this.cache.state.putFromPromiseIfPristine(function(){return t.load(e)}),this.cache.state.values$().pipe(Object(H.a)(1)).toPromise())},e.prototype.clear=function(e){this.cache.id===e.toString()&&this.cache.state.clear()},e.prototype.isCached=function(e){var n=this.cache.state;return this.cache.id===e&&n.hasValue()&&!n.isValueOlderThan(1e3*this.cacheDurationInSeconds)},e}(),Un=t("f0Wu"),Kn=function(){function e(e,n){this.ConfigurationService=e,this.I18n=n,this.setupLocale()}return e.prototype.setupLocale=function(){Un.locale(I18n.locale)},e.prototype.parseDatetime=function(e,n){var t=Un.utc(e,n);return this.ConfigurationService.isTimezoneSet()&&(t.local(),t.tz(this.ConfigurationService.timezone())),t},e.prototype.parseDate=function(e,n){return Un(e,n)},e.prototype.parseLocalDateTime=function(e,n){var t;return n=n||this.getTimeFormat(),(t=this.ConfigurationService.isTimezoneSet()?Un.tz(e,n,this.ConfigurationService.timezone()):Un(e,n)).utc(),t},e.prototype.parseISODatetime=function(e){return this.parseDatetime(e,"YYYY-MM-DDTHH:mm:ssZ")},e.prototype.parseISODate=function(e){return this.parseDate(e,"YYYY-MM-DD")},e.prototype.formattedDate=function(e){return this.parseDate(e).format(this.getDateFormat())},e.prototype.inThePast=function(e){return this.daysFromToday(e)<=-1},e.prototype.daysFromToday=function(e){var n=this.parseDate(e),t=Un().startOf("day");return n.diff(t,"days")},e.prototype.formattedTime=function(e){return this.parseDatetime(e).format(this.getTimeFormat())},e.prototype.formattedDatetime=function(e){var n=this.formattedDatetimeComponents(e);return n[0]+" "+n[1]},e.prototype.formattedDatetimeComponents=function(e){var n=this.parseDatetime(e);return[n.format(this.getDateFormat()),n.format(this.getTimeFormat())]},e.prototype.toHours=function(e){return Number(Un.duration(e).asHours().toFixed(2))},e.prototype.formattedDuration=function(e){return this.I18n.t("js.units.hour",{count:this.toHours(e)})},e.prototype.formattedISODate=function(e){return this.parseDate(e).format("YYYY-MM-DD")},e.prototype.formattedISODateTime=function(e){return e.format()},e.prototype.isValidISODate=function(e){return this.isValid(e,"YYYY-MM-DD")},e.prototype.isValidISODateTime=function(e){return this.isValid(e,"YYYY-MM-DDTHH:mm:ssZ")},e.prototype.isValid=function(e,n){var t=n||this.getDateFormat();return Un(e,[t],!0).isValid()},e.prototype.getDateFormat=function(){return this.ConfigurationService.dateFormatPresent()?this.ConfigurationService.dateFormat():"L"},e.prototype.getTimeFormat=function(){return this.ConfigurationService.timeFormatPresent()?this.ConfigurationService.timeFormat():"LT"},e}(),Yn=function(e){function n(n,t){var l=e.call(this)||this;return l.ConfigurationService=n,l.timezoneService=t,l}return r.d(n,e),Object.defineProperty(n.prototype,"order",{get:function(){return this.isReversed?"desc":"asc"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isReversed",{get:function(){return this.ConfigurationService.commentsSortedInDescendingOrder()},enumerable:!0,configurable:!0}),n.prototype.load=function(e){var n=this,t=[],l=[],i=function(e){t.push(e.elements)};return l.push(e.activities.$update().then(i)),e.revisions&&l.push(e.revisions.$update().then(i)),Promise.all(l).then(function(){return n.sortedActivityList(t)})},n.prototype.sortedActivityList=function(e,n){void 0===n&&(n="createdAt");var t=_.sortBy(_.flatten(e),n);return this.isReversed?t.reverse():t},n.prototype.info=function(e,n,t){return new zn(this.timezoneService,this.isReversed,e,n,t)},n}(Qn),Gn=new l.InjectionToken("IWorkPackageCreateService"),Zn=new l.InjectionToken("IWorkPackageEditingService"),Jn=function(){function e(e,n,t){this.injector=e,this.workPackage=n,this.wpNotificationsService=this.injector.get(Ze),this.schemaCacheService=this.injector.get(xe),this.wpCacheService=this.injector.get(Oe),this.wpCreate=this.injector.get(Gn),this.wpEditing=this.injector.get(Zn),this.wpActivity=this.injector.get(Yn),this.halResourceService=this.injector.get(ee),this.changes={},this.inFlight=!1,void 0!==t&&(this.wpForm=t)}return e.prototype.reset=function(e){delete this.changes[e],this.buildResource()},e.prototype.clear=function(){this.changes={},this.resetForm()},e.prototype.resetForm=function(){this.wpForm=void 0,this.wpFormPromise=void 0},Object.defineProperty(e.prototype,"empty",{get:function(){return _.isEmpty(this.changes)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changedAttributes",{get:function(){return _.keys(this.changes)},enumerable:!0,configurable:!0}),e.prototype.value=function(e){return this.isOverridden(e)?this.changes[e]:this.workPackage[e]},e.prototype.setValue=function(e,n){this.changes[e]=n,!this.workPackage.isNew||"project"!==e&&"type"!==e||this.updateForm()},e.prototype.isOverridden=function(e){return this.changes.hasOwnProperty(e)},e.prototype.getForm=function(){return this.wpForm?Promise.resolve(this.wpForm):(this.wpFormPromise=this.wpFormPromise||this.updateForm(),this.wpFormPromise)},e.prototype.updateForm=function(){var e=this,n=this.buildPayloadFromChanges();return this.workPackage.$links.update(n).then(function(n){return e.wpForm=n,e.buildResource(),n}).catch(function(n){throw e.resetForm(),n})},e.prototype.save=function(){var e=this;this.inFlight=!0;var n=this.workPackage.isNew,t=new Promise(function(t,l){e.updateForm().then(function(i){var o=e.buildPayloadFromChanges(),r=i.getErrors();if(null!==r)return l(r);e.workPackage.$links.updateImmediately(o).then(function(l){e.schemaCacheService.ensureLoaded(l).then(function(){l.retainFrom(e.workPackage),e.workPackage=l,n&&(e.workPackage.overriddenSchema=void 0,e.wpCreate.newWorkPackageCreated(e.workPackage)),e.wpActivity.clear(e.workPackage.id),e.workPackage.parent&&e.wpCacheService.loadWorkPackage(e.workPackage.parent.id.toString(),!0),e.wpCacheService.updateWorkPackage(e.workPackage),e.resource=null,e.clear(),t(e.workPackage)})}).catch(function(n){e.buildResource(),l(n)}).catch(l)})});return t.then(function(){return e.inFlight=!1}).catch(function(){return e.inFlight=!1}),t},e.prototype.mergeWithPayload=function(e){var n=this,t=this.workPackage.$source;return this.wpForm&&(t=this.wpForm.payload.$source),_.each(this.changes,function(l,i){var o=n.schema[i];"object"==typeof o&&!0===o.writable?t._links[i]?e._links[i]=n.getLinkedValue(l,o):e[i]=n.changes[i]:Object(Ee.a)("Trying to write "+i+" but is not writable in schema")}),e},e.prototype.buildPayloadFromChanges=function(){var e;return this.workPackage.isNew?(e=this.wpForm?this.wpForm.payload.$source:this.workPackage.$source)._links.attachments=this.workPackage.attachments.elements.map(function(e){return{href:e.href}}):e=this.minimalPayload,this.mergeWithPayload(e)},Object.defineProperty(e.prototype,"minimalPayload",{get:function(){return{lockVersion:this.workPackage.lockVersion,_links:{}}},enumerable:!0,configurable:!0}),e.prototype.getLinkedValue=function(e,n){if(_.isNil(e))return{href:null};var t=(n.type||"").startsWith("[]"),l=!1;if((e.forEach||e.elements)&&(l=!0),l&&t){var i=[];if(e)(e.forEach&&e||e.elements).forEach(function(e){e.href&&i.push({href:e.href})});return i}return{href:_.get(e,"href",null)}},Object.defineProperty(e.prototype,"schema",{get:function(){return(this.wpForm||this.workPackage).schema},enumerable:!0,configurable:!0}),e.prototype.getSchemaName=function(e){return!this.schema.hasOwnProperty("date")||"startDate"!==e&&"dueDate"!==e?e:"date"},e.prototype.buildResource=function(){if(this.empty)return this.resource=null,void this.wpEditing.updateValue(this.workPackage.id,this);this.wpForm;var e=this.workPackage.$source,n=this.halResourceService.createHalResourceOfType("WorkPackage",this.mergeWithPayload(e));n.overriddenSchema=this.schema,this.resource=n,this.wpEditing.updateValue(this.workPackage.id,this)},e}(),Xn=function(){function e(e,n,t,l,i){this.injector=e,this.hooks=n,this.wpCacheService=t,this.halResourceService=l,this.apiWorkPackages=i,this.newWorkPackageCreatedSubject=new x.a}return e.prototype.newWorkPackageCreated=function(e){this.newWorkPackageCreatedSubject.next(e)},e.prototype.onNewWorkPackage=function(){return this.newWorkPackageCreatedSubject.asObservable()},e.prototype.createNewWorkPackage=function(e){var n=this;return this.getEmptyForm(e).then(function(e){return n.fromCreateForm(e)})},e.prototype.createNewTypedWorkPackage=function(e,n){var t=this;return this.apiWorkPackages.typedCreateForm(n,e).then(function(e){return t.fromCreateForm(e)})},e.prototype.fromCreateForm=function(e){var n=this.halResourceService.createHalResourceOfType("WorkPackage",e.payload.$plain());n.initializeNewResource(e);var t=new Jn(this.injector,n,e);return this.hooks.call("workPackageNewInitialization",t),t},e.prototype.copyFrom=function(e,n){var t=this.halResourceService.createHalResourceOfType("WorkPackage",e.payload.$plain());return t.lockVersion=n.payload.lockVersion,t.initializeNewResource(n),new Jn(this.injector,t,n)},e.prototype.copyWorkPackage=function(e,n){var t=this,l=e.payload.$source;return this.apiWorkPackages.emptyCreateForm(l,n).then(function(n){return t.copyFrom(e,n)})},e.prototype.getEmptyForm=function(e){return this.form||(this.form=this.apiWorkPackages.emptyCreateForm({},e)),this.form},e}(),et=function(e){function n(n,t,l,i,o,r){var a=e.call(this,t,o,n)||this;return a.elementRef=n,a.locals=t,a.wpCreate=l,a.currentProject=i,a.cdRef=o,a.I18n=r,a.changed=!1,a.showClose=!0,a.closeOnEscape=!0,a.closeOnOutsideClick=!0,a.type="",a.classes="",a.text={title:a.I18n.t("js.editor.macro.work_package_button.button"),none:a.I18n.t("js.label_none"),selected_type:a.I18n.t("js.editor.macro.work_package_button.type"),button_style:a.I18n.t("js.editor.macro.work_package_button.button_style"),button_style_hint:a.I18n.t("js.editor.macro.work_package_button.button_style_hint"),button_save:a.I18n.t("js.button_save"),button_cancel:a.I18n.t("js.button_cancel"),close_popup:a.I18n.t("js.close_popup_title")},a.selectedType=a.type=a.locals.type,a.classes=a.locals.classes,a.buttonStyle="button"===a.classes,a.wpCreate.getEmptyForm(a.currentProject.identifier).then(function(e){a.availableTypes=e.schema.type.allowedValues}),a}return r.d(n,e),n.prototype.applyAndClose=function(e){this.changed=!0,this.classes=this.buttonStyle?"button":"",this.type=this.selectedType,this.closeMe(e)},n.prototype.ngAfterViewInit=function(){this.typeSelect.nativeElement.focus()},n}(yn.a),nt=function(e){function n(n,t,l,i){var o=e.call(this,t,l,n)||this;return o.elementRef=n,o.locals=t,o.cdRef=l,o.I18n=i,o.changed=!1,o.showClose=!0,o.closeOnEscape=!0,o.closeOnOutsideClick=!0,o.page="",o.text={title:o.I18n.t("js.editor.macro.wiki_page_include.button"),hint:o.I18n.t("js.editor.macro.wiki_page_include.hint"),page:o.I18n.t("js.editor.macro.wiki_page_include.page"),button_save:o.I18n.t("js.button_save"),button_cancel:o.I18n.t("js.button_cancel"),close_popup:o.I18n.t("js.close_popup_title")},o.selectedPage=o.page=o.locals.page,o}return r.d(n,e),n.prototype.applyAndClose=function(e){this.changed=!0,this.page=this.selectedPage,this.closeMe(e)},n.prototype.ngAfterViewInit=function(){this.selectedPageInput.nativeElement.focus()},n}(yn.a),tt=function(e){function n(n,t,l,i){var o=e.call(this,t,l,n)||this;o.elementRef=n,o.locals=t,o.cdRef=l,o.I18n=i,o.changed=!1,o.showClose=!0,o.closeOnEscape=!0,o.closeOnOutsideClick=!0,o._language="",o.debouncedLanguageLoader=_.debounce(function(){return o.loadLanguageAsMode(o.language)},300),o.text={title:o.I18n.t("js.editor.macro.code_block.title"),language:o.I18n.t("js.editor.macro.code_block.language"),language_hint:o.I18n.t("js.editor.macro.code_block.language_hint"),button_save:o.I18n.t("js.button_save"),button_cancel:o.I18n.t("js.button_cancel"),close_popup:o.I18n.t("js.close_popup_title")},o.languageClass=t.languageClass||"language-text",o.content=t.content;var r=o.languageClass.match(/language-(\w+)/);return o.language=r?r[1]:"text",o}return r.d(n,e),n.prototype.applyAndClose=function(e){this.content=this.codeMirrorInstance.getValue();var n=this.language||"text";this.languageClass="language-"+n,this.changed=!0,this.closeMe(e)},n.prototype.ngAfterViewInit=function(){var e=this;Promise.all([t.e(1),t.e(0)]).then(t.t.bind(null,"VrN/",7)).then(function(n){var t=n.default;e.codeMirrorInstance=t.fromTextArea(e.codeMirrorPane.nativeElement,{lineNumbers:!0,smartIndent:!0,autofocus:!0,value:e.content,mode:""})})},Object.defineProperty(n.prototype,"language",{get:function(){return this._language},set:function(e){this._language=e,this.debouncedLanguageLoader()},enumerable:!0,configurable:!0}),n.prototype.loadLanguageAsMode=function(e){var n=this;if(!e||"text"===e)return this.updateCodeMirrorMode("");t("ZXPj")("./"+e+"/"+e).then(function(){n.updateCodeMirrorMode(e)}).catch(function(t){console.error("Failed to load language "+e+": "+t),n.updateCodeMirrorMode("")})},n.prototype.updateCodeMirrorMode=function(e){var n=this.codeMirrorInstance;n&&n.setOption("mode",e)},n.prototype.updateLanguage=function(e){e?e.match(/^\w+$/)?this.language=e:console.error("Not updating non-matching language: "+e):this.language=""},n}(yn.a),lt=function(e){function n(n,t,l,i){var o=e.call(this,t,l,n)||this;return o.elementRef=n,o.locals=t,o.cdRef=l,o.I18n=i,o.changed=!1,o.showClose=!0,o.closeOnEscape=!0,o.closeOnOutsideClick=!0,o.page="",o.includeParent=!1,o.text={title:o.I18n.t("js.editor.macro.child_pages.button"),hint:o.I18n.t("js.editor.macro.child_pages.hint"),page:o.I18n.t("js.editor.macro.child_pages.page"),include_parent:o.I18n.t("js.editor.macro.child_pages.include_parent"),button_save:o.I18n.t("js.button_save"),button_cancel:o.I18n.t("js.button_cancel"),close_popup:o.I18n.t("js.close_popup_title")},o.selectedPage=o.page=o.locals.page,o.selectedIncludeParent=o.includeParent=o.locals.includeParent,o}return r.d(n,e),n.prototype.applyAndClose=function(e){this.changed=!0,this.page=this.selectedPage,this.includeParent=this.selectedIncludeParent,this.closeMe(e)},n.prototype.ngAfterViewInit=function(){this.selectedPageInput.nativeElement.focus()},n.prototype.updateIncludeParent=function(e){this.selectedIncludeParent=e},n}(yn.a),it=function(){function e(e){this.opModalService=e}return e.prototype.configureWorkPackageButton=function(e,n){var t=this;return new Promise(function(l,i){t.opModalService.show(et,{type:e,classes:n}).closingEvent.subscribe(function(e){e.changed&&l({type:e.type,classes:e.classes})})})},e.prototype.configureWikiPageInclude=function(e){var n=this;return new Promise(function(t,l){var i=e||"";n.opModalService.show(nt,{page:i}).closingEvent.subscribe(function(e){e.changed&&t(e.page)})})},e.prototype.editCodeBlock=function(e,n){var t=this;return new Promise(function(l,i){t.opModalService.show(tt,{content:e,languageClass:n}).closingEvent.subscribe(function(e){e.changed&&l({languageClass:e.languageClass,content:e.content})})})},e.prototype.configureChildPages=function(e,n){var t=this;return new Promise(function(l,i){t.opModalService.show(lt,{page:e,includeParent:n}).closingEvent.subscribe(function(e){e.changed&&l({page:e.page,includeParent:e.includeParent})})})},e}(),ot=t("E+lO"),rt=new u,at=function(){function e(){}return e.prototype.ngDoBootstrap=function(e){ot.DynamicBootstrapper.bootstrapOptionalDocument(e,document),e._injector.get(Bn).call("openProjectAngularBootstrap").forEach(function(n){ot.DynamicBootstrapper.bootstrapOptionalDocument(e,document,n)})},e}();function ut(e){return function(){var n=e.get(Ln),t=e.get(Hn),l=e.get(Wn.ModalWrapperAugmentService);e.get(it);l.setupListener(),n.setupListener(),t.setupListener()}}var st=t("VDQ+"),ct=function(){function e(e){this.timezoneService=e}return e.prototype.ngOnInit=function(){var e=this.timezoneService.formattedDatetimeComponents(this.dateTimeValue);this.date=e[0],this.time=e[1]},e}(),dt=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function pt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"span",[],[[8,"title",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\xa0"])),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](2,"",t.date," ",t.time,"")),e(n,1,0,t.date),e(n,4,0,t.time)})}var ht=l["\u0275ccf"]("op-date-time",ct,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-date-time",[],null,null,null,pt,dt)),l["\u0275did"](1,114688,null,0,ct,[Kn],null,null)],function(e,n){e(n,1,0)},null)},{dateTimeValue:"dateTimeValue"},{},[]),ft=function(){function e(e,n,t,l){this.NotificationsService=e,this.elementRef=n,this.I18n=t,this.ConfigurationService=l}return e.prototype.ngOnInit=function(){var e=this,n=this.elementRef.nativeElement;this.clickTarget=n.getAttribute("click-target"),this.clipboardTarget=n.getAttribute("clipboard-target"),jQuery(this.clickTarget).on("click",function(n){return e.onClick(n)}),n.classList.add("copy-to-clipboard"),this.target=jQuery(this.clipboardTarget?this.clipboardTarget:n)},e.prototype.addNotification=function(e,n){var t=this,l=this.NotificationsService[e](n);this.ConfigurationService.accessibilityModeEnabled()||setTimeout(function(){return t.NotificationsService.remove(l)},5e3)},e.prototype.onClick=function(e){var n=document.queryCommandSupported&&document.queryCommandSupported("copy");if(e.preventDefault(),this.target.select().focus(),n)try{if(document.execCommand("copy"))return void this.addNotification("addSuccess",this.I18n.t("js.clipboard.copied_successful"))}catch(t){console.log("Your browser seems to support the clipboard API, but copying failed: "+t)}this.addNotification("addError",this.I18n.t("js.clipboard.browser_error"))},e}();ot.DynamicBootstrapper.register({selector:"copy-to-clipboard",cls:ft});var gt=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function mt(e){return l["\u0275vid"](0,[],null,null)}var vt=l["\u0275ccf"]("copy-to-clipboard",ft,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"copy-to-clipboard",[],null,null,null,mt,gt)),l["\u0275did"](1,114688,null,0,ft,[Ge,l.ElementRef,U.a,Ke],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),yt=t("Ip0R"),bt=function(){return function(){this.iconTitle=""}}(),wt=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function kt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","hidden-for-sighted"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.iconTitle)})}function Ct(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"i",[["aria-hidden","true"]],[[8,"title",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,kt)),l["\u0275did"](3,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.iconClasses),e(n,3,0,t.iconTitle)},function(e,n){e(n,0,0,n.component.iconTitle)})}l["\u0275ccf"]("op-icon",bt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],null,null)],null,null)},{iconClasses:"icon-classes",iconTitle:"icon-title"},{},[]);var Pt=function(){function e(e){this.I18n=e,this.onError=new l.EventEmitter,this.onSuccess=new l.EventEmitter,this.value=0,this.error=!1,this.completed=!1}return e.prototype.ngOnInit=function(){var e=this;this.file=this.upload[0],this.upload[1].pipe(Object(an.b)(this)).subscribe(function(n){switch(n.type){case W.g.Sent:return e.value=5,Object(Ee.a)('Uploading file "'+e.file.name+'" of size '+e.file.size+".");case W.g.UploadProgress:return e.updateProgress(n);case W.g.Response:return Object(Ee.a)("File "+e.fileName+" was fully uploaded."),e.value=100,e.completed=!0,e.onSuccess.emit();default:return}},function(n){return e.handleError(n,e.file)})},e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"fileName",{get:function(){return this.file&&this.file.name},enumerable:!0,configurable:!0}),e.prototype.updateProgress=function(e){e.total?this.value=Math.round(e.loaded/e.total*100):this.value=10},e.prototype.handleError=function(e,n){var t;console.error("Error while uploading: %O",e),t=e.error instanceof ErrorEvent?this.I18n.t("js.error_attachment_upload",{name:n.name,error:e}):e.error,this.error=!0,this.onError.emit(t)},e}(),It=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function jt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-close"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,1,0,"icon-close")},null)}function _t(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-checkmark"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,1,0,"icon-checkmark")},null)}function St(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"span",[["class","upload-completed"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,jt)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,_t)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.error),e(n,4,0,t.completed)},null)}function Rt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[["class","filename"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"progress",[["max","100"]],[[8,"hidden",0],[8,"value",0]],null,null,null,null)),(e()(),l["\u0275ted"](3,null,["","%"])),(e()(),l["\u0275and"](16777216,null,null,1,null,St)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.completed||t.error)},function(e,n){var t=n.component;e(n,1,0,t.fileName),e(n,2,0,t.completed,t.value),e(n,3,0,t.value)})}l["\u0275ccf"]("notifications-upload-progress",Pt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"notifications-upload-progress",[],null,null,null,Rt,It)),l["\u0275did"](1,245760,null,0,Pt,[U.a],null,null)],function(e,n){e(n,1,0)},null)},{upload:"upload"},{onError:"onError",onSuccess:"onSuccess"},[]);var Tt=t("E5Dd"),xt=function(){function e(){this.stopEventPropagation=!0,this.onClick=new l.EventEmitter}return e.prototype.handleClick=function(e){"click"!==e.type&&e.which!==Tt.a.ENTER&&e.which!==Tt.a.SPACE||(this.stopEventPropagation&&(e.preventDefault(),e.stopPropagation()),this.onClick.emit(e))},e}(),Et=function(){function e(){this.execute=new l.EventEmitter}return e.prototype.handleClick=function(e){return this.isDisabled||this.execute.emit(e),!1},e}(),Ot=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Dt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"a",[["href",""],["role","link"]],[[1,"disabled",0],[1,"title",0],[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.handleClick(t)&&i);return i},null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275did"](2,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](3,0,null,null,2,"span",[],null,null,null,null,null)),l["\u0275did"](4,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275ncd"](null,0)],function(e,n){var t=n.component;e(n,1,0,t.linkClass),e(n,4,0,t.spanClass)},function(e,n){var t=n.component;e(n,0,0,t.isDisabled||void 0,t.linkTitle,t.linkAriaLabel)})}l["\u0275ccf"]("accessible-by-keyboard",Et,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"accessible-by-keyboard",[],null,null,null,Dt,Ot)),l["\u0275did"](1,49152,null,0,Et,[],null,null)],null,null)},{isDisabled:"isDisabled",linkClass:"linkClass",linkTitle:"linkTitle",spanClass:"spanClass",linkAriaLabel:"linkAriaLabel"},{execute:"execute"},["*"]);var Ft=function(){function e(e,n){this.I18n=e,this.notificationsService=n,this.text={close_popup:this.I18n.t("js.close_popup_title")},this.uploadCount=0,this.show=!1}return e.prototype.ngOnInit=function(){this.type=this.notification.type},Object.defineProperty(e.prototype,"data",{get:function(){return this.notification.data},enumerable:!0,configurable:!0}),e.prototype.canBeHidden=function(){return this.data&&this.data.length>5},e.prototype.removable=function(){return"upload"!==this.notification.type},e.prototype.remove=function(){this.notificationsService.remove(this.notification)},e.prototype.executeTarget=function(){this.notification.link&&(this.notification.link.target(),this.remove())},e.prototype.onUploadError=function(e){this.remove()},e.prototype.onUploadSuccess=function(){this.uploadCount+=1},Object.defineProperty(e.prototype,"uploadText",{get:function(){return this.I18n.t("js.label_upload_counter",{done:this.uploadCount,count:this.data.length})},enumerable:!0,configurable:!0}),e}(),At=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Vt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"a",[["class","notification-box--target-link"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.executeTarget(t)&&l);return l},null,null))],null,function(e,n){e(n,0,0,n.component.notification.link.text)})}function Mt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"a",[],[[8,"hidden",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!=(i.show=!0)&&l);return l},null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-arrow-right2"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](4,0,null,null,2,"a",[],[[8,"hidden",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!=(i.show=!1)&&l);return l},null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-arrow-down1"]],null,null,null,Ct,wt)),l["\u0275did"](6,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"icon-arrow-right2");e(n,6,0,"icon-arrow-down1")},function(e,n){var t=n.component;e(n,1,0,t.show),e(n,4,0,!t.show),e(n,7,0,t.uploadText)})}function Lt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"notifications-upload-progress",[],null,[[null,"onSuccess"],[null,"onError"]],function(e,n,t){var l=!0,i=e.component;"onSuccess"===n&&(l=!1!==i.onUploadSuccess()&&l);"onError"===n&&(l=!1!==i.onUploadError(t)&&l);return l},Rt,It)),l["\u0275did"](1,245760,null,0,Pt,[U.a],{upload:[0,"upload"]},{onError:"onError",onSuccess:"onSuccess"})],function(e,n){e(n,1,0,n.context.$implicit)},null)}function Nt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ul",[["class","notification-box--uploads"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Lt)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.data)},null)}function $t(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Nt)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.data&&t.data.length>0)},null)}function qt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Mt)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,$t)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.canBeHidden()),e(n,4,0,t.show||!t.canBeHidden())},null)}function Ht(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function Bt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"li",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.context.$implicit)})}function Wt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"ul",[["class","notification-box--errors"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Bt)),l["\u0275did"](3,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,3,0,n.component.data)},null)}function zt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"accessible-by-keyboard",[["linkClass","notification-box--close icon-context icon-close"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.remove()&&l);return l},Dt,Ot)),l["\u0275did"](1,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"]},{execute:"execute"})],function(e,n){e(n,1,0,"notification-box--close icon-context icon-close",n.component.text.close_popup)},null)}function Qt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,16,"div",[["tabindex","0"]],[[8,"className",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,13,"div",[["aria-atomic","true"],["class","notification-box--content"],["role","alert"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Vt)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,7,"div",[],null,null,null,null,null)),l["\u0275did"](8,16384,null,0,yt.n,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,qt)),l["\u0275did"](10,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ht)),l["\u0275did"](12,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Wt)),l["\u0275did"](14,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,zt)),l["\u0275did"](16,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,6,0,t.notification.link),e(n,8,0,t.type);e(n,10,0,"upload");e(n,12,0,"success");e(n,14,0,"error"),e(n,16,0,t.removable())},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"notification-box -",t.type,"")),e(n,3,0,t.notification.message);e(n,4,0," ")})}l["\u0275ccf"]("notification",Ft,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"notification",[],null,null,null,Qt,At)),l["\u0275did"](1,114688,null,0,Ft,[U.a,Ge],null,null)],function(e,n){e(n,1,0)},null)},{notification:"notification"},{},[]);var Ut=function(){function e(e){var n=this;this.notificationsService=e,this.stack=[],e.current.values$("Subscribing to changes in the notification stack").pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(e){return n.stack=e})}return e.prototype.ngOnDestroy=function(){},e}();ot.DynamicBootstrapper.register({selector:"notifications-container",cls:Ut});var Kt=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Yt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"notification",[],null,null,null,Qt,At)),l["\u0275did"](1,114688,null,0,Ft,[U.a,Ge],{notification:[0,"notification"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function Gt(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","notification-box--wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","notification-box--casing"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Yt)),l["\u0275did"](3,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,3,0,n.component.stack)},null)}var Zt=l["\u0275ccf"]("notifications-container",Ut,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"notifications-container",[],null,null,null,Gt,Kt)),l["\u0275did"](1,180224,null,0,Ut,[Ge],null,null)],null,null)},{},{},[]),Jt=function(){function e(e){this.elementRef=e}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.thead=this.$element.parent("colgroup").siblings("thead"),this.thead.on("mouseenter","th",function(n){e.$element.index()===jQuery(n.currentTarget).index()&&e.$element.addClass("hover")}),this.thead.on("mouseleave","th",function(n){e.$element.index()===jQuery(n.currentTarget).index()&&e.$element.removeClass("hover")})},e.prototype.ngOnDestroy=function(){this.thead.off("mouseenter mouseleave")},e}(),Xt={selector:"col[highlight-col]",cls:Jt},el=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function nl(e){return l["\u0275vid"](0,[],null,null)}var tl=l["\u0275ccf"]("col[highlight-col]",Jt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"col",[["highlight-col",""]],null,null,null,nl,el)),l["\u0275did"](1,245760,null,0,Jt,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ll=function(){function e(e){this.elementRef=e}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement),this.$select=jQuery(this.$element.parent().find("select.colors-autocomplete")),this.$select.removeClass("form--select"),this.setupSelect2()},e.prototype.formatter=function(e){var n=jQuery(e.element),t=n.data("color"),l=(n.data("background"),n.data("bright"));if(!t)return jQuery("<div>").append(n.text()).addClass("ui-menu-item-wrapper");var i=jQuery("<span>").addClass("color--preview").css("background-color",t),o=jQuery("<span>").addClass("color--text-preview").css("color",l?"#333333":"#FFFFFF").css("background-color",t).text(n.text());return jQuery("<div>").append(i).append(o).addClass("ui-menu-item-wrapper")},e.prototype.setupSelect2=function(){this.$select.select2({formatResult:this.formatter,formatSelection:this.formatter,escapeMarkup:function(e){return e}})},e}();ot.DynamicBootstrapper.register({selector:"colors-autocompleter",cls:ll});var il=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ol(e){return l["\u0275vid"](0,[],null,null)}var rl=l["\u0275ccf"]("colors-autocompleter",ll,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"colors-autocompleter",[],null,null,null,ol,il)),l["\u0275did"](1,114688,null,0,ll,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),al=function(){function e(e,n){this.paginationService=e,this.I18n=n,this.hideForSinglePageResults=!1,this.updateResults=new l.EventEmitter,this.text={label_previous:this.I18n.t("js.pagination.pages.previous"),label_next:this.I18n.t("js.pagination.pages.next"),per_page:this.I18n.t("js.label_per_page"),no_other_page:this.I18n.t("js.pagination.no_other_page")},this.currentRange="",this.pageNumbers=[],this.postPageNumbers=[],this.prePageNumbers=[],this.perPageOptions=[]}return e.prototype.ngOnInit=function(){var e=this;this.paginationService.loadPaginationOptions().then(function(n){e.perPageOptions=n.perPageOptions,e.newPagination(n)})},e.prototype.newPagination=function(e){this.pagination=new N(1,parseInt(this.totalEntries),e.perPage)},e.prototype.update=function(){this.updateCurrentRangeLabel(),this.updatePageNumbers()},e.prototype.selectPerPage=function(e){this.pagination.perPage=e,this.showPage(1)},e.prototype.showPage=function(e){this.pagination.page=e,this.updateCurrentRangeLabel(),this.updatePageNumbers(),this.onUpdatedPage()},e.prototype.onUpdatedPage=function(){this.updateResults.emit(this.pagination)},Object.defineProperty(e.prototype,"isVisible",{get:function(){return!this.hideForSinglePageResults||this.pagination.total>this.pagination.perPage},enumerable:!0,configurable:!0}),e.prototype.updateCurrentRangeLabel=function(){this.pagination.total?this.currentRange="("+this.pagination.getLowerPageBound()+"\xa0-\xa0"+this.pagination.getUpperPageBound(this.pagination.total)+"/"+this.pagination.total+")":this.currentRange="(0 - 0/0)"},e.prototype.updatePageNumbers=function(){var e=this.paginationService.getMaxVisiblePageOptions(),n=this.paginationService.getOptionsTruncationSize(),t=[],l=this.pagination.perPage,i=this.pagination.page;if(l){for(var o=1;o<=Math.ceil(this.pagination.total/l);o++)t.push(o);var r=i-2*n;0<=r&&r<=1?this.postPageNumbers=this.truncatePageNums(t,t.length>=e+2*n,e+n,t.length,0):(this.prePageNumbers=this.truncatePageNums(t,i>=e,0,Math.min(i-Math.ceil(e/2),t.length-e),n),this.postPageNumbers=this.truncatePageNums(t,t.length>=e+2*n,e,t.length,0))}this.pageNumbers=t},e.prototype.truncatePageNums=function(e,n,t,l,i){if(n){var o=this.paginationService.getOptionsTruncationSize(),r=e.splice(t,l);return r.length>=2*o&&r.splice(i,r.length-o),r}return[]},e}(),ul=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function sl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"li",[["class","pagination--item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(e.context.$implicit)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,xt,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.context.$implicit)})}function cl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,sl)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"li",[["class","pagination--space"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\u2026"]))],function(e,n){e(n,2,0,n.component.prePageNumbers)},null)}function dl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"em",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function pl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(e.parent.context.$implicit)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,xt,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,0,0,n.parent.context.$implicit)})}function hl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","pagination--item pagination-number"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-current":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,dl)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,pl)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.context.$implicit==t.pagination.page);e(n,1,0,"pagination--item pagination-number",l),e(n,4,0,n.context.$implicit==t.pagination.page),e(n,6,0,n.context.$implicit!=t.pagination.page)},null)}function fl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[["class","pagination--space"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\u2026"]))],null,null)}function gl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,hl)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,fl)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.pageNumbers),e(n,4,0,t.postPageNumbers.length)},null)}function ml(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"li",[["class","pagination--item pagination-number"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(e.context.$implicit)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,xt,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.context.$implicit)})}function vl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ml)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,2,0,n.component.postPageNumbers)},null)}function yl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","hidden-for-sighted"],["id","pagination-empty-text"],["tabindex","0"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.no_other_page)})}function bl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"a",[["href",""],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.selectPerPage(e.parent.context.$implicit)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,xt,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function wl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function kl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","pagination--item"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-current":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,bl)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,wl)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.context.$implicit==t.pagination.perPage);e(n,1,0,"pagination--item",l),e(n,4,0,n.context.$implicit!=t.pagination.perPage),e(n,6,0,n.context.$implicit==t.pagination.perPage)},null)}function Cl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","pagination--options"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"ul",[["class","pagination--items"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"li",[["class","pagination--label"]],[[8,"textContent",0],[8,"title",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,kl)),l["\u0275did"](4,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.perPageOptions)},function(e,n){var t=n.component;e(n,2,0,t.text.per_page,l["\u0275inlineInterpolate"](1,"",t.text.per_page,""))})}function Pl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,22,"div",[["class","pagination"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,19,"nav",[["class","pagination--pages"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,18,"ul",[["class","pagination--items"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"li",[["class","pagination--item"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"a",[["href",""],["id","pagination--prev-link"],["rel","prev start"],["role","link"]],[[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(o.pagination.page-1)&&i);return i},null,null)),l["\u0275did"](5,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275ted"](-1,null,["<"])),(e()(),l["\u0275and"](16777216,null,null,1,null,cl)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,gl)),l["\u0275did"](10,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,vl)),l["\u0275did"](12,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](13,0,null,null,3,"li",[["class","pagination--item"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,2,"a",[["class","pagination--next-link"],["href",""],["id","pagination--next-link"],["rel","next"],["role","link"]],[[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,15).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,15).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(o.pagination.page+1)&&i);return i},null,null)),l["\u0275did"](15,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275ted"](-1,null,[">"])),(e()(),l["\u0275eld"](17,0,null,null,3,"li",[["class","pagination--range"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,yl)),l["\u0275did"](20,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Cl)),l["\u0275did"](22,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,8,0,t.prePageNumbers.length>0),e(n,10,0,t.pageNumbers.length>1),e(n,12,0,t.postPageNumbers.length),e(n,20,0,1===t.pageNumbers.length),e(n,22,0,t.perPageOptions.length>0&&t.pagination.total>t.perPageOptions[0])},function(e,n){var t=n.component;e(n,3,0,1==t.pagination.page),e(n,4,0,t.text.label_previous),e(n,13,0,!(t.pagination.total&&t.pagination.page<t.pageNumbers[t.pageNumbers.length-1])),e(n,14,0,t.text.label_next),e(n,18,0,t.currentRange)})}function Il(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Pl)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.pagination&&t.isVisible&&t.pagination.total)},null)}var jl=l["\u0275ccf"]("[tablePagination]",al,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["tablePagination",""]],null,null,null,Il,ul)),l["\u0275did"](1,114688,null,0,al,[le,U.a],null,null)],function(e,n){e(n,1,0)},null)},{totalEntries:"totalEntries",hideForSinglePageResults:"hideForSinglePageResults"},{updateResults:"updateResults"},[]),_l=new l.InjectionToken("CONTEXT_MENU_LOCALS"),Sl=function(){function e(e){this.locals=e,this.items=this.locals.items,this.service=this.locals.service}return e.prototype.handleClick=function(e,n){return!e.disabled&&!e.divider&&(!e.onClick(n)||(this.locals.service.close(),n.preventDefault(),n.stopPropagation(),!1))},e}(),Rl=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Tl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"li",[["class","dropdown-divider"]],null,null,null,null,null))],null,null)}function xl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,1,0,l["\u0275inlineInterpolate"](1,"icon-action-menu ",n.parent.parent.context.$implicit.icon,""))},null)}function El(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){e(n,1,0,l["\u0275inlineInterpolate"](1,"icon-action-menu-post ",n.parent.parent.context.$implicit.postIcon,""),n.parent.parent.context.$implicit.postIconTitle||"")},null)}function Ol(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,8,"a",[["tabindex","0"]],[[1,"href",4],[1,"aria-disabled",0],[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,4).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,4).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.handleClick(e.parent.context.$implicit,t)&&i);return i},null,null)),l["\u0275did"](2,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](3,{inactive:0}),l["\u0275did"](4,16384,null,0,xt,[],{stopEventPropagation:[0,"stopEventPropagation"]},{onClick:"accessibleClick"}),(e()(),l["\u0275and"](16777216,null,null,1,null,xl)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,El)),l["\u0275did"](9,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=l["\u0275inlineInterpolate"](1,"menu-item ",n.parent.context.$implicit.class,""),i=e(n,3,0,n.parent.context.$implicit.disabled);e(n,2,0,t,i);e(n,4,0,!1),e(n,6,0,n.parent.context.$implicit.icon),e(n,9,0,n.parent.context.$implicit.postIcon)},function(e,n){e(n,1,0,n.parent.context.$implicit.href||"",n.parent.context.$implicit.disabled,n.parent.context.$implicit.ariaLabel||n.parent.context.$implicit.linkText),e(n,7,0,n.parent.context.$implicit.linkText)})}function Dl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Tl)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ol)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,2,0,n.context.$implicit.divider&&!n.context.$implicit.hidden),e(n,4,0,!n.context.$implicit.divider&&!n.context.$implicit.hidden)},null)}function Fl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","dropdown-relative dropdown action-menu -overflow-in-view"],["ng-class","{'dropdown-anchor-right': locals.showAnchorRight}"]],[[1,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"ul",[["class","dropdown-menu"],["role","menu"]],null,null,null,null,null)),l["\u0275did"](2,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](3,{"-empty":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Dl)),l["\u0275did"](5,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,0===t.items.length);e(n,2,0,"dropdown-menu",l),e(n,5,0,t.items)},function(e,n){e(n,0,0,n.component.locals.contextMenuId)})}var Al=l["\u0275ccf"]("ng-component",Sl,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Fl,Rl)),l["\u0275did"](1,49152,null,0,Sl,[_l],null,null)],null,null)},{},{},[]),Vl=function(){function e(e){this.I18n=e,this.text={activate:this.I18n.t("js.label_activate"),deactivate:this.I18n.t("js.label_deactivate"),label:this.labelKey?this.I18n.t(this.labelKey):"",buttonText:this.textKey?this.I18n.t(this.textKey):""}}return Object.defineProperty(e.prototype,"label",{get:function(){return this.text.label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonText",{get:function(){return this.text.buttonText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelKey",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textKey",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activationPrefix",{get:function(){return this.isActive()?"":this.text.activate+" "},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deactivationPrefix",{get:function(){return this.isActive()?this.text.deactivate+" ":""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prefix",{get:function(){return this.activationPrefix||this.deactivationPrefix},enumerable:!0,configurable:!0}),e.prototype.isToggle=function(){return!1},e}(),Ml=(function(e){function n(n,t){var l=e.call(this,t)||this;return l.$state=n,l.I18n=t,l}r.d(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return this.activationPrefix+this.text.label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"activeAccessKey",{get:function(){if(!this.isActive())return this.accessKey},enumerable:!0,configurable:!0}),n.prototype.isActive=function(){return this.$state.includes(this.activeState)}}(Vl),t("k7+O")),Ll=function(e){function n(n){var t=e.call(this,n)||this;t.I18n=n,t.buttonId="work-packages-zen-mode-toggle-button",t.buttonClass="toolbar-icon",t.iconClass="icon-zen-mode",t.activateLabel=n.t("js.zen_mode.button_activate"),t.deactivateLabel=n.t("js.zen_mode.button_deactivate");var l=t;return Ml.enabled&&Ml.onchange(function(){Ml.isFullscreen||l.deactivateZenMode()}),t}return r.d(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return this.isActive()?this.deactivateLabel:this.activateLabel},enumerable:!0,configurable:!0}),n.prototype.isToggle=function(){return!0},n.prototype.isActive=function(){return n.inZenMode},n.prototype.deactivateZenMode=function(){n.inZenMode=!1,jQuery("body").removeClass("zen-mode"),this.disabled=!1,Ml.enabled&&Ml.isFullscreen&&Ml.exit()},n.prototype.activateZenMode=function(){n.inZenMode=!0,jQuery("body").addClass("zen-mode"),Ml.enabled&&Ml.request()},n.prototype.performAction=function(e){return n.inZenMode?this.deactivateZenMode():this.activateZenMode(),e.preventDefault(),!1},n.inZenMode=!1,n}(Vl);ot.DynamicBootstrapper.register({selector:"zen-mode-toggle-button",cls:Ll});var Nl=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function $l(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"button",[["type","button"]],[[8,"disabled",0],[1,"id",0],[1,"title",0],[1,"accesskey",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.performAction(t)&&i);return i},null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-active":0}),l["\u0275did"](3,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](4,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Ct,wt)),l["\u0275did"](5,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component,i=l["\u0275inlineInterpolate"](1,"button ",t.buttonClass,""),o=e(n,2,0,t.isActive());e(n,1,0,i,o),e(n,5,0,l["\u0275inlineInterpolate"](1,"",t.iconClass," button--icon"))},function(e,n){var t=n.component;e(n,0,0,t.disabled||!t.isToggle()&&t.isActive(),t.buttonId,t.label,t.accessKey)})}var ql=l["\u0275ccf"]("zen-mode-toggle-button",Ll,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,$l,Nl)),l["\u0275did"](1,49152,null,0,Ll,[U.a],null,null)],null,null)},{},{},[]),Hl=function(){function e(e){this.elementRef=e,this.expanded=!1}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.sectionTitle=e.getAttribute("section-title"),"true"===e.getAttribute("initially-expanded")&&(this.expanded=!0);var n=e.nextElementSibling;this.sectionBody.nativeElement.appendChild(n),n.removeAttribute("hidden")},e.prototype.toggle=function(){this.expanded=!this.expanded},e}();ot.DynamicBootstrapper.register({selector:"collapsible-section-augment",cls:Hl});var Bl=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Wl(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{sectionBody:0}),(e()(),l["\u0275eld"](1,0,null,null,6,"section",[["class","collapsible-section"]],null,null,null,null,null)),l["\u0275did"](2,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](3,{"-expanded":0}),(e()(),l["\u0275eld"](4,0,null,null,2,"accessible-by-keyboard",[["linkClass","collapsible-section--toggle-link"],["spanClass","collapsible-section--legend"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.toggle()&&l);return l},Dt,Ot)),l["\u0275did"](5,49152,null,0,Et,[],{linkClass:[0,"linkClass"],spanClass:[1,"spanClass"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](6,0,null,0,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,[[1,0],["sectionBody",1]],null,0,"div",[["class","collapsible-section--body toggle-slide-animation"]],[[8,"hidden",0]],null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.expanded);e(n,2,0,"collapsible-section",l);e(n,5,0,"collapsible-section--toggle-link","collapsible-section--legend",t.sectionTitle)},function(e,n){var t=n.component;e(n,6,0,t.sectionTitle),e(n,7,0,!t.expanded)})}var zl=l["\u0275ccf"]("collapsible-section-augment",Hl,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"collapsible-section-augment",[],null,null,null,Wl,Bl)),l["\u0275did"](1,114688,null,0,Hl,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Ql=t("zHkY"),Ul="openproject-base",Kl=function(){return function(){}}();ot.DynamicBootstrapper.register({selector:Ul,cls:Kl});var Yl=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Gl(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","openproject-base--ui-view"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,16777216,null,null,1,"ui-view",[],null,null,null,st.c,st.a)),l["\u0275did"](2,245760,null,0,Ql.a,[d.P,"UIView.PARENT_INJECT",l.ViewContainerRef],null,null)],function(e,n){e(n,2,0)},null)}var Zl=l["\u0275ccf"]("openproject-base",Kl,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"openproject-base",[],null,null,null,Gl,Yl)),l["\u0275did"](1,49152,null,0,Kl,[],null,null)],null,null)},{},{},[]),Jl=t("26FU"),Xl=t("Rney"),ei=function(){function e(e){this.elementRef=e}return e.prototype.ngOnInit=function(){var e=this,n=jQuery(this.elementRef.nativeElement),t=new Jl.a(!1);t.pipe(Object(q.a)(Object(an.a)(this)),Object(Xl.a)(50)).subscribe(function(e){n.toggleClass("-focus",e)});n[0].addEventListener("focus",function(){t.next(!0)},!0);n[0].addEventListener("blur",function(){t.next(!1)},!0),setTimeout(function(){n.addClass("focus-within--trigger"),n.find(e.selector).addClass("focus-within--depending")},0)},e.prototype.ngOnDestroy=function(){},e}(),ni=function(){function e(e,n,t){this.PathHelper=e,this.I18n=n,this.timezoneService=t}return e.prototype.ngOnInit=function(){this.createdOnTime=this.timezoneService.parseDatetime(this.createdOn),this.timeago=this.createdOnTime.fromNow(),this.time=this.createdOnTime.format("LLL"),this.userLink=this.PathHelper.userPath(this.author.idFromLink)},e.prototype.activityFromPath=function(e){var n=this.PathHelper.projectActivityPath(this.project);return e&&(n+="?from="+e),n},e}(),ti=[['.timestamp[_ngcontent-%COMP%]:before{content:" ";white-space:pre}']],li=l["\u0275crt"]({encapsulation:0,styles:ti,data:{}});function ii(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.author.name)})}function oi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"a",[],[[1,"href",4],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.userLink,t.author.name)})}function ri(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","timestamp"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"a",[],[[1,"title",0],[1,"href",4],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.time,t.activityFromPath(t.createdOnTime.format("YYYY-MM-DD")),t.timeago)})}function ai(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","timestamp"]],[[8,"textContent",0],[1,"title",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.timeago,t.time)})}function ui(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","authoring-entry"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ii)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,oi)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ri)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ai)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.showAuthorAsLink),e(n,4,0,!t.showAuthorAsLink),e(n,6,0,t.activity),e(n,8,0,!t.activity)},null)}l["\u0275ccf"]("authoring",ni,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"authoring",[],null,null,null,ui,li)),l["\u0275did"](1,114688,null,0,ni,[R,U.a,Kn],null,null)],function(e,n){e(n,1,0)},null)},{createdOn:"createdOn",author:"author",showAuthorAsLink:"showAuthorAsLink",project:"project",activity:"activity"},{},[]);var si=function(){function e(e,n,t,l){var i=this;this.wpNotificationsService=e,this.I18n=n,this.states=t,this.pathHelper=l,this.text={dragHint:this.I18n.t("js.attachments.draggable_hint"),destroyConfirmation:this.I18n.t("js.text_attachment_destroy_confirmation"),removeFile:function(e){return i.I18n.t("js.label_remove_file",e)}}}return e.prototype.setDragData=function(e){var n=this.downloadPath,t=this.draggableHTML(n);e.dataTransfer.setData("text/plain",n),e.dataTransfer.setData("text/html",t.outerHTML),e.dataTransfer.setData("text/uri-list",n),e.dataTransfer.setDragImage(t,0,0)},e.prototype.draggableHTML=function(e){var n;return this.isImage?((n=document.createElement("img")).src=e,n.textContent=this.fileName):((n=document.createElement("a")).href=e,n.textContent=this.fileName),n},Object.defineProperty(e.prototype,"downloadPath",{get:function(){return this.pathHelper.attachmentDownloadPath(this.attachment.id,this.fileName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isImage",{get:function(){var n=this.fileName.split(".").pop()||"";return e.imageFileExtensions.indexOf(n.toLowerCase())>-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileName",{get:function(){var e=this.attachment;return e.fileName||e.customName||e.name},enumerable:!0,configurable:!0}),e.prototype.confirmRemoveAttachment=function(e){return window.confirm(this.text.destroyConfirmation)?(_.pull(this.resource.attachments.elements,this.attachment),this.states.forResource(this.resource).putValue(this.resource),this.selfDestroy&&this.resource.removeAttachment(this.attachment),!1):(e.stopImmediatePropagation(),e.preventDefault(),!1)},e.imageFileExtensions=["jpeg","jpg","gif","bmp","png"],e}(),ci=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function di(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"a",[["class","form--selected-value--remover work-package--atachments--delete-button"],["href",""]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.confirmRemoveAttachment(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-delete"]],null,null,null,Ct,wt)),l["\u0275did"](2,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),l["\u0275pod"](3,{fileName:0})],function(e,n){var t=n.component,l=t.text.removeFile(e(n,3,0,t.attachment.fileName));e(n,2,0,"icon-delete",l)},null)}function pi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"input",[["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"attachments[",t.index,"][id]"),l["\u0275inlineInterpolate"](1,"",t.attachment.id,""))})}function hi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,12,"li",[["class","form--selected-value--container work-package--attachments--draggable-item"],["draggable","true"],["focus-within",""],["focusWithinSelector",".inplace-edit--icon-wrapper"]],[[8,"title",0]],[[null,"dragstart"]],function(e,n,t){var l=!0,i=e.component;"dragstart"===n&&(l=!1!==i.setDragData(t)&&l);return l},null,null)),l["\u0275did"](1,212992,null,0,ei,[l.ElementRef],null,null),(e()(),l["\u0275eld"](2,0,null,null,6,"span",[["class","form--selected-value"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-context icon-attachment"]],null,null,null,Ct,wt)),l["\u0275did"](4,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](5,0,null,null,3,"a",[["class","work-package--attachments--filename"],["rel","noopener"],["target","_blank"]],[[1,"href",4]],null,null,null,null)),(e()(),l["\u0275ted"](6,null,[" "," "])),(e()(),l["\u0275eld"](7,0,null,null,1,"authoring",[["class","work-package--attachments--info"]],null,null,null,ui,li)),l["\u0275did"](8,114688,null,0,ni,[R,U.a,Kn],{createdOn:[0,"createdOn"],author:[1,"author"],showAuthorAsLink:[2,"showAuthorAsLink"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,di)),l["\u0275did"](10,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,pi)),l["\u0275did"](12,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0);e(n,4,0,"icon-context icon-attachment");e(n,8,0,t.attachment.createdAt,t.attachment.author,!1),e(n,10,0,!!t.attachment.$links.delete),e(n,12,0,!t.attachment.container)},function(e,n){var t=n.component;e(n,0,0,t.text.dragHint),e(n,5,0,t.downloadPath||"#"),e(n,6,0,t.attachment.fileName||t.attachment.customName||t.attachment.name)})}l["\u0275ccf"]("attachment-list-item",si,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attachment-list-item",[],null,null,null,hi,ci)),l["\u0275did"](1,49152,null,0,si,[Ze,U.a,u,R],null,null)],null,null)},{resource:"resource",attachment:"attachment",index:"index",selfDestroy:"selfDestroy"},{},[]);var fi=function(){function e(e,n){this.elementRef=e,this.halResourceService=n,this.selfDestroy=!1}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement),this.attachmentsUpdatable&&this.resource.attachments.updateElements()},e.prototype.ngOnChanges=function(){this.attachmentsUpdatable&&this.resource.attachments.updateElements()},Object.defineProperty(e.prototype,"attachmentsUpdatable",{get:function(){return this.resource.attachments&&this.resource.attachmentsBackend},enumerable:!0,configurable:!0}),e}();ot.DynamicBootstrapper.register({selector:"attachment-list",cls:fi});var gi=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function mi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ul",[["class","form--selected-value--list"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"attachment-list-item",[],null,null,null,hi,ci)),l["\u0275did"](2,49152,null,0,si,[Ze,U.a,u,R],{resource:[0,"resource"],attachment:[1,"attachment"],index:[2,"index"],selfDestroy:[3,"selfDestroy"]},null)],function(e,n){var t=n.component;e(n,2,0,t.resource,n.context.$implicit,n.context.index,t.selfDestroy)},null)}function vi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-package--attachments--files"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,mi)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.resource.attachments.elements)},null)}function yi(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,vi)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.resource)},null)}l["\u0275ccf"]("attachment-list",fi,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attachment-list",[],null,null,null,yi,gi)),l["\u0275did"](1,638976,null,0,fi,[l.ElementRef,ee],null,null)],function(e,n){e(n,1,0)},null)},{resource:"resource",selfDestroy:"selfDestroy"},{},[]);var bi=function(){function e(e,n,t,l,i){this.I18n=e,this.ConfigurationService=n,this.notificationsService=t,this.elementRef=l,this.halResourceService=i,this.draggingOver=!1,this.text={uploadLabel:e.t("js.label_add_attachments"),dropFiles:e.t("js.label_drop_files"),dropFilesHint:e.t("js.label_drop_files_hint"),foldersWarning:e.t("js.label_drop_folders_hint")}}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.ConfigurationService.api().then(function(n){e.maxFileSize=n.maximumAttachmentFileSize})},e.prototype.triggerFileInput=function(e){return this.filePicker.nativeElement.click(),e.preventDefault(),e.stopPropagation(),!1},e.prototype.onDropFiles=function(e){e.dataTransfer.dropEffect="copy",e.preventDefault(),e.stopPropagation();for(var n=e.dataTransfer.files,t=n?n.length:0,l=[],i=0;i<t;i++)l.push(n[i]);this.uploadFiles(l),this.draggingOver=!1},e.prototype.onDragOver=function(e){this.containsFiles(e.dataTransfer)&&(e.dataTransfer.dropEffect="copy",this.draggingOver=!0),e.preventDefault(),e.stopPropagation()},e.prototype.onDragLeave=function(e){this.draggingOver=!1,e.preventDefault(),e.stopPropagation()},e.prototype.onFilePickerChanged=function(){var e=Array.from(this.filePicker.nativeElement.files);this.uploadFiles(e)},e.prototype.containsFiles=function(e){return e.types.contains?e.types.contains("Files"):e.types.indexOf("Files")>=0},e.prototype.uploadFiles=function(e){var n=(e=e||[]).length;0!==(e=this.filterFolders(e)).length?this.resource.uploadAttachments(e):n>0&&this.notificationsService.addNotice(this.text.foldersWarning)},e.prototype.filterFolders=function(e){return e.filter(function(e){return""!==e.type||(e.size%4096!=0||(console.warn("Skipping file because of file size ("+e.size+") %O",e),!1))})},e}(),wi=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ki(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,12,"div",[["class","wp-attachment-upload hide-when-print"]],[[1,"aria-label",0]],[[null,"drop"],[null,"dragover"],[null,"dragleave"]],function(e,n,t){var l=!0,i=e.component;"drop"===n&&(l=!1!==i.onDropFiles(t)&&l);"dragover"===n&&(l=!1!==i.onDragOver(t)&&l);"dragleave"===n&&(l=!1!==i.onDragLeave(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,[[1,0],["hiddenFileInput",1]],null,0,"input",[["hidden",""],["id","attachment_files"],["multiple",""],["name","attachment_files"],["type","file"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.onFilePickerChanged()&&l);return l},null,null)),(e()(),l["\u0275eld"](2,0,null,null,10,"div",[["class","work-package--attachments--drop-box"],["tabindex","0"]],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.triggerFileInput(t)&&i);return i},null,null)),l["\u0275did"](3,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](4,{"-dragging":0}),l["\u0275did"](5,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](6,0,null,null,6,"div",[["class","work-package--attachments--label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-attachment"]],null,null,null,Ct,wt)),l["\u0275did"](8,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](9,0,null,null,3,"label",[["for","attachment_files"]],null,null,null,null,null)),(e()(),l["\u0275ted"](10,null,[" "," "])),(e()(),l["\u0275eld"](11,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["\u0275ted"](12,null,[" "," "]))],function(e,n){var t=e(n,4,0,n.component.draggingOver);e(n,3,0,"work-package--attachments--drop-box",t);e(n,8,0,"icon-attachment")},function(e,n){var t=n.component;e(n,0,0,t.text.uploadLabel),e(n,10,0,t.text.dropFiles),e(n,12,0,t.text.dropFilesHint)})}function Ci(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{filePicker:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,ki)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.resource.canAddAttachments)},null)}l["\u0275ccf"]("attachments-upload",bi,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attachments-upload",[],null,null,null,Ci,wi)),l["\u0275did"](1,114688,null,0,bi,[U.a,Ke,Ge,l.ElementRef,ee],null,null)],function(e,n){e(n,1,0)},null)},{resource:"resource"},{},[]);var Pi=function(){function e(e,n,t,l){this.elementRef=e,this.I18n=n,this.states=t,this.halResourceService=l,this.text={attachments:this.I18n.t("js.label_attachments")}}return e.prototype.ngOnInit=function(){if(this.$element=jQuery(this.elementRef.nativeElement),!this.resource){var e=this.$element.data("resource");this.resource=this.halResourceService.createHalResource(e,!0)}this.allowUploading=this.$element.data("allow-uploading"),void 0!==this.$element.data("destroy-immediately")?this.destroyImmediately=this.$element.data("destroy-immediately"):this.destroyImmediately=!0,this.setupAttachmentDeletionCallback(),this.setupResourceUpdateListener()},e.prototype.setupAttachmentDeletionCallback=function(){var e=this;this.memoizeCurrentAttachments(),this.$formElement=this.$element.closest("form"),this.$formElement.on("submit.attachment-component",function(){e.destroyRemovedAttachments()})},e.prototype.setupResourceUpdateListener=function(){var e=this;this.states.forResource(this.resource).changes$().pipe(Object(q.a)(Object(an.a)(this)),Object(E.a)(function(e){return!!e})).subscribe(function(n){e.resource=n||e.resource,e.destroyImmediately&&(e.destroyRemovedAttachments(),e.memoizeCurrentAttachments())})},e.prototype.ngOnDestroy=function(){this.$formElement.off("submit.attachment-component")},e.prototype.showAttachments=function(){return this.allowUploading||_.get(this.resource,"attachments.count",0)>0},e.prototype.destroyRemovedAttachments=function(){var e=this,n=_.differenceBy(this.initialAttachments,this.resource.attachments.elements,function(e){return e.id});n.length&&n.forEach(function(n){e.resource.removeAttachment(n)})},e.prototype.memoizeCurrentAttachments=function(){this.initialAttachments=_.clone(this.resource.attachments.elements)},e}();ot.DynamicBootstrapper.register({selector:"attachments",cls:Pi,embeddable:!0});var Ii=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ji(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attachment-list",[],null,null,null,yi,gi)),l["\u0275did"](1,638976,null,0,fi,[l.ElementRef,ee],{resource:[0,"resource"]},null)],function(e,n){e(n,1,0,n.component.resource)},null)}function _i(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attachments-upload",[["class","hide-when-print"]],null,null,null,Ci,wi)),l["\u0275did"](1,114688,null,0,bi,[U.a,Ke,Ge,l.ElementRef,ee],{resource:[0,"resource"]},null)],function(e,n){e(n,1,0,n.component.resource)},null)}function Si(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"legend",[["class","form--fieldset-legend"]],null,null,null,null,null)),(e()(),l["\u0275ted"](2,null,[" "," "])),(e()(),l["\u0275eld"](3,0,null,null,4,"div",[["id","attachments_fields"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ji)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,_i)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.resource.attachments),e(n,7,0,t.allowUploading)},function(e,n){e(n,2,0,n.component.text.attachments)})}function Ri(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Si)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.showAttachments())},null)}var Ti=l["\u0275ccf"]("attachments",Pi,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attachments",[],null,null,null,Ri,Ii)),l["\u0275did"](1,245760,null,0,Pi,[l.ElementRef,U.a,u,ee],null,null)],function(e,n){e(n,1,0)},null)},{resource:"resource"},{},[]),xi=function(){function e(e){this.PathHelper=e}return e.prototype.create=function(e,n,t,l){void 0===l&&(l=null);var i="constrained"===e?window.OPConstrainedEditor:window.OPClassicEditor;n.classList.add("ckeditor-type-"+e);var o=null!==l,r=o?l:n;return i.createCustomized(r,{openProject:this.createConfig(t)}).then(function(e){return o&&n.appendChild(e.element),jQuery(n).on("op:ckeditor:setData",function(n,t){return e.setData(t)}).on("op:ckeditor:clear",function(n){return e.setData(" ")}).on("op:ckeditor:getData",function(n,t){return t(e.getData())}),e})},e.prototype.createConfig=function(e){return"none"===e.macros?e.macros=!1:"wp"===e.macros?e.macros=["OPMacroToc","OPMacroEmbeddedTable","OPMacroWpButton"]:e.macros=e.macros,{context:e,helpURL:this.PathHelper.textFormattingHelp(),pluginContext:window.OpenProject.pluginContext.value}},e}(),Ei=function(){function e(e,n,t,i,o){var r=this;this.elementRef=e,this.Notifications=n,this.I18n=t,this.configurationService=i,this.ckEditorSetup=o,this.ckEditorType="full",this.onInitialized=new l.EventEmitter,this.onContentChange=new l.EventEmitter,this.onInitializationFailed=new l.EventEmitter,this.error=null,this.allowManualMode=!1,this.manualMode=!1,this.text={errorTitle:this.I18n.t("js.editor.error_initialization_failed")},this.debouncedEmitter=_.debounce(function(){r.getTransformedContent(!1).then(function(e){r.onContentChange.emit(e)})},1e3,{leading:!0})}return e.prototype.getRawData=function(){return this.manualMode?this._content=this.codeMirrorInstance.getValue():this._content=this.ckEditorInstance.getData()},e.prototype.getTransformedContent=function(e){var n=this;if(void 0===e&&(e=!0),!this.initialized)throw"Tried to access CKEditor instance before initialization.";return new Promise(function(t,l){try{t(n.getRawData())}catch(o){console.error("Failed to save CKEditor content: "+o+".");var i=n.I18n.t("js.editor.error_saving_failed",{error:o||n.I18n.t("js.errors.internal")});e&&n.Notifications.addError(i),l(i)}})},Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){if(!this.initialized)throw"Tried to access CKEditor instance before initialization.";this._content=e,this.ckEditorInstance.setData(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return void 0!==this.ckEditorInstance},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){try{this.initializeEditor()}catch(e){console.error("Failed to setup CKEditor instance: "+e),this.error=e,this.onInitializationFailed.emit(e)}},e.prototype.initializeEditor=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement);var n=this.ckEditorSetup.create(this.ckEditorType,this.opCkeditorReplacementContainer.nativeElement,this.context,this.content).catch(function(e){throw e}).then(function(n){return e.ckEditorInstance=n,n.model.document.on("change",e.debouncedEmitter),n.on("op:source-code-enabled",function(){return e.enableManualMode()}),n.on("op:source-code-disabled",function(){return e.disableManualMode()}),e.onInitialized.emit(n),n});this.$element.data("editor",n)},e.prototype.disableManualMode=function(){var e=this.getRawData();this.ckEditorInstance.setData(e),this.codeMirrorInstance=null,this.manualMode=!1},e.prototype.enableManualMode=function(){var e=this,n=this.getRawData();Promise.all([Promise.all([t.e(1),t.e(0)]).then(t.t.bind(null,"VrN/",7)),t("ZXPj")("./gfm/gfm")]).then(function(t){var l=t[0].default;e.codeMirrorInstance=l(e.$element.find(".ck-editor__source")[0],{lineNumbers:!0,smartIndent:!0,value:n,mode:""}),e.codeMirrorInstance.on("change",e.debouncedEmitter),setTimeout(function(){return e.codeMirrorInstance.refresh()},100),e.manualMode=!0})},e}(),Oi=[[".op-ckeditor--mode-switch[_ngcontent-%COMP%]{text-align:right}.op-ckeditor--mode-switch[_ngcontent-%COMP%]   button.button[_ngcontent-%COMP%]{margin:0 0 5px}"]],Di=l["\u0275crt"]({encapsulation:0,styles:Oi,data:{}});function Fi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"div",[["class","notification-box--content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.text.errorTitle),e(n,5,0,t.error)})}function Ai(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{opCkeditorReplacementContainer:0}),l["\u0275qud"](402653184,2,{codeMirrorPane:0}),(e()(),l["\u0275eld"](2,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Fi)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](5,0,[[1,0],["opCkeditorReplacementContainer",1]],null,0,"div",[["class","op-ckeditor-source-element"]],null,null,null,null,null))],function(e,n){e(n,4,0,n.component.error)},null)}l["\u0275ccf"]("op-ckeditor",Ei,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-ckeditor",[],null,null,null,Ai,Di)),l["\u0275did"](1,245760,null,0,Ei,[l.ElementRef,Ge,U.a,Ke,xi],null,null)],function(e,n){e(n,1,0)},null)},{ckEditorType:"ckEditorType",context:"context",_content:"content"},{onInitialized:"onInitialized",onContentChange:"onContentChange",onInitializationFailed:"onInitializationFailed"},[]);var Vi=function(){function e(e,n,t,l,i,o,r){this.elementRef=e,this.pathHelper=n,this.halResourceService=t,this.Notifications=l,this.I18n=i,this.states=o,this.ConfigurationService=r,this.changed=!1,this.inFlight=!1}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement),this.textareaSelector=this.$element.attr("textarea-selector"),this.previewContext=this.$element.attr("preview-context");var e=this.$element.data("resource");this.resource=e?this.halResourceService.createHalResource(e,!0):void 0,this.formElement=this.$element.closest("form"),this.wrappedTextArea=this.formElement.find(this.textareaSelector),this.wrappedTextArea.removeAttr("required").hide(),this.initialContent=this.wrappedTextArea.val(),this.$attachmentsElement=this.formElement.find("#attachments_fields"),this.context={resource:this.resource,previewContext:this.previewContext}},e.prototype.ngOnDestroy=function(){this.formElement.off("submit.ckeditor")},e.prototype.setup=function(e){var n=this;return this.resource&&this.resource.attachments&&(this.setupAttachmentAddedCallback(e),this.setupAttachmentRemovalSignal(e)),this.formElement.on("submit.ckeditor change.ckeditor",function(){try{n.wrappedTextArea.val(n.ckEditorInstance.getRawData())}catch(e){return console.error("Failed to save CKEditor body to textarea: "+e+"."),n.Notifications.addError(e||n.I18n.t("js.errors.internal")),!1}return n.addUploadedAttachmentsToForm(),!0}),this.setLabel(),e},e.prototype.setupAttachmentAddedCallback=function(e){var n=this;e.model.on("op:attachment-added",function(){n.states.forResource(n.resource).putValue(n.resource)})},e.prototype.setupAttachmentRemovalSignal=function(e){var n=this;this.attachments=_.clone(this.resource.attachments.elements),this.states.forResource(this.resource).changes$().pipe(Object(q.a)(Object(an.a)(this)),Object(E.a)(function(e){return!!e})).subscribe(function(t){var l=_.differenceBy(n.attachments,t.attachments.elements,function(e){return e.id}).map(function(e){return e.downloadLocation.$href});l.length&&e.model.fire("op:attachment-removed",l),n.attachments=_.clone(t.attachments.elements)})},e.prototype.setLabel=function(){var e=this.textareaSelector.substring(1),n=jQuery("label[for="+e+"]"),t=this.$element.find(".ck-content");t.attr("aria-label",null),t.attr("aria-labelledby",e),n.click(function(){t.focus()})},e.prototype.addUploadedAttachmentsToForm=function(){var e=this;if(this.resource&&this.resource.attachments&&!this.resource.id){var n=this.$attachmentsElement.find("input[type='file']").map(function(e,n){var t=(n.getAttribute("name")||"").match(/attachments\[(\d+)\]\[(?:file|id)\]/);return t?parseInt(t[1]):0}).toArray().sort().pop()||0,t=this.resource.attachments.elements||[];jQuery.each(t,function(t,l){e.$attachmentsElement.append('<input type="hidden" name="attachments['+(n+t+1)+'][id]" value="'+l.id+'">')})}},e}();ot.DynamicBootstrapper.register({selector:"ckeditor-augmented-textarea",cls:Vi,embeddable:!0});var Mi=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Li(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"attachments",[["data-allow-uploading","true"],["data-destroy-immediately","false"]],null,null,null,Ri,Ii)),l["\u0275did"](2,245760,null,0,Pi,[l.ElementRef,U.a,u,ee],{resource:[0,"resource"]},null)],function(e,n){e(n,2,0,n.component.resource)},null)}function Ni(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{ckEditorInstance:0}),(e()(),l["\u0275eld"](1,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-ckeditor--wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"op-ckeditor",[["ckEditorType","full"]],null,[[null,"onInitialized"]],function(e,n,t){var l=!0,i=e.component;"onInitialized"===n&&(l=!1!==i.setup(t)&&l);return l},Ai,Di)),l["\u0275did"](4,245760,[[1,4]],0,Ei,[l.ElementRef,Ge,U.a,Ke,xi],{ckEditorType:[0,"ckEditorType"],context:[1,"context"],_content:[2,"_content"]},{onInitialized:"onInitialized"}),(e()(),l["\u0275and"](16777216,null,null,1,null,Li)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,"full",t.context,t.initialContent),e(n,6,0,t.resource&&t.resource.attachments)},null)}var $i=l["\u0275ccf"]("ckeditor-augmented-textarea",Vi,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ckeditor-augmented-textarea",[],null,null,null,Ni,Mi)),l["\u0275did"](1,245760,null,0,Vi,[l.ElementRef,R,ee,Ge,U.a,u,Ke],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),qi=t("gIcY"),Hi=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Bi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function Wi(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{selectedPageInput:0}),(e()(),l["\u0275eld"](1,0,null,null,25,"div",[["class","op-modal--portal op-modal--macro-modal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,24,"div",[["class","op-modal--modal-container"],["tabindex","1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Bi)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,16,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,15,"form",[["class","form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;"submit"===n&&(i=!1!==l["\u0275nov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,10).onReset()&&i);"submit"===n&&(i=!1!==o.applyAndClose(t)&&i);return i},null,null)),l["\u0275did"](9,16384,null,0,qi.t,[],null,null),l["\u0275did"](10,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](12,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](13,0,null,null,10,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"legend",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,8,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,0,"label",[["class","form--label hidden-for-sighted"],["for","selected-page"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,2,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,1,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](19,0,[[1,0],["selectedPageInput",1]],null,0,"input",[["class","form--select"],["id","selected-page"],["name","selected-page"],["tabindex","2"],["type","text"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.selectedPage=t.target.value)&&l);return l},null,null)),(e()(),l["\u0275eld"](20,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,1,"kbd",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["project-identifier:my-wiki-page"])),(e()(),l["\u0275eld"](24,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](25,0,null,null,0,"button",[["class","op-modal--cancel-button button"],["tabindex","4"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](26,0,null,null,0,"button",[["class","op-modal--submit-button button -highlight"],["tabindex","3"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.applyAndClose(t)&&l);return l},null,null))],function(e,n){e(n,5,0,n.component.showClose)},function(e,n){var t=n.component;e(n,6,0,t.text.title),e(n,8,0,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending),e(n,14,0,t.text.page),e(n,16,0,t.text.page),e(n,19,0,t.selectedPage),e(n,20,0,t.text.hint),e(n,25,0,t.text.button_cancel,t.text.button_cancel),e(n,26,0,t.text.button_save,t.text.button_save)})}var zi=l["\u0275ccf"]("ng-component",nt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Wi,Hi)),l["\u0275did"](1,4440064,null,0,nt,[l.ElementRef,On.a,l.ChangeDetectorRef,U.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Qi=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ui(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function Ki(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{codeMirrorPane:0}),(e()(),l["\u0275eld"](1,0,null,null,32,"div",[["class","op-modal--portal op-modal--macro-modal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,31,"div",[["class","op-modal--modal-container -wide"],["tabindex","1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ui)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,23,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,22,"form",[["class","form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,10).onReset()&&i);return i},null,null)),l["\u0275did"](9,16384,null,0,qi.t,[],null,null),l["\u0275did"](10,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](12,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](13,0,[[1,0],["codeMirrorPane",1]],null,5,"textarea",[["id","codemirror-element"],["name","codemirror-element"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;"input"===n&&(i=!1!==l["\u0275nov"](e,14)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,14).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,14)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,14)._compositionEnd(t.target.value)&&i);return i},null,null)),l["\u0275did"](14,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](16,671744,null,0,qi.l,[[2,qi.c],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},null),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](18,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](19,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,10,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,0,"label",[["class","form--label hidden-for-sighted"],["for","selected-language"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,7,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,6,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](24,0,[["selectedLanguage",1]],null,5,"input",[["class","form--select"],["id","selected-language"],["name","selected-language"],["tabindex","2"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,25)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,25).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,25)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,25)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==o.updateLanguage(t)&&i);return i},null,null)),l["\u0275did"](25,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](27,671744,null,0,qi.l,[[2,qi.c],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](29,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](30,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](31,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,0,"button",[["class","op-modal--cancel-button button"],["tabindex","4"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](33,0,null,null,0,"button",[["class","op-modal--submit-button button -highlight"],["tabindex","3"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.applyAndClose(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,5,0,t.showClose);e(n,16,0,"codemirror-element",t.content);e(n,27,0,"selected-language",t.language)},function(e,n){var t=n.component;e(n,6,0,t.text.title),e(n,8,0,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending),e(n,13,0,l["\u0275nov"](n,18).ngClassUntouched,l["\u0275nov"](n,18).ngClassTouched,l["\u0275nov"](n,18).ngClassPristine,l["\u0275nov"](n,18).ngClassDirty,l["\u0275nov"](n,18).ngClassValid,l["\u0275nov"](n,18).ngClassInvalid,l["\u0275nov"](n,18).ngClassPending),e(n,21,0,t.text.language),e(n,24,0,l["\u0275nov"](n,29).ngClassUntouched,l["\u0275nov"](n,29).ngClassTouched,l["\u0275nov"](n,29).ngClassPristine,l["\u0275nov"](n,29).ngClassDirty,l["\u0275nov"](n,29).ngClassValid,l["\u0275nov"](n,29).ngClassInvalid,l["\u0275nov"](n,29).ngClassPending),e(n,30,0,t.text.language_hint),e(n,32,0,t.text.button_cancel,t.text.button_cancel),e(n,33,0,t.text.button_save,t.text.button_save)})}var Yi=l["\u0275ccf"]("ng-component",tt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Ki,Qi)),l["\u0275did"](1,4440064,null,0,tt,[l.ElementRef,On.a,l.ChangeDetectorRef,U.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Gi=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Zi(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function Ji(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{selectedPageInput:0}),(e()(),l["\u0275eld"](1,0,null,null,33,"div",[["class","op-modal--portal op-modal--macro-modal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,32,"div",[["class","op-modal--modal-container"],["tabindex","1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Zi)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,24,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,23,"form",[["class","form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;"submit"===n&&(i=!1!==l["\u0275nov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,10).onReset()&&i);"submit"===n&&(i=!1!==o.applyAndClose(t)&&i);return i},null,null)),l["\u0275did"](9,16384,null,0,qi.t,[],null,null),l["\u0275did"](10,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](12,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](13,0,null,null,18,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"legend",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,4,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,0,"label",[["class","form--label hidden-for-sighted"],["for","selected-page"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,2,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,1,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](19,0,[[1,0],["selectedPageInput",1]],null,0,"input",[["class","form--select"],["id","selected-page"],["name","selected-page"],["placeholder","my-project:my-page"],["tabindex","2"],["type","text"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.selectedPage=t.target.value)&&l);return l},null,null)),(e()(),l["\u0275eld"](20,0,null,null,10,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,8,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,6,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](24,0,[["parentIncludedInput",1]],null,5,"input",[["class","form--check-box"],["id","include-parent"],["name","include-parent"],["tabindex","3"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,25).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,25).onTouched()&&i);"ngModelChange"===n&&(i=!1!==o.updateIncludeParent(t)&&i);return i},null,null)),l["\u0275did"](25,16384,null,0,qi.b,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.b]),l["\u0275did"](27,671744,null,0,qi.l,[[2,qi.c],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](29,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275ted"](30,null,[" "," "])),(e()(),l["\u0275eld"](31,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](33,0,null,null,0,"button",[["class","op-modal--cancel-button button"],["tabindex","4"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](34,0,null,null,0,"button",[["class","op-modal--submit-button button -highlight"],["tabindex","3"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.applyAndClose(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,5,0,t.showClose);e(n,27,0,"include-parent",t.selectedIncludeParent)},function(e,n){var t=n.component;e(n,6,0,t.text.title),e(n,8,0,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending),e(n,14,0,t.text.page),e(n,16,0,t.text.page),e(n,19,0,t.selectedPage),e(n,24,0,l["\u0275nov"](n,29).ngClassUntouched,l["\u0275nov"](n,29).ngClassTouched,l["\u0275nov"](n,29).ngClassPristine,l["\u0275nov"](n,29).ngClassDirty,l["\u0275nov"](n,29).ngClassValid,l["\u0275nov"](n,29).ngClassInvalid,l["\u0275nov"](n,29).ngClassPending),e(n,30,0,t.text.include_parent),e(n,31,0,t.text.hint),e(n,33,0,t.text.button_cancel,t.text.button_cancel),e(n,34,0,t.text.button_save,t.text.button_save)})}var Xi=l["\u0275ccf"]("ng-component",lt,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Ji,Gi)),l["\u0275did"](1,4440064,null,0,lt,[l.ElementRef,On.a,l.ChangeDetectorRef,U.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),eo=function(){function e(){this.onDestroy=new x.a,this._onSubmitHandlers=[]}return e.prototype.onSubmit=function(){return Promise.all(this._onSubmitHandlers.map(function(e){return e()}))},e.prototype.registerOnSubmit=function(e){this._onSubmitHandlers.push(e)},e}(),no=function(e){function n(){var n=e.call(this)||this;return n.name="WP-Changesets",n.changesets=Object(a.h)(),n.initializeMembers(),n}return r.d(n,e),n}(a.b),to=function(e){function n(n,t){var l=e.call(this)||this;return l.injector=n,l.wpCacheService=t,l.stateGroup=new no,l}return r.d(n,e),n.prototype.changesetFor=function(e){var n=e.id,t=this.wpCacheService.state(n).getValueOr(e),l=this.multiState.get(n);l.isPristine()&&l.putValue(new Jn(this.injector,t));var i=l.value;return i.workPackage=t,i},n.prototype.temporaryEditResource=function(e){var n=Object(a.c)(this.wpCacheService.state(e),this.state(e));return Object(a.e)(n,function(e){return e.pipe(Object(D.a)(function(e){var n=e[0],t=e[1];return n&&t&&t.resource?t.resource:n}))})},n.prototype.stopEditing=function(e){var n=this.multiState.get(e);n&&n.value&&n.value.clear()},n.prototype.load=function(e){var n=this;return this.wpCacheService.require(e).then(function(e){return new Jn(n.injector,e)})},n.prototype.loadAll=function(e){var n=this;return Promise.all(e.map(function(e){return n.load(e)}))},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.stateGroup.changesets},enumerable:!0,configurable:!0}),n}(Te),lo=function(){function e(){}return Object.defineProperty(e.prototype,"displayName",{get:function(){return this.schema.name||this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.resource[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.constructor.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return!!this.schema.required},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){return!!this.schema.writable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDefault",{get:function(){return this.schema.hasDefault},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return!this.value},Object.defineProperty(e.prototype,"unknownAttribute",{get:function(){return this.isEmpty&&!this.schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$injector",{get:function(){return this.constructor.$injector},enumerable:!0,configurable:!0}),e}(),io=new l.InjectionToken("wp-editing-portal--schema"),oo=new l.InjectionToken("wp-editing-portal--handler"),ro=new l.InjectionToken("wp-editing-portal--changeset"),ao=function(e){function n(n,t,l,i,o,r,a,u){var s=e.call(this)||this;return s.I18n=n,s.elementRef=t,s.wpEditing=l,s.changeset=i,s.schema=o,s.handler=r,s.cdRef=a,s.injector=u,s.self=s,s.initialize(),s.wpEditing.state(s.changeset.workPackage.id).values$().pipe(Object(an.b)(s)).subscribe(function(e){if(!s.changeset.empty&&s.changeset.wpForm){var n=e.wpForm.schema[s.name];if(!n)return r.deactivate(!1);s.changeset=e,s.schema=n,s.initialize(),s.cdRef.markForCheck()}}),s}return r.d(n,e),n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"inFlight",{get:function(){return this.handler.inFlight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.changeset.value(this.name)},set:function(e){this.changeset.setValue(this.name,this.parseValue(e))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this.changeset.getSchemaName(this.handler.fieldName)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"placeholder",{get:function(){return"subject"===this.name?this.I18n.t("js.placeholders.subject"):""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"resource",{get:function(){return this.changeset.workPackage},enumerable:!0,configurable:!0}),n.prototype.initialize=function(){},n.prototype.parseValue=function(e){return e},n}(lo);function uo(e,n,t,l){var i=new WeakMap;return i.set(ro,n),i.set(oo,t),i.set(io,l),new c.c(e,i)}var so=function(){function e(e){this.injector=e,this.fields={},this.classes={}}return e.prototype.fieldType=function(e){return this.fields[e]},e.prototype.getClassFor=function(e,n){void 0===n&&(n="unknown");var t=this.fieldType(e)||this.fieldType(n)||this.defaultFieldType;return this.classes[t]},e.prototype.addFieldType=function(e,n,t){return e.$injector=this.injector,e.fieldType=n,this.register(e,t),this},e.prototype.extendFieldType=function(e,n){var t=this.classes[e]||this.getClassFor(e);return this.addFieldType(t,e,n)},e.prototype.register=function(e,n){var t=this;void 0===n&&(n=[]);var l=e.fieldType;n.forEach(function(e){return t.fields[e]=l}),this.classes[l]=e},e}(),co=function(e){function n(n){return e.call(this,n)||this}return r.d(n,e),n}(so),po=function(){function e(e,n,t){this.injector=e,this.editField=n,this.elementRef=t,this.onEditFieldReady=new l.EventEmitter}return e.prototype.ngOnInit=function(){this.editFieldHandler&&this.schemaInput?(this.handler=this.editFieldHandler,this.schema=this.schemaInput,this.changeset=this.changesetInput):(this.handler=this.injector.get(oo),this.schema=this.injector.get(io),this.changeset=this.injector.get(ro)),this.componentClass=this.editField.getClassFor(this.handler.fieldName,this.schema.type),this.fieldInjector=uo(this.injector,this.changeset,this.handler,this.schema)},e.prototype.ngOnDestroy=function(){this.onEditFieldReady.complete()},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.onEditFieldReady.emit()})},e}(),ho=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function fo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function go(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"div",[],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-error":0}),(e()(),l["\u0275eld"](3,0,null,null,8,"form",[["novalidate",""],["role","form"],["tabindex","-1"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;"submit"===n&&(i=!1!==l["\u0275nov"](e,5).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,5).onReset()&&i);"submit"===n&&(i=!1!==o.handler.handleUserSubmit()&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,qi.t,[],null,null),l["\u0275did"](5,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](7,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](8,0,null,null,1,"label",[["class","hidden-for-sighted"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),l["\u0275ted"](9,null,[" "," "," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,fo)),l["\u0275did"](11,671744,null,0,yt.i,[l.ViewContainerRef],{ngComponentOutlet:[0,"ngComponentOutlet"],ngComponentOutletInjector:[1,"ngComponentOutletInjector"]},null)],function(e,n){var t=n.component,i=l["\u0275inlineInterpolate"](1,"wp-inline-edit--active-field wp-edit-field inplace-edit ",t.handler.fieldName,""),o=e(n,2,0,t.handler.isErrorenous);e(n,1,0,i,o),e(n,11,0,t.componentClass,t.fieldInjector)},function(e,n){var t=n.component;e(n,3,0,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending),e(n,8,0,t.handler.htmlId),e(n,9,0,t.handler.fieldLabel,t.handler.errorMessageOnLabel)})}function mo(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,go)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.handler)},null)}var vo=l["\u0275ccf"]("edit-form-portal",po,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"edit-form-portal",[],null,null,null,mo,ho)),l["\u0275did"](1,4440064,null,0,po,[l.Injector,co,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{schemaInput:"schemaInput",changesetInput:"changesetInput",editFieldHandler:"editFieldHandler"},{onEditFieldReady:"onEditFieldReady"},[]),yo=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function bo(e){return l["\u0275vid"](0,[],null,null)}var wo=l["\u0275ccf"]("ng-component",ao,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,bo,yo)),l["\u0275did"](1,180224,null,0,ao,[U.a,l.ElementRef,Zn,ro,io,oo,l.ChangeDetectorRef,l.Injector],null,null)],null,null)},{},{},[]),ko=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.updateValue=function(e){this.value=e,this.handler.handleUserSubmit()},n}(ao),Co=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Po(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"input",[["class","wp-inline-edit--field wp-inline-edit--boolean-field"],["type","checkbox"]],[[1,"aria-required",0],[8,"checked",0],[8,"disabled",0],[8,"id",0]],[[null,"change"],[null,"keydown"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateValue(!i.value)&&l);"keydown"===n&&(l=!1!==i.handler.handleUserKeydown(t)&&l);return l},null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.required,t.value,t.inFlight,t.handler.htmlId)})}var Io=l["\u0275ccf"]("ng-component",ko,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Po,Co)),l["\u0275did"](1,180224,null,0,ko,[U.a,l.ElementRef,Zn,ro,io,oo,l.ChangeDetectorRef,l.Injector],null,null)],null,null)},{},{},[]),jo=function(){function e(e,n,t,l,i){this.ConfigurationService=e,this.timezoneService=n,this.datepickerElem=t,this.date=l,this.options=i,this.datepickerFormat="yy-mm-dd",this.datepickerCont=jQuery(this.datepickerElem),this.datepickerInstance=null,this.initialize(i)}return e.prototype.initialize=function(e){var n=this.ConfigurationService.startOfWeekPresent()?this.ConfigurationService.startOfWeek():jQuery.datepicker._defaults.firstDay,t=_.extend({},e,{firstDay:n,showWeeks:!0,changeMonth:!0,changeYear:!0,dateFormat:this.datepickerFormat,defaultDate:this.timezoneService.formattedISODate(this.date),showButtonPanel:!0});this.datepickerInstance=this.datepickerCont.datepicker(t),this.datepickerCont.attr("autocomplete","off")},e.prototype.clear=function(){this.datepickerInstance.datepicker("setDate",null)},e.prototype.destroy=function(){this.hide(),this.datepickerInstance.datepicker("destroy")},e.prototype.hide=function(){this.datepickerInstance.datepicker("hide"),this.datepickerCont.scrollParent().off("scroll")},e.prototype.show=function(){this.datepickerInstance.datepicker("show"),this.hideDuringScroll()},e.prototype.reshow=function(){this.datepickerInstance.datepicker("show")},e.prototype.hideDuringScroll=function(){var e=this,n=null;this.datepickerCont.scrollParent().scroll(function(){e.datepickerInstance.datepicker("hide"),n&&clearTimeout(n),n=setTimeout(function(){e.visibleAndActive()&&e.datepickerInstance.datepicker("show")},50)})},e.prototype.visibleAndActive=function(){var e=this.datepickerCont;return document.elementFromPoint(e.offset().left,e.offset().top)===e[0]&&document.activeElement===e[0]},e}(),_o=function(){function e(e,n,t){this.elementRef=e,this.ConfigurationService=n,this.timezoneService=t,this.onChange=new l.EventEmitter,this.onClose=new l.EventEmitter}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement),this.ConfigurationService.accessibilityModeEnabled()||(this.input=this.$element.find("input"),this.setup())},e.prototype.ngOnDestroy=function(){this.datePickerInstance&&this.datePickerInstance.destroy()},e.prototype.setup=function(){var e=this;this.input.focus(function(){return e.showDatePicker()}),this.input.keydown(function(n){e.isEmpty()&&e.datePickerInstance.clear()})},e.prototype.isEmpty=function(){return""===this.currentValue().trim()},e.prototype.currentValue=function(){return this.input.val()},e.prototype.showDatePicker=function(){var e,n=this,t={onSelect:function(e){n.datePickerInstance.hide();var t=e;n.isEmpty()&&(t=null),n.input.val(t),n.input.trigger("change"),n.onChange.emit(t)},onClose:function(){return n.onClose.emit()}};e=this.isEmpty&&this.initialDate?this.timezoneService.parseISODate(this.initialDate).toDate():this.currentValue(),this.datePickerInstance=new jo(this.ConfigurationService,this.timezoneService,this.input,e,t),this.datePickerInstance.show()},e}(),So=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ro(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),l["\u0275ncd"](null,0)],null,null)}l["\u0275ccf"]("op-date-picker",_o,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-date-picker",[],null,null,null,Ro,So)),l["\u0275did"](1,245760,null,0,_o,[l.ElementRef,Ke,Kn],null,null)],function(e,n){e(n,1,0)},null)},{initialDate:"initialDate"},{onChange:"onChange",onClose:"onClose"},["*"]);var To=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timezoneService=n.injector.get(Kn),n}return r.d(n,e),n.prototype.onValueSelected=function(e){this.value=this.parser(e),this.handler.handleUserSubmit()},n.prototype.parser=function(e){return ae(e,"YYYY-MM-DD",!0).isValid()?e:null},n.prototype.formatter=function(e){if(ae(e,"YYYY-MM-DD",!0).isValid()){var n=this.timezoneService.parseDate(e);return this.timezoneService.formattedISODate(n)}return null},Object.defineProperty(n.prototype,"defaultDate",{get:function(){return"dueDate"===this.name?this.resource.startDate:""},enumerable:!0,configurable:!0}),n}(ao),xo=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Eo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"op-date-picker",[["tabindex","-1"]],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==i.onValueSelected(t)&&l);return l},Ro,So)),l["\u0275did"](1,245760,null,0,_o,[l.ElementRef,Ke,Kn],{initialDate:[0,"initialDate"]},{onChange:"onChange"}),(e()(),l["\u0275eld"](2,0,null,0,5,"input",[["class","wp-inline-edit--field"],["type","text"]],[[1,"required",0],[1,"placeholder",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,3)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,3).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,3)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,3)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.value=o.parser(t))&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t)&&i);return i},null,null)),l["\u0275did"](3,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](5,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](7,16384,null,0,qi.i,[[4,qi.h]],null,null)],function(e,n){var t=n.component;e(n,1,0,t.defaultDate),e(n,5,0,t.inFlight,t.formatter(t.value))},function(e,n){var t=n.component;e(n,2,0,t.required,t.placeholder,t.handler.htmlId,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending)})}var Oo=l["\u0275ccf"]("ng-component",To,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Eo,xo)),l["\u0275did"](1,180224,null,0,To,[U.a,l.ElementRef,Zn,ro,io,oo,l.ChangeDetectorRef,l.Injector],null,null)],null,null)},{},{},[]),Do=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.TimezoneService=n.$injector.get(Kn),n}return r.d(n,e),n.prototype.parser=function(e){if(!isNaN(e)){var n=parseFloat(e);return ae.duration(n,"hours")}return e},n.prototype.formatter=function(e){return Number(ae.duration(e).asHours().toFixed(2))},n.prototype.parseValue=function(e){return null===e?null:e.toISOString()},n}(ao),Fo=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ao(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"input",[["class","wp-inline-edit--field"],["step","0.01"],["type","number"]],[[1,"aria-required",0],[1,"required",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"input"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.value=o.parser(t))&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](2,16384,null,0,qi.s,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e,n){return[e,n]},[qi.d,qi.s]),l["\u0275did"](4,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](6,16384,null,0,qi.i,[[4,qi.h]],null,null)],function(e,n){var t=n.component;e(n,4,0,t.inFlight,t.formatter(t.value))},function(e,n){var t=n.component;e(n,0,0,t.required,t.required,t.handler.htmlId,l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending)})}var Vo=l["\u0275ccf"]("ng-component",Do,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Ao,Fo)),l["\u0275did"](1,180224,null,0,Do,[U.a,l.ElementRef,Zn,ro,io,oo,l.ChangeDetectorRef,l.Injector],null,null)],null,null)},{},{},[]),Mo=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.locale=I18n.locale,n}return r.d(n,e),n}(ao),Lo=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function No(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"input",[["class","wp-inline-edit--field"],["step","any"],["type","number"]],[[1,"aria-required",0],[1,"required",0],[1,"lang",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"input"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](2,16384,null,0,qi.s,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e,n){return[e,n]},[qi.d,qi.s]),l["\u0275did"](4,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](6,16384,null,0,qi.i,[[4,qi.h]],null,null)],function(e,n){var t=n.component;e(n,4,0,t.inFlight,t.value)},function(e,n){var t=n.component;e(n,0,1,[t.required,t.required,t.locale,t.handler.htmlId,l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending])})}var $o=l["\u0275ccf"]("ng-component",Mo,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,No,Lo)),l["\u0275did"](1,180224,null,0,Mo,[U.a,l.ElementRef,Zn,ro,io,oo,l.ChangeDetectorRef,l.Injector],null,null)],null,null)},{},{},[]),qo=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.locale=I18n.locale,n}return r.d(n,e),n}(ao),Ho=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Bo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"input",[["class","wp-inline-edit--field"],["type","number"]],[[1,"aria-required",0],[1,"required",0],[1,"lang",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"input"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](2,16384,null,0,qi.s,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e,n){return[e,n]},[qi.d,qi.s]),l["\u0275did"](4,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](6,16384,null,0,qi.i,[[4,qi.h]],null,null)],function(e,n){var t=n.component;e(n,4,0,t.inFlight,t.value)},function(e,n){var t=n.component;e(n,0,1,[t.required,t.required,t.locale,t.handler.htmlId,l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending])})}var Wo=l["\u0275ccf"]("ng-component",qo,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Bo,Ho)),l["\u0275did"](1,180224,null,0,qo,[U.a,l.ElementRef,Zn,ro,io,oo,l.ChangeDetectorRef,l.Injector],null,null)],null,null)},{},{},[]),zo=function(){function e(){this.onSave=new l.EventEmitter,this.onCancel=new l.EventEmitter}return e.prototype.save=function(){this.onSave.emit()},e.prototype.cancel=function(){this.onCancel.emit()},e}(),Qo=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Uo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","inplace-edit--controls"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"accessible-by-keyboard",[["class","inplace-edit--control inplace-edit--control--save"]],[[1,"disabled",0]],[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.save()&&l);return l},Dt,Ot)),l["\u0275did"](2,49152,null,0,Et,[],{linkTitle:[0,"linkTitle"]},{execute:"execute"}),(e()(),l["\u0275eld"](3,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-checkmark"]],null,null,null,Ct,wt)),l["\u0275did"](4,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),(e()(),l["\u0275eld"](5,0,null,null,3,"accessible-by-keyboard",[["class","inplace-edit--control inplace-edit--control--cancel"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.cancel()&&l);return l},Dt,Ot)),l["\u0275did"](6,49152,null,0,Et,[],{linkTitle:[0,"linkTitle"]},{execute:"execute"}),(e()(),l["\u0275eld"](7,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-close"]],null,null,null,Ct,wt)),l["\u0275did"](8,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,2,0,t.saveTitle);e(n,4,0,"icon-checkmark",t.saveTitle),e(n,6,0,t.cancelTitle);e(n,8,0,"icon-close",t.cancelTitle)},function(e,n){var t=n.component;e(n,1,0,t.field.required&&t.field.isEmpty()||void 0)})}function Ko(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","inplace-edit--dashboard"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Uo)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.field.handler.active)},null)}l["\u0275ccf"]("edit-field-controls",zo,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"edit-field-controls",[],null,null,null,Ko,Qo)),l["\u0275did"](1,49152,null,0,zo,[],null,null)],null,null)},{cancelTitle:"cancelTitle",saveTitle:"saveTitle",field:"fieldController"},{onSave:"onSave",onCancel:"onCancel"},[]);var Yo=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.pathHelper=n.$injector.get(R),n.field=n,n.initializationError=!1,n.isPreview=!1,n.previewHtml="",n.text={attachmentLabel:n.I18n.t("js.label_formattable_attachment_hint"),save:n.I18n.t("js.inplace.button_save",{attribute:n.schema.name}),cancel:n.I18n.t("js.inplace.button_cancel",{attribute:n.schema.name})},n}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.handler.registerOnSubmit(function(){return e.getCurrentValue()})},n.prototype.onCkeditorSetup=function(e){this.resource.isNew||setTimeout(function(){return e.editing.view.focus()})},n.prototype.getCurrentValue=function(){var e=this;return this.instance.getTransformedContent().then(function(n){e.rawValue=n})},n.prototype.onContentChange=function(e){this.rawValue=e},n.prototype.handleUserSubmit=function(){var e=this;return this.getCurrentValue().then(function(){e.handler.handleUserSubmit()}),!1},Object.defineProperty(n.prototype,"ckEditorContext",{get:function(){return{resource:this.resource,macros:"none",previewContext:this.previewContext}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"editorType",{get:function(){return"description"===this.name?"full":"constrained"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"previewContext",{get:function(){return this.resource.isNew&&this.resource.project?this.resource.project.href:this.resource.isNew?void 0:this.pathHelper.api.v3.work_packages.id(this.resource.id).path},enumerable:!0,configurable:!0}),n.prototype.reset=function(){this.instance&&(this.instance.content=this.rawValue)},Object.defineProperty(n.prototype,"rawValue",{get:function(){return this.value&&this.value.raw?this.value.raw:""},set:function(e){this.value={raw:e}},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return!(this.value&&this.value.raw)},Object.defineProperty(n.prototype,"isFormattable",{get:function(){return!0},enumerable:!0,configurable:!0}),n}(ao),Go=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Zo(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"edit-field-controls",[],null,[[null,"onSave"],[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.handler.handleUserSubmit()&&l);"onCancel"===n&&(l=!1!==i.handler.handleUserCancel()&&l);return l},Ko,Qo)),l["\u0275did"](1,49152,null,0,zo,[],{cancelTitle:[0,"cancelTitle"],saveTitle:[1,"saveTitle"],field:[2,"field"]},{onSave:"onSave",onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,1,0,t.text.cancel,t.text.save,t.field)},null)}function Jo(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{instance:0}),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","textarea-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-ckeditor--wrapper op-ckeditor-element"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"op-ckeditor",[],null,[[null,"onContentChange"],[null,"onInitializationFailed"],[null,"onInitialized"]],function(e,n,t){var l=!0,i=e.component;"onContentChange"===n&&(l=!1!==i.onContentChange(t)&&l);"onInitializationFailed"===n&&(l=!1!=(i.initializationError=!0)&&l);"onInitialized"===n&&(l=!1!==i.onCkeditorSetup(t)&&l);return l},Ai,Di)),l["\u0275did"](4,245760,[[1,4]],0,Ei,[l.ElementRef,Ge,U.a,Ke,xi],{ckEditorType:[0,"ckEditorType"],context:[1,"context"],_content:[2,"_content"]},{onInitialized:"onInitialized",onContentChange:"onContentChange",onInitializationFailed:"onInitializationFailed"}),(e()(),l["\u0275and"](16777216,null,null,1,null,Zo)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.editorType,t.ckEditorContext,t.rawValue),e(n,6,0,!(t.handler.inEditMode||t.initializationError))},null)}var Xo=l["\u0275ccf"]("ng-component",Yo,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Jo,Go)),l["\u0275did"](1,245760,null,0,Yo,[U.a,l.ElementRef,Zn,ro,io,oo,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),er=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.I18n=n.injector.get(U.a),n.text={requiredPlaceholder:n.I18n.t("js.placeholders.selection"),placeholder:n.I18n.t("js.placeholders.default"),save:n.I18n.t("js.inplace.button_save",{attribute:n.schema.name}),cancel:n.I18n.t("js.inplace.button_cancel",{attribute:n.schema.name}),switch_to_single_select:n.I18n.t("js.work_packages.label_switch_to_single_select"),switch_to_multi_select:n.I18n.t("js.work_packages.label_switch_to_multi_select")},n.currentValueInvalid=!1,n}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.isMultiselect=this.isValueMulti(),this.nullOption={name:this.text.placeholder,$href:null},Array.isArray(this.schema.allowedValues)?this.setValues(this.schema.allowedValues):this.schema.allowedValues?this.schema.allowedValues.$load().then(function(n){n.count>0&&"Project"===n.elements[0]._type?e.setValues(n.elements,!0):e.setValues(n.elements)}):this.setValues([])},Object.defineProperty(n.prototype,"value",{get:function(){var e=this.changeset.value(this.name);return!Array.isArray(e)||this.isMultiselect?e:e[0]},enumerable:!0,configurable:!0}),n.prototype.buildSelectedOption=function(){var e=this,n=this.changeset.value(this.name);return this.isMultiselect?Array.isArray(n)?n.map(function(n){return e.findValueOption(n)}):[this.findValueOption(n)]:Array.isArray(n)?n.length>0?this.findValueOption(n[0]):this.nullOption:this.findValueOption(n)},Object.defineProperty(n.prototype,"selectedOption",{get:function(){return this._selectedOption},set:function(e){var n=this;this._selectedOption=e;var t=_.castArray(e).map(function(e){return t=e,(l=_.find(n.options,function(e){return e.$href===t.$href})||n.nullOption)&&""===l.$href&&(l.$href=null),l;var t,l});this.changeset.setValue(this.name,t)},enumerable:!0,configurable:!0}),n.prototype.isValueMulti=function(){var e=this.changeset.value(this.name);return e&&e.length>1},n.prototype.toggleMultiselect=function(){this.isMultiselect=!this.isMultiselect,this._selectedOption=this.buildSelectedOption()},n.prototype.submitOnSingleSelect=function(){this.isMultiselect||this.handler.handleUserSubmit()},n.prototype.findValueOption=function(e){var n;return e&&(n=_.find(this.valueOptions,function(n){return n.$href===e.$href})),n||this.nullOption},n.prototype.setValues=function(e,n){void 0===n&&(n=!1),n&&e.sort(function(e,n){var t=e.name.toLowerCase(),l=n.name.toLowerCase();return t<l?-1:t>l?1:0}),this.options=e,this.addEmptyOption(),this.valueOptions=this.options.map(function(e){return{name:e.name,$href:e.$href}}),this._selectedOption=this.buildSelectedOption(),this.checkCurrentValueValidity()},n.prototype.checkCurrentValueValidity=function(){var e=this;this.value?this.currentValueInvalid=!((!this.isMultiselect||_.some(this.value,function(n){return _.some(e.options,function(e){return e.$href===n.$href})}))&&(this.isMultiselect||_.some(this.options,function(n){return n.$href===e.value.$href}))):this.currentValueInvalid=!!this.schema.required},n.prototype.addEmptyOption=function(){var e=this;this.schema.required||void 0===_.find(this.options,function(n){return n.name===e.text.placeholder})&&this.options.unshift(this.nullOption)},n}(ao),nr=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function tr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["disabled",""],["value",""]],[[8,"textContent",0],[1,"label",0],[8,"selected",0],[1,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,"");e(n,2,0,"")},function(e,n){var t=n.component;e(n,0,0,t.text.requiredPlaceholder,t.text.requiredPlaceholder,t.currentValueInvalid||0==t.options.length,t.currentValueInvalid||0==t.options.length||void 0)})}function lr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[1,"label",0],[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name,n.context.$implicit.name)})}function ir(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"select",[["class","focus-input wp-inline-edit--field inplace-edit--field -animated form--select"]],[[1,"aria-required",0],[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,1).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedOption=t)&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t,!0)&&i);"change"===n&&(i=!1!==o.handler.handleUserSubmit()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.p,[l.Renderer2,l.ElementRef],null,null),l["\u0275did"](2,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.p]),l["\u0275did"](5,671744,null,0,qi.l,[[8,null],[6,qi.f],[8,null],[6,qi.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](7,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,tr)),l["\u0275did"](9,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,lr)),l["\u0275did"](11,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.required),e(n,5,0,t.inFlight,t.selectedOption),e(n,9,0,t.currentValueInvalid||0==t.options.length),e(n,11,0,t.valueOptions)},function(e,n){var t=n.component;e(n,0,0,t.required,t.handler.htmlId,l["\u0275nov"](n,2).required?"":null,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending)})}function or(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["disabled",""],["value",""]],[[8,"textContent",0],[1,"label",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[2,qi.q]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,"");e(n,2,0,"")},function(e,n){var t=n.component;e(n,0,0,t.text.requiredPlaceholder,t.text.requiredPlaceholder,t.currentValueInvalid||0==t.options.length)})}function rr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[1,"label",0],[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[2,qi.q]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name,n.context.$implicit.name)})}function ar(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"select",[["class","focus-input wp-inline-edit--field inplace-edit--textarea -animated form--select"],["multiple",""],["size","5"]],[[1,"aria-required",0],[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,1).onChange(t.target)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedOption=t)&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t,!0)&&i);"change"===n&&(i=!1!==o.submitOnSingleSelect()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.q,[l.Renderer2,l.ElementRef],null,null),l["\u0275did"](2,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.q]),l["\u0275did"](5,671744,null,0,qi.l,[[8,null],[6,qi.f],[8,null],[6,qi.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](7,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,or)),l["\u0275did"](9,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,rr)),l["\u0275did"](11,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.required),e(n,5,0,t.inFlight,t.selectedOption),e(n,9,0,t.currentValueInvalid||0==t.options.length),e(n,11,0,t.valueOptions)},function(e,n){var t=n.component;e(n,0,0,t.required,t.handler.htmlId,l["\u0275nov"](n,2).required?"":null,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending)})}function ur(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-minus2 icon4"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){e(n,1,0,"icon-minus2 icon4",n.component.text.switch_to_single_select)},null)}function sr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-add icon4"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){e(n,1,0,"icon-add icon4",n.component.text.switch_to_multi_select)},null)}function cr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"edit-field-controls",[],null,[[null,"onSave"],[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.handler.handleUserSubmit()&&l);"onCancel"===n&&(l=!1!==i.handler.handleUserCancel()&&l);return l},Ko,Qo)),l["\u0275did"](1,49152,null,0,zo,[],{cancelTitle:[0,"cancelTitle"],saveTitle:[1,"saveTitle"],field:[2,"field"]},{onSave:"onSave",onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,1,0,t.text.cancel,t.text.save,t.self)},null)}function dr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,13,"div",[],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),(e()(),l["\u0275eld"](2,0,null,null,9,"div",[["class","inline-label"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ir)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ar)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,4,"a",[["class","wp-inline-edit--toggle-multiselect form-label no-decoration-on-hover -transparent"],["href",""]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleMultiselect()&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ur)),l["\u0275did"](9,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,sr)),l["\u0275did"](11,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,cr)),l["\u0275did"](13,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.isMultiselect?"textarea-wrapper":""),e(n,4,0,!t.isMultiselect),e(n,6,0,t.isMultiselect),e(n,9,0,t.isMultiselect),e(n,11,0,!t.isMultiselect),e(n,13,0,t.isMultiselect&&!t.handler.inEditMode)},null)}var pr,hr=l["\u0275ccf"]("ng-component",er,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,dr,nr)),l["\u0275did"](1,245760,null,0,er,[U.a,l.ElementRef,Zn,ro,io,oo,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),fr=function(){function e(){this.config={user:"name",project:"name"}}return e.prototype.sort=function(e,n){if(0===e.length)return e;var t=n||e[0]._type;if(!t)return e;var l=this.sortingProperty(t);return l?_.sortBy(e,function(e){return e[l].toLowerCase()}):e},e.prototype.sortingProperty=function(e){return e=e.toLowerCase().replace(/^\[\]/,""),this.config[e]},e.prototype.hasSortingProperty=function(e){return void 0!==this.sortingProperty(e)},e}();!function(e){function n(e){return function(n,t){return!n&&!t||!!n&&!!t&&n[e]===t[e]}}function t(e,n){return!e&&!n||!!e&&!!n&&e.$href===n.$href}e.halHref=function(e,n){return n.$href},e.compareByName=function(e,t){return n("name")(e,t)},e.compareByAttribute=n,e.trackByName=function(e,n){return _.get(n,"name")},e.trackByHref=function(e,n){return _.get(n,"href")},e.trackByHrefAndProperty=function(e){return function(n,t){var l=_.get(t,"href"),i=_.get(t,e,"none");return l+"#"+e+"="+i}},e.trackByTrackingIdentifier=function(e,n){return _.get(n,"trackingIdentifier",n&&n.href)},e.compareByHref=t,e.compareByHrefOrString=function(e,n){return e instanceof K&&n instanceof K?t(e,n):!e&&!n||e===n}}(pr||(pr={}));var gr=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.template="/components/wp-edit/field-types/wp-edit-select-field.directive.html",n.compareByHref=pr.compareByHref,n}return r.d(n,e),n.prototype.initialize=function(){var e=this;this.halSorting=this.injector.get(fr),this.text={requiredPlaceholder:this.I18n.t("js.placeholders.selection"),placeholder:this.I18n.t("js.placeholders.default")},Array.isArray(this.schema.allowedValues)?this.setValues(this.schema.allowedValues):this.schema.allowedValues?this.schema.allowedValues.$load().then(function(n){e.setValues(n.elements)}):this.setValues([])},Object.defineProperty(n.prototype,"selectedOption",{get:function(){var e=this.value?this.value.$href:null;return _.find(this.valueOptions,function(n){return n.$href===e})},set:function(e){var n=_.find(this.options,function(n){return n.$href===e.$href});n&&""===n.$href&&(n.$href=null),this.value=n},enumerable:!0,configurable:!0}),n.prototype.setValues=function(e){this.options=this.halSorting.sort(e),this.addEmptyOption(),this.valueOptions=this.options.map(function(e){return{name:e.name,$href:e.$href}})},Object.defineProperty(n.prototype,"currentValueInvalid",{get:function(){var e=this;return!!(this.value&&!_.some(this.options,function(n){return n.$href===e.value.$href})||!this.value&&this.schema.required)},enumerable:!0,configurable:!0}),n.prototype.addEmptyOption=function(){var e=this;this.schema.required||void 0===_.find(this.options,function(n){return n.name===e.text.placeholder})&&this.options.unshift({name:this.text.placeholder,$href:""})},n}(ao),mr=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function vr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["disabled",""]],[[8,"textContent",0],[1,"selected",0],[1,"label",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,void 0);e(n,2,0,void 0)},function(e,n){var t=n.component;e(n,0,0,t.text.requiredPlaceholder,t.currentValueInvalid||void 0,t.text.requiredPlaceholder)})}function yr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[1,"selected",0],[1,"label",0],[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){var t=n.component;e(n,0,0,t.compareByHref(t.selectedOption,n.context.$implicit)||void 0,n.context.$implicit.name,n.context.$implicit.name)})}function br(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"select",[["class","wp-inline-edit--field form--select"],["role","listbox"]],[[1,"aria-required",0],[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,1).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedOption=t)&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t,!0)&&i);"change"===n&&(i=!1!==o.handler.handleUserSubmit()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.p,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["\u0275did"](2,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.p]),l["\u0275did"](5,671744,null,0,qi.l,[[8,null],[6,qi.f],[8,null],[6,qi.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](7,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,vr)),l["\u0275did"](9,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,yr)),l["\u0275did"](11,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.compareByHref),e(n,2,0,t.required),e(n,5,0,t.inFlight,t.selectedOption),e(n,9,0,t.currentValueInvalid),e(n,11,0,t.valueOptions)},function(e,n){var t=n.component;e(n,0,0,t.required,t.handler.htmlId,l["\u0275nov"](n,2).required?"":null,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending)})}var wr=l["\u0275ccf"]("ng-component",gr,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,br,mr)),l["\u0275did"](1,180224,null,0,gr,[U.a,l.ElementRef,Zn,ro,io,oo,l.ChangeDetectorRef,l.Injector],null,null)],null,null)},{},{},[]),kr=function(){function e(e,n){this.FocusHelper=e,this.elementRef=n,this.priority=0}return e.prototype.ngAfterViewInit=function(){this.updateFocus()},e.prototype.updateFocus=function(){if(this.condition){var e=jQuery(this.elementRef.nativeElement);this.FocusHelper.focusElement(e,this.priority)}},e}(),Cr=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.shouldFocus="subject"===n.name,n}return r.d(n,e),n}(ao),Pr=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ir(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"input",[["class","wp-inline-edit--field"],["type","text"]],[[1,"aria-required",0],[1,"required",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);"keydown"===n&&(i=!1!==o.handler.handleUserKeydown(t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](3,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](5,16384,null,0,qi.i,[[4,qi.h]],null,null),l["\u0275did"](6,4210688,null,0,kr,[p.a,l.ElementRef],{condition:[0,"condition"]},null)],function(e,n){var t=n.component;e(n,3,0,t.inFlight,t.value),e(n,6,0,t.shouldFocus)},function(e,n){var t=n.component;e(n,0,0,t.required,t.required,t.handler.htmlId,l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending)})}var jr=l["\u0275ccf"]("ng-component",Cr,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Ir,Pr)),l["\u0275did"](1,180224,null,0,Cr,[U.a,l.ElementRef,Zn,ro,io,oo,l.ChangeDetectorRef,l.Injector],null,null)],null,null)},{},{},[]),_r=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(ao),Sr=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Rr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"input",[["class","wp-inline-edit--field"],["disabled",""],["type","text"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;"input"===n&&(i=!1!==l["\u0275nov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,1)._compositionEnd(t.target.value)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](3,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},null),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](5,16384,null,0,qi.i,[[4,qi.h]],null,null)],function(e,n){e(n,3,0,"",n.component.value)},function(e,n){e(n,0,0,n.component.handler.htmlId,l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending)})}var Tr,xr=l["\u0275ccf"]("ng-component",_r,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Rr,Sr)),l["\u0275did"](1,180224,null,0,_r,[U.a,l.ElementRef,Zn,ro,io,oo,l.ChangeDetectorRef,l.Injector],null,null)],null,null)},{},{},[]),Er=function(){function e(e,n,t){this.tableState=e,this.states=n,this.wpCacheService=t,this.selectionState=e.selection,this.selectionState.isPristine()&&this.reset()}return e.prototype.isSelected=function(e){return this.currentState.selected[e]},e.prototype.selectAll=function(e){var n=this._emptyState;e.forEach(function(e){e.workPackageId&&(n.selected[e.workPackageId]=!0)}),this.selectionState.putValue(n)},e.prototype.getSelectedWorkPackages=function(){var e=this.states.workPackages;return this.getSelectedWorkPackageIds().map(function(n){return e.get(n).value})},e.prototype.getSelectedWorkPackageIds=function(){var e=[];return _.each(this.currentState.selected,function(n,t){n&&e.push(t)}),e},e.prototype.reset=function(){this.selectionState.putValue(this._emptyState)},Object.defineProperty(e.prototype,"currentState",{get:function(){return this.selectionState.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.selectionCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionCount",{get:function(){return _.size(this.currentState.selected)},enumerable:!0,configurable:!0}),e.prototype.toggleRow=function(e){var n=this.currentState.selected[e];this.setRowState(e,!n)},e.prototype.setRowState=function(e,n){var t=this.currentState;t.selected[e]=n,this.selectionState.putValue(t)},e.prototype.setSelection=function(e,n){var t={selected:{},activeRowIndex:n};t.selected[e]=!0,this.selectionState.putValue(t)},e.prototype.setMultiSelectionFrom=function(e,n,t){var l=this.currentState;if(0===this.selectionCount||null===l.activeRowIndex)l.selected[n]=!0,l.activeRowIndex=t;else{var i=Math.min(t,l.activeRowIndex),o=Math.max(t,l.activeRowIndex);e.forEach(function(e,n){e.workPackageId&&(l.selected[e.workPackageId]=n>=i&&n<=o)})}this.selectionState.putValue(l)},Object.defineProperty(e.prototype,"_emptyState",{get:function(){return{selected:{},activeRowIndex:null}},enumerable:!0,configurable:!0}),e}(),Or=t("ad02"),Dr=function(){function e(e,n,t){this.states=e,this.tableState=n,this.wpTableSelection=t,this.state=e.focusedWorkPackage,this.observeToUpdateFocused()}return e.prototype.isFocused=function(e){return this.focusedWorkPackage===e},e.prototype.ifShouldFocus=function(e){var n=this.state.value;n&&n.focusAfterRender&&(e(n.workPackageId),n.focusAfterRender=!1,this.state.putValue(n,"Setting focus to false after callback."))},Object.defineProperty(e.prototype,"focusedWorkPackage",{get:function(){var e=this.state.value;return e?e.workPackageId:null},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.state.clear()},e.prototype.whenChanged=function(){return this.state.values$().pipe(Object(D.a)(function(e){return e.workPackageId}),Object(Or.a)())},e.prototype.updateFocus=function(e,n){void 0===n&&(n=!1),this.wpTableSelection.isEmpty&&this.wpTableSelection.setRowState(e,!0),this.state.putValue({workPackageId:e,focusAfterRender:n})},e.prototype.observeToUpdateFocused=function(){var e=this;this.tableState.rendered.values$().pipe(Object(D.a)(function(e){return _.find(e,function(e){return e.workPackageId})}),Object(E.a)(function(n){return!!n&&e.wpTableSelection.isEmpty})).subscribe(function(n){e.updateFocus(n.workPackageId)})},e}();!function(e){e.setPosition=function(e,n){try{e.setSelectionRange(n,n)}catch(t){Object(Ee.a)("Failed to set click position for edit field.",t)}},e.getPosition=function(e){try{return document.caretRangeFromPoint(e.clientX,e.clientY).startOffset}catch(n){return Object(Ee.a)("Failed to get click position for edit field.",n),0}}}(Tr||(Tr={}));var Fr=function(e){function n(n,t,l,i,o,r){var a=e.call(this)||this;return a.injector=n,a.form=t,a.fieldName=l,a.schema=i,a.element=o,a.withErrors=r,a.FocusHelper=a.injector.get(p.a),a.ConfigurationService=a.injector.get(Ke),a.I18n=a.injector.get(U.a),a.editContext=t.editContext,void 0!==r&&a.setErrors(r),a}return r.d(n,e),n.prototype.stopPropagation=function(e){return e.stopPropagation(),!1},Object.defineProperty(n.prototype,"inEditMode",{get:function(){return this.form.editMode},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inFlight",{get:function(){return this.form.changeset.inFlight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return!0},enumerable:!0,configurable:!0}),n.prototype.focus=function(e){var n=this.element.querySelector(".wp-inline-edit--field");n?(n.focus(),e&&"INPUT"===n.tagName&&Tr.setPosition(n,e)):Object(Ee.a)("Tried to focus on "+this.fieldName+", but element does not (yet) exist.")},n.prototype.setErrors=function(e){this.errors=e,this.element.classList.toggle("-error",this.isErrorenous)},n.prototype.handleUserSubmit=function(){var e=this;return this.form.changeset.inFlight||this.form.editMode?Promise.resolve():this.onSubmit().then(function(){return e.form.submit()})},n.prototype.handleUserKeydown=function(e,n){return void 0===n&&(n=!1),this.inEditMode&&!n?e.which!==Tt.a.ENTER||(this.form.submit(),!1):e.which!==Tt.a.ESCAPE||(this.handleUserCancel(),!1)},n.prototype.handleUserCancel=function(){this.reset()},n.prototype.reset=function(){this.form.changeset.reset(this.fieldName),this.deactivate(!0)},n.prototype.deactivate=function(e){void 0===e&&(e=!1),delete this.form.activeFields[this.fieldName],this.onDestroy.next(),this.onDestroy.complete(),this.editContext.reset(this.workPackage,this.fieldName,e)},Object.defineProperty(n.prototype,"isErrorenous",{get:function(){return this.errors.length>0},enumerable:!0,configurable:!0}),n.prototype.isChanged=function(){return this.form.changeset.isOverridden(this.fieldName)},Object.defineProperty(n.prototype,"workPackage",{get:function(){return this.form.workPackage},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"project",{get:function(){return this.form.changeset.value("project")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"htmlId",{get:function(){return"wp-"+this.workPackage.id+"-inline-edit--field-"+this.fieldName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fieldLabel",{get:function(){return this.schema.name||this.fieldName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"errorMessageOnLabel",{get:function(){return this.isErrorenous?this.I18n.t("js.inplace.errors.messages_on_field",{messages:this.errors.join(" ")}):""},enumerable:!0,configurable:!0}),n}(eo),Ar=function(){function e(e,n,t){this.injector=e,this.appRef=n,this.componentFactoryResolver=t}return e.prototype.create=function(e,n,t,l,i){var o=this.createDomOutlet(e),r=new Fr(this.injector,n,l,t,e,i);r.onDestroy.pipe(Object(H.a)(1)).subscribe(function(){return o.detach()});var a=uo(this.injector,n.changeset,r,t),u=new c.a(po,null,a);return e.innerHTML="",o.attachComponentPortal(u).instance.onEditFieldReady.pipe(Object(H.a)(1)).toPromise().then(function(){return r})},e.prototype.createDomOutlet=function(e){return new c.b(e,this.componentFactoryResolver,this.appRef,this.injector)},e}(),Vr=function(){function e(e,n){this.injector=e,this.fieldGroup=n,this.wpTableRefresh=this.injector.get(Ae),this.states=this.injector.get(u),this.FocusHelper=this.injector.get(p.a),this.$state=this.injector.get(d.G),this.wpNotificationsService=this.injector.get(Ze),this.wpEditingPortalService=this.injector.get(Ar),this.wpTableSelection=this.injector.get(Er)}return e.prototype.activateField=function(e,n,t,l){return r.b(this,void 0,void 0,function(){var i=this;return r.e(this,function(o){return[2,this.fieldCtrl(t).then(function(o){o.active=!0;var r=o.editContainer.nativeElement;return i.wpEditingPortalService.create(r,e,n,t,l)})]})})},e.prototype.reset=function(e,n,t){return void 0===t&&(t=!1),r.b(this,void 0,void 0,function(){var l;return r.e(this,function(i){switch(i.label){case 0:return[4,this.fieldCtrl(n)];case 1:return(l=i.sent()).reset(e),l.deactivate(t),[2]}})})},e.prototype.onSaved=function(e,n){this.fieldGroup.stopEditingAndLeave(n,e)},e.prototype.requireVisible=function(e){var n=this;return new Promise(function(t){var l=setInterval(function(){void 0!==n.fieldGroup.fields[e]&&(clearInterval(l),t())},50)})},e.prototype.firstField=function(e){return"subject"},e.prototype.fieldCtrl=function(e){return this.fieldGroup.waitForField(e)},e}(),Mr=function(){function e(e,n,t){void 0===t&&(t=!1);var l=this;this.injector=e,this.workPackage=n,this.editMode=t,this.states=this.injector.get(u),this.wpCacheService=this.injector.get(Oe),this.wpEditing=this.injector.get(Zn),this.wpTableRefresh=this.injector.get(Ae),this.wpNotificationsService=this.injector.get(Ze),this.activeFields={},this.errorsPerAttribute={},this.wpSubscription=this.wpCacheService.state(n.id).values$().subscribe(function(e){l.workPackage=e})}return e.createInContext=function(n,t,l,i){void 0===i&&(i=!1);var o=new e(n,l,i);return o.editContext=t,o},e.prototype.hasActiveFields=function(){return!_.isEmpty(this.activeFields)},Object.defineProperty(e.prototype,"changeset",{get:function(){return this.wpEditing.changesetFor(this.workPackage)},enumerable:!0,configurable:!0}),e.prototype.activate=function(e,n){var t=this;return void 0===n&&(n=!1),this.loadFieldSchema(e).then(function(l){return l.writable||n?t.renderField(e,l):(t.wpNotificationsService.showEditingBlockedError(l.name||e),Promise.reject())})},e.prototype.activateWhenNeeded=function(e){var n=this,t=this.activeFields[e];return t?Promise.resolve(t.element):this.editContext.requireVisible(e).then(function(){return n.activate(e,!0)})},e.prototype.activateMissingFields=function(){var e=this;this.changeset.getForm().then(function(n){_.each(n.validationErrors,function(n,t){"id"!==t&&e.activateWhenNeeded(t)})})},e.prototype.submit=function(){return r.b(this,void 0,void 0,function(){var e,n,t=this;return r.e(this,function(l){switch(l.label){case 0:return e=this.workPackage.isNew,this.changeset.empty&&!e?(this.closeEditFields(),[2,Promise.resolve(this.workPackage)]):(this.errorsPerAttribute={},n=_.keys(this.activeFields),[4,Promise.all(_.map(this.activeFields,function(e){return e.onSubmit()}))]);case 1:return l.sent(),[2,new Promise(function(l,i){t.changeset.save().then(function(i){t.closeEditFields(n),l(i),t.wpNotificationsService.showSave(i,e),t.editMode=!1,t.editContext.onSaved(e,i),t.wpTableRefresh.request("Saved work package "+i.id)}).catch(function(e){t.wpNotificationsService.handleRawError(e,t.workPackage),e instanceof ze&&(t.handleSubmissionErrors(e),i())})})]}})})},e.prototype.destroy=function(){this.wpSubscription.unsubscribe(),_.each(this.activeFields,function(e){e&&e.deactivate()})},e.prototype.closeEditFields=function(e){var n=this;e||(e=_.keys(this.activeFields)),e.forEach(function(e){var t=n.activeFields[e];t&&t.deactivate(),n.changeset.reset(e)})},e.prototype.handleSubmissionErrors=function(e){this.handleErroneousAttributes(e)},e.prototype.handleErroneousAttributes=function(e){var n=e.getInvolvedAttributes();if(this.errorsPerAttribute=e.getMessagesPerAttribute(),0!==n.length)return this.setErrorsForFields(n)},e.prototype.setErrorsForFields=function(e){var n=this,t=e.map(function(e){return n.editContext.requireVisible(e).then(function(){return n.activeFields[e]&&n.activeFields[e].setErrors(n.errorsPerAttribute[e]||[]),n.activateWhenNeeded(e)})});Promise.all(t).then(function(){setTimeout(function(){jQuery(".wp-inline-edit--active-field.-error .wp-inline-edit--field").first().focus()})}).catch(function(){console.error("Failed to activate all erroneous fields.")})},e.prototype.loadFieldSchema=function(e){var n=this;return this.changeset.getForm().then(function(t){var l=n.changeset.getSchemaName(e),i=t.schema[l];if(!i)throw new Error;return i}).catch(function(e){throw console.error("Failed to build edit field: %o",e),n.wpNotificationsService.handleRawError(e,n.workPackage),new Error})},e.prototype.renderField=function(e,n){var t=this;return this.editContext.activateField(this,n,e,this.errorsPerAttribute[e]||[]).then(function(n){return t.activeFields[e]=n,n}).catch(function(e){console.error("Failed to render edit field:"+e),t.wpNotificationsService.handleRawError(e)})},e}(),Lr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.updateElements=function(){var e=this;return this.$href?this.$load().then(function(n){return e.elements=n.elements}):Promise.resolve()},n}(K),Nr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.$initialize=function(n){e.prototype.$initialize.call(this,n),this.elements=this.elements||[]},n}(Lr),$r=t("S1nX"),qr=function(){function e(e,n){this.http=e,this.halResource=n}return e.prototype.uploadAndMapResponse=function(e,n,t){void 0===t&&(t="post");var l=this.upload(e,n);return{uploads:l.uploads,finished:l.finished.then(function(e){return e.map(function(e){return{response:e,uploadUrl:e.staticDownloadLocation.href}})})}},e.prototype.upload=function(e,n,t){var l=this;void 0===t&&(t="post"),n=_.filter(n,function(e){return"directory"!==e.type});var i=_.map(n,function(n){return l.uploadSingle(e,n,t)});return{uploads:i,finished:this.whenFinished(i)}},e.prototype.uploadSingle=function(e,n,t,l){void 0===t&&(t="post"),void 0===l&&(l="json");var i=new FormData,o={description:n.description,fileName:n.customName||n.name};return i.append("metadata",JSON.stringify(o)),i.append("file",n,o.fileName),[n,this.http.request(t,e,{body:i,observe:"events",withCredentials:!0,responseType:l,reportProgress:!0}).pipe(Object($r.a)())]},e.prototype.whenFinished=function(e){var n=this,t=e.map(function(e){e[0];return e[1].pipe(Object(E.a)(function(e){return e.type===W.g.Response}),Object(D.a)(function(e){return n.halResource.createHalResource(e.body)})).toPromise()});return Promise.all(t)},e}();function Hr(e){return function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"canAddAttachments",{get:function(){return!!this.$links.addAttachment||this.isNew},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasAttachments",{get:function(){return _.get(this.attachments,"elements.length",0)>0},enumerable:!0,configurable:!0}),n.prototype.lookupDownloadLocationByName=function(e){if(!this.attachments||!this.attachments.elements)return null;var n=_.find(this.attachments.elements,function(n){return n.name===e});return _.get(n,"staticDownloadLocation.href",null)},n.prototype.removeAttachment=function(e){var n=this;return _.pull(this.attachments.elements,e),e.$isHal?e.delete().then(function(){n.attachmentsBackend?n.updateAttachments():n.attachments.count=Math.max(n.attachments.count-1,0)}).catch(function(t){n.wpNotificationsService.handleRawError(t,n),n.attachments.elements.push(e)}):Promise.resolve()},n.prototype.uploadAttachments=function(e){var n=this,t=this.performUpload(e),l=t.uploads,i=t.finished,o=I18n.t("js.label_upload_notification",this),r=this.NotificationsService.addAttachmentUpload(o,l);return i.then(function(e){return setTimeout(function(){return n.NotificationsService.remove(r)},700),n.attachmentsBackend&&!n.isNew?n.updateAttachments():(n.attachments.count+=e.length,e.forEach(function(e){n.attachments.elements.push(e.response)})),e}).catch(function(e){return n.wpNotificationsService.handleRawError(e),_.get(e,"message",I18n.t("js.error.internal"))})},n.prototype.performUpload=function(e){var n="";return n=!this.isNew&&this.id&&this.attachmentsBackend?this.addAttachment.$link.href:this.pathHelper.api.v3.attachments.path,this.opFileUpload.uploadAndMapResponse(n,e)},n.prototype.$initialize=function(n){this.NotificationsService=this.injector.get(Ge),this.wpNotificationsService=this.injector.get(Ze),this.opFileUpload=this.injector.get(qr),this.pathHelper=this.injector.get(R),e.prototype.$initialize.call(this,n);var t=this.attachments||{$source:{},elements:[]};this.attachments=new Nr(this.injector,t,!1,this.halInitializer,"HalResource")},n}(e)}var Br=Hr(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.I18n=n.injector.get(U.a),n.states=n.injector.get(u),n.apiWorkPackages=n.injector.get(Re),n.wpCacheService=n.injector.get(Oe),n.schemaCacheService=n.injector.get(xe),n.NotificationsService=n.injector.get(Ge),n.wpNotificationsService=n.injector.get(Ze),n.pathHelper=n.injector.get(R),n.opFileUpload=n.injector.get(qr),n.attachmentsBackend=!0,n}return r.d(n,e),Object.defineProperty(n.prototype,"id",{get:function(){return this.$source.id||this.idFromLink},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ancestorIds",{get:function(){return this.ancestors.map(function(e){return e.id.toString()})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isReadonly",{get:function(){return this.status&&this.status.isReadonly},enumerable:!0,configurable:!0}),n.prototype.subjectWithType=function(e){void 0===e&&(e=40);var n=this.type?this.type.name+": ":"",t=this.isNew?"":" (#"+this.id+")";return""+n+_.truncate(this.subject,{length:e})+t},Object.defineProperty(n.prototype,"isNew",{get:function(){return"new"===this.id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isMilestone",{get:function(){return this.schema.hasOwnProperty("date")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLeaf",{get:function(){var e=this.$links.children;return!(e&&e.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEditable",{get:function(){return this.isNew||!!this.$links.update},enumerable:!0,configurable:!0}),n.prototype.isAttributeEditable=function(e){return this.isEditable&&(!this.isReadonly||"status"===e)},n.prototype.performUpload=function(e){var n="";return n=this.isNew?this.pathHelper.api.v3.attachments.path:this.attachments.$href,this.opFileUpload.uploadAndMapResponse(n,e)},n.prototype.getSchemaName=function(e){return!this.isMilestone||"startDate"!==e&&"dueDate"!==e?e:"date"},n.prototype.isParentOf=function(e){return e.parent.$links.self.$link.href===this.$links.self.$link.href},n.prototype.updateLinkedResources=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var l={};n.forEach(function(n){var t=e[n];l[n]=t?t.$update():Promise.reject(void 0)});var i=Promise.all(_.values(l));return i.then(function(){e.wpCacheService.touch(e.id)}),i},n.prototype.updateAttachments=function(){return this.updateLinkedResources("activities","attachments").then(function(e){return e.attachments})},n.prototype.initializeNewResource=function(e){var n=this;this.overriddenSchema=e.schema,this.form=Promise.resolve(e),this.$source.id="new",this.__initialized_at=Date.now(),this.update=this.$links.update=e.$links.self,this.updateImmediately=this.$links.updateImmediately=function(e){return n.apiWorkPackages.createWorkPackage(e)}},n.prototype.retainFrom=function(e){this.__initialized_at=e.__initialized_at},n.prototype.$initialize=function(n){e.prototype.$initialize.call(this,n);var t=this.attachments||{$source:{},elements:[]};this.attachments=new Nr(this.injector,t,!1,this.halInitializer,"HalResource")},n.prototype.$linkableKeys=function(){return _.without(e.prototype.$linkableKeys.call(this),"schema")},Object.defineProperty(n.prototype,"schema",{get:function(){if(this.hasOverriddenSchema)return this.overriddenSchema;var e=this.schemaCacheService.state(this);if(!e.hasValue())throw"Accessing schema of "+this.id+" without it being loaded.";return e.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasOverriddenSchema",{get:function(){return null!=this.overriddenSchema},enumerable:!0,configurable:!0}),n}(K)),Wr=function(){function e(e,n,t,l,i,o,r,u,s,c,d){var p=this;this.states=e,this.injector=n,this.wpCreate=t,this.wpEditing=l,this.wpNotificationsService=i,this.wpTableSelection=o,this.wpTableFocus=r,this.$transitions=u,this.ConfigurationService=s,this.$state=c,this.I18n=d,this.initializeEditMode=!1,this.fields={},this.registeredFields=Object(a.g)();var h=d.t("js.work_packages.confirm_edit_cancel"),f=s.warnOnLeavingUnsaved();this.unregisterListener=u.onStart({},function(e){if(p.editing){var n=e.to(),t=e.from(),l=e.params("from"),i=e.params("to");if(!p.allowedStateChange(n,i,t,l)){if(f&&!window.confirm(h))return!1;p.stop()}return!0}})}return e.prototype.ngOnDestroy=function(){this.unregisterListener(),this.form.destroy()},e.prototype.ngOnInit=function(){var e=this,n=new Vr(this.injector,this);this.form=Mr.createInContext(this.injector,n,this.workPackage,this.initializeEditMode),this.states.workPackages.get(this.workPackage.id).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){_.each(e.fields,function(t){return e.updateDisplayField(t,n)})}),this.initializeEditMode&&this.start(),this.initializeEditMode&&this.workPackage.isNew&&this.wpCreate.onNewWorkPackage().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.form.editMode=!1,e.stopEditingAndLeave(n,!0)})},Object.defineProperty(e.prototype,"editing",{get:function(){return this.editMode||this.form.hasActiveFields()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editMode",{get:function(){return this.form.editMode},enumerable:!0,configurable:!0}),e.prototype.register=function(e){var n=this;this.fields[e.fieldName]=e,this.registeredFields.putValue(_.keys(this.fields)),this.editMode&&!this.skipField(e)||this.form.activeFields[e.fieldName]?e.activateOnForm(!0):this.states.workPackages.get(this.workPackage.id).valuesPromise().then(function(t){return n.updateDisplayField(e,t)})},e.prototype.waitForField=function(e){var n=this;return this.registeredFields.values$().pipe(Object(E.a)(function(n){return n.indexOf(e)>=0}),Object(H.a)(1),Object(D.a)(function(){return n.fields[e]})).toPromise()},e.prototype.start=function(){var e=this;_.each(this.fields,function(n){return e.form.activate(n.fieldName)})},e.prototype.stop=function(){this.form.editMode=!1,this.wpEditing.stopEditing(this.workPackage.id),this.form.destroy()},e.prototype.saveWorkPackage=function(){var e=this,n=this.workPackage.isNew;return this.form.submit().then(function(t){e.stopEditingAndLeave(t,n)})},e.prototype.stopEditingAndLeave=function(e,n){var t=this;this.stop(),this.successState&&this.$state.go(this.successState,{workPackageId:e.id}).then(function(){t.wpTableFocus.updateFocus(e.id),t.wpNotificationsService.showSave(e,n)})},e.prototype.updateDisplayField=function(e,n){e.workPackage=n,e.render()},e.prototype.skipField=function(e){var n=e.fieldName;return("status"===n||"type"===n)&&this.workPackage[n]},e.prototype.allowedStateChange=function(e,n,t,l){return t.name.match(/\.(new|copy)$/)?e.data&&e.data.allowMovingInEditMode:void 0!==n.workPackageId&&n.workPackageId===l.workPackageId},e}(),zr=function(){function e(e,n){this.wpEditFieldGroup=e,this.elementRef=n}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement)},e.prototype.activate=function(e){if(jQuery(e.target).closest(".help-text--entry").length)return!0;var n=this.wpEditFieldGroup.fields[this.fieldName];return n&&n.handleUserActivate(null),!1},e}(),Qr=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ur(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","wp-replacement-label"],["tabindex","-1"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.activate(t)&&l);return l},null,null)),l["\u0275ncd"](null,0)],null,null)}l["\u0275ccf"]("wp-replacement-label",zr,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-replacement-label",[],null,null,null,Ur,Qr)),l["\u0275did"](1,114688,null,0,zr,[Wr,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{fieldName:"fieldName"},{},["*"]);var Kr=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.loadAll=function(){return this.halResourceService.get(this.pathHelper.api.v3.help_texts.toString()).toPromise()},e.prototype.load=function(e){return this.halResourceService.get(this.pathHelper.api.v3.help_texts.id(e).toString()).toPromise()},e}(),Yr=function(){function e(e){this.helpTextDm=e,this.helpTexts=Object(a.g)()}return e.prototype.require=function(e,n){var t=this;return this.helpTexts.putFromPromiseIfPristine(function(){return t.helpTextDm.loadAll().then(function(e){return e.elements})}),new Promise(function(l,i){t.helpTexts.valuesPromise().then(function(){return l(t.find(e,n))})})},e.prototype.find=function(e,n){var t=this.helpTexts.getValueOr([]);return _.find(t,function(t){return t.scope===n&&t.attribute===e})},e}(),Gr=function(e){function n(n,t,l,i){var o=e.call(this,n,l,i)||this;return o.locals=n,o.I18n=t,o.cdRef=l,o.elementRef=i,o.closeOnEscape=!0,o.closeOnOutsideClick=!1,o.text={edit:o.I18n.t("js.button_edit"),close:o.I18n.t("js.button_close")},o.helpText=o.locals.helpText,o}return r.d(n,e),Object.defineProperty(n.prototype,"helpTextLink",{get:function(){return this.helpText.editText?this.helpText.editText.$link.href:""},enumerable:!0,configurable:!0}),n}(yn.a),Zr=function(){function e(e,n,t,l,i){this.elementRef=e,this.helpTextDm=n,this.attributeHelpTexts=t,this.opModalService=l,this.I18n=i,this.exists=!1,this.text={open_dialog:this.I18n.t("js.help_texts.show_modal"),edit:this.I18n.t("js.button_edit"),close:this.I18n.t("js.button_close")}}return e.prototype.ngOnInit=function(){var e=this;this.helpTextId?this.exists=!0:this.load().then(function(n){return e.exists=!!n,n})},e.prototype.handleClick=function(){var e=this;this.load().then(function(n){e.opModalService.show(Gr,{helpText:n})})},e.prototype.load=function(){return this.helpTextId?this.helpTextDm.load(this.helpTextId):this.attributeHelpTexts.require(this.attribute,this.attributeScope)},e}(),Jr=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Xr(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"accessible-by-keyboard",[],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.handleClick()&&l);return l},Dt,Ot)),l["\u0275did"](1,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkAriaLabel:[1,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-help1"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275ted"](4,0,[" ","\n"]))],function(e,n){var t=n.component;e(n,1,0,l["\u0275inlineInterpolate"](1,"icon help-text--entry help-text--for-",t.attribute,""),t.text.open_dialog);e(n,3,0,"icon icon-help1")},function(e,n){e(n,4,0,n.component.additionalLabel)})}function ea(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Xr)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.exists)},null)}l["\u0275ccf"]("attribute-help-text",Zr,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attribute-help-text",[],null,null,null,ea,Jr)),l["\u0275did"](1,114688,null,0,Zr,[l.ElementRef,Kr,Yr,On.b,U.a],null,null)],function(e,n){e(n,1,0)},null)},{attribute:"attribute",additionalLabel:"additionalLabel",attributeScope:"attributeScope",helpTextId:"helpTextId"},{},[]);var na,ta=function(e){function n(n){return e.call(this,n)||this}return r.d(n,e),n.prototype.getField=function(e,n,t,l){return new(this.getClassFor(n,t.type))(e,n,t,l)},n}(so),la=function(e){function n(n,t,l,i){var o=e.call(this)||this;return o.resource=n,o.name=t,o.schema=l,o.context=i,o.mode=null,o.changeset=null,o.I18n=o.$injector.get(U.a),o}return r.d(n,e),Object.defineProperty(n.prototype,"isFormattable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.changeset?this.changeset.value(this.name):this.attribute:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"attribute",{get:function(){return this.resource[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this.constructor.type},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"placeholder",{get:function(){return"-"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"label",{get:function(){return this.schema.name||this.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.isFormattable?null:this.valueString},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){e.textContent=n},n}(lo),ia=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={empty:n.I18n.t("js.work_packages.no_value"),placeholder:n.I18n.t("js.placeholders.default")},n}return r.d(n,e),n.prototype.isEmpty=function(){return _.isEmpty(this.value)},Object.defineProperty(n.prototype,"value",{get:function(){var e=this.resource[this.name];return this.schema&&e?e.elements?e.elements.map(function(e){return e.name}):e.map?e.map(function(e){return e.name}):e.name?[e.name]:["error: "+JSON.stringify(e)]:[]},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){var t=this.value;e.innerHTML="",e.setAttribute("title",t.join(", ")),0===t.length?this.renderEmpty(e):this.renderValues(t,e)},n.prototype.renderEmpty=function(e){var n=document.createElement("div");n.setAttribute("title",this.text.empty),n.textContent=this.text.placeholder,n.classList.add("custom-option","-empty"),e.appendChild(n)},n.prototype.renderValues=function(e,n){var t=document.createDocumentFragment(),l=this.optionDiv(this.valueAbridged(e));if(t.appendChild(l),e.length>2){var i=this.optionDiv(e.length.toString(),"badge","-secondary");t.appendChild(i)}n.appendChild(t)},n.prototype.optionDiv=function(e){for(var n,t=[],l=1;l<arguments.length;l++)t[l-1]=arguments[l];var i=document.createElement("div"),o=document.createElement("span");return i.classList.add("custom-option"),(n=o.classList).add.apply(n,t),o.textContent=e,i.appendChild(o),i},n.prototype.valueAbridged=function(e){var n=_.take(e,2);return e.length>2&&n.push("... "),n.join(", ")},n}(la),oa=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.render=function(e,n){var t=this.value;e.setAttribute("title",n),e.textContent=n,e.innerHTML="",0===t.length?this.renderEmpty(e):this.renderValues(t,e)},n.prototype.renderValues=function(e,n){e.forEach(function(e){var t=document.createElement("div");t.classList.add("custom-option","-multiple-lines"),t.setAttribute("title",e),t.textContent=e,n.appendChild(t)})},n}(ia),ra=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.resource[this.name]||0:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"percentLabel",{get:function(){return this.roundedProgress+"%"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"roundedProgress",{get:function(){return Math.round(Number(this.value))||0},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){e.setAttribute("title",n),e.innerHTML='\n      <span>\n        <span style="width: 80px" class="progress-bar">\n          <span style="width: '+this.roundedProgress+'%" class="inner-progress closed"></span>\n          <span style="width: 0%" class="inner-progress done"></span>\n        </span>\n        <span class="progress-bar-legend">'+this.percentLabel+"</span>\n      </span>\n    "},n}(la),aa=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.render=function(e,n){var t=this.percentLabel;e.setAttribute("title",t),e.innerHTML="",e.textContent=t},n}(ra),ua="wp-edit-field--container",sa=function(){function e(e,n,t){void 0===t&&(t={}),this.injector=e,this.container=n,this.options=t,this.displayFieldService=this.injector.get(ta),this.I18n=this.injector.get(U.a)}return e.prototype.render=function(e,n,t,l){void 0===l&&(l="-");var i=this.renderFieldValue(e,n,t,l),o=i[0],r=i[1];return null===o?r:(this.setSpanAttributes(r,o,n,e),r)},e.prototype.renderFieldValue=function(e,n,t,l){void 0===l&&(l="-");var i=document.createElement("span"),o=e.getSchemaName(n),r=e.schema[o];if(!r)return[null,i];var a=this.getField(e,r,o,t);a.render(i,this.getText(a,l));var u=a.title;return u&&i.setAttribute("title",u),i.setAttribute("aria-label",this.getAriaLabel(a,e)),[a,i]},e.prototype.getField=function(e,n,t,l){var i=this.getFieldForCurrentContext(e,n,t);return i.changeset=l,i},e.prototype.getFieldForCurrentContext=function(e,n,t){var l={container:this.container,options:this.options},i=["[]CustomOption","[]User"].indexOf(n.type)>=0;return"single-view"===this.container&&i?new oa(e,t,n,l):"timeline"===this.container&&"percentageDone"===t?new aa(e,t,n,l):this.displayFieldService.getField(e,t,n,l)},e.prototype.getText=function(e,n){return e.isEmpty()?n:e.valueString},e.prototype.setSpanAttributes=function(e,n,t,l){e.classList.add("wp-table--cell-span","wp-edit-field--display-field","inplace-edit","wp-edit-field",t),e.dataset.fieldName=t,e.setAttribute("tabindex","id"===t?"-1":"0"),n.required&&e.classList.add("-required"),n.isEmpty()&&e.classList.add("-placeholder"),n.writable&&l.isAttributeEditable(n.name)?(e.classList.add("-editable"),e.setAttribute("role","button")):e.classList.add("-read-only")},e.prototype.getAriaLabel=function(e,n){var t,l=this.getLabelContent(e);if(e.isFormattable&&!e.isEmpty())try{t=_.escape(jQuery("<div>"+l+"</div>").text())}catch(i){console.error("Failed to parse formattable labelContent"),t="Label for "+e.displayName}else t=l;return e.writable&&n.isAttributeEditable(e.name)?this.I18n.t("js.inplace.button_edit",{attribute:e.displayName+" "+t}):e.displayName+" "+t},e.prototype.getLabelContent=function(e){return e.isEmpty()?this.I18n.t("js.inplace.null_value_label"):e.valueString},e}();!function(e){e.hasSelectionWithin=function(e){try{var n=window.getSelection().toString().length>0,t=e.contains(getSelection().anchorNode);return n&&t}catch(l){return console.error("Failed to test whether in selection ",l),!1}}}(na||(na={}));var ca=function(){function e(e,n,t,l,i){var o=this;this.componentFactoryResolver=e,this.FocusHelper=n,this.appRef=t,this.$transitions=l,this.injector=i,this.active=null,this.isOpening=!1;var r=this.portalHostElement=document.createElement("div");r.classList.add("op-context-menu--overlay"),document.body.appendChild(r),this.bodyPortalHost=new c.b(r,this.componentFactoryResolver,this.appRef,this.injector),l.onStart({},function(){return o.close()}),jQuery(window).on("keydown",function(e){return o.active&&e.which===Tt.a.ESCAPE&&o.close(),!0}),jQuery(window).on("click",function(e){o.active&&!o.portalHostElement.contains(e.target)&&o.close()})}return e.prototype.show=function(e,n,t){var l=this;void 0===t&&(t=Sl),this.close(),this.isOpening=!0;var i=new c.a(t,null,this.injectorFor(e.locals));this.bodyPortalHost.attach(i),this.portalHostElement.style.display="block",this.active=e,setTimeout(function(){l.reposition(n),l.active&&l.active.onOpen(l.activeMenu),l.isOpening=!1})},e.prototype.isActive=function(e){return this.active&&this.active===e},e.prototype.close=function(){this.isOpening||(this.bodyPortalHost.detach(),this.portalHostElement.style.display="none",this.active&&this.active.onClose(),this.active=null)},e.prototype.reposition=function(e){this.active&&this.activeMenu.position(this.active.positionArgs(e)).css("visibility","visible")},Object.defineProperty(e.prototype,"activeMenu",{get:function(){return jQuery(this.portalHostElement).find(".dropdown")},enumerable:!0,configurable:!0}),e.prototype.injectorFor=function(e){var n=new WeakMap;return e.service=this,n.set(_l,e),new c.c(this.injector,n)},e}(),da=function(){function e(e,n,t,l,i,o,r,a,u,s,c){this.states=e,this.injector=n,this.elementRef=t,this.wpNotificationsService=l,this.ConfigurationService=i,this.opContextMenu=o,this.wpEditing=r,this.wpCacheService=a,this.wpEditFieldGroup=u,this.NotificationsService=s,this.I18n=c,this.displayFieldOptions={},this.isDropTarget=!1,this.editFieldContainerClass=ua,this.active=!1,this.rendered=!1}return e.prototype.ngOnInit=function(){this.fieldRenderer=new sa(this.injector,"single-view",this.displayFieldOptions),this.$element=jQuery(this.elementRef.nativeElement),this.wpEditFieldGroup.register(this)},e.prototype.startDragOverActivation=function(e){return!(this.isDropTarget&&this.isEditable&&!this.active)||(this.handleUserActivate(null),e.preventDefault(),!1)},e.prototype.render=function(){var e=this.fieldRenderer.render(this.resource,this.fieldName,null,this.displayPlaceholder);this.displayContainer.nativeElement.innerHTML="",this.displayContainer.nativeElement.appendChild(e),this.rendered=!0},e.prototype.deactivate=function(e){var n=this;void 0===e&&(e=!1),this.editContainer.nativeElement.innerHTML="",this.editContainer.nativeElement.hidden=!0,this.active=!1,e&&setTimeout(function(){return n.$element.find(".wp-edit-field--display-field").focus()},20)},Object.defineProperty(e.prototype,"resource",{get:function(){return this.wpEditing.temporaryEditResource(this.workPackageId).getValueOr(this.workPackage)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEditable",{get:function(){var e=this.resource.schema[this.fieldName];return this.resource.isAttributeEditable(this.fieldName)&&e&&e.writable},enumerable:!0,configurable:!0}),e.prototype.activateIfEditable=function(e){return na.hasSelectionWithin(e.target)?(Object(Ee.a)("Not activating "+this.fieldName+" because of active selection within"),!0):jQuery(e.target).closest("a,macro",this.displayContainer.nativeElement).length>0||(this.isEditable&&this.handleUserActivate(e),this.opContextMenu.close(),e.preventDefault(),e.stopImmediatePropagation(),!1)},e.prototype.activateOnForm=function(e){var n=this;return void 0===e&&(e=!1),this.active=!0,this.wpEditFieldGroup.form.activate(this.fieldName,e).catch(function(){return n.deactivate(!0)})},e.prototype.handleUserActivate=function(e){var n=0;return e&&(n=Tr.getPosition(e)),this.activateOnForm().then(function(e){e&&e.focus(n)}),!1},e.prototype.reset=function(e){this.workPackage=e,this.render(),this.deactivate()},e}(),pa=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ha(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{displayContainer:0}),l["\u0275qud"](402653184,2,{editContainer:0}),(e()(),l["\u0275eld"](2,0,null,null,5,"div",[],null,[[null,"dragover"]],function(e,n,t){var l=!0,i=e.component;"dragover"===n&&(l=!1!==i.startDragOverActivation(t)&&l);return l},null,null)),l["\u0275did"](3,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pad"](4,4),(e()(),l["\u0275eld"](5,0,[[2,0],["editContainer",1]],null,0,"div",[],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,[[1,0],["displayContainer",1]],null,1,"div",[["tabindex","-1"]],[[8,"hidden",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,7).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,7).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.activateIfEditable(t)&&i);return i},null,null)),l["\u0275did"](7,16384,null,0,xt,[],{stopEventPropagation:[0,"stopEventPropagation"]},{onClick:"accessibleClick"})],function(e,n){var t=n.component,l=e(n,4,0,t.editFieldContainerClass,t.fieldName,t.active?"-active":"",t.wrapperClasses||"-small");e(n,3,0,l);e(n,7,0,!1)},function(e,n){var t=n.component;e(n,5,0,!t.active),e(n,6,0,t.active)})}l["\u0275ccf"]("wp-edit-field",da,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-edit-field",[],null,null,null,ha,pa)),l["\u0275did"](1,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],null,null)],function(e,n){e(n,1,0)},null)},{fieldName:"fieldName",workPackageId:"workPackageId",wrapperClasses:"wrapperClasses",displayFieldOptions:"displayFieldOptions",displayPlaceholder:"displayPlaceholder",isDropTarget:"isDropTarget"},{},[]);var fa=function(){function e(e,n){this.I18n=e,this.wpEditFieldGroup=n,this.text={date:{startDate:this.I18n.t("js.label_no_start_date"),dueDate:this.I18n.t("js.label_no_due_date")}}}return e.prototype.trackByName=function(e,n){return n.name},e.prototype.shouldHideField=function(e){var n=e.field||e.fields[0];return this.wpEditFieldGroup.editMode&&!n.writable},e}(),ga=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ma(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" *"]))],null,null)}function va(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","attributes-key-value--key"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"wp-replacement-label",[],null,null,null,Ur,Qr)),l["\u0275did"](2,114688,null,0,zr,[Wr,l.ElementRef],{fieldName:[0,"fieldName"]},null),(e()(),l["\u0275ted"](3,0,[" "," "])),(e()(),l["\u0275and"](16777216,null,0,1,null,ma)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,0,1,"attribute-help-text",[],null,null,null,ea,Jr)),l["\u0275did"](7,114688,null,0,Zr,[l.ElementRef,Kr,Yr,On.b,U.a],{attribute:[0,"attribute"],attributeScope:[1,"attributeScope"]},null)],function(e,n){e(n,2,0,n.parent.parent.context.$implicit.name),e(n,5,0,n.parent.parent.context.$implicit.field.required&&n.parent.parent.context.$implicit.field.writable);e(n,7,0,n.parent.parent.context.$implicit.name,"WorkPackage")},function(e,n){e(n,3,0,n.parent.parent.context.$implicit.label)})}function ya(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-edit-field",[["class","wp-edit-formattable-field"]],null,null,null,ha,pa)),l["\u0275did"](1,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"]},null)],function(e,n){var t=n.component;e(n,1,0,n.parent.parent.parent.context.$implicit.name,t.workPackage.id)},null)}function ba(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"wp-edit-field",[],null,null,null,ha,pa)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275did"](2,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],isDropTarget:[2,"isDropTarget"]},null)],function(e,n){var t=n.component;e(n,1,0,"String"===n.parent.parent.parent.context.$implicit.field.schema.type?"wp-edit-field--text":"");e(n,2,0,n.parent.parent.parent.context.$implicit.name,t.workPackage.id,!0)},null)}function wa(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","attributes-key-value--value-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ya)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ba)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.parent.parent.context.$implicit.field.isFormattable),e(n,4,0,!n.parent.parent.context.$implicit.field.isFormattable)},null)}function ka(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","attributes-key-value--key"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"wp-replacement-label",[],null,null,null,Ur,Qr)),l["\u0275did"](2,114688,null,0,zr,[Wr,l.ElementRef],{fieldName:[0,"fieldName"]},null),(e()(),l["\u0275ted"](3,0,[" "," "])),(e()(),l["\u0275eld"](4,0,null,0,1,"attribute-help-text",[],null,null,null,ea,Jr)),l["\u0275did"](5,114688,null,0,Zr,[l.ElementRef,Kr,Yr,On.b,U.a],{attribute:[0,"attribute"],attributeScope:[1,"attributeScope"]},null)],function(e,n){e(n,2,0,n.parent.parent.context.$implicit.name);e(n,5,0,n.parent.parent.context.$implicit.name,"WorkPackage")},function(e,n){e(n,3,0,n.parent.parent.context.$implicit.label)})}function Ca(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","attributes-key-value--value-container -minimal"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-edit-field",[],null,null,null,ha,pa)),l["\u0275did"](2,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"],displayPlaceholder:[3,"displayPlaceholder"]},null),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","attributes-key-value--value-separator"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"wp-edit-field",[],null,null,null,ha,pa)),l["\u0275did"](5,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"],displayPlaceholder:[3,"displayPlaceholder"]},null)],function(e,n){var t=n.component;e(n,2,0,n.parent.parent.context.$implicit.fields[0].name,t.workPackage.id,"-small -shrink",t.text[n.parent.parent.context.$implicit.name][n.parent.parent.context.$implicit.fields[0].name]);e(n,5,0,n.parent.parent.context.$implicit.fields[1].name,t.workPackage.id,"-small -shrink",t.text[n.parent.parent.context.$implicit.name][n.parent.parent.context.$implicit.fields[1].name])},null)}function Pa(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,va)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,wa)),l["\u0275did"](3,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ka)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ca)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,1,0,!n.parent.context.$implicit.multiple&&n.parent.context.$implicit.field),e(n,3,0,!n.parent.context.$implicit.multiple&&n.parent.context.$implicit.field),e(n,5,0,n.parent.context.$implicit.multiple),e(n,7,0,n.parent.context.$implicit.multiple)},null)}function Ia(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","attributes-key-value"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-span-all-columns":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Pa)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.context.$implicit.spanAll);e(n,1,0,"attributes-key-value",l),e(n,4,0,!t.shouldHideField(n.context.$implicit))},null)}function ja(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","-can-have-columns -columns-2"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ia)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,2,0,t.group.members,t.trackByName)},null)}var _a=l["\u0275ccf"]("wp-attribute-group",fa,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-attribute-group",[],null,null,null,ja,ga)),l["\u0275did"](1,49152,null,0,fa,[U.a,Wr],null,null)],null,null)},{workPackage:"workPackage",group:"group"},{},[]);function Sa(e){return"wp-row-"+e+"-table"}function Ra(e){return jQuery("."+Sa(e))}function Ta(e){try{var n=Ra(e),t=n.scrollParent(),l=t.scrollTop(),i=l+t.height(),o=n[0].offsetTop,r=o+n.height();o<l?t[0].scrollTop=o:r>i&&(t[0].scrollTop=r-t.height())}catch(a){console.warn("Can't scroll row element into view: "+a)}}var xa="wp-table--cell-td",Ea=function(){function e(e){this.injector=e,this.fieldRenderer=new sa(this.injector,"table")}return e.prototype.build=function(e,n){var t=document.createElement("td");t.classList.add(xa,"wp-table--cell-td",n),"subject"===n&&t.classList.add("-max");var l=document.createElement("span");l.classList.add("wp-table--cell-container",ua,n);var i=this.fieldRenderer.render(e,n,null);return l.appendChild(i),t.appendChild(l),t},e.prototype.refresh=function(e,n,t){var l=this.fieldRenderer.render(n,t,null);e.innerHTML="",e.appendChild(l)},e}(),Oa=function(){function e(e){this.injector=e,this.states=this.injector.get(u),this.wpRelations=this.injector.get(Me),this.wpTableRelationColumns=this.injector.get(Le)}return e.prototype.build=function(e,n){var t=document.createElement("td");t.classList.add(xa,"wp-table--relation-cell-td",n.id),t.dataset.columnId=n.id;var l=this.wpTableRelationColumns.getExpandFor(e.id)===n.id,i=this.wpRelations.state(e.id).value,o=this.wpTableRelationColumns.relationsForColumn(e,i,n),r=this.renderIndicator(),a=this.renderBadge(o);return l&&t.classList.add("-expanded"),o.length>0&&(t.appendChild(a),t.appendChild(r)),t},e.prototype.renderIndicator=function(){var e=document.createElement("span");return e.classList.add("wp-table--relation-indicator"),e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","0"),e},e.prototype.renderBadge=function(e){var n=document.createElement("span");return n.classList.add("wp-table--relation-count"),n.textContent=""+e.length,n.classList.add("badge","-border-only"),n},e}(),Da=function(){function e(e){this.injector=e,this.tableActionsService=this.injector.get(gn)}return e.prototype.build=function(e){var n=document.createElement("td");n.classList.add("wp-table--cell-td","wp-table--context-menu-td","hide-when-print");var t=document.createElement("span");return t.classList.add("wp-table--context-menu-span"),this.tableActionsService.render(e).forEach(function(e){t.appendChild(e)}),n.appendChild(t),n},e}(),Fa={id:"__internal-contextMenu"},Aa=function(){function e(e,n){this.injector=e,this.workPackageTable=n,this.wpTableSelection=this.injector.get(Er),this.wpTableColumns=this.injector.get(Se),this.I18n=this.injector.get(U.a),this.cellBuilder=new Ea(this.injector),this.relationCellBuilder=new Oa(this.injector),this.contextLinkBuilder=new Da(this.injector)}return Object.defineProperty(e.prototype,"columns",{get:function(){return this.wpTableColumns.getColumns()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"augmentedColumns",{get:function(){return this.columns.concat([Fa])},enumerable:!0,configurable:!0}),e.prototype.buildCell=function(e,n){if(_e(n))return this.relationCellBuilder.build(e,n);switch(n.id){case Fa.id:return this.workPackageTable.configuration.actionsColumnEnabled?this.contextLinkBuilder.build(e):null;default:return this.cellBuilder.build(e,n.id)}},e.prototype.buildEmpty=function(e){var n=this.createEmptyRow(e);return this.buildEmptyRow(e,n)},e.prototype.createEmptyRow=function(e){var n=this.classIdentifier(e),t=document.createElement("tr");return t.setAttribute("tabindex","0"),t.dataset.workPackageId=e.id,t.dataset.classIdentifier=n,t.classList.add("wp-table--row","wp--row",n,n+"-table","issue"),t},e.prototype.classIdentifier=function(e){return"wp-row-"+e.id},e.prototype.refreshRow=function(e,n){var t=this,l=n.find(".wp-table--cell-td").detach(),i=[];return this.augmentedColumns.forEach(function(n){var o=l.filter("td."+n.id);if(t.isColumnBeingEdited(e,n))i.push(o[0]);else{var r=t.buildCell(e,n);r&&i.push(r)}}),n.prepend(i),n},e.prototype.isColumnBeingEdited=function(e,n){var t=this.workPackageTable.editing.forms[e.id],l=this.workPackageTable.editing.changeset(e.id),i=t&&t.activeFields[n.id],o=l&&l.isOverridden(n.id);return i||o},e.prototype.buildEmptyRow=function(e,n){var t,l=this,i=this.workPackageTable.editing.changeset(e.id),o={};if(i&&!i.empty){var r=(t=this.classIdentifier(e),jQuery("."+t+"-table"));i.changedAttributes.forEach(function(e){o[e]=r.find(".wp-table--cell-td."+e)})}return this.augmentedColumns.forEach(function(t){var i,r=o[t.id];r&&r.length?(Object(Ee.a)("Rendering previous open column "+t.id+" on "+e.id),jQuery(n).append(r)):(i=l.buildCell(e,t))&&n.appendChild(i)}),this.wpTableSelection.isSelected(e.id)&&n.classList.add("-checked"),[n,!1]},e}(),Va=function(){function e(e,n){this.injector=e,this.workPackageTable=n,this.states=this.injector.get(u)}return e.prototype.isApplicable=function(e){return!0},e}();function Ma(e){return e._links.groupBy.href.split("/").pop()}function La(e){return"__row-group-"+e}function Na(e){return"group-"+e.identifier}var $a=function(){function e(e){this.injector=e,this.I18n=this.injector.get(U.a),this.text={collapse:this.I18n.t("js.label_collapse"),expand:this.I18n.t("js.label_expand")}}return e.prototype.buildGroupRow=function(e,n){var t,l,i=document.createElement("tr");return e.collapsed?(l=this.text.expand,t="icon-plus"):(l=this.text.collapse,t="icon-minus2"),i.classList.add("wp-table--group-header",Na(e)),i.id="wp-table-rowgroup-"+e.index,i.dataset.groupIndex=e.index.toString(),i.dataset.groupIdentifier=e.identifier,i.innerHTML='\n      <td colspan="'+n+'" class="-no-highlighting">\n        <div class="expander icon-context '+t+'">\n          <span class="hidden-for-sighted">'+_.escape(l)+'</span>\n        </div>\n        <div class="group--value">\n          '+_.escape(function(e){var n=e.value;return null===n?"-":n}(e))+'\n          <span class="count">\n            ('+e.count+")\n          </span>\n        </div>\n      </td>\n    ",i},e}();function qa(e){return"__relations-expanded-from-"+e}var Ha,Ba=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.workPackageTable=t,l.states=l.injector.get(u),l.I18n=l.injector.get(U.a),l}return r.d(n,e),n.prototype.buildCell=function(n,t){return _e(t)?this.emptyRelationCell(t):e.prototype.buildCell.call(this,n,t)},n.prototype.buildEmptyRelationRow=function(n,t,l){var i=t.denormalized(n),o=this.states.workPackages.get(i.targetId).value,r=this.createEmptyRelationRow(n,o),a=e.prototype.buildEmptyRow.call(this,o,r),u=a[0];a[1];return[u,o]},n.prototype.createEmptyRelationRow=function(e,n){var t=this.relationClassIdentifier(e,n),l=document.createElement("tr");return l.dataset.workPackageId=n.id,l.dataset.classIdentifier=t,l.classList.add("wp--row","wp-table--row","issue","wp-table--relations-aditional-row",t,t+"-table",qa(e.id)),l},n.prototype.relationClassIdentifier=function(e,n){return t=n.id,"wp-relation-row-"+e.id+"-to-"+t;var t},n.prototype.appendRelationLabel=function(e,n,t,l,i){var o=t.denormalized(n),r="";("toType"===i&&(r=this.I18n.t("js.relation_labels."+o.reverseRelationType)),"ofType"===i)&&(r=this.states.workPackages.get(o.target.id).value.type.name);var a=document.createElement("span");a.classList.add("relation-row--type-label"),a.textContent=r;document.createTextNode(o.target.name);e.find(".wp-table--relation-cell-td").empty(),e.find(".wp-table--relation-cell-td."+l).append(a)},n.prototype.emptyRelationCell=function(e){var n=document.createElement("td");return n.classList.add("wp-table--relation-cell-td","wp-table--cell-td",e.id),n},n}(Aa),Wa=function(){function e(e,n,t){this.injector=e,this.table=n,this.tablePass=t,this.wpRelations=this.injector.get(Me),this.wpTableColumns=this.injector.get(Se),this.wpTableRelationColumns=this.injector.get(Le),this.relationRowBuilder=new Ba(e,n)}return e.prototype.render=function(){var e=this;this.isApplicable&&_.clone(this.tablePass.renderedOrder).forEach(function(n,t){if(n.workPackage){var l=n.workPackage,i=l.id,o=e.wpRelations.state(i);o.hasValue()&&0!==_.size(o.value)&&e.wpTableRelationColumns.relationsToExtendFor(l,o.value,function(t,o,r){var a,u=e.relationRowBuilder.buildEmptyRelationRow(l,t,r),s=u[0],c=u[1];(a=s.classList).add.apply(a,n.additionalClasses),e.relationRowBuilder.appendRelationLabel(jQuery(s),l,t,o.id,r),e.tablePass.spliceRow(s,"."+e.relationRowBuilder.classIdentifier(l)+",."+qa(i),{classIdentifier:e.relationRowBuilder.relationClassIdentifier(l,c),additionalClasses:n.additionalClasses.concat(["wp-table--relations-aditional-row"]),workPackage:c,belongsTo:l,renderType:"relations",hidden:n.hidden,data:{relation:t,columnId:o.id,relationType:r}})})}})},e.prototype.refreshRelationRow=function(e,n,t){var l=this.relationRowBuilder.refreshRow(n,t);return this.relationRowBuilder.appendRelationLabel(l,e.belongsTo,e.data.relation,e.data.columnId,e.data.relationType),l},Object.defineProperty(e.prototype,"isApplicable",{get:function(){return this.wpTableColumns.hasRelationColumns()},enumerable:!0,configurable:!0}),e}(),za=function(){function e(e,n){this.injector=e,this.workPackageTable=n,this.states=this.injector.get(u),this.wpTableTimeline=this.injector.get(ve),this.wpCacheService=this.injector.get(Oe)}return e.prototype.build=function(e){var n=document.createElement("div");return n.classList.add("wp-timeline-cell","wp--row"),e&&(n.dataset.workPackageId=e),n},e.prototype.insert=function(e,n,t){var l;void 0===t&&(t=[]);var i=this.build(e);(l=i.classList).add.apply(l,t),n.appendChild(i)},e}(),Qa=function(){function e(e,n,t){this.injector=e,this.table=n,this.tablePass=t}return e.prototype.render=function(){var e=this;this.timelineBody=document.createDocumentFragment(),this.timelineBuilder=new za(this.injector,this.table),this.tablePass.renderedOrder.forEach(function(n){var t,l=n.workPackage?n.workPackage.id:null,i=e.timelineBuilder.build(l);(t=i.classList).add.apply(t,[n.classIdentifier,n.classIdentifier+"-timeline"].concat(n.additionalClasses)),e.timelineBody.appendChild(i)})},e}();!function(e){e.rowClass=function(e,n){return"__hl_row_"+e+"_"+n},e.inlineClass=function(e,n){return"__hl_inl_"+e+"_"+n},e.dotClass=function(e,n){return"__hl_dot_"+e+"_"+n},e.overdueDate=function(e){return 0===e?"__hl_date_due_today":e<=-1?"__hl_date_overdue":"__hl_date_not_overdue"},e.isBright=function(e,n,t){var l="--hl-"+n+"-"+t+"-dark";return""!==e.getPropertyValue(l)}}(Ha||(Ha={}));var Ua=function(){function e(e,n,t){this.injector=e,this.table=n,this.tablePass=t,this.wpTableHighlighting=this.injector.get(ln)}return e.prototype.render=function(){var e=this;if(this.isApplicable){var n=this.wpTableHighlighting.current.mode,t=window.getComputedStyle(document.body);this.tablePass.renderedOrder.forEach(function(l,i){if(l.workPackage){var o=l.workPackage[n];if(o){var r=o.getId(),a=e.tablePass.tableBody.children[i];a.classList.add(Ha.rowClass(n,r)),Ha.isBright(t,n,r)&&a.classList.add("-bright-row")}}})}},Object.defineProperty(e.prototype,"isApplicable",{get:function(){return!(this.wpTableHighlighting.isInline||this.wpTableHighlighting.isDisabled)},enumerable:!0,configurable:!0}),e}(),Ka=function(){function e(e,n,t){this.injector=e,this.workPackageTable=n,this.rowBuilder=t,this.wpEditing=this.injector.get(Zn),this.states=this.injector.get(u),this.I18n=this.injector.get(U.a)}return e.prototype.render=function(){var e=this;return Object(Ee.b)("Primary render pass",function(){e.prepare(),e.doRender()}),this.highlighting.render(),Object(Ee.b)("Relations render pass",function(){e.relations.render()}),Object(Ee.b)("Timelines render pass",function(){e.timeline.render()}),this},e.prototype.refresh=function(e,n,t){var l=jQuery(t).find("."+e.classIdentifier),i=null;switch(e.renderType){case"primary":i=this.rowBuilder.refreshRow(n,l);break;case"relations":i=this.relations.refreshRelationRow(e,n,l)}null!==i&&l.length&&l.replaceWith(i)},Object.defineProperty(e.prototype,"result",{get:function(){return this.renderedOrder.map(function(e){return{classIdentifier:e.classIdentifier,workPackageId:e.workPackage?e.workPackage.id:null,hidden:e.hidden}})},enumerable:!0,configurable:!0}),e.prototype.spliceRow=function(e,n,t){var l=jQuery(this.tableBody).find(n).last();l.after(e);var i=l.index();this.renderedOrder.splice(i+1,0,t)},e.prototype.prepare=function(){this.timeline=new Qa(this.injector,this.workPackageTable,this),this.relations=new Wa(this.injector,this.workPackageTable,this),this.highlighting=new Ua(this.injector,this.workPackageTable,this),this.tableBody=document.createDocumentFragment(),this.renderedOrder=[]},e.prototype.appendRow=function(e,n,t,l){void 0===t&&(t=[]),void 0===l&&(l=!1),this.tableBody.appendChild(n),this.renderedOrder.push({classIdentifier:this.rowBuilder.classIdentifier(e),additionalClasses:t,workPackage:e,renderType:"primary",hidden:l})},e.prototype.appendNonWorkPackageRow=function(e,n,t,l){void 0===t&&(t=[]),void 0===l&&(l=!1),e.classList.add(n),this.tableBody.appendChild(e),this.renderedOrder.push({classIdentifier:n,additionalClasses:t,workPackage:null,renderType:"primary",hidden:l})},e}(),Ya=function(e){function n(n,t,l){var i=e.call(this,n,t,l)||this;return i.injector=n,i.workPackageTable=t,i.rowBuilder=l,i}return r.d(n,e),n.prototype.doRender=function(){var e=this;this.workPackageTable.originalRows.forEach(function(n){var t=e.workPackageTable.originalRowIndex[n],l=e.rowBuilder.buildEmpty(t.object)[0];t.element=l,e.appendRow(t.object,l),e.tableBody.appendChild(l)})},n}(Ka),Ga=function(e){function n(n,t,l,i,o){var r=e.call(this,n,t,new Aa(n,t))||this;return r.injector=n,r.workPackageTable=t,r.groups=l,r.headerBuilder=i,r.colspan=o,r}return r.d(n,e),n.prototype.doRender=function(){var e=this,n=null;this.workPackageTable.originalRows.forEach(function(t){var l=e.workPackageTable.originalRowIndex[t],i=e.matchingGroup(l.object);if(i&&n!==i){var o=Na(i),r=e.headerBuilder.buildGroupRow(i,e.colspan);e.appendNonWorkPackageRow(r,o),n=i}l.group=n,e.buildSingleRow(l)})},n.prototype.matchingGroup=function(e){var n=this;return _.find(this.groups,function(t){var l=e[Ma(t)];return void 0===l&&(l=null),_.isArray(l)?n.matchesMultiValue(l,t):l&&l.$href?!!_.find(t._links.valueLink,function(e){return l.$href===e.href}):(""===t.value?null:t.value)==l})},n.prototype.matchesMultiValue=function(e,n){if(e.length!==n.href.length)return!1;var t=function(e){return _.map(e,function(e){return e.href}).sort().join(", ")};return _.isEqualWith(e,n.href,function(e,n){return t(e)===t(n)})},n.prototype.buildSingleRow=function(e){var n,t=e.group,l=t.collapsed,i=[],o=this.rowBuilder.buildEmpty(e.object),r=o[0];o[1];i.push(La(t.index)),l&&i.push("-collapsed"),e.element=r,(n=r.classList).add.apply(n,i),this.appendRow(e.object,r,i,l)},n}(Ya),Za=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.tableState=l.injector.get(A),l.states=l.injector.get(u),l.wpTableColumns=l.injector.get(Se),l.I18n=l.injector.get(U.a),l.headerBuilder=new $a(l.injector),l}return r.d(n,e),n.prototype.isApplicable=function(e){return!_.isEmpty(this.groups)},Object.defineProperty(n.prototype,"groups",{get:function(){return this.tableState.groups.value||[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"collapsedGroups",{get:function(){return this.tableState.collapsedGroups.value||{}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"colspan",{get:function(){return this.wpTableColumns.columnCount+1},enumerable:!0,configurable:!0}),n.prototype.buildRows=function(){return new Ga(this.injector,this.workPackageTable,this.getGroupData(),this.headerBuilder,this.colspan).render()},n.prototype.refreshExpansionState=function(){var e=this,n=this.getGroupData(),t=this.wpTableColumns.columnCount+1,l=this.tableState.rendered.value;jQuery(this.workPackageTable.container).find(".wp-table--group-header").each(function(i,o){var r=jQuery(o).data("groupIndex"),a=n[r],u=e.headerBuilder.buildGroupRow(a,t);o.parentNode&&o.parentNode.replaceChild(u,o);var s=jQuery("."+La(r));s.toggleClass("-collapsed",!!a.collapsed),s.filter(".wp-table--row").each(function(e,n){var t=jQuery(n).index();l[t].hidden=!!a.collapsed})}),this.tableState.rendered.putValue(l,"Updated hidden state of rows after group change.")},n.prototype.getGroupData=function(){var e=this;return this.groups.map(function(n,t){return n.index=t,n._links&&n._links.valueLink&&(n.href=n._links.valueLink),n.identifier=function(e){var n=e.value||"nullValue";if(e.href)try{n+=e.href.map(function(e){return e.href}).join("-")}catch(t){console.error("Failed to extract group identifier for "+e.value)}return n=n.toLowerCase().replace(/[^a-z0-9]+/g,"-"),Ma(e)+"-"+n}(n),n.collapsed=e.collapsedGroups[n.identifier],n})},n}(Va);function Ja(e){return"__collapsed-group-"+e}function Xa(e){return"__hierarchy-group-"+e}function eu(e){return"__hierarchy-root-"+e}function nu(e,n){return!e.isLeaf&&!!_.find(n.originalRows,function(t){return n.originalRowIndex[t].object.ancestorIds.indexOf(e.id.toString())>=0})}var tu="wp-table--hierarchy-aditional-row",lu=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.workPackageTable=t,l.wpTableHierarchies=l.injector.get(re),l.states=l.injector.get(u),l.text={leaf:function(e){return l.I18n.t("js.work_packages.hierarchy.leaf",{level:e})},expanded:function(e){return l.I18n.t("js.work_packages.hierarchy.children_expanded",{level:e})},collapsed:function(e){return l.I18n.t("js.work_packages.hierarchy.children_collapsed",{level:e})}},l}return r.d(n,e),n.prototype.refreshRow=function(n,t){var l=e.prototype.refreshRow.call(this,n,t);return l.find(".wp-table--hierarchy-span").remove(),this.appendHierarchyIndicator(n,l),l},n.prototype.buildEmpty=function(n){var t=e.prototype.buildEmpty.call(this,n),l=t[0],i=t[1],o=this.wpTableHierarchies.currentState;return n.ancestors.forEach(function(e){l.classList.add("__hierarchy-group-"+e.id),o.collapsed[e.id]&&(i=!0,l.classList.add(Ja(e.id)))}),l.classList.add("__hierarchy-root-"+n.id),this.appendHierarchyIndicator(n,jQuery(l)),[l,i]},n.prototype.buildAncestorRow=function(e,n,t){var l=this.states.workPackages.get(e.id).value,i=this.buildEmpty(l),o=i[0],r=i[1];return o.classList.add(tu),[o,r]},n.prototype.appendHierarchyIndicator=function(e,n,t){var l=void 0===t?e.ancestors.length:t,i=this.buildHierarchyIndicator(e,n,l);n.find("td.subject").addClass("-with-hierarchy").prepend(i),n.find("td.subject").css("minWidth",125+20*l+"px")},n.prototype.buildHierarchyIndicator=function(e,n,t){var l=document.createElement("span"),i=this.wpTableHierarchies.collapsed(e.id),o=25+20*t+"px";if(l.classList.add("wp-table--hierarchy-span"),l.style.width=o,nu(e,this.workPackageTable)){var r=i?"-hierarchy-collapsed":"";l.innerHTML='\n            <a href tabindex="0" role="button" class="wp-table--hierarchy-indicator '+r+'">\n              <span class="wp-table--hierarchy-indicator-icon" aria-hidden="true"></span>\n              <span class="wp-table--hierarchy-indicator-expanded hidden-for-sighted">'+this.text.expanded(t)+'</span>\n              <span class="wp-table--hierarchy-indicator-collapsed hidden-for-sighted">'+this.text.collapsed(t)+"</span>\n            </a>\n        "}else l.innerHTML='\n            <span tabindex="0" class="wp-table--leaf-indicator">\n              <span class="hidden-for-sighted">'+this.text.leaf(t)+"</span>\n            </span>\n        ";return l},n}(Aa),iu=function(e){function n(n,t,l){var i=e.call(this,n,t,l)||this;return i.injector=n,i.workPackageTable=t,i.rowBuilder=l,i.tableState=i.injector.get(A),i.states=i.injector.get(u),i.wpCacheService=i.injector.get(Oe),i}return r.d(n,e),n.prototype.prepare=function(){e.prototype.prepare.call(this),this.hierarchies=this.tableState.hierarchies.value,this.rendered={},this.additionalParents={},this.deferred={}},n.prototype.doRender=function(){var e=this;this.workPackageTable.originalRows.forEach(function(n){var t=e.workPackageTable.originalRowIndex[n],l=t.object;if(!e.deferInsertion(l)){if(l.ancestors.length)e.buildWithHierarchy(t);else{var i=e.rowBuilder.buildEmpty(l),o=i[0],r=i[1];t.element=o,e.tableBody.appendChild(o),e.markRendered(l,r)}e.renderAllDeferredChildren(l)}})},n.prototype.deferInsertion=function(e){var n=this,t=e.ancestors;if(0===t.length)return!1;for(var l=t.concat([e]),i=l.length-2;i>=0;--i){var o=l[i],r=(l[i+1],this.workPackageTable.originalRowIndex[o.id]);if(this.rendered[o.id])return!1;if(r){var a=this.deferred[o.id]||[],u=l.slice(i+1,l.length);return u=u.map(function(e){return n.wpCacheService.state(e.id).value}),this.deferred[o.id]=a.concat(u),!0}}return!1},n.prototype.renderAllDeferredChildren=function(e){var n=this,t=e.id.toString();(this.deferred[t]||[]).forEach(function(e){n.insertUnderParent(n.getOrBuildRow(e),e.parent),n.renderAllDeferredChildren(e)})},n.prototype.getOrBuildRow=function(e){var n=this.workPackageTable.originalRowIndex[e.id];return n||(n={object:e}),n},n.prototype.buildWithHierarchy=function(e){var n=this,t=e.object.ancestors,l=[];t.forEach(function(e,i){var o=n.states.workPackages.get(e.id).value;if(!n.rendered[o.id]){var r=n.rowBuilder.buildAncestorRow(o,l,i),a=r[0],u=r[1];if(0===i)n.tableBody.appendChild(a),n.markRendered(o,u,!0);else{var s=t[i-1];n.insertAtExistingHierarchy(o,a,s,u,!0)}n.additionalParents[o.id]=o}l.push(Xa(o.id)),t.slice(0,i).forEach(function(e){l.push(Xa(e.id))})});var i=_.last(t);this.insertUnderParent(e,i)},n.prototype.insertUnderParent=function(e,n){var t=this.rowBuilder.buildEmpty(e.object),l=t[0],i=t[1];e.element=l,this.insertAtExistingHierarchy(e.object,l,n,i,!1)},n.prototype.markRendered=function(e,n,t){void 0===n&&(n=!1),void 0===t&&(t=!1),this.rendered[e.id]=!0,this.renderedOrder.push(this.buildRenderInfo(e,n,t))},n.prototype.ancestorClasses=function(e){var n=this,t=[eu(e.id)];return _.isArray(e.ancestors)&&e.ancestors.forEach(function(e){t.push(Xa(e.id)),n.hierarchies.collapsed[e.id]&&t.push(Ja(e.id))}),t},n.prototype.insertAtExistingHierarchy=function(e,n,t,l,i){var o=".__hierarchy-root-"+t.id,r=".__hierarchy-group-"+t.id;this.spliceRow(n,o+","+r,this.buildRenderInfo(e,l,i)),this.rendered[e.id]=!0},n.prototype.buildRenderInfo=function(e,n,t){var l={workPackage:e,renderType:"primary",hidden:n};return t?(l.additionalClasses=[tu].concat(this.ancestorClasses(e)),l.classIdentifier="wp-ancestor-row-"+e.id):(l.additionalClasses=this.ancestorClasses(e),l.classIdentifier=this.rowBuilder.classIdentifier(e)),l},n}(Ka),ou=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.workPackageTable=t,l.states=l.injector.get(u),l.wpTableColumns=l.injector.get(Se),l.wpTableHierarchies=l.injector.get(re),l.rowBuilder=new lu(n,l.workPackageTable),l}return r.d(n,e),n.prototype.isApplicable=function(e){return this.wpTableHierarchies.isEnabled},n.prototype.buildRows=function(){return new iu(this.injector,this.workPackageTable,this.rowBuilder).render()},n}(Va),ru=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.I18n=l.injector.get(U.a),l.rowBuilder=new Aa(n,l.workPackageTable),l}return r.d(n,e),n.prototype.buildRows=function(){return new Ya(this.injector,this.workPackageTable,this.rowBuilder).render()},n}(Va),au=function(){function e(e,n,t,l){this.table=e,this.injector=n,this.workPackageId=t,this.classIdentifier=l,this.wpTableRefresh=this.injector.get(Ae),this.wpTableColumns=this.injector.get(Se),this.states=this.injector.get(u),this.FocusHelper=this.injector.get(p.a),this.wpEditingPortalService=this.injector.get(Ar),this.cellBuilder=new Ea(this.injector)}return e.prototype.findContainer=function(e){return this.rowContainer.find("."+xa+"."+e+" .wp-table--cell-container").first()},e.prototype.findCell=function(e){return this.rowContainer.find("."+xa+"."+e).first()},e.prototype.activateField=function(e,n,t,l){var i=this;return this.waitForContainer(t).then(function(o){var r=i.findCell(t),a=r.css("width");return r.css("max-width",a),r.css("width",a),i.wpEditingPortalService.create(o,e,n,t,l)})},e.prototype.reset=function(e,n,t){var l=this.findContainer(n);l.length&&(this.findCell(n).css("width",""),this.findCell(n).css("max-width",""),this.cellBuilder.refresh(l[0],e,n),t&&this.FocusHelper.focusElement(l))},e.prototype.requireVisible=function(e){return this.wpTableColumns.addColumn(e),this.waitForContainer(e)},e.prototype.firstField=function(e){return"subject"},e.prototype.onSaved=function(e,n){},e.prototype.waitForContainer=function(e){var n=this;return new Promise(function(t,l){var i=setInterval(function(){var l=n.findContainer(e);l.length>0&&(clearInterval(i),t(l[0]))},100)})},Object.defineProperty(e.prototype,"rowContainer",{get:function(){return jQuery(this.table.container).find("."+this.classIdentifier+"-table")},enumerable:!0,configurable:!0}),e}(),uu=function(){function e(e,n){this.table=e,this.injector=n,this.wpEditing=this.injector.get(Zn),this.forms={}}return e.prototype.reset=function(){_.each(this.forms,function(e){return e.destroy()}),this.forms={}},e.prototype.changeset=function(e){return this.wpEditing.state(e).value},e.prototype.stopEditing=function(e){this.wpEditing.stopEditing(e);var n=this.forms[e];n&&(n.destroy(),delete this.forms[e])},e.prototype.startEditing=function(e,n){var t=e.id,l=this.forms[t];if(l)return l;var i=new au(this.table,this.injector,t,n);return this.forms[t]=Mr.createInContext(this.injector,i,e,!1)},e}(),su=function(){function e(e,n,t,l,i,o){this.injector=e,this.container=n,this.tbody=t,this.timelineBody=l,this.timelineController=i,this.configuration=o,this.tableState=this.injector.get(A),this.wpCacheService=this.injector.get(Oe),this.states=this.injector.get(u),this.I18n=this.injector.get(U.a),this.originalRows=[],this.originalRowIndex={},this.builders=[new ou(this.injector,this),new Za(this.injector,this),new ru(this.injector,this)],this.lastRenderPass=null,this.editing=new uu(this,this.injector)}return Object.defineProperty(e.prototype,"renderedRows",{get:function(){return this.tableState.rendered.getValueOr([])},enumerable:!0,configurable:!0}),e.prototype.findRenderedRow=function(e){var n=_.findIndex(this.renderedRows,function(n){return n.classIdentifier===e});return[n,this.renderedRows[n]]},Object.defineProperty(e.prototype,"rowBuilder",{get:function(){var e=this;return _.find(this.builders,function(n){return n.isApplicable(e)})},enumerable:!0,configurable:!0}),e.prototype.buildIndex=function(e){var n=this;this.originalRowIndex={},this.originalRows=e.map(function(e,t){var l=e.id;return n.originalRowIndex[l]={object:e,workPackageId:l,position:t},l})},e.prototype.initialSetup=function(e){this.buildIndex(e),this.redrawTableAndTimeline()},e.prototype.redrawTableAndTimeline=function(){var e=this.performRenderPass();this.timelineBody.innerHTML="",this.timelineBody.appendChild(e.timeline.timelineBody),this.tableState.rendered.putValue(e.result)},e.prototype.redrawTable=function(){var e=this.performRenderPass();this.tableState.rendered.putValue(e.result)},e.prototype.refreshRows=function(e){var n=this,t=this.lastRenderPass;t?_.each(t.renderedOrder,function(l){l.workPackage&&l.workPackage.id===e.id&&(Object(Ee.a)("Refreshing rendered row "+l.classIdentifier),l.workPackage=e,t.refresh(l,e,n.tbody))}):Object(Ee.a)("Trying to refresh a singular row without a previous render pass.")},e.prototype.performRenderPass=function(){this.editing.reset();var e=this.lastRenderPass=this.rowBuilder.buildRows();return this.tbody.innerHTML="",this.tbody.appendChild(e.tableBody),e},e}(),cu=function(){function e(e,n,t,l,i,o){this.wpTableHierarchies=e,this.wpTableSortBy=n,this.wpTableGroupBy=t,this.wpTableRelationColumns=l,this.elementRef=i,this.I18n=o,this.text={toggleHierarchy:"",openMenu:""}}return e.prototype.ngOnDestroy=function(){},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){return e.initialize()})},e.prototype.initialize=function(){var e=this;this.element=jQuery(this.elementRef.nativeElement),this.wpTableSortBy.onReadyWithAvailable().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(){var n=e.wpTableSortBy.currentSortBys[0];n&&e.headerColumn.$href===n.column.$href?e.currentSortDirection=n.direction:e.currentSortDirection=null,e.setActiveColumnClass(),e.setFullTitleAndSummary(),e.sortable=e.wpTableSortBy.isSortable(e.headerColumn),e.directionClass=e.getDirectionClass()}),this.text={toggleHierarchy:I18n.t("js.work_packages.hierarchy.show"),openMenu:I18n.t("js.label_open_menu")},this.isHierarchyColumn="subject"===this.headerColumn.id,this.isHierarchyColumn?this.columnType="hierarchy":"toType"===this.wpTableRelationColumns.relationColumnType(this.headerColumn)?(this.columnType="relation",this.columnName=this.headerColumn.type.name):"ofType"===this.wpTableRelationColumns.relationColumnType(this.headerColumn)&&(this.columnType="relation",this.columnName=I18n.t("js.relation_labels."+this.headerColumn.relationType)),this.isHierarchyColumn&&(this.hierarchyIcon="icon-hierarchy",this.isHierarchyDisabled=this.wpTableGroupBy.isEnabled,this.wpTableGroupBy.state.values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(){e.isHierarchyDisabled=e.wpTableGroupBy.isEnabled}),this.wpTableHierarchies.state.values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(){e.setHierarchyIcon()}),this.setHierarchyIcon())},Object.defineProperty(e.prototype,"displayDropdownIcon",{get:function(){return this.table&&this.table.configuration.columnMenuEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayHierarchyIcon",{get:function(){return this.table&&this.table.configuration.hierarchyToggleEnabled},enumerable:!0,configurable:!0}),e.prototype.toggleHierarchy=function(e){return this.wpTableHierarchies.toggleState(),this.setHierarchyIcon(),e.stopPropagation(),!1},e.prototype.setHierarchyIcon=function(){this.wpTableHierarchies.isEnabled?(this.text.toggleHierarchy=I18n.t("js.work_packages.hierarchy.hide"),this.hierarchyIcon="icon-hierarchy"):(this.text.toggleHierarchy=I18n.t("js.work_packages.hierarchy.show"),this.hierarchyIcon="icon-no-hierarchy")},e.prototype.setFullTitleAndSummary=function(){},e.prototype.getDirectionClass=function(){if(!this.currentSortDirection)return"";switch(this.currentSortDirection.$href){case He:return"asc";case Be:return"desc";default:return""}},e.prototype.setActiveColumnClass=function(){this.element.toggleClass("active-column",!!this.currentSortDirection)},e}(),du=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function pu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[["aria-hidden","true"],["class","hierarchy-header--icon"],["tabindex","-1"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleHierarchy(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Ct,wt)),l["\u0275did"](2,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,l["\u0275inlineInterpolate"](1,"icon ",t.hierarchyIcon,""))},function(e,n){e(n,0,0,n.component.text.toggleHierarchy)})}function hu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"a",[["href","#"],["lang-attribute",""]],[[8,"lang",0],[8,"id",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pad"](2,2),(e()(),l["\u0275ted"](3,null,["",""]))],function(e,n){var t=n.component,l=e(n,2,0,t.directionClass&&"sort",t.directionClass);e(n,1,0,l)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"",t.locale,""),l["\u0275inlineInterpolate"](1,"",t.headerColumn.id,"")),e(n,3,0,t.headerColumn.name)})}function fu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.headerColumn.name)})}function gu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","dropdown-indicator icon-small icon-pulldown"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,"dropdown-indicator icon-small icon-pulldown",l["\u0275inlineInterpolate"](1,"",t.text.openMenu,""))},null)}function mu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"span",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,pu)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,hu)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,fu)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,gu)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.displayHierarchyIcon),e(n,4,0,t.sortable),e(n,6,0,!t.sortable),e(n,8,0,t.displayDropdownIcon)},null)}function vu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","dropdown-indicator icon-small icon-pulldown"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,"dropdown-indicator icon-small icon-pulldown",l["\u0275inlineInterpolate"](1,"",t.text.openMenu,""))},null)}function yu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"span",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"a",[],[[1,"title",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-context icon-relations relations-header--icon"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275ted"](4,null,[" "," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,vu)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,"icon-context icon-relations relations-header--icon"),e(n,6,0,t.displayDropdownIcon)},function(e,n){var t=n.component;e(n,1,0,t.headerColumn.name),e(n,4,0,t.columnName)})}function bu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"a",[["href","#"],["lang-attribute",""]],[[8,"lang",0],[8,"id",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pad"](2,2),(e()(),l["\u0275ted"](3,null,["",""]))],function(e,n){var t=n.component,l=e(n,2,0,t.directionClass&&"sort",t.directionClass);e(n,1,0,l)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"",t.locale,""),l["\u0275inlineInterpolate"](1,"",t.headerColumn.id,"")),e(n,3,0,t.headerColumn.name)})}function wu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.headerColumn.name)})}function ku(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","dropdown-indicator icon-small icon-pulldown"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,"dropdown-indicator icon-small icon-pulldown",l["\u0275inlineInterpolate"](1,"",t.text.openMenu,""))},null)}function Cu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"span",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,bu)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,wu)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ku)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.sortable),e(n,4,0,!t.sortable),e(n,6,0,t.displayDropdownIcon)},null)}function Pu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),l["\u0275did"](1,16384,null,0,yt.n,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,mu)),l["\u0275did"](3,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,yu)),l["\u0275did"](5,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Cu)),l["\u0275did"](7,16384,null,0,yt.p,[l.ViewContainerRef,l.TemplateRef,yt.n],null,null)],function(e,n){e(n,1,0,n.component.columnType);e(n,3,0,"hierarchy");e(n,5,0,"relation")},null)}l["\u0275ccf"]("sortHeader",cu,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"sortHeader",[],null,null,null,Pu,du)),l["\u0275did"](1,4374528,null,0,cu,[re,We,Pe,Le,l.ElementRef,U.a],null,null)],null,null)},{headerColumn:"headerColumn",locale:"locale",table:"table"},{},[]);var Iu=function(){function e(e){this.opContextMenu=e,this.items=[]}return e.prototype.onClose=function(){this.afterFocusOn.focus()},e.prototype.onOpen=function(e){e.find(".menu-item").first().focus()},e.prototype.positionArgs=function(e){return{my:"left top",at:"right bottom",of:e,collision:"flipfit"}},Object.defineProperty(e.prototype,"locals",{get:function(){return{items:this.items}},enumerable:!0,configurable:!0}),e.prototype.open=function(e){this.opContextMenu.show(this,e)},Object.defineProperty(e.prototype,"afterFocusOn",{get:function(){return this.$element},enumerable:!0,configurable:!0}),e}(),ju=function(e){function n(n,t){var l=e.call(this,t)||this;return l.elementRef=n,l.opContextMenu=t,l.items=[],l}return r.d(n,e),n.prototype.ngAfterViewInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.$element.on("click",function(n){return n.preventDefault(),n.stopPropagation(),e.opContextMenu.isActive(e)?(e.opContextMenu.close(),!1):(e.open(n),!1)}),Mousetrap(this.$element[0]).bind("shift+alt+f10",function(n){e.open(n)})},n.prototype.positionArgs=function(e){return{my:"left top",at:"left bottom",of:this.$element,collision:"flipfit"}},n}(Iu),_u=function(e){function n(n,t,l,i,o,r,a,u){var s=e.call(this,n,t)||this;return s.elementRef=n,s.opContextMenu=t,s.wpTableColumns=l,s.wpTableSortBy=i,s.wpTableGroupBy=o,s.wpTableHierarchies=r,s.opModalService=a,s.I18n=u,s}return r.d(n,e),n.prototype.open=function(e){this.table.configuration.columnMenuEnabled&&(this.buildItems(),this.opContextMenu.show(this,e))},Object.defineProperty(n.prototype,"locals",{get:function(){return{showAnchorRight:this.column&&"id"!==this.column.id,contextMenuId:"column-context-menu",items:this.items}},enumerable:!0,configurable:!0}),n.prototype.positionArgs=function(n){var t={of:this.$element.find(".generic-table--sort-header-outer")},l=e.prototype.positionArgs.call(this,n);return _.assign(l,t),l},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return this.$element.find("#"+this.column.id)},enumerable:!0,configurable:!0}),n.prototype.buildItems=function(){var e=this,n=this.column;this.items=[{hidden:!this.wpTableSortBy.isSortable(n),linkText:this.I18n.t("js.work_packages.query.sort_descending"),icon:"icon-sort-descending",onClick:function(){return e.wpTableSortBy.addDescending(n),!0}},{hidden:!this.wpTableSortBy.isSortable(n),linkText:this.I18n.t("js.work_packages.query.sort_ascending"),icon:"icon-sort-ascending",onClick:function(){return e.wpTableSortBy.addAscending(n),!0}},{hidden:!this.wpTableGroupBy.isGroupable(n)||this.wpTableGroupBy.isCurrentlyGroupedBy(n),linkText:this.I18n.t("js.work_packages.query.group"),icon:"icon-group-by",onClick:function(){return e.wpTableGroupBy.setBy(n),!0}},{hidden:this.wpTableColumns.isFirst(n),linkText:this.I18n.t("js.work_packages.query.move_column_left"),icon:"icon-column-left",onClick:function(){return e.wpTableColumns.shift(n,-1),!0}},{hidden:this.wpTableColumns.isLast(n),linkText:this.I18n.t("js.work_packages.query.move_column_right"),icon:"icon-column-right",onClick:function(){return e.wpTableColumns.shift(n,1),!0}},{linkText:this.I18n.t("js.work_packages.query.hide_column"),icon:"icon-delete",onClick:function(){var t=e.wpTableColumns.previous(n)||e.wpTableColumns.next(n);return e.wpTableColumns.removeColumn(n),setTimeout(function(){t&&jQuery("#"+t.id).focus()}),!0}},{linkText:this.I18n.t("js.work_packages.query.insert_columns"),icon:"icon-columns",onClick:function(){return e.opModalService.show(En,{initialTab:"columns"}),!0}}]},n}(ju),Su=t("G4s3"),Ru=function(){function e(){}return Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return jQuery("meta[name=current_user]").length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return jQuery("meta[name=current_user]").data("id")},enumerable:!0,configurable:!0}),e}(),Tu=function(){function e(e,n,t,l){void 0===l&&(l=[]),this.injector=e,this.changeset=n,this.filters=t,this.excluded=l,this.currentUser=this.injector.get(Ru),this.halResourceService=this.injector.get(ee)}return e.prototype.applyDefaultsFromFilters=function(){var e=this;return this.changeset.getForm().then(function(n){var t=[];return _.each(e.filters,function(l){if("="===l.operator.id&&-1===e.excluded.indexOf(l.id)){var i=l.values[0];i&&t.push(e.setAllowedValueFor(n,l.id,i))}}),Promise.all(t)})},e.prototype.setAllowedValueFor=function(e,n,t){var l=this;return this.allowedValuesFor(e,n).then(function(e){var i=l.findSpecialValue(t,n)||l.findAllowedValue(t,e);i&&(l.changeset.setValue(n,i),l.changeset.workPackage[n]=i)})},e.prototype.findSpecialValue=function(e,n){return"parent"===n?e:e instanceof K&&"/api/v3/users/me"===e.$href&&this.currentUser.isLoggedIn?this.halResourceService.fromSelfLink("/api/v3/users/"+this.currentUser.userId):void 0},e.prototype.findAllowedValue=function(e,n){return e instanceof K&&e.$href?_.find(n,function(n){return n.$href===e.$href}):n?_.find(n,function(n){return n===e}):e},e.prototype.allowedValuesFor=function(e,n){var t=e.schema[n];return new Promise(function(e){if(t){if(t.allowedValues&&t.allowedValues.$load)return t.allowedValues.$load().then(function(n){e(n.elements)});e(t.allowedValues)}else e([])})},e}();function xu(e,n){return"click"!==e.type&&("keydown"!==e.type||e.which!==Tt.a.ENTER)||(n(),!1)}var Eu=function(){function e(){}return e.prototype.handleEvent=function(e,n){var t=this;xu(n,function(){return t.processEvent(e,n)})},e}(),Ou=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.states=l.injector.get(u),l.wpTableSelection=l.injector.get(Er),l.wpTableColumns=l.injector.get(Se),l.I18n=l.injector.get(U.a),l.text={cancelButton:l.I18n.t("js.button_cancel")},l}return r.d(n,e),n.prototype.buildCell=function(n,t){switch(t.id){case Fa.id:return this.buildCancelButton();default:return e.prototype.buildCell.call(this,n,t)}},n.prototype.buildNew=function(e,n){var t=this.buildEmpty(e);return[t[0],t[1]]},n.prototype.createEmptyRow=function(e){var n=this.classIdentifier(e),t=document.createElement("tr");return t.id=Sa(e.id),t.dataset.workPackageId=e.id,t.dataset.classIdentifier=n,t.classList.add("wp-inline-create-row","wp--row","wp-table--row","issue",n,n+"-table"),t},n.prototype.buildCancelButton=function(){var e=document.createElement("td");return e.classList.add("wp-table--cell-td","wp-table--cancel-create-td"),e.innerHTML='\n    <a\n       href="#"\n       class="wp-table--cancel-create-link icon icon-cancel"\n       aria-label="'+this.text.cancelButton+'">\n    </a>\n   ',e},n}(Aa),Du=function(){function e(e){this.injector=e,this.I18n=this.injector.get(U.a),this.authorisationService=this.injector.get(Xe),this.referenceComponentClass=null,this.referenceTarget=null,this.buttonTexts={reference:"",create:this.I18n.t("js.label_create_work_package")},this.newInlineWorkPackageCreated=new x.a,this.newInlineWorkPackageReferenced=new x.a}return Object.defineProperty(e.prototype,"canAdd",{get:function(){return this.canCreateWorkPackages||this.authorisationService.can("work_package","addChild")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canReference",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canCreateWorkPackages",{get:function(){return this.authorisationService.can("work_packages","createWorkPackage")},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.newInlineWorkPackageCreated.complete(),this.newInlineWorkPackageReferenced.complete()},e}(),Fu=function(){function e(e,n,t,l,i,o,r,a,u,s,c,d,p){this.injector=e,this.elementRef=n,this.FocusHelper=t,this.I18n=l,this.tableState=i,this.wpCacheService=o,this.currentUser=r,this.wpEditing=a,this.wpCreate=u,this.wpInlineCreate=s,this.wpTableColumns=c,this.wpTableFocus=d,this.authorisationService=p,this.mode="inactive",this.focus=!1,this.text=this.wpInlineCreate.buttonTexts}return e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement)},Object.defineProperty(e.prototype,"isActive",{get:function(){return"inactive"!==this.mode},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){_.isNil(this.table)||(this.rowBuilder=new Ou(this.injector,this.table),this.timelineBuilder=new za(this.injector,this.table),jQuery(this.table.timelineBody).addClass("-inline-create-mirror"),this.registerCreationCallback(),this.refreshOnColumnChanges(),this.registerCancelHandler())},e.prototype.registerCancelHandler=function(){var e=this;this.$element.on("click keydown",".wp-table--cancel-create-link",function(n){return xu(n,function(){e.resetRow()}),n.stopImmediatePropagation(),!1})},e.prototype.refreshOnColumnChanges=function(){var e=this;this.tableState.columns.values$().pipe(Object(E.a)(function(){return e.isActive}),Object(an.b)(this)).subscribe(function(){var n=e.$element.find(".wp-inline-create-row");n.length&&e.currentWorkPackage&&e.rowBuilder.refreshRow(e.currentWorkPackage,n)})},e.prototype.registerCreationCallback=function(){var e=this;this.wpCreate.onNewWorkPackage().pipe(Object(an.b)(this)).subscribe(function(n){e.currentWorkPackage&&e.currentWorkPackage.__initialized_at===n.__initialized_at?(e.resetRow(),e.table.configuration.isEmbedded||e.wpTableFocus.updateFocus(n.id),e.wpInlineCreate.newInlineWorkPackageCreated.next(n.id)):(e.table.editing.stopEditing("new"),e.removeWorkPackageRow(),e.showRow())})},e.prototype.handleAddRowClick=function(){return this.addWorkPackageRow(),!1},e.prototype.handleReferenceClick=function(){return this.mode="reference",!1},Object.defineProperty(e.prototype,"referenceClass",{get:function(){return this.wpInlineCreate.referenceComponentClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasReferenceClass",{get:function(){return!!this.referenceClass},enumerable:!0,configurable:!0}),e.prototype.addWorkPackageRow=function(){var e=this;this.wpCreate.createNewWorkPackage(this.projectIdentifier).then(function(n){if(!n)throw"No new work package was created";var t=e.currentWorkPackage=n.workPackage;e.applyDefaultsAndInsert(n,t)})},e.prototype.applyDefaultsAndInsert=function(e,n){var t,l=this;this.tableState.query.hasValue()?t=new Tu(this.injector,e,this.tableState.query.value.filters).applyDefaultsFromFilters():t=Promise.resolve();t.then(function(){l.wpEditing.updateValue("new",e),l.wpCacheService.updateWorkPackage(l.currentWorkPackage);var t=l.workPackageEditForm=l.renderInlineCreateRow(n);setTimeout(function(){t.activateMissingFields(),l.hideRow()})})},e.prototype.renderInlineCreateRow=function(e){var n=new au(this.table,this.injector,e.id,this.rowBuilder.classIdentifier(e)),t=Mr.createInContext(this.injector,n,e,!1);t.changeset.clear();var l=this.rowBuilder.buildNew(e,t)[0];return this.$element.append(l),t},e.prototype.resetRow=function(){var e=this;this.focus=!0,this.removeWorkPackageRow(),setTimeout(function(){e.showRow()},50)},e.prototype.removeWorkPackageRow=function(){this.currentWorkPackage=null,this.table.editing.stopEditing("new"),this.wpCacheService.clearSome("new"),this.$element.find(".wp-row-new").remove()},e.prototype.showRow=function(){this.mode="inactive"},e.prototype.hideRow=function(){this.mode="create"},Object.defineProperty(e.prototype,"colspan",{get:function(){return this.wpTableColumns.columnCount+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canReference",{get:function(){return this.hasReferenceClass&&this.wpInlineCreate.canReference},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canAdd",{get:function(){return this.wpInlineCreate.canAdd},enumerable:!0,configurable:!0}),e}(),Au=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Vu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"a",[["aria-haspopup","true"],["class","wp-inline-create--add-link"],["href",""],["role","link"]],[[1,"disabled",0],[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.handleAddRowClick()&&i);return i},null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"wp-inline-create--split-link":0}),l["\u0275did"](3,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),l["\u0275did"](4,4210688,null,0,kr,[p.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275eld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-add"]],null,null,null,Ct,wt)),l["\u0275did"](6,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component,l=e(n,2,0,t.hasReferenceClass);e(n,1,0,"wp-inline-create--add-link",l),e(n,4,0,t.focus);e(n,6,0,"icon icon-add")},function(e,n){var t=n.component;e(n,0,0,!t.isAllowed||void 0,t.text.create),e(n,7,0,t.text.create)})}function Mu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"a",[["aria-haspopup","true"],["class","wp-inline-create--reference-link wp-inline-create--split-link"],["href",""],["role","link"]],[[1,"disabled",0],[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.handleReferenceClick()&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-link"]],null,null,null,Ct,wt)),l["\u0275did"](4,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](5,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,4,0,"icon icon-link")},function(e,n){var t=n.component;e(n,1,0,!t.isAllowed||void 0,t.text.create),e(n,5,0,t.text.reference)})}function Lu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"tr",[["class","wp-inline-create-button-row hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"td",[["class","wp-inline-create-button-td -no-highlighting"]],[[1,"colspan",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"div",[["class","wp-inline-create-button"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Vu)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Mu)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.canAdd),e(n,6,0,t.canReference)},function(e,n){e(n,1,0,n.component.colspan)})}function Nu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function $u(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"tr",[["class","wp-inline-create-button-row hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"td",[["class","wp-inline-reference-row-td -no-highlighting"]],[[1,"colspan",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,2,null,Nu)),l["\u0275did"](3,671744,null,0,yt.i,[l.ViewContainerRef],{ngComponentOutlet:[0,"ngComponentOutlet"],ngComponentOutletInjector:[1,"ngComponentOutletInjector"]},null),l["\u0275did"](4,16384,null,0,Su.g,[yt.i],null,null)],function(e,n){var t=n.component;e(n,3,0,t.referenceClass,t.injector)},function(e,n){e(n,1,0,n.component.colspan)})}function qu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Lu)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,$u)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,"inactive"===t.mode),e(n,4,0,t.hasReferenceClass&&"reference"===t.mode)},null)}function Hu(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,qu)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.canAdd||t.canReference)},null)}l["\u0275ccf"]("[wpInlineCreate]",Fu,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["wpInlineCreate",""]],null,[[null,"keydown.escape"]],function(e,n,t){var i=!0;return"keydown.escape"===n&&(i=!1!==l["\u0275nov"](e,1).resetRow()&&i),i},Hu,Au)),l["\u0275did"](1,770048,null,0,Fu,[l.Injector,l.ElementRef,p.a,U.a,A,Oe,Ru,Zn,Gn,Du,Se,Dr,Xe],null,null)],function(e,n){e(n,1,0)},null)},{table:"wp-inline-create--table",projectIdentifier:"wp-inline-create--project-identifier"},{},[]);var Bu=function(){function e(e,n){this.I18n=e,this.injector=n,this.localStorageKey="openProject-mainMenuWidth",this.defaultWidth=230,this.currentProject=this.injector.get(T),this.global=window,this.htmlNode=document.getElementsByTagName("html")[0],this.mainMenu=jQuery("#main-menu")[0],this.hideElements=jQuery(".can-hide-navigation"),this.titleData=new Jl.a(""),this.titleData$=this.titleData.asObservable(),this.changeData=new Jl.a({}),this.changeData$=this.changeData.asObservable()}return e.prototype.initializeMenu=function(){if(this.mainMenu){this.elementWidth=parseInt(window.OpenProject.guardedLocalStorage(this.localStorageKey)),this.elementWidth?this.setWidth():this.saveWidth(this.mainMenu.offsetWidth);var e=this.injector.get(T);(jQuery(document.body).hasClass("controller-my")&&0==this.elementWidth||null===e.id)&&this.saveWidth(this.defaultWidth),this.isMobile&&this.closeMenu()}},e.prototype.toggleNavigation=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.showNavigation?this.closeMenu():this.isMobile?(this.setWidth(window.innerWidth),this.setupAutocloseMainMenu()):this.saveWidth(this.defaultWidth),this.addRemoveClassHidden(),this.setToggleTitle(),setTimeout(function(){jQuery('#main-menu [class*="-menu-item"]:visible').first().focus()},500)},e.prototype.closeMenu=function(){this.isMobile?this.saveWidth(0):this.setWidth(0),this.hideElements.addClass("hidden-navigation")},e.prototype.closeWhenOnMobile=function(){this.isMobile&&this.closeMenu()},e.prototype.setToggleTitle=function(){this.showNavigation?this.toggleTitle=this.I18n.t("js.label_hide_project_menu"):this.toggleTitle=this.I18n.t("js.label_expand_project_menu"),this.titleData.next(this.toggleTitle)},e.prototype.addRemoveClassHidden=function(){this.hideElements.toggleClass("hidden-navigation",!this.showNavigation)},e.prototype.saveWidth=function(e){var n=this,t=window.innerWidth-520;null!=e&&e>t&&(e=t),this.setWidth(e),window.OpenProject.guardedLocalStorage(this.localStorageKey,String(this.elementWidth)),this.setToggleTitle();var l=jQuery.Event("change");jQuery("#content-wrapper").on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){n.changeData.next(l)})},e.prototype.setWidth=function(e){null!=e&&(this.elementWidth=e),this.snapBack(),this.ensureContentVisibility(),this.global.showNavigation=this.showNavigation,this.addRemoveClassHidden(),this.htmlNode.style.setProperty("--main-menu-width",this.elementWidth+"px")},e.prototype.setupAutocloseMainMenu=function(){var e=this;jQuery("#main-menu").off("focusout.main_menu"),jQuery("#main-menu").on("focusout.main_menu",function(n){e.showNavigation&&document.getElementById("main-menu-toggle")!==n.relatedTarget&&setTimeout(function(){jQuery.contains(document.getElementById("main-menu"),document.activeElement)||document.getElementById("main-menu-toggle")===document.activeElement||e.closeMenu()},0)})},e.prototype.snapBack=function(){this.elementWidth<=10&&(this.elementWidth=0)},e.prototype.ensureContentVisibility=function(){var e=document.documentElement.clientWidth;this.elementWidth>=e-150&&(this.elementWidth=e-150)},Object.defineProperty(e.prototype,"isMobile",{get:function(){return window.innerWidth<680},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showNavigation",{get:function(){return this.elementWidth>10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGlobalPage",{get:function(){return!this.currentProject.id},enumerable:!0,configurable:!0}),e}(),Wu=function(){function e(e,n,t){this.toggleService=e,this.elementRef=n,this.$transitions=t,this.moving=!1}return e.prototype.ngOnInit=function(){var e=this;this.resizingElement=document.getElementsByClassName(this.elementClass)[0];var n=window.OpenProject.guardedLocalStorage(this.localStorageKey);this.elementFlex=n?parseInt(n,10):this.resizingElement.offsetWidth,0===this.elementFlex&&this.resizingElement.parentElement&&(this.elementFlex=this.resizingElement.parentElement.offsetWidth/2),this.resizingElement.style.flexBasis=this.elementFlex+"px",jQuery(document).ready(function(){e.applyColumnLayout(e.resizingElement,e.elementFlex)}),this.element=this.elementRef.nativeElement,this.toggleService.changeData$.pipe(Object(Or.a)(),Object(an.b)(this)).subscribe(function(e){jQuery(".-can-have-columns").toggleClass("-columns-2",jQuery(".work-packages-full-view--split-left").width()>750)});jQuery(window).resize(function(){jQuery(".-can-have-columns").toggleClass("-columns-2",jQuery(".work-packages-full-view--split-left").width()>750)})},e.prototype.ngOnDestroy=function(){this.resizingElement.style.flexBasis=null},e.prototype.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation(),1!==e.buttons&&1!==e.which||(this.oldPosition=e.clientX,this.moving=!0,this.mouseMoveHandler=this.resizeElement.bind(this,this.resizingElement),document.getElementsByTagName("body")[0].setAttribute("style","cursor: col-resize !important"),window.addEventListener("mousemove",this.mouseMoveHandler),window.addEventListener("touchmove",this.mouseMoveHandler,{passive:!1}))},e.prototype.handleTouchEnd=function(e){window.removeEventListener("touchmove",this.mouseMoveHandler);var n=window.OpenProject.guardedLocalStorage(this.localStorageKey);n&&(this.elementFlex=parseInt(n,10))},e.prototype.handleMouseUp=function(e){if(!this.moving)return!0;window.removeEventListener("mousemove",this.mouseMoveHandler),document.body.style.cursor="auto";var n=window.OpenProject.guardedLocalStorage(this.localStorageKey);n&&(this.elementFlex=parseInt(n,10)),this.moving=!1;var t=new Event(this.resizeEvent);return window.dispatchEvent(t),!1},e.prototype.resizeElement=function(e,n){n.preventDefault(),n.stopPropagation();var t=this.oldPosition-(n.clientX||n.pageX);this.oldPosition=n.clientX||n.pageX,this.elementFlex=this.elementFlex+t;var l=this.elementFlex<480?480:this.elementFlex;window.OpenProject.guardedLocalStorage(this.localStorageKey,String(l)),this.applyColumnLayout(e,l),e.style.flexBasis=l+"px"},e.prototype.applyColumnLayout=function(e,n){e===jQuery(".work-packages-full-view--split-right")[0]?jQuery(".-can-have-columns").toggleClass("-columns-2",jQuery(".work-packages-full-view--split-left").width()>750):e.classList.toggle("-columns-2",n>700)},e}(),zu=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Qu(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","work-packages--resizer icon-resizer-vertical-lines"]],null,null,null,null,null))],null,null)}l["\u0275ccf"]("wp-resizer",Wu,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;return"mousedown"===n&&(i=!1!==l["\u0275nov"](e,1).handleMouseDown(t)&&i),"window:touchend"===n&&(i=!1!==l["\u0275nov"](e,1).handleTouchEnd(t)&&i),"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,1).handleMouseUp(t)&&i),i},Qu,zu)),l["\u0275did"](1,245760,null,0,Wu,[Bu,l.ElementRef,d.O],null,null)],function(e,n){e(n,1,0)},null)},{elementClass:"elementClass",resizeEvent:"resizeEvent",localStorageKey:"localStorageKey"},{},[]);var Uu=function(){function e(e,n,t,l,i,o){this.injector=e,this.elementRef=n,this.tableState=t,this.states=l,this.displayFieldService=i,this.I18n=o,this.text={sumFor:o.t("js.label_sum_for"),allWorkPackages:o.t("js.label_all_work_packages")}}return e.prototype.ngAfterViewInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),Object(a.c)(this.tableState.columns,this.tableState.results,this.tableState.sum).values$().pipe(Object(q.a)(this.tableState.stopAllSubscriptions)).subscribe(function(n){var t=n[0],l=n[1];n[2].isEnabled&&l.sumsSchema?l.sumsSchema.$load().then(function(n){e.refresh(t,l,n)}):e.clear()})},e.prototype.clear=function(){this.$element.empty()},e.prototype.refresh=function(e,n,t){this.clear(),this.render(e,n,t)},e.prototype.render=function(e,n,t){var l=this;this.elementRef.nativeElement.classList.add("sum","group","all","issue","work_package"),e.getColumns().forEach(function(e,i){var o=document.createElement("td"),r=l.renderContent(n.totalSums,e.id,t[e.id]);0===i&&l.appendFirstLabel(r),o.appendChild(r),l.$element.append(o)}),this.$element.append('<td><div class="generic-table--footer-outer"></div></td>')},e.prototype.renderContent=function(e,n,t){var l=document.createElement("div");if(!t)return l;var i=this.displayFieldService.getField(e,n,t,{container:"table",options:{}});return i.isEmpty()||i.render(l,i.valueString),l},e.prototype.appendFirstLabel=function(e){var n=document.createElement("span");n.textContent=this.text.sumFor+" "+this.text.allWorkPackages,jQuery(e).prepend(n)},e}(),Ku=t("Gi3i"),Yu=".work-packages-tabletimeline--table-side",Gu=".work-packages-tabletimeline--timeline-side",Zu=".scroll-sync",Ju=15;function Xu(e){if(0===e)return e;var n=Ju;return e<0&&(n*=-1),n}function es(e,n,t){var l=e.target,i=e.originalEvent,o=function(e){var n=e.deltaX,t=e.deltaY;return e.shiftKey&&(n=t,t=0),[n,t]}(i),r=o[0],a=o[1];0!==a&&(i.preventDefault(),r=Xu(r),a=Xu(a),window.requestAnimationFrame(function(){n[0].scrollTop=n[0].scrollTop+a,t[0].scrollTop=t[0].scrollTop+a,l.scrollLeft=l.scrollLeft+r}))}var ns,ts=function(e){function n(n,t){var l=e.call(this)||this;return l.injector=n,l.states=l.injector.get(u),l.wpEditing=l.injector.get(Zn),l}return r.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"click.table.cell, keydown.table.cell"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table--cell-span.-editable"},enumerable:!0,configurable:!0}),n.prototype.eventScope=function(e){return jQuery(e.container)},n.prototype.processEvent=function(e,n){Object(Ee.a)("Starting editing on cell: ",n.target),n.preventDefault();var t=jQuery(n.target).closest(".wp-table--cell-span"),l=t.data("fieldName");if(!l)return Object(Ee.a)("Click handled by cell not a field? ",n.target),!0;var i=t.closest(".wp-table--row"),o=i.data("workPackageId"),r=this.states.workPackages.get(o).value,a=i.data("classIdentifier"),u=e.editing.startEditing(r,a),s=Tr.getPosition(n);return u.activate(l).then(function(e){return e.focus(s)}).catch(function(){return t.addClass("-read-only")}),!1},n}(Eu),ls=function(e){function n(n,t){var l=e.call(this)||this;return l.injector=n,l.wpTableRelationColumns=l.injector.get(Le),l}return r.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"click.table.relationsCell, keydown.table.relationsCell"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table--relation-indicator"},enumerable:!0,configurable:!0}),n.prototype.eventScope=function(e){return jQuery(e.container)},n.prototype.processEvent=function(e,n){Object(Ee.a)("Handled click on relation cell %o",n.target),n.preventDefault();var t=jQuery(n.target).closest(".wp-table--relation-cell-td").data("columnId"),l=jQuery(n.target).closest(".wp-table--row").data("workPackageId");return this.wpTableRelationColumns.current.getExpandFor(l)===t?this.wpTableRelationColumns.collapse(l):this.wpTableRelationColumns.expandFor(l,t),!1},n}(Eu),is=function(){function e(e,n,t,l){this.HookService=e,this.UrlParamsHelper=n,this.wpTableTimeline=t,this.PathHelper=l,this.BULK_ACTIONS=[{text:I18n.t("js.work_packages.bulk_actions.edit"),key:"edit",link:"update",href:this.PathHelper.staticBase+"/work_packages/bulk/edit"},{text:I18n.t("js.work_packages.bulk_actions.move"),key:"move",link:"move",href:this.PathHelper.staticBase+"/work_packages/move/new"},{text:I18n.t("js.work_packages.bulk_actions.copy"),key:"copy",link:"copy",href:this.PathHelper.staticBase+"/work_packages/move/new?copy=true"},{text:I18n.t("js.work_packages.bulk_actions.delete"),key:"delete",link:"delete",href:this.PathHelper.staticBase+"/work_packages/bulk?_method=delete"}]}return e.prototype.getPermittedActionLinks=function(e,n){var t=[],l=this.getAllowedActions(e,n);return _.each(l,function(n){t.push({key:n.key,text:n.text,icon:n.icon,link:e[n.link].href})}),t},e.prototype.getIntersectOfPermittedActions=function(e){var n=this,t=[],l=_.filter(this.BULK_ACTIONS,function(t){return _.every(e,function(e){return n.getAllowedActions(e,[t]).length>=1})});return _.each(l,function(l){t.push({key:l.key,text:l.text,link:n.getBulkActionLink(l,e)})}),t},e.prototype.getBulkActionLink=function(e,n){var t={"ids[]":n.map(function(e){return e.id})},l=this.UrlParamsHelper.buildQueryString(t),i=e.href.split("?");return i.shift()+"?"+i.concat(new Array(l)).join("&")},e.prototype.getAllowedActions=function(e,n){var t=[];return _.each(n,function(n){e.hasOwnProperty(n.link)&&(n.text=n.text||I18n.t("js.button_"+n.key),t.push(n))}),_.each(this.HookService.call("workPackageTableContextMenu"),function(n){if(e.hasOwnProperty(n.link)){var l=n.indexBy?n.indexBy(t):t.length;t.splice(l,0,n)}}),e.addRelation&&this.wpTableTimeline.isVisible&&(t.push({key:"relation-precedes",text:I18n.t("js.relation_buttons.add_predecessor"),link:"addRelation"}),t.push({key:"relation-follows",text:I18n.t("js.relation_buttons.add_follower"),link:"addRelation"})),e.addChild&&t.push({key:"relation-new-child",text:I18n.t("js.relation_buttons.add_new_child"),link:"addChild"}),t},e.prototype.getPermittedActions=function(e,n){return 1===e.length?this.getPermittedActionLinks(e[0],n):this.getIntersectOfPermittedActions(e)},e}(),os=function(){function e(e,n,t,l,i,o){this.$state=e,this.states=n,this.wpTableRefresh=t,this.wpNotificationsService=l,this.pathHelper=i,this.wpCacheService=o}return e.prototype.changeParent=function(e,n){var t=this,l={lockVersion:e.lockVersion};return l._links=n?{parent:{href:this.pathHelper.api.v3.work_packages.id(n).toString()}}:{parent:{href:null}},e.changeParent(l).then(function(l){return t.wpCacheService.updateWorkPackage(l),t.wpNotificationsService.showSave(l),t.wpTableRefresh.request("Changed parent of "+e.id+" to "+n,!0),l}).catch(function(n){return t.wpNotificationsService.handleRawError(n,e),Promise.reject(n)})},e.prototype.removeParent=function(e){return this.changeParent(e,null)},e.prototype.addExistingChildWp=function(e,n){var t=this;return this.wpCacheService.require(n).then(function(n){return t.changeParent(n,e.id).then(function(n){return t.wpCacheService.loadWorkPackage(e.id.toString(),!0),t.wpTableRefresh.request("Added new child to "+e.id,!0),n})})},e.prototype.addNewChildWp=function(e){var n=this;e.project.$load().then(function(){var t,l=["work-packages.list.new",{parent_id:e.id}];n.$state.includes("work-packages.show")&&(l[0]="work-packages.new"),(t=n.$state).go.apply(t,l)})},e.prototype.removeChild=function(e){var n=this;return e.$load().then(function(){var t=e.parent;return e.changeParent({_links:{parent:{href:null}},lockVersion:e.lockVersion}).then(function(e){n.wpCacheService.loadWorkPackage(t.id.toString(),!0),n.wpCacheService.updateWorkPackage(e)}).catch(function(t){return n.wpNotificationsService.handleRawError(t,e),Promise.reject(t)})})},e}();!function(e){e.isClickedWithModifier=function(e){var n=e.ctrlKey||e.shiftKey||e.metaKey,t=1===e.button;return n||t},e.isOutsideAngular=function(){return 0==jQuery("[ui-view]").length}}(ns||(ns={}));var rs=[{key:"log_time",link:"logTime",resource:"workPackage"},{key:"move",link:"move",resource:"workPackage"},{key:"copy",link:"copy",resource:"workPackage"},{key:"delete",link:"delete",resource:"workPackage"},{key:"export-pdf",link:"pdf",resource:"workPackage"},{key:"export-atom",link:"atom",resource:"workPackage"}],as=function(){function e(e){this.halResourceService=e}return e.prototype.restoreQuery=function(e,n){var t=this.halResourceService.createHalResourceOfType("Query",n.payload);this.restoreFilters(e,t,n.schema),this.restoreColumns(e,t,n.schema),this.restoreSortBy(e,t,n.schema),this.restoreGroupBy(e,t,n.schema),this.restoreOtherProperties(e,t)},e.prototype.restoreFilters=function(e,n,t){var l=_.map(n.filters,function(e){var n=_.find(t.filtersSchemas.elements,function(n){return n.filter.allowedValues[0].$href===e.filter.$href});if(!n)return null;var l=n.getFilter(),i=_.find(n.operator.allowedValues,function(n){return n.$href===e.operator.$href});return i&&(l.operator=i),l.values.length=0,_.each(e.values,function(e){return l.values.push(e)}),l});l=_.compact(l),e.filters.length=0,_.each(l,function(n){return e.filters.push(n)})},e.prototype.restoreColumns=function(e,n,t){var l=_.map(n.columns,function(e){return _.find(t.columns.allowedValues,function(n){return n.$href===e.$href})});l=_.compact(l),e.columns.length=0,_.each(l,function(n){return e.columns.push(n)})},e.prototype.restoreSortBy=function(e,n,t){var l=_.map(n.sortBy,function(e){return _.find(t.sortBy.allowedValues,function(n){return n.$href===e.$href})});l=_.compact(l),e.sortBy.length=0,_.each(l,function(n){return e.sortBy.push(n)})},e.prototype.restoreGroupBy=function(e,n,t){var l=_.find(t.groupBy.allowedValues,function(e){return n.groupBy&&n.groupBy.$href===e.$href});e.groupBy=l},e.prototype.restoreOtherProperties=function(e,n){_.without(Object.keys(n.$source),"_links","filters").forEach(function(t){e[t]=n[t]}),_.without(Object.keys(n.$source._links),"columns","groupBy","sortBy").forEach(function(t){e[t]=n[t]})},e}(),us=t("0/uQ"),ss=t("15JJ"),cs=t("psW0"),ds=function(){function e(e,n,t,l,i,o,r,u,s,c,d,p){var h=this;this.NotificationsService=e,this.I18n=n,this.UrlParamsHelper=t,this.authorisationService=l,this.$state=i,this.QueryDm=o,this.QueryFormDm=r,this.states=u,this.tableState=s,this.wpTablePagination=c,this.wpStatesInitialization=d,this.wpListInvalidQueryService=p,this.queryRequests=Object(a.g)(),this.queryLoading=this.queryRequests.values$().pipe(Object(ss.a)(function(e){return h.streamQueryRequest(e.queryParams,e.projectIdentifier)}),Object(cs.a)(function(e){return h.conditionallyLoadForm(e),h.tableState.ready.doAndTransition("Query loaded",function(){return h.wpStatesInitialization.initialize(e,e.results),h.tableState.tableRendering.onQueryUpdated.valuesPromise()}).then(function(){return e})}),Object($r.a)()),this.queryChanges=new Jl.a(""),this.queryChanges$=this.queryChanges.asObservable()}return e.prototype.streamQueryRequest=function(e,n){var t=this,l=this.getCurrentQueryProps(e),i=this.UrlParamsHelper.buildV3GetQueryFromJsonParams(l);return this.QueryDm.stream(i,e.query_id,n).pipe(Object(Q.a)(function(i){var o=t.UrlParamsHelper.buildV3GetQueryFromJsonParams(l);return Object(us.a)(t.handleQueryLoadingError(i,o,e.query_id,n))}))},e.prototype.fromQueryParams=function(e,n){return this.queryRequests.clear(),this.queryRequests.putValue({queryParams:e,projectIdentifier:n}),this.queryLoading.pipe(Object(H.a)(1))},e.prototype.getCurrentQueryProps=function(e){return e.query_props?decodeURIComponent(e.query_props):null},e.prototype.loadDefaultQuery=function(e){return this.fromQueryParams({},e).toPromise()},e.prototype.reloadQuery=function(e){var n=this,t=this.getPaginationInfo();t.offset=1;var l=this.QueryDm.reload(e,t);return this.updateStatesFromQueryOnPromise(l).then(function(e){return n.conditionallyLoadForm(e),e}).catch(function(t){var l=e.project&&e.project.id;return n.handleQueryLoadingError(t,{},e.id,l)})},e.prototype.loadResultsList=function(e,n){var t=this.QueryDm.loadResults(e,n);return this.updateStatesFromWPListOnPromise(e,t)},e.prototype.reloadCurrentResultsList=function(){var e=this.getPaginationInfo(),n=this.currentQuery;return this.loadResultsList(n,e)},e.prototype.loadCurrentResultsListFirstPage=function(){var e=this.getPaginationInfo();e.offset=1;var n=this.currentQuery;return this.loadResultsList(n,e)},e.prototype.loadCurrentQueryFromParams=function(e){return this.fromQueryParams(this.$state.params,e).toPromise()},e.prototype.loadForm=function(e){var n=this;return this.QueryFormDm.load(e).then(function(t){return n.wpStatesInitialization.updateStatesFromForm(e,t),t})},e.prototype.create=function(e,n){var t=this,l=this.tableState.queryForm.value;e.name=n;var i=this.QueryDm.create(e,l);return i.then(function(e){return t.NotificationsService.addSuccess(t.I18n.t("js.notice_successful_create")),t.reloadQuery(e).then(function(){t.queryChanges.next(e.name)}),e}),i},e.prototype.delete=function(){var e=this,n=this.currentQuery,t=this.QueryDm.delete(n);return t.then(function(){var t;e.NotificationsService.addSuccess(e.I18n.t("js.notice_successful_delete")),n.project&&(t=n.project.$href.split("/").pop()),e.loadDefaultQuery(t),e.queryChanges.next(n.name)}),t},e.prototype.save=function(e){var n=this;e=e||this.currentQuery;var t=this.tableState.queryForm.value,l=this.QueryDm.update(e,t);return l.then(function(){n.NotificationsService.addSuccess(n.I18n.t("js.notice_successful_update")),n.$state.go(".",{query_id:e.id,query_props:null},{reload:!0}),n.queryChanges.next(e.name)}).catch(function(e){n.NotificationsService.addError(e.message)}),l},e.prototype.toggleStarred=function(e){var n=this,t=this.QueryDm.toggleStarred(e);return t.then(function(e){n.tableState.query.putValue(e),n.NotificationsService.addSuccess(n.I18n.t("js.notice_successful_update")),n.queryChanges.next(e.name)}),t},e.prototype.getPaginationInfo=function(){return this.wpTablePagination.paginationObject},e.prototype.conditionallyLoadForm=function(e){var n=this,t=this.tableState.queryForm.value;t&&e.$links.update.$href===t.$href||setTimeout(function(){return n.loadForm(e)},0)},e.prototype.updateStatesFromQueryOnPromise=function(e){var n=this;return e.then(function(e){return n.tableState.ready.doAndTransition("Query loaded",function(){return n.wpStatesInitialization.initialize(e,e.results),n.tableState.tableRendering.onQueryUpdated.valuesPromise()}),e}),e},e.prototype.updateStatesFromWPListOnPromise=function(e,n){var t=this;return n.then(function(n){return t.tableState.ready.doAndTransition("Query loaded",function(){return t.wpStatesInitialization.updateTableState(e,n),t.wpStatesInitialization.updateChecksum(e,n),t.tableState.tableRendering.onQueryUpdated.valuesPromise()}),n})},Object.defineProperty(e.prototype,"currentQuery",{get:function(){return this.tableState.query.value},enumerable:!0,configurable:!0}),e.prototype.handleQueryLoadingError=function(e,n,t,l){var i=this;return this.NotificationsService.addError(this.I18n.t("js.work_packages.faulty_query.description"),e.message),new Promise(function(e,o){i.QueryFormDm.loadWithParams(n,t,l).then(function(r){i.QueryDm.findDefault({pageSize:0},l).then(function(l){i.wpListInvalidQueryService.restoreQuery(l,r),l.results.pageSize=n.pageSize,l.results.total=0,t&&(l.id=t),i.tableState.ready.doAndTransition("Query loaded",function(){return i.wpStatesInitialization.initialize(l,l.results),i.wpStatesInitialization.updateStatesFromForm(l,r),i.tableState.tableRendering.onQueryUpdated.valuesPromise()}),e(l)}).catch(o)}).catch(o)})},e}(),ps=function(){function e(e,n,t,l,i,o,r){this.http=e,this.$state=n,this.PathHelper=t,this.UrlParamsHelper=l,this.NotificationsService=i,this.I18n=o,this.wpTableRefresh=r,this.text={successful_delete:this.I18n.t("js.work_packages.message_successful_bulk_delete")}}return e.prototype.performBulkDelete=function(e,n){var t=this,l={"ids[]":e},i=this.http.delete(this.PathHelper.workPackagesBulkDeletePath(),{params:l}).toPromise();return n&&i.then(function(){t.NotificationsService.addSuccess(t.text.successful_delete),t.wpTableRefresh.request("Bulk delete removed elements",!0),t.$state.includes("**.list.details.**")&&e.indexOf(t.$state.params.workPackageId)>-1&&t.$state.go("work-packages.list",t.$state.params)}).catch(function(){var e=t.UrlParamsHelper.buildQueryString(l);window.location.href=t.PathHelper.workPackagesBulkDeletePath()+"?"+e}),i},e}(),hs=function(e){function n(n,t,l,i,o,r,a,u,s,c,d){var p=e.call(this,l,o,n)||this;return p.elementRef=n,p.WorkPackageService=t,p.locals=l,p.I18n=i,p.cdRef=o,p.$state=r,p.states=a,p.wpTableFocus=u,p.wpListService=s,p.wpNotificationsService=c,p.notificationsService=d,p.busy=!1,p.childrenDeletionConfirmed=!1,p.text={label_visibility_settings:p.I18n.t("js.label_visibility_settings"),button_save:p.I18n.t("js.modals.button_save"),confirm:p.I18n.t("js.button_confirm"),warning:p.I18n.t("js.label_warning"),cancel:p.I18n.t("js.button_cancel"),close:p.I18n.t("js.close_popup_title"),label_confirm_children_deletion:p.I18n.t("js.modals.destroy_work_package.confirm_deletion_children")},p}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.workPackages=this.locals.workPackages,this.workPackageLabel=this.I18n.t("js.units.workPackage",{count:this.workPackages.length}),1===this.workPackages.length&&(this.singleWorkPackage=this.workPackages[0],this.singleWorkPackageChildren=this.singleWorkPackage.children),this.text.title=this.I18n.t("js.modals.destroy_work_package.title",{label:this.workPackageLabel}),this.text.text=this.I18n.t("js.modals.destroy_work_package.text",{label:this.workPackageLabel,count:this.workPackages.length}),this.text.childCount=function(e){var t=n.children(e).length;return n.I18n.t("js.units.child_work_packages",{count:t})},this.text.hasChildren=function(e){return n.I18n.t("js.modals.destroy_work_package.has_children",{childUnits:n.text.childCount(e)})},this.text.deletesChildren=this.I18n.t("js.modals.destroy_work_package.deletes_children")},Object.defineProperty(n.prototype,"blockedDueToUnconfirmedChildren",{get:function(){return this.mustConfirmChildren&&!this.childrenDeletionConfirmed},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mustConfirmChildren",{get:function(){if(this.singleWorkPackage&&this.singleWorkPackageChildren)this.singleWorkPackageChildren.length;return!!_.find(this.workPackages,function(e){return e.children&&e.children.length>0})},enumerable:!0,configurable:!0}),n.prototype.confirmDeletion=function(e){var n=this;return!this.busy&&!this.blockedDueToUnconfirmedChildren&&(this.busy=!0,this.WorkPackageService.performBulkDelete(this.workPackages.map(function(e){return e.id}),!0).then(function(){n.busy=!1,n.closeMe(e),n.wpTableFocus.clear(),n.$state.go("work-packages.list")}).catch(function(){n.busy=!1}),!1)},n.prototype.children=function(e){return e.hasOwnProperty("children")?e.children:[]},n}(yn.a),fs=function(e){function n(n,t,l,i,o){void 0===o&&(o={});var r=e.call(this,n.get(ca))||this;return r.injector=n,r.table=t,r.workPackageId=l,r.$element=i,r.additionalPositionArgs=o,r.states=r.injector.get(u),r.wpRelationsHierarchyService=r.injector.get(os),r.opModalService=r.injector.get(On.b),r.$state=r.injector.get(d.G),r.wpTableSelection=r.injector.get(Er),r.WorkPackageContextMenuHelper=r.injector.get(is),r.workPackage=r.states.workPackages.get(r.workPackageId).value,r.selectedWorkPackages=r.getSelectedWorkPackages(),r.permittedActions=r.WorkPackageContextMenuHelper.getPermittedActions(r.selectedWorkPackages,rs),r.items=r.buildItems(),r}return r.d(n,e),Object.defineProperty(n.prototype,"locals",{get:function(){return{contextMenuId:"work-package-context-menu",items:this.items}},enumerable:!0,configurable:!0}),n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,this.additionalPositionArgs),t},n.prototype.triggerContextMenuAction=function(e){var n=e.link;switch(e.key){case"delete":this.deleteSelectedWorkPackages();break;case"edit":this.editSelectedWorkPackages(n);break;case"copy":this.copySelectedWorkPackages(n);break;case"relation-precedes":this.table.timelineController.startAddRelationPredecessor(this.workPackage);break;case"relation-follows":this.table.timelineController.startAddRelationFollower(this.workPackage);break;case"relation-new-child":this.wpRelationsHierarchyService.addNewChildWp(this.workPackage);break;default:window.location.href=n}},n.prototype.deleteSelectedWorkPackages=function(){var e=this.getSelectedWorkPackages();this.opModalService.show(hs,{workPackages:e})},n.prototype.editSelectedWorkPackages=function(e){this.getSelectedWorkPackages().length>1&&(window.location.href=e)},n.prototype.copySelectedWorkPackages=function(e){var n=this.getSelectedWorkPackages();if(n.length>1)window.location.href=e;else{var t={copiedFromWorkPackageId:n[0].id};this.$state.go("work-packages.list.copy",t)}},n.prototype.getSelectedWorkPackages=function(){var e=this.wpTableSelection.getSelectedWorkPackages();return 0===e.length?[this.workPackage]:(-1===e.indexOf(this.workPackage)&&e.push(this.workPackage),e)},n.prototype.buildItems=function(){var e=this,n=this.permittedActions.map(function(n){return{class:void 0,disabled:!1,linkText:n.text,href:n.href,icon:null!=n.icon?n.icon:"icon-"+n.key,onClick:function(t){return(!n.href||!ns.isClickedWithModifier(t))&&(e.triggerContextMenuAction(n),!0)}}});return this.workPackage.isNew||n.unshift({disabled:!1,icon:"icon-view-split",class:"detailsViewMenuItem",href:this.$state.href("work-packages.list.details.overview",{workPackageId:this.workPackageId}),linkText:I18n.t("js.button_open_details"),onClick:function(n){return!ns.isClickedWithModifier(n)&&(e.$state.go("work-packages.list.details.overview",{workPackageId:e.workPackageId}),!0)}},{disabled:!1,icon:"icon-view-fullscreen",class:"openFullScreenView",href:this.$state.href("work-packages.show",{workPackageId:this.workPackageId}),linkText:I18n.t("js.button_open_fullscreen"),onClick:function(n){return!ns.isClickedWithModifier(n)&&(e.$state.go("work-packages.show",{workPackageId:e.workPackageId}),!0)}}),n},n}(Iu),gs=function(){function e(e,n){this.injector=e,this.table=n,this.opContextMenu=this.injector.get(ca)}return Object.defineProperty(e.prototype,"rowSelector",{get:function(){return".wp-table--row"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.container)},e.prototype.openContextMenu=function(e,n,t){var l=new fs(this.injector,this.table,n,jQuery(e.target),t);this.opContextMenu.show(l,e)},e}(),ms=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l}return r.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"click.table.contextmenu"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table-context-menu-link"},enumerable:!0,configurable:!0}),n.prototype.handleEvent=function(n,t){var l=jQuery(t.target);if(l.closest(".__ui-state-link").length)return Object(Ee.a)("Allowing original context menu on state link"),!0;t.preventDefault(),t.stopPropagation();var i=l.closest(this.rowSelector).data("workPackageId");return i&&e.prototype.openContextMenu.call(this,t,i),!1},n}(gs),vs=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l}return r.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"keydown.table.contextmenu"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return this.rowSelector},enumerable:!0,configurable:!0}),n.prototype.handleEvent=function(n,t){if(!n.configuration.contextMenuEnabled)return!1;var l=jQuery(t.target);if(t.keyCode!==Tt.a.F10||!t.shiftKey||!t.altKey)return!0;t.preventDefault(),t.stopPropagation();var i=l.closest(this.SELECTOR).data("workPackageId"),o={my:"left top",at:"left bottom",of:l};return e.prototype.openContextMenu.call(this,t,i,o),!1},n}(gs),ys=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.wpTableSelection=l.injector.get(Er),l}return r.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"contextmenu.table.rightclick"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table--row,.wp-timeline-cell"},enumerable:!0,configurable:!0}),n.prototype.handleEvent=function(n,t){if(!n.configuration.contextMenuEnabled)return!1;var l=jQuery(t.target);if(l.closest(".__ui-state-link").length)return Object(Ee.a)("Allowing original context menu on state link"),!0;t.preventDefault(),t.stopPropagation();var i=l.closest(this.SELECTOR).data("workPackageId");if(i){var o=this.table.findRenderedRow(i)[0];this.wpTableSelection.isSelected(i)||this.wpTableSelection.setSelection(i,o),e.prototype.openContextMenu.call(this,t,i)}return!1},n}(gs),bs=function(){function e(e,n){this.injector=e,this.$state=this.injector.get(d.G),this.states=this.injector.get(u),this.keepTab=this.injector.get(dn),this.wpTableSelection=this.injector.get(Er),this.wpTableFocus=this.injector.get(Dr)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"click.table.row"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".wp-table--row"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.tbody)},e.prototype.handleEvent=function(e,n){var t=jQuery(n.target);if(t.is("a")||t.parent().is("a"))return!0;if(t.parents("."+xa).length)return Object(Ee.a)("Skipping click on inner cell"),!0;var l=t.closest(this.SELECTOR),i=l.data("workPackageId"),o=l.data("classIdentifier");if(!i)return!0;if(t.is("a")||t.parent().is("a"))return!0;var r=e.findRenderedRow(o),a=r[0];r[1];return n.ctrlKey||n.metaKey||n.shiftKey||this.wpTableSelection.setSelection(i,a),n.shiftKey&&this.wpTableSelection.setMultiSelectionFrom(e.renderedRows,i,a),(n.ctrlKey||n.metaKey)&&this.wpTableSelection.toggleRow(i),this.wpTableFocus.updateFocus(i),!1},e}(),ws=function(){function e(e,n){this.injector=e,this.$state=this.injector.get(d.G),this.states=this.injector.get(u),this.wpTableSelection=this.injector.get(Er),this.wpTableFocus=this.injector.get(Dr)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"dblclick.table.row"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".wp-table--row"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.tbody)},e.prototype.handleEvent=function(e,n){var t=jQuery(n.target);if(ns.isClickedWithModifier(n))return!0;if(t.parents("."+xa).length)return Object(Ee.a)("Skipping click on inner cell"),!0;var l=t.closest(this.SELECTOR).data("workPackageId");return!(!t.is("a")&&!t.parent().is("a"))||(this.wpTableFocus.updateFocus(l),this.$state.go("work-packages.show",{workPackageId:l}),!1)},e}(),ks=function(){function e(e,n){this.injector=e,this.tableState=this.injector.get(A),this.builder=new Za(e,n)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"click.table.groupheader"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".wp-table--group-header .expander"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.tbody)},e.prototype.handleEvent=function(e,n){n.preventDefault(),n.stopPropagation();var t=jQuery(n.target).parents(".wp-table--group-header").data("groupIdentifier"),l=this.collapsedState.value||{};l[t]=!l[t],this.collapsedState.putValue(l);var i=performance.now();this.builder.refreshExpansionState();var o=performance.now();Object(Ee.a)("Group redraw took "+(o-i)+" milliseconds.")},Object.defineProperty(e.prototype,"collapsedState",{get:function(){return this.tableState.collapsedGroups},enumerable:!0,configurable:!0}),e}(),Cs=function(e){function n(n,t){var l=e.call(this)||this;return l.injector=n,l.states=l.injector.get(u),l.wpTableHierarchies=l.injector.get(re),l}return r.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"click.table.hierarchy"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table--row .wp-table--hierarchy-indicator "},enumerable:!0,configurable:!0}),n.prototype.eventScope=function(e){return jQuery(e.tbody)},n.prototype.processEvent=function(e,n){var t=jQuery(n.target).closest(".wp-table--row").data("workPackageId");return this.wpTableHierarchies.toggle(t),n.stopImmediatePropagation(),n.preventDefault(),!1},n}(Eu),Ps=function(){function e(e,n){this.injector=e,this.$state=this.injector.get(d.G),this.keepTab=this.injector.get(dn),this.states=this.injector.get(u),this.wpTableSelection=this.injector.get(Er),this.wpTableFocus=this.injector.get(Dr)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"click.table.wpLink"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".__ui-state-link"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.container)},e.prototype.handleEvent=function(e,n){if(n.shiftKey||n.ctrlKey||n.metaKey||n.altKey)return!0;var t=jQuery(n.target),l=t.closest(this.SELECTOR),i=l.data("wpState"),o=l.data("workPackageId");t.closest("a").blur();var r=t.closest(".wp-table--row").data("classIdentifier"),a=e.findRenderedRow(r),u=a[0];a[1];return this.wpTableFocus.updateFocus(o),this.wpTableSelection.setSelection(o,u),this.$state.go(this.keepTab[i],{workPackageId:o,focus:!0}),n.preventDefault(),n.stopPropagation(),!1},e}(),Is=function(){return function(e,n){this.injector=e,this.table=n,this.tableState=this.injector.get(A),this.wpTableColumns=this.injector.get(Se),this.tableState.updates.columnsUpdates.values$("Refreshing columns on user request").pipe(Object(q.a)(this.tableState.stopAllSubscriptions)).subscribe(function(){if(n.originalRows.length>0){var e=performance.now();n.redrawTable();var t=performance.now();Object(Ee.a)("column redraw took "+(t-e)+" milliseconds.")}})}}(),js=function(){function e(e,n){var t=this;this.injector=e,this.wpTableHierarchies=this.injector.get(re),this.tableState=this.injector.get(A),this.tableState.updates.hierarchyUpdates.values$("Refreshing hierarchies on user request").pipe(Object(q.a)(this.tableState.stopAllSubscriptions),Object(D.a)(function(e){return e.isEnabled}),Object(Or.a)()).subscribe(function(){t.wpTableHierarchies.isEnabled||n.redrawTableAndTimeline()});var l=this.wpTableHierarchies.isEnabled;this.wpTableHierarchies.observeUntil(this.tableState.stopAllSubscriptions).subscribe(function(e){e.isEnabled===l&&t.renderHierarchyState(e),l=e.isEnabled})}return e.prototype.renderHierarchyState=function(e){var n=this.tableState.rendered.value;jQuery('[class^="__hierarchy-group-"]').removeClass(function(e,n){return(n.match(/__collapsed-group-\d+/g)||[]).join(" ")});var t={};_.each(e.collapsed,function(e,l){jQuery("."+eu(l)+" .wp-table--hierarchy-indicator").toggleClass("-hierarchy-collapsed",e);var i=jQuery("."+Xa(l));i.toggleClass(Ja(l),e),i.filter(".wp-table--row").each(function(l,i){var o=jQuery(i).index();t[o]||(n[o].hidden=e,t[o]=e)})}),e.last&&Ta(e.last),this.tableState.rendered.putValue(n,"Updated hidden state of rows after hierarchy change.")},e}(),_s=function(){return function(e,n){this.injector=e,this.wpTableRelationColumns=this.injector.get(Le),this.tableState=this.injector.get(A),this.tableState.updates.relationUpdates.values$("Refreshing expanded relations on user request").subscribe(function(e){n.redrawTableAndTimeline()})}}(),Ss=function(){return function(e,n){var t=this;this.injector=e,this.table=n,this.tableState=this.injector.get(A),this.states=this.injector.get(u),this.tableState.ready.fireOnTransition(this.tableState.rows,"Query loaded").values$("Initializing table after query was initialized").pipe(Object(q.a)(this.tableState.stopAllSubscriptions)).subscribe(function(e){n.initialSetup(e)}),this.states.workPackages.observeChange().pipe(Object(q.a)(this.tableState.stopAllSubscriptions.asObservable()),Object(E.a)(function(){return"Query loaded"===t.tableState.ready.current})).subscribe(function(e){e[0];var n=e[1];void 0!==n&&t.table.refreshRows(n)})}}(),Rs=function(){function e(e,n){var t=this;this.injector=e,this.table=n,this.wpTableSelection=this.injector.get(Er),this.wpTableFocus=this.injector.get(Dr),this.tableState=this.injector.get(A),this.FocusHelper=this.injector.get(p.a),this.opContextMenu=this.injector.get(ca),this.tableState.rendered.values$().pipe(Object(q.a)(this.tableState.stopAllSubscriptions)).subscribe(function(){t.wpTableFocus.ifShouldFocus(function(e){var n=Ra(e);n.length&&(Ta(e),t.FocusHelper.focusElement(n,!0))})}),this.wpTableSelection.selectionState.values$().pipe(Object(q.a)(this.tableState.stopAllSubscriptions)).subscribe(function(e){t.renderSelectionState(e)}),Mousetrap.bind(["command+a","ctrl+a"],function(e){return t.wpTableSelection.selectAll(n.renderedRows),e.preventDefault(),t.opContextMenu.close(),!1}),Mousetrap.bind(["command+d","ctrl+d"],function(e){return t.wpTableSelection.reset(),t.opContextMenu.close(),e.preventDefault(),!1})}return e.prototype.renderSelectionState=function(e){var n=jQuery(this.table.container);n.find(".wp-table--row.-checked").removeClass("-checked"),_.each(e.selected,function(e,t){n.find('.wp-table--row[data-work-package-id="'+t+'"]').toggleClass("-checked",e)})},e}(),Ts=function(){function e(e,n){var t=this;this.injector=e,this.table=n,this.tableState=this.injector.get(A),this.tableState.timeline.values$().pipe(Object(q.a)(this.tableState.stopAllSubscriptions)).subscribe(function(e){t.renderVisibility(e.isVisible)})}return e.prototype.renderVisibility=function(e){var n=jQuery(this.table.container);n.find(".work-packages-tabletimeline--timeline-side").toggle(e),n.find(".work-packages-tabletimeline--table-side").toggleClass("-timeline-visible",e)},e}(),xs=function(){return function(e,n){this.injector=e,this.wpTableHighlighting=this.injector.get(ln),this.tableState=this.injector.get(A),this.tableState.highlighting.values$("Refreshing highlights on user request").pipe(Object(q.a)(this.tableState.stopAllSubscriptions),Object(Or.a)()).subscribe(function(){return n.redrawTable()})}}(),Es=function(){function e(e){var n=this;this.injector=e,this.eventHandlers=[function(e){return new Cs(n.injector,e)},function(e){return new ts(n.injector,e)},function(e){return new Ps(n.injector,e)},function(e){return new bs(n.injector,e)},function(e){return new ws(n.injector,e)},function(e){return new ks(n.injector,e)},function(e){return new ys(n.injector,e)},function(e){return new ms(n.injector,e)},function(e){return new vs(n.injector,e)},function(e){return new ls(n.injector,e)}],this.stateTransformers=[Rs,Ss,Is,Ts,js,_s,xs]}return e.prototype.attachTo=function(e){var n=this;this.stateTransformers.map(function(t){return new t(n.injector,e)}),this.eventHandlers.map(function(n){var t=n(e);return t.eventScope(e).on(t.EVENT,t.SELECTOR,function(n){t.handleEvent(e,n)}),t})},e}(),Os=t("dzgT"),Ds=function(){function e(e){this.tableAndTimeline=e,this.lastHoveredElement=null,this.$body=jQuery("body"),this.lastAffectedElements=[]}return e.prototype.activate=function(){var e=this;this.$body.on("mousemove.hoverSync",function(n){n.target!==e.lastHoveredElement&&e.handleHover(n.target),e.lastHoveredElement=n.target})},e.prototype.deactivate=function(){this.$body.off(".hoverSync"),this.removeAllHoverClasses()},e.prototype.locateHoveredTableRow=function(e){var n=e.closest("tr");return 0===n.length?null:n[0]},e.prototype.locateHoveredTimelineRow=function(e){var n=e.closest("div.wp-timeline-cell");return 0===n.length?null:n[0]},e.prototype.handleHover=function(e){var n=jQuery(e),t=this.locateHoveredTableRow(n),l=this.locateHoveredTimelineRow(n);null!==t||null!==l?this.removeOldAndAddNewHoverClass(t,l):this.removeAllHoverClasses()},e.prototype.extractWorkPackageId=function(e){return parseInt(e.getAttribute("data-work-package-id"))},e.prototype.removeOldAndAddNewHoverClass=function(e,n){var t=this,l=null!==e?e:n,i=this.extractWorkPackageId(l),o=this.tableAndTimeline.find("tr.wp-row-"+i).first(),r=this.tableAndTimeline.find("div.wp-row-"+i).first();requestAnimationFrame(function(){t.removeAllHoverClasses(),r.addClass("row-hovered"),o.addClass("row-hovered"),t.lastAffectedElements.push(o),t.lastAffectedElements.push(r)})},e.prototype.removeAllHoverClasses=function(){this.lastAffectedElements.forEach(function(e){e.removeClass("row-hovered")}),this.lastAffectedElements=[]},e}(),Fs=function(){function e(e,n,t,l,i,o,r,a,u,s,c){this.elementRef=e,this.injector=n,this.states=t,this.tableState=l,this.opModalService=i,this.opContextMenu=o,this.I18n=r,this.cdRef=a,this.wpTableGroupBy=u,this.wpTableTimeline=s,this.wpTableColumns=c}return e.prototype.ngOnInit=function(){var e,n,t,l=this;this.configuration=new Dn(this.configurationObject),this.$element=jQuery(this.elementRef.nativeElement),this.scrollSyncUpdate=(e=this.$element,n=jQuery(e).find(Yu),t=jQuery(e).find(Gu),function(e){var l=!1,i=!1;e?(n.on("wheel"+Zu,function(e){es(e,n,t)}),n.on("scroll"+Zu,function(e){l=!0,i||(t[0].scrollTop=e.target.scrollTop),l&&i&&(l=!1,i=!1)}),t.on("wheel"+Zu,function(e){es(e,n,t)}),t.on("scroll"+Zu,function(e){i=!0,l||(n[0].scrollTop=e.target.scrollTop),l&&i&&(l=!1,i=!1)})):n.off(Zu)}),this.tableState.stopAllSubscriptions.next(),this.locale=I18n.locale,this.text={cancel:I18n.t("js.button_cancel"),noResults:{title:I18n.t("js.work_packages.no_results.title"),description:I18n.t("js.work_packages.no_results.description")},faultyQuery:{title:I18n.t("js.work_packages.faulty_query.title"),description:I18n.t("js.work_packages.faulty_query.description")},configureTable:I18n.t("js.toolbar.settings.configure_view"),tableSummary:I18n.t("js.work_packages.table.summary"),tableSummaryHints:[I18n.t("js.work_packages.table.text_inline_edit"),I18n.t("js.work_packages.table.text_select_hint"),I18n.t("js.work_packages.table.text_sort_hint")].join(" ")},Object(Os.a)(this.tableState.results.values$(),this.wpTableGroupBy.state.values$(),this.wpTableColumns.state.values$(),this.wpTableTimeline.state.values$()).pipe(Object(an.b)(this)).subscribe(function(e){var n=e[0],t=e[1],i=e[2],o=e[3];l.query=l.tableState.query.value,l.rowcount=n.count,l.groupBy=t.current,l.columns=i.current,l.numTableColumns=l.columns.length+2,l.timelineVisible!==o.current&&l.scrollSyncUpdate(o.current),l.timelineVisible=o.current});var i=this.getTableAndTimelineElement();this.tableElement=i[0],this.timeline=i[1],this.wpTableHoverSync=new Ds(this.$element),this.wpTableHoverSync.activate()},e.prototype.ngOnDestroy=function(){this.wpTableHoverSync.deactivate()},e.prototype.registerTimeline=function(e,n){var t=this.$element.find(".work-package--results-tbody");this.workPackageTable=new su(this.injector,this.$element[0],t[0],n,e,this.configuration),this.tbody=t,e.workPackageTable=this.workPackageTable,new Es(this.injector).attachTo(this.workPackageTable),this.cdRef.detectChanges()},e.prototype.openTableConfigurationModal=function(){this.opContextMenu.close(),this.opModalService.show(En)},Object.defineProperty(e.prototype,"isEmbedded",{get:function(){return this.configuration.isEmbedded},enumerable:!0,configurable:!0}),e.prototype.getTableAndTimelineElement=function(){var e=this.$element.find(".work-packages-tabletimeline--table-side"),n=this.$element.find(".work-packages-tabletimeline--timeline-side");if(0===n.length||0===e.length)throw new Error("invalid state");return[e[0],n[0]]},e}();function As(e,n,t,l,i,o,r,a,s,c,d,p){var h,f,g=e.get(A),m=null;p.changeset=new Jn(e,p.workPackage);var v=jQuery("body");function y(e,n){var l=t.getAbsoluteLeftCoordinates(),i=n.clientX-l;return Math.floor(i/e.viewParams.pixelPerDay)}function b(e){return function(n){var t=y(p,n)-m,l=Math.floor(n.offsetX/p.viewParams.pixelPerDay),i=p.viewParams.dateDisplayStart.clone().add(l,"days");h=d.onDaysMoved(p.changeset,i,t,e),function(e,n){d.assignDateValues(e.changeset,c,n)}(p,h),d.update(s,c,p)}}function w(e){e.keyCode===Tt.a.ESCAPE&&C(!0)}function k(e){var n=p.workPackage;d.isEmpty(n)&&(n.isLeaf&&d.canMoveDates(n)?(a.style.cursor="",f&&f.remove(),f=d.displayPlaceholderUnderCursor(e,p),a.appendChild(f),a.onmouseleave=function(){f.remove()},a.onmousedown=function(e){f.remove(),s.style.pointerEvents="none",e.preventDefault();var n=Math.floor(e.offsetX/p.viewParams.pixelPerDay),t=p.viewParams.dateDisplayStart.clone().add(n,"days").format("YYYY-MM-DD"),l=d.onMouseDown(e,t,p,c,s);if(d.update(s,c,p),"create"===l)return C(!1),void e.preventDefault();a.onmousemove=function(e){var t=Math.floor(e.offsetX/p.viewParams.pixelPerDay),i=p.viewParams.dateDisplayStart.clone().add(t,"days"),o=t-n,r=d.onDaysMoved(p.changeset,i,o,l);d.assignDateValues(p.changeset,c,r),d.update(s,c,p)},a.onmouseleave=function(){C(!0)},a.onmouseup=function(){C(!1)},v.on("keyup.timelinecell",w)}):a.style.cursor="not-allowed")}function C(n){if(t.disableViewParamsCalculation=!1,a.onmousemove=k,a.onmousedown=_.noop,a.onmouseleave=_.noop,a.onmouseup=_.noop,s.style.pointerEvents="auto",v.off(".timelinecell"),t.resetCursor(),m=null,h={},n||p.changeset.empty)p.changeset.clear(),d.update(s,c,p),d.onMouseDownEnd(c,p.changeset),t.refreshView();else{var f=function(){p.changeset.clear(),d.onMouseDownEnd(c,p.changeset),t.refreshView()};(y=p.changeset,b=e.get(vn),e.get(u),w=ae().toISOString(),r.table.promise=y.save().then(function(e){o.showSave(e);var n=_.map(g.rendered.value,function(e){return e.workPackageId});r.table.promise=b.loadIdsUpdatedSince(n,w).then(function(n){l.updateWorkPackageList(n.elements),i.request("Moved work package "+e.id+" through timeline")})}).catch(function(e){o.handleRawError(e,p.workPackage)})).then(f).catch(f)}var y,b,w}s.onmousedown=function(e){1===e.which&&function(e,n){n.preventDefault();if(e.classList.add("active-drag"),v.on("mouseup.timelinecell",function(){return e.classList.remove("active-drag")}),t.disableViewParamsCalculation=!0,m=y(p,n),!p.workPackage.isLeaf&&!p.viewParams.activeSelectionMode)return;var l=d.onMouseDown(n,null,p,c,e);v.on("mousemove.timelinecell",b(l)),v.on("keyup.timelinecell",w),v.on("mouseup.timelinecell",function(){return C(!1)})}(s,e)},a.onmousemove=k}var Vs=function(){return function(e,n,t,l,i,o){this.center=e,this.left=n,this.leftHover=t,this.right=l,this.rightHover=i,this.farRight=o}}(),Ms=function(){function e(e,n,t,l,i,o){this.injector=e,this.workPackageTimeline=n,this.renderers=t,this.latestRenderInfo=l,this.classIdentifier=i,this.workPackageId=o,this.wpCacheService=this.injector.get(Oe),this.wpTableRefresh=this.injector.get(Ae),this.wpNotificationsService=this.injector.get(Ze),this.states=this.injector.get(u),this.loadingIndicator=this.injector.get(Ue),this.wpElement=null}return e.prototype.getMarginLeftOfLeftSide=function(){return this.cellRenderer(this.latestRenderInfo.workPackage).getMarginLeftOfLeftSide(this.latestRenderInfo)},e.prototype.getMarginLeftOfRightSide=function(){return this.cellRenderer(this.latestRenderInfo.workPackage).getMarginLeftOfRightSide(this.latestRenderInfo)},e.prototype.getPaddingLeftForIncomingRelationLines=function(){return this.cellRenderer(this.latestRenderInfo.workPackage).getPaddingLeftForIncomingRelationLines(this.latestRenderInfo)},e.prototype.getPaddingRightForOutgoingRelationLines=function(){return this.cellRenderer(this.latestRenderInfo.workPackage).getPaddingRightForOutgoingRelationLines(this.latestRenderInfo)},e.prototype.canConnectRelations=function(){var e=this.latestRenderInfo.workPackage;return e.isMilestone?!_.isNil(e.date):!_.isNil(e.startDate)||!_.isNil(e.dueDate)},e.prototype.clear=function(){this.cellElement.html(""),this.wpElement=null},Object.defineProperty(e.prototype,"cellContainer",{get:function(){return this.workPackageTimeline.timelineBody},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellElement",{get:function(){return this.cellContainer.find("."+this.classIdentifier)},enumerable:!0,configurable:!0}),e.prototype.lazyInit=function(e,n){var t=this.workPackageTimeline.timelineBody[0],l=this.cellElement;return null!==this.wpElement&&t.contains(this.wpElement)&&this.elementShape===e.type?l:(this.clear(),this.wpElement=e.render(n),this.labels=e.createAndAddLabels(n,this.wpElement),this.elementShape=e.type,l.append(this.wpElement),e.canMoveDates(n.workPackage)&&(this.wpElement.classList.add("-editable"),As(this.injector,0,this.workPackageTimeline,this.wpCacheService,this.wpTableRefresh,this.wpNotificationsService,this.loadingIndicator,l[0],this.wpElement,this.labels,e,n)),l)},e.prototype.cellRenderer=function(e){return e.isMilestone?this.renderers.milestone:this.renderers.generic},e.prototype.refreshView=function(e){this.latestRenderInfo=e;var n=this.cellRenderer(e.workPackage);this.lazyInit(n,e);n.update(this.wpElement,this.labels,e)||this.clear()},e}(),Ls=function(){function e(e,n){this.injector=e,this.workPackageTimeline=n,this.TimezoneService=this.injector.get(Kn),this.wpTableTimeline=this.injector.get(ve),this.fieldRenderer=new sa(this.injector,"timeline"),this.dateDisplaysOnMouseMove={}}return Object.defineProperty(e.prototype,"type",{get:function(){return"bar"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fallbackColor",{get:function(){return"rgba(50, 50, 50, 0.1)"},enumerable:!0,configurable:!0}),e.prototype.canMoveDates=function(e){return e.schema.startDate.writable&&e.schema.dueDate.writable&&e.isAttributeEditable("startDate")},e.prototype.isEmpty=function(e){var n=ae(e.startDate),t=ae(e.dueDate);return _.isNaN(n.valueOf())&&_.isNaN(t.valueOf())},e.prototype.displayPlaceholderUnderCursor=function(e,n){var t=Math.floor(e.offsetX/n.viewParams.pixelPerDay),l=document.createElement("div");return l.style.pointerEvents="none",l.style.backgroundColor="#DDDDDD",l.style.position="absolute",l.style.height="1em",l.style.width="30px",l.style.zIndex="9999",l.style.left=t*n.viewParams.pixelPerDay+"px",l},e.prototype.assignDateValues=function(e,n,t){this.assignDate(e,"startDate",t.startDate),this.assignDate(e,"dueDate",t.dueDate),this.updateLabels(!0,n,e)},e.prototype.onDaysMoved=function(e,n,t,l){var i=e.workPackage.startDate,o=e.workPackage.dueDate,r=ae(e.value("startDate")),a=ae(e.value("dueDate")),u={};return"left"===l?u.startDate=ae(i||o).add(t,"days"):"right"===l?u.dueDate=ae(o||i).add(t,"days"):"both"===l?(i&&(u.startDate=ae(i).add(t,"days")),o&&(u.dueDate=ae(o).add(t,"days"))):"dragright"===l&&(u.dueDate=r.clone().add(t,"days")),"both"!==l&&(void 0!==u.startDate&&u.startDate.isAfter(a)?u.startDate=a:void 0!==u.dueDate&&u.dueDate.isBefore(r)&&(u.dueDate=r)),u},e.prototype.onMouseDown=function(e,n,t,l,i){if(t.viewParams.activeSelectionMode)return t.viewParams.activeSelectionMode(t.workPackage),e.preventDefault(),"both";var o,r=t.changeset;return jQuery(e.target).hasClass("leftHandle")?(o="left",this.workPackageTimeline.forceCursor("col-resize"),null===r.value("startDate")&&r.setValue("startDate",r.value("dueDate"))):jQuery(e.target).hasClass("rightHandle")||n?(o="right",this.workPackageTimeline.forceCursor("col-resize"),null===r.value("dueDate")&&r.setValue("dueDate",r.value("startDate"))):(o="both",this.workPackageTimeline.forceCursor("ew-resize")),n&&(r.setValue("startDate",n),r.setValue("dueDate",n),o="dragright"),this.updateLabels(!0,l,t.changeset),o},e.prototype.onMouseDownEnd=function(e,n){this.updateLabels(!1,e,n)},e.prototype.update=function(e,n,t){var l=t.changeset,i=t.viewParams,o=ae(l.value("startDate")),r=ae(l.value("dueDate"));_.isNaN(o.valueOf())&&_.isNaN(r.valueOf())?e.style.visibility="hidden":e.style.visibility="visible",_.isNaN(r.valueOf())&&!_.isNaN(o.valueOf())&&(r=o.clone(),e.style.backgroundImage="linear-gradient(90deg, rgba(255,255,255,0) 0%, #F1F1F1 100%)"),_.isNaN(o.valueOf())&&!_.isNaN(r.valueOf())&&(o=r.clone(),e.style.backgroundImage="linear-gradient(90deg, #F1F1F1 0%, rgba(255,255,255,0) 80%)");var a=o.diff(i.dateDisplayStart,"days");e.style.left=fe(i,a);var u=r.diff(o,"days")+1;if(e.style.width=fe(i,u),!_.isNaN(o.valueOf())||!_.isNaN(r.valueOf())){var s=_.max([t.viewParams.pixelPerDay,2]);e.style.minWidth=s+"px"}return n&&this.updateLabels(!1,n,l),this.checkForActiveSelectionMode(t,e),this.checkForSpecialDisplaySituations(t,e),!0},e.prototype.checkForActiveSelectionMode=function(e,n){e.viewParams.activeSelectionMode&&(n.style.backgroundImage=null,e.viewParams.selectionModeStart===""+e.workPackage.id&&(jQuery(n).addClass("selection-start"),n.style.background=null))},e.prototype.getMarginLeftOfLeftSide=function(e){var n=e.changeset,t=ae(n.value("startDate")),l=ae(n.value("dueDate")),i=(t=_.isNaN(t.valueOf())?l.clone():t).diff(e.viewParams.dateDisplayStart,"days");return he(e.viewParams,i)},e.prototype.getMarginLeftOfRightSide=function(e){var n=e.changeset,t=ae(n.value("startDate")),l=ae(n.value("dueDate"));t=_.isNaN(t.valueOf())?l.clone():t,l=_.isNaN(l.valueOf())?t.clone():l;var i=t.diff(e.viewParams.dateDisplayStart,"days"),o=l.diff(t,"days")+1;return he(e.viewParams,i+o)},e.prototype.getPaddingLeftForIncomingRelationLines=function(e){return e.viewParams.pixelPerDay/8},e.prototype.getPaddingRightForOutgoingRelationLines=function(e){return 0},e.prototype.render=function(e){var n=document.createElement("div"),t=document.createElement("div"),l=document.createElement("div");return n.className=ue+" "+this.type,t.className="leftHandle",l.className="rightHandle",n.appendChild(t),n.appendChild(l),n},e.prototype.createAndAddLabels=function(e,n){var t=document.createElement("div");t.classList.add("bar-label"),this.applyTypeColor(e.workPackage,t),n.appendChild(t);var l=document.createElement("div");l.classList.add("labelLeft","hide-on-hover"),n.appendChild(l);var i=document.createElement("div");i.classList.add("containerRight"),n.appendChild(i);var o=document.createElement("div");o.classList.add("labelRight","hide-on-hover"),i.appendChild(o);var r=document.createElement("div");r.classList.add("labelFarRight","hide-on-hover"),i.appendChild(r);var a=document.createElement("div");a.classList.add("labelHoverLeft","show-on-hover","-label-style"),n.appendChild(a);var u=document.createElement("div");u.classList.add("labelHoverRight","show-on-hover","-label-style"),n.appendChild(u);var s=new Vs(t,l,a,o,u,r);return this.updateLabels(!1,s,e.changeset),s},e.prototype.applyTypeColor=function(e,n){var t=e.type;t||(n.style.backgroundColor=this.fallbackColor);var l=t.getId();n.classList.add(Ha.rowClass("type",l))},e.prototype.assignDate=function(e,n,t){t&&e.setValue(n,t.format("YYYY-MM-DD"))},e.prototype.checkForSpecialDisplaySituations=function(e,n){var t=e.workPackage;t.isLeaf||n.classList.add("-readonly"),this.workPackageTimeline.inHierarchyMode&&nu(t,this.workPackageTimeline.workPackageTable)?(n.classList.add("-clamp-style"),n.style.borderStyle="solid",n.style.borderWidth="2px",n.style.borderBottom="none",n.style.background="none"):this.applyTypeColor(e.workPackage,n)},e.prototype.updateLabels=function(e,n,t){var l=this.wpTableTimeline.getNormalizedLabels(t.workPackage);e||(this.renderLabel(t,n,"left",l.left),this.renderLabel(t,n,"right",l.right),this.renderLabel(t,n,"farRight",l.farRight)),this.renderHoverLabels(n,t)},e.prototype.renderHoverLabels=function(e,n){this.renderLabel(n,e,"leftHover","startDate"),this.renderLabel(n,e,"rightHover","dueDate")},e.prototype.renderLabel=function(e,n,t,l){var i=n[t];if(i)if(i.innerHTML="",null!==l){var o=this.fieldRenderer.renderFieldValue(e.workPackage,l,e),r=o[0],a=o[1];i&&r&&a?(a.classList.add("label-content"),i.appendChild(a),i.classList.add("not-empty")):i&&i.classList.remove("not-empty")}else i.classList.remove("not-empty")},e}(),Ns=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"type",{get:function(){return"milestone"},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(e){var n=ae(e.date);return _.isNaN(n.valueOf())},n.prototype.canMoveDates=function(e){return e.schema.date.writable&&e.isAttributeEditable("date")},n.prototype.displayPlaceholderUnderCursor=function(e,n){var t=Math.floor(e.offsetX/n.viewParams.pixelPerDay),l=document.createElement("div");l.className="timeline-element milestone",l.style.pointerEvents="none",l.style.height="1em",l.style.width="1em",l.style.left=t*n.viewParams.pixelPerDay+"px";var i=document.createElement("div");return i.className="diamond",i.style.backgroundColor="#DDDDDD",i.style.left="0.5em",i.style.height="1em",i.style.width="1em",l.appendChild(i),l},n.prototype.assignDateValues=function(e,n,t){this.assignDate(e,"date",t.date),this.updateLabels(!0,n,e)},n.prototype.onDaysMoved=function(e,n,t,l){var i=e.workPackage.date,o={};return i&&(o.date=ae(i).add(t,"days")),o},n.prototype.onMouseDown=function(e,n,t,l,i){if(t.viewParams.activeSelectionMode)return t.viewParams.activeSelectionMode(t.workPackage),e.preventDefault(),"both";var o="both";return this.workPackageTimeline.forceCursor("ew-resize"),n?(t.changeset.setValue("date",n),o="create"):(this.updateLabels(!0,l,t.changeset),o)},n.prototype.update=function(e,n,t){var l=t.viewParams,i=ae(t.changeset.value("date"));if(_.isNaN(i.valueOf()))return!1;var o=jQuery(".diamond",e)[0];e.style.width="15px",e.style.height="15px",o.style.width="15px",o.style.height="15px",o.style.marginLeft=t.viewParams.pixelPerDay/2-7.5+"px",this.applyTypeColor(t.workPackage,o);var r=i.diff(l.dateDisplayStart,"days");return e.style.left=he(l,r)+"px",n&&this.updateLabels(!1,n,t.changeset),this.checkForActiveSelectionMode(t,o),!0},n.prototype.getMarginLeftOfLeftSide=function(e){var n=e.changeset,t=ae(n.value("date")).diff(e.viewParams.dateDisplayStart,"days");return he(e.viewParams,t)},n.prototype.getMarginLeftOfRightSide=function(e){return this.getMarginLeftOfLeftSide(e)+e.viewParams.pixelPerDay},n.prototype.getPaddingLeftForIncomingRelationLines=function(e){return e.viewParams.pixelPerDay/2-1},n.prototype.getPaddingRightForOutgoingRelationLines=function(e){return 7.5},n.prototype.render=function(e){var n=document.createElement("div");n.className=ue+" "+this.type;var t=document.createElement("div");return t.className="diamond",n.appendChild(t),n},n.prototype.createAndAddLabels=function(e,n){var t=document.createElement("div");t.classList.add("labelLeft","hide-on-hover"),n.appendChild(t);var l=document.createElement("div");l.classList.add("containerRight"),n.appendChild(l);var i=document.createElement("div");i.classList.add("labelRight","hide-on-hover"),l.appendChild(i);var o=document.createElement("div");o.classList.add("labelFarRight","hide-on-hover"),l.appendChild(o);var r=document.createElement("div");r.classList.add("labelHoverRight","show-on-hover","-label-style"),n.appendChild(r);var a=new Vs(null,t,null,i,r,o);return this.updateLabels(!1,a,e.changeset),a},n.prototype.renderHoverLabels=function(e,n){this.renderLabel(n,e,"rightHover","date")},n.prototype.updateLabels=function(e,n,t){var l=this.wpTableTimeline.getNormalizedLabels(t.workPackage);e||("startDate"===l.left&&"dueDate"===l.right?(this.renderLabel(t,n,"left",null),this.renderLabel(t,n,"right","date")):(this.renderLabel(t,n,"left",l.left),this.renderLabel(t,n,"right",l.right)),this.renderLabel(t,n,"farRight",l.farRight)),this.renderHoverLabels(n,t)},n.prototype.renderLabel=function(n,t,l,i){"startDate"!==i&&"dueDate"!==i||(i="date"),e.prototype.renderLabel.call(this,n,t,l,i)},n}(Ls),$s=function(){function e(e,n){this.injector=e,this.wpTimeline=n,this.states=this.injector.get(u),this.cells={},this.cellRenderers={milestone:new Ns(this.injector,n),generic:new Ls(this.injector,n)}}return e.prototype.hasCell=function(e){return this.getCellsFor(e).length>0},e.prototype.getCellsFor=function(e){return _.filter(this.cells,function(n){return n.workPackageId===e})||[]},e.prototype.refreshAllCells=function(){var e=this;this.synchronizeCells(),_.each(this.cells,function(n){return e.refreshSingleCell(n)})},e.prototype.refreshCellsFor=function(e){var n=this;_.each(this.getCellsFor(e),function(e){return n.refreshSingleCell(e)})},e.prototype.refreshSingleCell=function(e){var n=this.renderInfoFor(e.workPackageId);n.workPackage&&e.refreshView(n)},e.prototype.synchronizeCells=function(){var e=this,n=Object.keys(this.cells),t=[];_.each(this.wpTimeline.workPackageIdOrder,function(n){var l=n.workPackageId;if(l&&!e.states.workPackages.get(l).isPristine()){var i=n.classIdentifier;e.cells[i]||(e.cells[i]=e.buildCell(i,l.toString())),t.push(i)}}),_.difference(n,t).forEach(function(n){e.cells[n].clear(),delete e.cells[n]})},e.prototype.buildCell=function(e,n){return new Ms(this.injector,this.wpTimeline,this.cellRenderers,this.renderInfoFor(n),e,n)},e.prototype.renderInfoFor=function(e){var n=this.states.workPackages.get(e).value;return{viewParams:this.wpTimeline.viewParameters,workPackage:n,changeset:new Jn(this.injector,n)}},e}(),qs=function(){function e(e,n,t,l,i,o,r,u,s,c,d){this.injector=e,this.elementRef=n,this.states=t,this.wpTableDirective=l,this.dynamicCssService=i,this.NotificationsService=o,this.wpTableTimeline=r,this.wpNotificationsService=u,this.wpRelations=s,this.wpTableHierarchies=c,this.I18n=d,this.tableState=this.injector.get(A),this._viewParameters=new pe,this.disableViewParamsCalculation=!1,this.workPackageIdOrder=[],this.renderers={},this.cellsRenderer=new $s(this.injector,this),this.selectionParams={notification:null},this.refreshRequest=Object(a.g)()}return e.prototype.ngAfterViewInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.text={selectionMode:this.I18n.t("js.timelines.selection_mode.notification")},this.outerContainer=this.$element.find(".wp-table-timeline--outer"),this.timelineBody=this.$element.find(".wp-table-timeline--body"),this.wpTableDirective.registerTimeline(this,this.timelineBody[0]),this.updateOnWorkPackageChanges(),this.applyAutoZoomLevel(),this.setupRefreshListener(),window.addEventListener("wp-resize.timeline",function(){return e.refreshRequest.putValue(void 0)}),this.tableState.rendered.values$().pipe(Object(q.a)(this.tableState.stopAllSubscriptions),Object(E.a)(function(){return e.initialized})).subscribe(function(n){e.workPackageIdOrder=n.filter(function(e){return!e.hidden}),e.refreshView()}),this.tableState.timeline.values$().pipe(Object(E.a)(function(e){return e.isVisible}),Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.viewParameters.settings.autoZoom=n.autoZoom,e.viewParameters.settings.zoomLevel=n.zoomLevel,e.refreshRequest.putValue(void 0)})},e.prototype.setupRefreshListener=function(){var e=this;this.refreshRequest.changes$().pipe(Object(an.b)(this),Object(Ku.a)(250)).subscribe(function(){return e.refreshView()})},e.prototype.ngOnDestroy=function(){},e.prototype.workPackageInView=function(e){return this.cellsRenderer.hasCell(e)},e.prototype.workPackageCells=function(e){return this.cellsRenderer.getCellsFor(e)},e.prototype.workPackageIndex=function(e){return this.workPackageIdOrder.findIndex(function(n){return n.classIdentifier===e})},e.prototype.onRefreshRequested=function(e,n){this.renderers[e]=n},e.prototype.getAbsoluteLeftCoordinates=function(){return this.$element.offset().left},e.prototype.getParentScrollContainer=function(){return this.outerContainer.closest(Gu)[0]},Object.defineProperty(e.prototype,"viewParameters",{get:function(){return this._viewParameters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inHierarchyMode",{get:function(){return this.wpTableHierarchies.isEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return this.workPackageTable&&this.tableState.rendered.hasValue()},enumerable:!0,configurable:!0}),e.prototype.refreshView=function(){var e=this;this.wpTableTimeline.isVisible?(this.applyAutoZoomLevel(),this.dynamicCssService.requireHighlighting(),Object(Ee.b)("refreshView() in timeline container",function(){e.outerContainer.css("width","auto"),e.calculateViewParams(e._viewParameters),e.cellsRenderer.refreshAllCells(),_.each(e.renderers,function(n,t){Object(Ee.a)("Refreshing timeline member "+t),n(e._viewParameters)});var n=e.getParentScrollContainer().scrollWidth;e.outerContainer.width(n)})):Object(Ee.a)("refreshView() requested, but TL is invisible.")},e.prototype.updateOnWorkPackageChanges=function(){var e=this;this.states.workPackages.observeChange().pipe(Object(rn.a)(this.tableState.timeline.values$()),Object(q.a)(Object(an.a)(this)),Object(E.a)(function(n){var t=n[1];return e.initialized&&t.isVisible}),Object(D.a)(function(e){return e[0][0]}),Object(E.a)(function(n){return e.cellsRenderer.hasCell(n)})).subscribe(function(n){e.calculateViewParams(e._viewParameters)?e.refreshRequest.putValue(void 0):e.cellsRenderer.refreshCellsFor(n)})},e.prototype.startAddRelationPredecessor=function(e){var n=this;this.activateSelectionMode(e.id,function(t){n.wpRelations.addCommonRelation(e.id,"follows",t.id).catch(function(e){return n.wpNotificationsService.handleRawError(e,t)})})},e.prototype.startAddRelationFollower=function(e){var n=this;this.activateSelectionMode(e.id,function(t){n.wpRelations.addCommonRelation(e.id,"precedes",t.id).catch(function(e){return n.wpNotificationsService.handleRawError(e,t)})})},e.prototype.getFirstDayInViewport=function(){var e=this.getParentScrollContainer().scrollLeft,n=Math.floor(e/this.viewParameters.pixelPerDay);return this.viewParameters.dateDisplayStart.clone().add(n,"days")},e.prototype.getLastDayInViewport=function(){var e=this.getParentScrollContainer(),n=e.scrollLeft+e.offsetWidth,t=Math.ceil(n/this.viewParameters.pixelPerDay)+1;return this.viewParameters.dateDisplayStart.clone().add(t,"days")},e.prototype.forceCursor=function(e){jQuery("."+ue).css("cursor",e),jQuery(".wp-timeline-cell").css("cursor",e),jQuery(".hascontextmenu").css("cursor",e),jQuery(".leftHandle").css("cursor",e),jQuery(".rightHandle").css("cursor",e)},e.prototype.resetCursor=function(){jQuery("."+ue).css("cursor",""),jQuery(".wp-timeline-cell").css("cursor",""),jQuery(".hascontextmenu").css("cursor",""),jQuery(".leftHandle").css("cursor",""),jQuery(".rightHandle").css("cursor","")},e.prototype.resetSelectionMode=function(){this._viewParameters.activeSelectionMode=null,this._viewParameters.selectionModeStart=null,this.selectionParams.notification&&this.NotificationsService.remove(this.selectionParams.notification),Mousetrap.unbind("esc"),this.$element.removeClass("active-selection-mode"),jQuery(".selection-start").removeClass("selection-start"),this.refreshView()},e.prototype.activateSelectionMode=function(e,n){var t=this;e=e.toString(),this._viewParameters.activeSelectionMode=function(e){n(e),t.resetSelectionMode()},this._viewParameters.selectionModeStart=e,Mousetrap.bind("esc",function(){return t.resetSelectionMode()}),this.selectionParams.notification=this.NotificationsService.addNotice(this.text.selectionMode),this.$element.addClass("active-selection-mode"),this.refreshView()},e.prototype.calculateViewParams=function(e){var n=this;if(this.disableViewParamsCalculation)return!1;var t=new pe,l=!1;this.workPackageIdOrder.forEach(function(l){var i=l.workPackageId;if(i){var o=n.states.workPackages.get(i).value;if(o){var r=o.startDate?ae(o.startDate):e.now,a=o.dueDate?ae(o.dueDate):e.now,u=o.date?ae(o.date):e.now;t.dateDisplayStart=ae.min(t.dateDisplayStart,e.now,r,u),t.dateDisplayEnd=ae.max(t.dateDisplayEnd,e.now,a,u)}}}),t.dateDisplayStart.subtract(e.dayCountForMarginLeft,"days");var i=this.$element.children().width(),o=e.pixelPerDay,r=Math.ceil(i/o*1.5);t.dateDisplayEnd.add(r,"days"),t.dateDisplayStart.isSame(this._viewParameters.dateDisplayStart)||(l=!0,this._viewParameters.dateDisplayStart=t.dateDisplayStart),t.dateDisplayEnd.isSame(this._viewParameters.dateDisplayEnd)||(l=!0,this._viewParameters.dateDisplayEnd=t.dateDisplayEnd);var a=[this.getFirstDayInViewport(),this.getLastDayInViewport()];return this._viewParameters.visibleViewportAtCalculationTime=a,l},e.prototype.applyAutoZoomLevel=function(){if(!this.workPackageTable.configuration.isEmbedded&&this.viewParameters.settings.autoZoom&&0!==this.workPackageIdOrder.length)for(var e,n,t,l,i=(e=this.workPackageIdOrder,n=this.states.workPackages,this._viewParameters,t=ae(),l=ae(),e.forEach(function(e){var i=e.workPackageId;if(i){var o=n.get(i).value;if(o){var r=o.startDate?o.startDate:o.date;r&&ae(r).isBefore(t)&&(t=ae(r));var a=o.dueDate?o.dueDate:o.date;a&&ae(a).isAfter(l)&&(l=ae(a))}}}),l.diff(t,"days")+1),o=this.$element.parent().width()-240,r=0,a=ce;r<a.length;r++){var u=a[r];if(o/de(u)>=i||u===_.last(ce))return void(this._viewParameters.settings.zoomLevel!==u&&(this.wpTableTimeline.setZoomLevel(u),this.wpTableDirective.timeline.scrollLeft=0))}},e}(),Hs=function(){function e(e,n){this.workPackageTimelineTableController=n,this.$element=jQuery(e.nativeElement)}return e.prototype.ngOnInit=function(){var e=this;this.workPackageTimelineTableController.onRefreshRequested("header",function(n){return e.refreshView(n)})},e.prototype.refreshView=function(e){this.innerHeader=this.$element.find(".wp-table-timeline--header-inner"),this.renderLabels(e)},e.prototype.renderLabels=function(e){if(this.activeZoomLevel!==e.settings.zoomLevel){switch(this.innerHeader.empty(),this.innerHeader.attr("data-current-zoom-level",e.settings.zoomLevel),e.settings.zoomLevel){case"days":return this.renderLabelsDays(e);case"weeks":return this.renderLabelsWeeks(e);case"months":return this.renderLabelsMonths(e);case"quarters":return this.renderLabelsQuarters(e);case"years":return this.renderLabelsYears(e)}this.activeZoomLevel=e.settings.zoomLevel}},e.prototype.renderLabelsDays=function(e){this.renderTimeSlices(e,"month",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("MMM YYYY"),n.classList.add("wp-timeline--header-top-bold-element"),n.style.height="13px"}),this.renderTimeSlices(e,"week",13,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("ww"),n.classList.add("-top-border"),n.style.height="32px"}),this.renderTimeSlices(e,"day",23,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("D"),n.classList.add("-top-border"),n.style.height="22px"}),this.renderTimeSlices(e,"day",33,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("dd"),n.classList.add("wp-timeline--header-day-element")})},e.prototype.renderLabelsWeeks=function(e){this.renderTimeSlices(e,"month",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("MMM YYYY"),n.classList.add("wp-timeline--header-top-bold-element")}),this.renderTimeSlices(e,"week",15,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("ww"),n.classList.add("-top-border"),n.style.height="22px"}),this.renderTimeSlices(e,"day",25,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("D"),n.classList.add("wp-timeline--header-middle-element")})},e.prototype.renderLabelsMonths=function(e){this.renderTimeSlices(e,"year",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("YYYY"),n.classList.add("wp-timeline--header-top-bold-element")}),this.renderTimeSlices(e,"month",15,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("MMM"),n.classList.add("-top-border"),n.style.height="30px"}),this.renderTimeSlices(e,"week",25,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("ww"),n.classList.add("wp-timeline--header-middle-element")})},e.prototype.renderLabelsQuarters=function(e){this.renderTimeSlices(e,"year",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("wp-timeline--header-top-bold-element"),n.innerHTML=e.format("YYYY")}),this.renderTimeSlices(e,"quarter",15,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML="Q"+e.format("Q"),n.classList.add("-top-border"),n.style.height="30px"}),this.renderTimeSlices(e,"month",25,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("MMM"),n.classList.add("wp-timeline--header-middle-element")})},e.prototype.renderLabelsYears=function(e){this.renderTimeSlices(e,"year",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("YYYY"),n.classList.add("wp-timeline--header-top-bold-element")}),this.renderTimeSlices(e,"quarter",15,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML="Q"+e.format("Q"),n.classList.add("-top-border"),n.style.height="30px"}),this.renderTimeSlices(e,"month",25,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("M"),n.classList.add("wp-timeline--header-middle-element")})},e.prototype.renderTimeSlices=function(e,n,t,l,i,o){for(var r=this,a=ge(e,n,l,i),u=a.inViewportAndBoundaries,s=a.rest,c=0,d=u;c<d.length;c++){var p=d[c],h=p[0],f=p[1],g=this.addLabelCell();g.style.top=t+"px",g.style.left=fe(e,h.diff(l,"days")),g.style.width=fe(e,f.diff(h,"days")+1),o(h,g)}setTimeout(function(){for(var n=0,i=s;n<i.length;n++){var a=i[n],u=a[0],c=a[1],d=r.addLabelCell();d.style.top=t+"px",d.style.left=fe(e,u.diff(l,"days")),d.style.width=fe(e,c.diff(u,"days")+1),o(u,d)}},0)},e.prototype.addLabelCell=function(){var e=document.createElement("div");return e.className="wp-timeline--header-element",this.innerHeader.append(e),e},e}(),Bs=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ws(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","wp-table-timeline--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"div",[["class","wp-table-timeline--header-inner"]],null,null,null,null,null))],null,null)}l["\u0275ccf"]("wp-timeline-header",Hs,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-timeline-header",[],null,null,null,Ws,Bs)),l["\u0275did"](1,114688,null,0,Hs,[l.ElementRef,qs],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var zs=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.finishElement=function(e,n){var t=n.now.diff(n.dateDisplayStart,"days"),l=ae().hour()/24;return e.style.left=fe(n,t+l),e},Object.defineProperty(n.prototype,"identifier",{get:function(){return"wp-timeline-static-element-today-line"},enumerable:!0,configurable:!0}),n}(function(){function e(){}return e.prototype.render=function(e){var n,t=document.createElement("div");return t.id=this.identifier,(n=t.classList).add.apply(n,this.classNames),this.finishElement(t,e)},Object.defineProperty(e.prototype,"classNames",{get:function(){return["wp-timeline--static-element"]},enumerable:!0,configurable:!0}),e}()),Qs=function(){function e(e,n,t){this.states=n,this.workPackageTimelineTableController=t,this.$element=jQuery(e.nativeElement),this.elements=[new zs]}return e.prototype.ngOnInit=function(){var e=this;this.container=this.$element.find(".wp-table-timeline--static-elements"),this.workPackageTimelineTableController.onRefreshRequested("static elements",function(n){return e.update(n)})},e.prototype.update=function(e){this.removeAllVisibleElements(),this.renderElements(e)},e.prototype.removeAllVisibleElements=function(){jQuery(".wp-timeline--static-element").remove()},e.prototype.renderElements=function(e){for(var n=0,t=this.elements;n<t.length;n++){var l=t[n];this.container[0].appendChild(l.render(e))}},e}(),Us=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ks(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","wp-table-timeline--static-elements"]],null,null,null,null,null))],null,null)}l["\u0275ccf"]("wp-timeline-static-elements",Qs,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-timeline-static-elements",[],null,null,null,Ks,Us)),l["\u0275did"](1,114688,null,0,Qs,[l.ElementRef,u,qs],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);function Ys(e,n){var t=e.day();0!==t&&6!==t||n.classList.add("grid-weekend")}var Gs=function(){function e(e,n){this.elementRef=e,this.wpTimeline=n}return e.prototype.ngAfterViewInit=function(){var e=this,n=jQuery(this.elementRef.nativeElement);this.gridContainer=n.find(".wp-table-timeline--grid"),this.wpTimeline.onRefreshRequested("grid",function(n){return e.refreshView(n)})},e.prototype.refreshView=function(e){this.renderLabels(e)},e.prototype.renderLabels=function(e){if(this.activeZoomLevel!==e.settings.zoomLevel){switch(this.gridContainer.empty(),e.settings.zoomLevel){case"days":return this.renderLabelsDays(e);case"weeks":return this.renderLabelsWeeks(e);case"months":return this.renderLabelsMonths(e);case"quarters":return this.renderLabelsQuarters(e);case"years":return this.renderLabelsYears(e)}this.activeZoomLevel=e.settings.zoomLevel}},e.prototype.renderLabelsDays=function(e){this.renderTimeSlices(e,"day",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.style.paddingTop="1px",Ys(e,n)}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight"),n.style.zIndex="2"})},e.prototype.renderLabelsWeeks=function(e){this.renderTimeSlices(e,"day",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){Ys(e,n)}),this.renderTimeSlices(e,"week",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight")}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight"),n.style.zIndex="2"})},e.prototype.renderLabelsMonths=function(e){this.renderTimeSlices(e,"week",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){}),this.renderTimeSlices(e,"month",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight")}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight"),n.style.zIndex="2"})},e.prototype.renderLabelsQuarters=function(e){this.renderTimeSlices(e,"month",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){}),this.renderTimeSlices(e,"quarter",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight")}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight"),n.style.zIndex="2"})},e.prototype.renderLabelsYears=function(e){this.renderTimeSlices(e,"month",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight")})},e.prototype.renderTimeSlices=function(e,n,t,l,i){for(var o=this,r=ge(e,n,t,l),a=r.inViewportAndBoundaries,u=r.rest,s=0,c=a;s<c.length;s++){var d=c[s],p=d[0],h=d[1],f=document.createElement("div");f.classList.add(ue,"wp-timeline--grid-element"),f.style.left=fe(e,p.diff(t,"days")),f.style.width=fe(e,h.diff(p,"days")+1),this.gridContainer[0].appendChild(f),i(p,f)}setTimeout(function(){for(var n=0,l=u;n<l.length;n++){var r=l[n],a=r[0],s=r[1],c=document.createElement("div");c.classList.add(ue,"wp-timeline--grid-element"),c.style.left=fe(e,a.diff(t,"days")),c.style.width=fe(e,s.diff(a,"days")+1),o.gridContainer[0].appendChild(c),i(a,c)}},0)},e}(),Zs=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Js(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","wp-table-timeline--grid"]],null,null,null,null,null))],null,null)}l["\u0275ccf"]("wp-timeline-grid",Gs,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-timeline-grid",[],null,null,null,Js,Zs)),l["\u0275did"](1,4243456,null,0,Gs,[l.ElementRef,qs],null,null)],null,null)},{},{},[]);function Xs(e){return"__tl-relation-"+e}var ec=function(){function e(e,n){this.belongsToId=e,this.relation=n}return Object.defineProperty(e.prototype,"classNames",{get:function(){return[Xs(this.relation.ids.from),Xs(this.relation.ids.to)]},enumerable:!0,configurable:!0}),e}(),nc=!1,tc="relation-line";function lc(e,n,t,l,i,o,r,a){var u,s=document.createElement("div");return(u=s.classList).add.apply(u,[ue,tc].concat(n)),s.style.top=41*t+l+"px",s.style.left=i+"px",s.style.width=o+"px",s.style.height=r+"px",nc&&void 0!==a&&(s.style.zIndex="9999999",s.style.backgroundColor=a),s}var ic=function(){function e(e,n,t,l,i){this.injector=e,this.elementRef=n,this.states=t,this.workPackageTimelineTableController=l,this.wpRelations=i,this.tableState=this.injector.get(A),this.workPackagesWithRelations={}}return e.prototype.ngOnInit=function(){var e=this,n=jQuery(this.elementRef.nativeElement);this.container=n.find(".wp-table-timeline--relations"),this.workPackageTimelineTableController.onRefreshRequested("relations",function(n){return e.refreshView()}),this.setupRelationSubscription()},e.prototype.ngOnDestroy=function(){},e.prototype.refreshView=function(){this.update()},Object.defineProperty(e.prototype,"workPackageIdOrder",{get:function(){return this.workPackageTimelineTableController.workPackageIdOrder},enumerable:!0,configurable:!0}),e.prototype.setupRelationSubscription=function(){var e=this;Object(Os.a)(this.tableState.renderedWorkPackages.values$(),this.tableState.timeline.values$()).pipe(Object(E.a)(function(e){e[0];return e[1].isVisible}),Object(q.a)(Object(an.a)(this)),Object(D.a)(function(e){var n=e[0];e[1];return n})).subscribe(function(n){var t=_.compact(n.map(function(e){return e.workPackageId}));e.wpRelations.requireAll(t),t.forEach(function(n){var t=e.wpRelations.state(n);e.workPackagesWithRelations[n]=t,t.values$().pipe(Object(H.a)(1)).subscribe(function(){e.renderWorkPackagesRelations([n])})})}),this.states.workPackages.observeChange().pipe(Object(q.a)(Object(an.a)(this)),Object(E.a)(function(){return e.tableState.timeline.mapOr(function(e){return e.visible},!1)})).subscribe(function(n){var t=n[0];e.renderWorkPackagesRelations([t])})},e.prototype.renderWorkPackagesRelations=function(e){var n=this;e.forEach(function(e){var t=n.workPackagesWithRelations[e];if(!_.isNil(t)){n.removeRelationElementsForWorkPackage(e);var l=_.values(t.value);_.values(l).forEach(function(e){if("precedes"===e.type||"follows"===e.type){var t=new ec(e.ids.from,e);n.renderElement(n.workPackageTimelineTableController.viewParameters,t)}})}})},e.prototype.update=function(){this.removeAllVisibleElements(),this.renderElements()},e.prototype.removeRelationElementsForWorkPackage=function(e){var n=Xs(e);this.container.find("."+n).remove()},e.prototype.removeAllVisibleElements=function(){this.container.find("."+tc).remove()},e.prototype.renderElements=function(){var e=_.keys(this.workPackagesWithRelations);this.renderWorkPackagesRelations(e)},e.prototype.renderElement=function(e,n){var t=this,l=n.relation.ids,i=this.workPackageTimelineTableController.workPackageCells(l.to),o=this.workPackageTimelineTableController.workPackageCells(l.from);0!==i.length&&0!==o.length&&i.forEach(function(l){var i=t.workPackageTimelineTableController.workPackageIndex(l.classIdentifier);o.forEach(function(o){var r=t.workPackageTimelineTableController.workPackageIndex(o.classIdentifier);t.renderRelation(e,n,i,r,l,o)})})},e.prototype.renderRelation=function(e,n,t,l,i,o){var r=this.workPackageIdOrder[t],a=this.workPackageIdOrder[l];if(r&&a&&!r.hidden&&!a.hidden&&i.canConnectRelations()&&o.canConnectRelations()){var u=i.getMarginLeftOfRightSide()-i.getPaddingRightForOutgoingRelationLines(),s=o.getMarginLeftOfLeftSide()+o.getPaddingLeftForIncomingRelationLines(),c=t<l?"toDown":"toUp",d=s>u?"toRight":s<u?"toLeft":"beneath";if(i){var p=i.getPaddingRightForOutgoingRelationLines(),h=o.getPaddingLeftForIncomingRelationLines()+(p>0?p:0);this.container.append(lc(0,n.classNames,t,19,u,h,1,"red"));var f=u+h,g=Math.abs(l-t);"toDown"===c?"toRight"===d||"beneath"===d?this.container.append(lc(0,n.classNames,t,19,f,1,41*g,"black")):"toLeft"===d&&this.container.append(lc(0,n.classNames,t,19,f,1,41*g-10,"black")):"toUp"===c&&this.container.append(lc(0,n.classNames,l,30,f,1,41*g-10,"black")),"toRight"===d?"toDown"===c?this.container.append(lc(0,n.classNames,l,19,f,s-f,1,"red")):"toUp"===c&&(this.container.append(lc(0,n.classNames,l,20,f,1,10,"green")),this.container.append(lc(0,n.classNames,l,20,f,s-f,1,"lightsalmon"))):"toLeft"===d&&("toDown"===c?(this.container.append(lc(0,n.classNames,l,0,f,1,8,"red")),this.container.append(lc(0,n.classNames,l,8,s,f-s,1,"green")),this.container.append(lc(0,n.classNames,l,8,s,1,11,"blue"))):"toUp"===c&&(this.container.append(lc(0,n.classNames,l,30,s+1,f-s,1,"red")),this.container.append(lc(0,n.classNames,l,19,s+1,1,11,"blue"))))}}},e}(),oc=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function rc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","wp-table-timeline--relations"]],null,null,null,null,null))],null,null)}l["\u0275ccf"]("wp-timeline-relations",ic,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-timeline-relations",[],null,null,null,rc,oc)),l["\u0275did"](1,245760,null,0,ic,[l.Injector,l.ElementRef,u,qs,Me],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var ac=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function uc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","wp-table-timeline--outer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"div",[["class","wp-table-timeline--container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"wp-timeline-header",[],null,null,null,Ws,Bs)),l["\u0275did"](3,114688,null,0,Hs,[l.ElementRef,qs],null,null),(e()(),l["\u0275eld"](4,0,null,null,1,"wp-timeline-static-elements",[],null,null,null,Ks,Us)),l["\u0275did"](5,114688,null,0,Qs,[l.ElementRef,u,qs],null,null),(e()(),l["\u0275eld"](6,0,null,null,1,"wp-timeline-grid",[],null,null,null,Js,Zs)),l["\u0275did"](7,4243456,null,0,Gs,[l.ElementRef,qs],null,null),(e()(),l["\u0275eld"](8,0,null,null,1,"wp-timeline-relations",[],null,null,null,rc,oc)),l["\u0275did"](9,245760,null,0,ic,[l.Injector,l.ElementRef,u,qs,Me],null,null),(e()(),l["\u0275eld"](10,0,null,null,0,"div",[["class","wp-table-timeline--body"]],null,null,null,null,null))],function(e,n){e(n,3,0),e(n,5,0),e(n,9,0)},null)}l["\u0275ccf"]("wp-timeline-container",qs,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-timeline-container",[],null,null,null,uc,ac)),l["\u0275did"](1,4374528,null,0,qs,[l.Injector,l.ElementRef,u,Fs,en,Ge,ve,Ze,Me,re,U.a],null,null)],null,null)},{},{},[]);var sc=[[".wp-table--row.-bright-row,.wp-table--row.-bright-row a,.wp-table--row.-bright-row i.icon:before{color:#fff}"]],cc=l["\u0275crt"]({encapsulation:2,styles:sc,data:{}});function dc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"col",[["highlight-col",""]],null,null,null,nl,el)),l["\u0275did"](1,245760,null,0,Jt,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)}function pc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"th",[["class","wp-table--table-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"sortHeader",[["opColumnsContextMenu",""]],null,null,null,Pu,du)),l["\u0275did"](2,4374528,null,0,cu,[re,We,Pe,Le,l.ElementRef,U.a],{headerColumn:[0,"headerColumn"],locale:[1,"locale"],table:[2,"table"]},null),l["\u0275did"](3,4210688,null,0,_u,[l.ElementRef,ca,Se,We,Pe,re,On.b,U.a],{column:[0,"column"],table:[1,"table"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit,n.context.$implicit.custom_field&&n.context.$implicit.custom_field.name_locale||t.locale,t.workPackageTable),e(n,3,0,n.context.$implicit,t.workPackageTable)},null)}function hc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"accessible-by-keyboard",[["linkClass","wp-table--columns-selection"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.openTableConfigurationModal()&&l);return l},Dt,Ot)),l["\u0275did"](1,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-button icon-small icon-settings"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,1,0,"wp-table--columns-selection",t.text.configureTable,t.text.configureTable);e(n,3,0,"icon-button icon-small icon-settings")},null)}function fc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"th",[["class","wp-table--configuration-modal--trigger wp-table--context-menu-th -short hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,hc)),l["\u0275did"](3,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,3,0,n.component.configuration.columnMenuEnabled)},null)}function gc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-info1 icon-context"]],null,null,null,Ct,wt)),l["\u0275did"](2,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](3,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["\u0275ted"](5,null,["",""])),(e()(),l["\u0275ted"](6,null,[" "," "]))],function(e,n){e(n,2,0,"icon-info1 icon-context")},function(e,n){var t=n.component;e(n,5,0,t.text.noResults.title),e(n,6,0,t.text.noResults.description)})}function mc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","wp-table--faulty-query-icon icon-warning icon-context"]],null,null,null,Ct,wt)),l["\u0275did"](2,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["\u0275ted"](4,null,["",""])),(e()(),l["\u0275eld"](5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](6,null,["",""]))],function(e,n){e(n,2,0,"wp-table--faulty-query-icon icon-warning icon-context")},function(e,n){var t=n.component;e(n,4,0,t.text.faultyQuery.title),e(n,6,0,t.text.faultyQuery.description)})}function vc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"tbody",[["class","work-package--empty-tbody"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"tr",[["id","empty-row-notification"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"td",[],[[1,"colspan",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,gc)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,mc)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,!t.query.hasError),e(n,6,0,t.query.hasError)},function(e,n){e(n,2,0,n.component.columns.length+1)})}function yc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"tbody",[["wpInlineCreate",""]],null,[[null,"keydown.escape"]],function(e,n,t){var i=!0;"keydown.escape"===n&&(i=!1!==l["\u0275nov"](e,1).resetRow()&&i);return i},Hu,Au)),l["\u0275did"](1,770048,null,0,Fu,[l.Injector,l.ElementRef,p.a,U.a,A,Oe,Ru,Zn,Gn,Du,Se,Dr,Xe],{table:[0,"table"],projectIdentifier:[1,"projectIdentifier"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackageTable,t.projectIdentifier)},null)}function bc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-packages--tabletimeline--timeline--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["\u0275nov"](e,2).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["\u0275nov"](e,2).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,2).handleMouseUp(t)&&i);return i},Qu,zu)),l["\u0275did"](2,245760,null,0,Wu,[Bu,l.ElementRef,d.O],{elementClass:[0,"elementClass"],resizeEvent:[1,"resizeEvent"],localStorageKey:[2,"localStorageKey"]},null)],function(e,n){e(n,2,0,"work-packages-tabletimeline--timeline-side","wp-resize.timeline","openProject-timelineFlexBasis")},null)}function wc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,32,"div",[["class","work-packages-split-view--tabletimeline-content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,26,"div",[["class","work-packages-tabletimeline--table-side work-package-table--container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,25,"table",[["class","keyboard-accessible-list generic-table work-package-table"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,4,"colgroup",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,dc)),l["\u0275did"](5,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](6,0,null,null,1,"col",[["highlight-col",""]],null,null,null,nl,el)),l["\u0275did"](7,245760,null,0,Jt,[l.ElementRef],null,null),(e()(),l["\u0275eld"](8,0,null,null,5,"caption",[["class","hidden-for-sighted"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](10,null,["",""])),(e()(),l["\u0275eld"](11,0,null,null,0,"span",[["id","wp-table-sort-summary"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](13,null,["",""])),(e()(),l["\u0275eld"](14,0,null,null,5,"thead",[["class","-sticky"]],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,pc)),l["\u0275did"](17,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,fc)),l["\u0275did"](19,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,vc)),l["\u0275did"](21,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](22,0,null,null,0,"tbody",[["class","results-tbody work-package--results-tbody"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,yc)),l["\u0275did"](24,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](25,0,null,null,2,"tfoot",[],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,1,"tr",[["wpTableSumsRow",""]],null,null,null,null,null)),l["\u0275did"](27,4210688,null,0,Uu,[l.Injector,l.ElementRef,A,u,ta,U.a],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,bc)),l["\u0275did"](29,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](30,0,null,null,2,"div",[["class","work-packages-tabletimeline--timeline-side"]],null,null,null,null,null)),(e()(),l["\u0275eld"](31,0,null,null,1,"wp-timeline-container",[],null,null,null,uc,ac)),l["\u0275did"](32,4374528,null,0,qs,[l.Injector,l.ElementRef,u,Fs,en,Ge,ve,Ze,Me,re,U.a],null,null)],function(e,n){var t=n.component;e(n,5,0,t.columns),e(n,7,0),e(n,17,0,t.columns),e(n,19,0,t.configuration.columnMenuEnabled||t.configuration.actionsColumnEnabled),e(n,21,0,!t.isEmbedded&&(t.query.hasError||0===t.rowcount)),e(n,24,0,t.tableElement&&t.configuration.inlineCreateEnabled),e(n,29,0,!t.configuration.isEmbedded)},function(e,n){var t=n.component;e(n,10,0,t.text.tableSummary),e(n,13,0,t.text.tableSummaryHints)})}var kc=l["\u0275ccf"]("wp-table",Fs,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-table",[],null,null,null,wc,cc)),l["\u0275did"](1,245760,null,0,Fs,[l.ElementRef,l.Injector,u,A,On.b,ca,U.a,l.ChangeDetectorRef,Pe,ve,Se],null,null)],function(e,n){e(n,1,0)},null)},{projectIdentifier:"projectIdentifier",configurationObject:"configuration"},{},[]),Cc=function(e){function n(n,t,l){var i=e.call(this,n,l)||this;return i.paginationService=n,i.wpTablePagination=t,i.I18n=l,i}return r.d(n,e),n.prototype.newPagination=function(){var e=this;this.wpTablePagination.observeUntil(Object(an.a)(this)).subscribe(function(n){e.pagination=n.current,e.update()})},n.prototype.ngOnDestroy=function(){},n.prototype.selectPerPage=function(e){this.wpTablePagination.updateFromObject({page:1,perPage:e})},n.prototype.showPage=function(e){this.wpTablePagination.updateFromObject({page:e})},n}(al),Pc=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ic(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"li",[["class","pagination--item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(e.context.$implicit)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,xt,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.context.$implicit)})}function jc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ic)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"li",[["class","pagination--space"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\u2026"]))],function(e,n){e(n,2,0,n.component.prePageNumbers)},null)}function _c(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"em",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function Sc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(e.parent.context.$implicit)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,xt,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,0,0,n.parent.context.$implicit)})}function Rc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","pagination--item pagination-number"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-current":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,_c)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Sc)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.context.$implicit==t.pagination.page);e(n,1,0,"pagination--item pagination-number",l),e(n,4,0,n.context.$implicit==t.pagination.page),e(n,6,0,n.context.$implicit!=t.pagination.page)},null)}function Tc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[["class","pagination--space"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\u2026"]))],null,null)}function xc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Rc)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Tc)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.pageNumbers),e(n,4,0,t.postPageNumbers.length)},null)}function Ec(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"li",[["class","pagination--item pagination-number"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(e.context.$implicit)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,xt,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.context.$implicit)})}function Oc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ec)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,2,0,n.component.postPageNumbers)},null)}function Dc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","hidden-for-sighted"],["id","pagination-empty-text"],["tabindex","0"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.no_other_page)})}function Fc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"a",[["href",""],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.selectPerPage(e.parent.context.$implicit)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,xt,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function Ac(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function Vc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","pagination--item"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-current":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Fc)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ac)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.context.$implicit==t.pagination.perPage);e(n,1,0,"pagination--item",l),e(n,4,0,n.context.$implicit!=t.pagination.perPage),e(n,6,0,n.context.$implicit==t.pagination.perPage)},null)}function Mc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","pagination--options"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"ul",[["class","pagination--items"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"li",[["class","pagination--label"]],[[8,"textContent",0],[8,"title",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Vc)),l["\u0275did"](4,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.perPageOptions)},function(e,n){var t=n.component;e(n,2,0,t.text.per_page,l["\u0275inlineInterpolate"](1,"",t.text.per_page,""))})}function Lc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,22,"div",[["class","pagination"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,19,"nav",[["class","pagination--pages"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,18,"ul",[["class","pagination--items"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"li",[["class","pagination--item"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"a",[["href",""],["id","pagination--prev-link"],["rel","prev start"],["role","link"]],[[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(o.pagination.page-1)&&i);return i},null,null)),l["\u0275did"](5,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275ted"](-1,null,["<"])),(e()(),l["\u0275and"](16777216,null,null,1,null,jc)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,xc)),l["\u0275did"](10,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Oc)),l["\u0275did"](12,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](13,0,null,null,3,"li",[["class","pagination--item"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,2,"a",[["class","pagination--next-link"],["href",""],["id","pagination--next-link"],["rel","next"],["role","link"]],[[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,15).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,15).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.showPage(o.pagination.page+1)&&i);return i},null,null)),l["\u0275did"](15,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275ted"](-1,null,[">"])),(e()(),l["\u0275eld"](17,0,null,null,3,"li",[["class","pagination--range"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Dc)),l["\u0275did"](20,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Mc)),l["\u0275did"](22,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,8,0,t.prePageNumbers.length>0),e(n,10,0,t.pageNumbers.length>1),e(n,12,0,t.postPageNumbers.length),e(n,20,0,1===t.pageNumbers.length),e(n,22,0,t.perPageOptions.length>0&&t.pagination.total>t.perPageOptions[0])},function(e,n){var t=n.component;e(n,3,0,1==t.pagination.page),e(n,4,0,t.text.label_previous),e(n,13,0,!(t.pagination.total&&t.pagination.page<t.pageNumbers[t.pageNumbers.length-1])),e(n,14,0,t.text.label_next),e(n,18,0,t.currentRange)})}function Nc(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Lc)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.pagination&&t.isVisible&&t.pagination.total)},null)}l["\u0275ccf"]("wp-table-pagination",Cc,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-table-pagination",[],null,null,null,Nc,Pc)),l["\u0275did"](1,245760,null,0,Cc,[le,ie,U.a],null,null)],function(e,n){e(n,1,0)},null)},{totalEntries:"totalEntries",hideForSinglePageResults:"hideForSinglePageResults"},{updateResults:"updateResults"},[]);var $c=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function qc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-table",[["class","work-packages-split-view--tabletimeline-content"]],null,null,null,wc,cc)),l["\u0275did"](2,245760,null,0,Fs,[l.ElementRef,l.Injector,u,A,On.b,ca,U.a,l.ChangeDetectorRef,Pe,ve,Se],{projectIdentifier:[0,"projectIdentifier"],configurationObject:[1,"configurationObject"]},null),(e()(),l["\u0275eld"](3,0,null,null,2,"div",[["class","work-packages-split-view--tabletimeline-footer hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"wp-table-pagination",[],null,null,null,Nc,Pc)),l["\u0275did"](5,245760,null,0,Cc,[le,ie,U.a],{hideForSinglePageResults:[0,"hideForSinglePageResults"]},null)],function(e,n){var t=n.component;e(n,2,0,t.projectIdentifier,t.configuration);e(n,5,0,!0)},null)}function Hc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.error.message||t.error)})}function Bc(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","work-packages-embedded-view--container loading-indicator--location"]],[[1,"data-indicator-name",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-hierarchy-disabled":0,"-compact-tables":1}),(e()(),l["\u0275and"](16777216,null,null,1,null,qc)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Hc)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,!t.configuration.hierarchyToggleEnabled,t.compactTableStyle);e(n,1,0,"work-packages-embedded-view--container loading-indicator--location",l),e(n,4,0,t.tableInformationLoaded),e(n,6,0,t.error)},function(e,n){e(n,0,0,n.component.uniqueEmbeddedTableName)})}var Wc=l["\u0275ccf"]("wp-embedded-table",An,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,17,"wp-embedded-table",[],null,null,null,Bc,$c)),l["\u0275prd"](4608,null,Er,Er,[A,u,Oe]),l["\u0275prd"](4608,null,Ae,Ae,[A]),l["\u0275prd"](512,null,A,A,[]),l["\u0275prd"](512,null,gn,gn,[l.Injector]),l["\u0275prd"](512,null,ve,ve,[A]),l["\u0275prd"](512,null,ie,ie,[A,le]),l["\u0275prd"](512,null,Se,Se,[u,A]),l["\u0275prd"](512,null,Pe,Pe,[u,A]),l["\u0275prd"](512,null,We,We,[u,A]),l["\u0275prd"](512,null,ke,ke,[A]),l["\u0275prd"](512,null,be,be,[A]),l["\u0275prd"](512,null,re,re,[A]),l["\u0275prd"](512,null,ln,ln,[u,tn,en,A]),l["\u0275prd"](512,null,Le,Le,[A,Se,ee,Oe,Me]),l["\u0275prd"](512,null,Je,Je,[A,re,Se,Ze,ee,Oe,Me]),l["\u0275prd"](512,null,on,on,[u,A,Se,Pe,We,ke,be,ve,re,ln,Le,ie,Je,Oe,$e,Xe]),l["\u0275did"](17,4440064,null,0,An,[vn,A,l.Injector,On.b,U.a,Ne,Ue,gn,ve,ie,on,T],null,null)],function(e,n){e(n,17,0)},null)},{providedConfiguration:"configuration",uniqueEmbeddedTableName:"uniqueEmbeddedTableName",initialLoadingIndicator:"initialLoadingIndicator",queryId:"queryId",queryProps:"queryProps",tableActions:"tableActions",compactTableStyle:"compactTableStyle"},{},[]),zc=function(){function e(e,n,t,l,i,o){this.parent=e,this.wpInlineCreate=n,this.wpCacheService=t,this.wpRelations=l,this.wpNotificationsService=i,this.I18n=o,this.isDisabled=!1,this.text={save:this.I18n.t("js.relation_buttons.save"),abort:this.I18n.t("js.relation_buttons.abort")}}return e.prototype.addExisting=function(){var e=this;if(!_.isNil(this.selectedWpId)){var n=this.selectedWpId;this.isDisabled=!0,this.wpInlineCreate.add(this.workPackage,n).then(function(){e.wpCacheService.loadWorkPackage(e.workPackage.id,!0),e.isDisabled=!1,e.wpInlineCreate.newInlineWorkPackageReferenced.next(n),e.cancel()}).catch(function(n){e.wpNotificationsService.handleRawError(n,e.workPackage),e.isDisabled=!1,e.cancel()})}},e.prototype.updateSelectedId=function(e){this.selectedWpId=e},Object.defineProperty(e.prototype,"relationType",{get:function(){return this.wpInlineCreate.relationType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"workPackage",{get:function(){return this.wpInlineCreate.referenceTarget},enumerable:!0,configurable:!0}),e.prototype.cancel=function(){this.parent.resetRow()},e}(),Qc=function(e){function n(n,t){var l=e.call(this,n)||this;return l.injector=n,l.wpRelationsHierarchyService=t,l.referenceComponentClass=zc,l.relationType="children",l.referenceTarget=null,l.buttonTexts={reference:l.I18n.t("js.relation_buttons.add_existing_child"),create:l.I18n.t("js.relation_buttons.add_new_child")},l}return r.d(n,e),n.prototype.add=function(e,n){return this.wpRelationsHierarchyService.addExistingChildWp(e,n)},n.prototype.remove=function(e,n){return this.wpRelationsHierarchyService.removeChild(n)},Object.defineProperty(n.prototype,"canAdd",{get:function(){return!!(this.referenceTarget&&this.canCreateWorkPackages&&this.canAddChild)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canReference",{get:function(){return!(!this.referenceTarget||!this.canAddChild)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canAddChild",{get:function(){var e=this.referenceTarget;return e&&!e.isMilestone&&e.changeParent},enumerable:!0,configurable:!0}),n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},n}(Du),Uc=function(e){function n(n,t,l,i,o,r){var a=e.call(this,n,t)||this;return a.injector=n,a.workPackage=t,a.identifier=l,a.title=i,a.applicable=o,a.onClick=r,a}return r.d(n,e),n.factoryFor=function(e,t,l,i){return void 0===i&&(i=function(){return!0}),function(o,r){return new n(o,r,e,t,i,l)}},n.prototype.buildElement=function(){var e=this;if(!this.applicable(this.workPackage))return null;var n=document.createElement("a");return n.title=this.title,n.href="#",n.classList.add("wp-table-context-menu-icon","wp-table-action--unlink"),n.dataset.workPackageId=this.workPackage.id.toString(),n.appendChild(sn("icon","icon-close")),jQuery(n).click(function(n){n.preventDefault(),e.onClick(e.workPackage)}),n},n}(un),Kc=function(){function e(e){this.queryUrlParamsHelper=e}return e.prototype.refreshTable=function(){this.embeddedTable.isInitialized&&this.embeddedTable.refresh()},e.prototype.contextualizedQuery=function(e){var n=this,t=_.cloneDeep(e);return _.each(t.filters,function(e){e._links.values[0]&&e._links.values[0].templated&&(e._links.values[0].href=e._links.values[0].href.replace("{id}",n.workPackage.id))}),t},e.prototype.buildQueryProps=function(){if(this.query&&"Query"===this.query._type){var e=this.contextualizedQuery(this.query);this.queryProps=this.queryUrlParamsHelper.buildV3GetQueryFromQueryResource(e,{})}else this.queryProps=this.query},e}(),Yc=function(e){function n(n,t,l,i,o,r){var a=e.call(this,o)||this;return a.wpRelationsHierarchyService=n,a.PathHelper=t,a.wpInlineCreate=l,a.wpCacheService=i,a.queryUrlParamsHelper=o,a.I18n=r,a.addExistingChildEnabled=!1,a.tableActions=[Uc.factoryFor("remove-child-action",a.I18n.t("js.relation_buttons.remove_child"),function(e){a.childrenEmbeddedTable.loadingIndicator=a.wpRelationsHierarchyService.removeChild(e)},function(e){return!!e.changeParent})],a}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.wpInlineCreate.referenceTarget=this.workPackage,this.buildQueryProps(),this.wpCacheService.observe(this.workPackage.id).pipe(Object(an.b)(this)).subscribe(function(){return e.refreshTable()})},n.prototype.ngOnDestroy=function(){},n}(Kc),Gc=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Zc(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{embeddedTable:0}),l["\u0275qud"](402653184,2,{childrenEmbeddedTable:0}),(e()(),l["\u0275eld"](2,0,null,null,18,"wp-embedded-table",[],null,null,null,Bc,$c)),l["\u0275prd"](4608,null,Er,Er,[A,u,Oe]),l["\u0275prd"](4608,null,Ae,Ae,[A]),l["\u0275prd"](512,null,A,A,[]),l["\u0275prd"](512,null,gn,gn,[l.Injector]),l["\u0275prd"](512,null,ve,ve,[A]),l["\u0275prd"](512,null,ie,ie,[A,le]),l["\u0275prd"](512,null,Se,Se,[u,A]),l["\u0275prd"](512,null,Pe,Pe,[u,A]),l["\u0275prd"](512,null,We,We,[u,A]),l["\u0275prd"](512,null,ke,ke,[A]),l["\u0275prd"](512,null,be,be,[A]),l["\u0275prd"](512,null,re,re,[A]),l["\u0275prd"](512,null,ln,ln,[u,tn,en,A]),l["\u0275prd"](512,null,Le,Le,[A,Se,ee,Oe,Me]),l["\u0275prd"](512,null,Je,Je,[A,re,Se,Ze,ee,Oe,Me]),l["\u0275prd"](512,null,on,on,[u,A,Se,Pe,We,ke,be,ve,re,ln,Le,ie,Je,Oe,$e,Xe]),l["\u0275did"](19,4440064,[[1,4],["embeddedTable",4]],0,An,[vn,A,l.Injector,On.b,U.a,Ne,Ue,gn,ve,ie,on,T],{providedConfiguration:[0,"providedConfiguration"],initialLoadingIndicator:[1,"initialLoadingIndicator"],queryProps:[2,"queryProps"],tableActions:[3,"tableActions"],compactTableStyle:[4,"compactTableStyle"]},null),l["\u0275pod"](20,{actionsColumnEnabled:0,hierarchyToggleEnabled:1,inlineCreateEnabled:2,columnMenuEnabled:3,contextMenuEnabled:4,projectIdentifier:5,projectContext:6})],function(e,n){var t=n.component,l=e(n,20,0,!0,!1,!0,!1,!1,t.workPackage.project.idFromLink,!1);e(n,19,0,l,!1,t.queryProps,t.tableActions,!0)},null)}var Jc=l["\u0275ccf"]("wp-children-query",Yc,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"wp-children-query",[],null,null,null,Zc,Gc)),l["\u0275prd"](512,null,Du,Qc,[l.Injector,os]),l["\u0275did"](2,245760,null,0,Yc,[os,R,Du,Oe,Ne,U.a],null,null)],function(e,n){e(n,2,0)},null)},{workPackage:"workPackage",query:"query",addExistingChildEnabled:"addExistingChildEnabled"},{},[]),Xc=t("FC3Z"),ed=t("Yh/3"),nd=t("6bXR"),td=function(){function e(e){this.wpCacheService=e,this.count=0}return e.prototype.ngOnInit=function(){var e=this;this.wpCacheService.loadWorkPackage(this.wpId.toString()).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.count=_.size(n.watchers.elements)})},e.prototype.ngOnDestroy=function(){},e}(),ld=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function id(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","wp-tabs-count"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.count)})}function od(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,id)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.count>0)},null)}l["\u0275ccf"]("wp-watchers-count",td,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-watchers-count",[],null,null,null,od,ld)),l["\u0275did"](1,245760,null,0,td,[Oe],null,null)],function(e,n){e(n,1,0)},null)},{wpId:"wpId"},{},[]);var rd=function(){function e(e,n,t,i){this.elementRef=e,this.PathHelper=n,this.loadingIndicatorService=t,this.I18n=i,this.text={placeholder:this.I18n.t("js.relations_autocomplete.placeholder")},this.inputPlaceholder=this.text.placeholder,this.appendToContainer="#content",this.onSelect=new l.EventEmitter,this.onEscapePressed=new l.EventEmitter,this.onBlur=new l.EventEmitter,this.options=[],this.relatedWps=[],this.noResults=!1}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement);var n=this.$input=this.$element.find(".wp-relations--autocomplete"),t=!1;this.initialSelection&&n.val(this.getIdentifier(this.initialSelection)),n.autocomplete({delay:250,autoFocus:!1,appendTo:this.appendToContainer,classes:{"ui-autocomplete":"wp-relations-autocomplete--results"},source:function(n,l){e.autocompleteWorkPackages(n.term).then(function(n){t=!1,e.initialSelection&&n.unshift(e.initialSelection),l(n.map(function(n){return{workPackage:n,value:e.getIdentifier(n)}}))})},select:function(n,l){t=!0,e.onSelect.emit(l.item.workPackage.id)},minLength:0}).focus(function(){return!t&&n.autocomplete("search",n.val())}),setTimeout(function(){return n.focus()},20)},e.prototype.ngOnDestroy=function(){this.$input.autocomplete("destroy")},e.prototype.handleEnterPressed=function(e){var n=e.target.value;n||this.onSelect.emit(null),n.match(/^#?\d+$/)&&(n=n.replace(/^#/,""),this.onSelect.emit(n))},e.prototype.getIdentifier=function(e){return e?"#"+e.id+" - "+e.subject:""},e.prototype.autocompleteWorkPackages=function(e){var n=this;return e=e.replace(/^#/,""),this.$element.find(".ui-autocomplete--loading").show(),this.workPackage.availableRelationCandidates.$link.$fetch({query:e,type:this.filterCandidatesFor||this.selectedRelationType}).then(function(e){return n.noResults=0===e.count,n.$element.find(".ui-autocomplete--loading").hide(),e.elements||[]}).catch(function(){return n.$element.find(".ui-autocomplete--loading").hide(),[]})},e}(),ad=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ud(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,14,"form",[["class","form"],["name","add_relation_form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,2).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,2).onReset()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.t,[],null,null),l["\u0275did"](2,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](4,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](5,0,null,null,2,"input",[["class","wp-relations--autocomplete ui-autocomplete--input"],["type","text"]],[[1,"placeholder",0]],[[null,"keydown.enter"],[null,"keydown.escape"],[null,"blur"]],function(e,n,t){var l=!0,i=e.component;"keydown.enter"===n&&(l=!1!==i.handleEnterPressed(t)&&l);"keydown.escape"===n&&(l=!1!==i.onEscapePressed.emit(t)&&l);"blur"===n&&(l=!1!==i.onBlur.emit(t)&&l);return l},null,null)),l["\u0275did"](6,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](7,{"-error":0}),(e()(),l["\u0275eld"](8,0,null,null,6,"div",[["class","ui-autocomplete--loading"],["style","display: none"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,5,"div",[["class","loading-indicator -small"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"div",[["class","block-1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,0,"div",[["class","block-2"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,0,"div",[["class","block-3"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,0,"div",[["class","block-4"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"div",[["class","block-5"]],null,null,null,null,null))],function(e,n){var t=n.component,l=e(n,7,0,t.noResults&&!t.initialSelection);e(n,6,0,"wp-relations--autocomplete ui-autocomplete--input",l)},function(e,n){var t=n.component;e(n,0,0,l["\u0275nov"](n,4).ngClassUntouched,l["\u0275nov"](n,4).ngClassTouched,l["\u0275nov"](n,4).ngClassPristine,l["\u0275nov"](n,4).ngClassDirty,l["\u0275nov"](n,4).ngClassValid,l["\u0275nov"](n,4).ngClassInvalid,l["\u0275nov"](n,4).ngClassPending),e(n,5,0,t.inputPlaceholder)})}l["\u0275ccf"]("wp-relations-autocomplete-upgraded",rd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-autocomplete-upgraded",[],null,null,null,ud,ad)),l["\u0275did"](1,245760,null,0,rd,[l.ElementRef,R,Ue,U.a],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",selectedRelationType:"selectedRelationType",filterCandidatesFor:"filterCandidatesFor",initialSelection:"initialSelection",inputPlaceholder:"inputPlaceholder",appendToContainer:"appendToContainer"},{onSelect:"onWorkPackageIdSelected",onEscapePressed:"onEscape",onBlur:"onBlur"},[]);var sd=function(){function e(e,n,t){this.I18n=e,this.wpRelationsHierarchy=n,this.wpNotifications=t,this.onSwitch=new l.EventEmitter,this.isSaving=!1,this.text={edit_parent:this.I18n.t("js.relation_buttons.change_parent"),set_or_remove_parent:this.I18n.t("js.relations_autocomplete.parent_placeholder"),set_parent:this.I18n.t("js.relation_buttons.set_parent")}}return e.prototype.canModifyParent=function(){return!!this.workPackage.changeParent},Object.defineProperty(e.prototype,"parent",{get:function(){return this.workPackage&&this.workPackage.parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this.editing},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.toggle(!1)},e.prototype.open=function(){this.toggle(!0)},e.prototype.updateParent=function(e){var n=this;this.close(),_.isNil(e)&&(e=null),_.get(this.parent,"id",null)!==e&&(this.isSaving=!0,this.wpRelationsHierarchy.changeParent(this.workPackage,e).catch(function(e){n.wpNotifications.handleRawError(e,n.workPackage)}).then(function(){return n.isSaving=!1}))},e.prototype.toggle=function(e){this.editing!==e&&(this.editing=e,this.onSwitch.emit(this.editing))},e}(),cd=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function dd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"a",[["class","wp-breadcrumb-parent breadcrumb-project-title nocut"],["uiSref","work-packages.show.activity"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,2).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Xc.a,[l.ElementRef,l.Renderer2],null,null),l["\u0275did"](2,737280,null,0,Xc.b,[d.P,[2,Xc.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](3,{workPackageId:0}),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=e(n,3,0,n.component.parent.id);e(n,2,0,"work-packages.show.activity",t)},function(e,n){var t=n.component;e(n,0,0,t.parent.name),e(n,4,0,t.parent.name)})}function pd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.set_parent)})}function hd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"accessible-by-keyboard",[["linkClass","wp-relation--parent-change hide-when-print"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.open()&&l);return l},Dt,Ot)),l["\u0275did"](1,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275and"](16777216,null,0,1,null,pd)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,"wp-relation--parent-change hide-when-print",t.parent?t.text.edit_parent:t.text.set_parent),e(n,3,0,l["\u0275inlineInterpolate"](1,"icon-small ",t.parent?"icon-edit icon2":"icon-add icon4","")),e(n,5,0,!t.parent)},null)}function fd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,dd)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,hd)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.parent),e(n,4,0,t.canModifyParent())},null)}function gd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-autocomplete-upgraded",[["filterCandidatesFor","parent"]],null,[[null,"onEscape"],[null,"onBlur"],[null,"onWorkPackageIdSelected"]],function(e,n,t){var l=!0,i=e.component;"onEscape"===n&&(l=!1!==i.close()&&l);"onBlur"===n&&(l=!1!==i.close()&&l);"onWorkPackageIdSelected"===n&&(l=!1!==i.updateParent(t)&&l);return l},ud,ad)),l["\u0275did"](1,245760,null,0,rd,[l.ElementRef,R,Ue,U.a],{workPackage:[0,"workPackage"],filterCandidatesFor:[1,"filterCandidatesFor"],inputPlaceholder:[2,"inputPlaceholder"]},{onSelect:"onWorkPackageIdSelected",onEscapePressed:"onEscape",onBlur:"onBlur"})],function(e,n){var t=n.component;e(n,1,0,t.workPackage,"parent",t.text.set_or_remove_parent)},null)}function md(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,fd)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,gd)),l["\u0275did"](3,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.active),e(n,3,0,t.active)},null)}l["\u0275ccf"]("wp-breadcrumb-parent",sd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-breadcrumb-parent",[],null,null,null,md,cd)),l["\u0275did"](1,49152,null,0,sd,[U.a,os,Ze],null,null)],null,null)},{workPackage:"workPackage"},{onSwitch:"onSwitch"},[]);var vd=function(){function e(e){this.I18n=e,this.text={parent:this.I18n.t("js.relations_hierarchy.parent_headline"),hierarchy:this.I18n.t("js.relations_hierarchy.hierarchy_headline")},this.inputActive=!1}return Object.defineProperty(e.prototype,"hierarchyCount",{get:function(){return this.workPackage.ancestors.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hierarchyLabel",{get:function(){return 1===this.hierarchyCount?this.text.parent:this.text.hierarchy},enumerable:!0,configurable:!0}),e}(),yd=[[".active-parent-select[_ngcontent-%COMP%]{width:100%}"]],bd=l["\u0275crt"]({encapsulation:0,styles:yd,data:{}});function wd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[["class","wp-breadcrumb--ellipsed"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"icon4 icon-small icon-arrow-right5":0}),(e()(),l["\u0275eld"](3,0,null,null,3,"a",[["class","breadcrumb-project-title nocut"],["uiSref","work-packages.show.activity"]],[[1,"title",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,5).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,Xc.a,[l.ElementRef,l.Renderer2],null,null),l["\u0275did"](5,737280,null,0,Xc.b,[d.P,[2,Xc.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](6,{workPackageId:0})],function(e,n){var t=e(n,2,0,!n.parent.context.first);e(n,1,0,"wp-breadcrumb--ellipsed",t);var l=e(n,6,0,n.parent.context.$implicit.id);e(n,5,0,"work-packages.show.activity",l)},function(e,n){e(n,3,0,n.parent.context.$implicit.name,n.parent.context.$implicit.name)})}function kd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,wd)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,2,0,!n.context.last)},null)}function Cd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](3,null,["",": "])),(e()(),l["\u0275and"](16777216,null,null,1,null,kd)),l["\u0275did"](5,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,5,0,n.component.workPackage.ancestors)},function(e,n){e(n,3,0,n.component.hierarchyLabel)})}function Pd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","wp-breadcrumb -show"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,7,"ul",[["class","breadcrumb"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Cd)),l["\u0275did"](3,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](4,0,null,null,4,"li",[],null,null,null,null,null)),l["\u0275did"](5,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pod"](6,{"active-parent-select":0,"icon4 icon-small icon-arrow-right5":1}),(e()(),l["\u0275eld"](7,0,null,null,1,"wp-breadcrumb-parent",[],null,[[null,"onSwitch"]],function(e,n,t){var l=!0,i=e.component;"onSwitch"===n&&(l=!1!=(i.inputActive=!i.inputActive)&&l);return l},md,cd)),l["\u0275did"](8,49152,null,0,sd,[U.a,os,Ze],{workPackage:[0,"workPackage"]},{onSwitch:"onSwitch"})],function(e,n){var t=n.component;e(n,3,0,!t.inputActive&&t.hierarchyCount>0);var l=e(n,6,0,t.inputActive,!t.inputActive&&t.hierarchyCount>1);e(n,5,0,l),e(n,8,0,t.workPackage)},null)}function Id(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Pd)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["\u0275ccf"]("wp-breadcrumb",vd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-breadcrumb",[],null,null,null,Id,bd)),l["\u0275did"](1,49152,null,0,vd,[U.a],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var jd=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function _d(e){return l["\u0275vid"](0,[l["\u0275ncd"](null,0)],null,null)}l["\u0275ccf"]("wp-edit-field-group,[wp-edit-field-group]",Wr,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-edit-field-group",[],null,null,null,_d,jd)),l["\u0275did"](1,245760,null,0,Wr,[u,l.Injector,Gn,Zn,Ze,Er,Dr,d.O,Ke,d.G,U.a],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",successState:"successState",initializeEditMode:"inEditMode"},{},["*"]);var Sd=function(){function e(e,n){this.uiRouterGlobals=e,this.wpCacheService=n}return e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){var e=this;this.workPackage||this.wpCacheService.loadWorkPackage(this.uiRouterGlobals.params.workPackageId).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.workPackage=n})},e}(),Rd=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Td(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","work-packages--subject-type-row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","work-packages--type-selector work-packages--subject-element"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"wp-edit-field",[],null,null,null,ha,pa)),l["\u0275did"](3,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"]},null),(e()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","work-packages--details--subject work-packages--subject-element"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"wp-edit-field",[],null,null,null,ha,pa)),l["\u0275did"](6,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"]},null)],function(e,n){var t=n.component;e(n,3,0,"type",t.workPackage.id,"work-packages--type-selector work-packages--subject-element -no-label");e(n,6,0,"subject",t.workPackage.id,"work-packages--details--subject work-packages--subject-element -no-label")},null)}function xd(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Td)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["\u0275ccf"]("wp-subject",Sd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-subject",[],null,null,null,xd,Rd)),l["\u0275did"](1,245760,null,0,Sd,[d.Q,Oe],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var Ed=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.load=function(e){return e.watchers.$update().then(function(e){return e.elements})},n}(Qn),Od=function(){function e(e,n,t){this.I18n=e,this.wpWatchersService=n,this.wpCacheService=t,this.showText=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e=this;this.wpCacheService.loadWorkPackage(this.workPackage.id).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.workPackage=n,e.setWatchStatus()})},e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"isWatched",{get:function(){return this.workPackage.hasOwnProperty("unwatch")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayWatchButton",{get:function(){return this.isWatched||this.workPackage.hasOwnProperty("watch")},enumerable:!0,configurable:!0}),e.prototype.toggleWatch=function(){var e=this,n=this.nextStateLink();n(n.$link.payload).then(function(){e.wpWatchersService.clear(e.workPackage.id),e.wpCacheService.loadWorkPackage(e.workPackage.id,!0)})},e.prototype.nextStateLink=function(){var e=this.isWatched?"unwatch":"watch";return this.workPackage[e]},e.prototype.setWatchStatus=function(){this.isWatched?(this.buttonTitle=this.I18n.t("js.label_unwatch_work_package"),this.buttonText=this.I18n.t("js.label_unwatch"),this.buttonClass="-active",this.buttonId="unwatch-button",this.watchIconClass="icon-watched"):(this.buttonTitle=this.I18n.t("js.label_watch_work_package"),this.buttonText=this.I18n.t("js.label_watch"),this.buttonClass="",this.buttonId="watch-button",this.watchIconClass="icon-unwatched")},e}(),Dd=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Fd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.buttonText)})}function Ad(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"button",[["class","button toolbar-icon"]],[[1,"title",0],[8,"disabled",0],[8,"id",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleWatch()&&l);return l},null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Fd)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,"button toolbar-icon",t.buttonClass),e(n,3,0,l["\u0275inlineInterpolate"](1,"button--icon ",t.watchIconClass,"")),e(n,5,0,t.showText)},function(e,n){var t=n.component;e(n,0,0,t.buttonTitle,t.disabled,t.buttonId)})}function Vd(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Ad)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.displayWatchButton)},null)}l["\u0275ccf"]("wp-watcher-button",Od,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-watcher-button",[],null,null,null,Vd,Dd)),l["\u0275did"](1,245760,null,0,Od,[U.a,Ed,Oe],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",showText:"showText",disabled:"disabled"},{},[]);var Md=function(){function e(e,n,t){this.workPackage=e,this.PathHelper=n,this.$state=t,this.project=e.project}return Object.defineProperty(e.prototype,"allActions",{get:function(){return{workPackage:this.workPackage,project:this.project}},enumerable:!0,configurable:!0}),e.prototype.copyLink=function(){return 0===this.$state.current.name.indexOf("work-packages.list.details")?this.PathHelper.workPackageDetailsCopyPath(this.project.identifier,this.workPackage.id):this.PathHelper.workPackageCopyPath(this.workPackage.id)},e.prototype.linkForAction=function(e){return"copy"===e.key?e.link=this.copyLink():e.link=this.allActions[e.resource][e.link].href,e},e.prototype.isPermitted=function(e){return void 0!==this.allActions[e.resource]&&void 0!==this.allActions[e.resource][e.link]},e.prototype.permittedActionKeys=function(e){var n=this,t=_.filter(e,function(e){return n.isPermitted(e)});return _.map(t,function(e){return e.key})},e.prototype.permittedActionsWithLinks=function(e){var n=this,t=_.filter(_.cloneDeep(e),function(e){return n.isPermitted(e)});return _.map(t,function(e){return n.linkForAction(e)})},e}(),Ld=function(e){function n(n,t,l,i,o,r,a){var u=e.call(this,i,r)||this;return u.HookService=n,u.$state=t,u.PathHelper=l,u.elementRef=i,u.opModalService=o,u.opContextMenuService=r,u.authorisationService=a,u}return r.d(n,e),n.prototype.open=function(e){var n=this;this.workPackage.project.$load().then(function(){n.authorisationService.initModelAuth("work_package",n.workPackage.$links);var t=new Md(n.workPackage,n.PathHelper,n.$state),l=n.getPermittedActions(t);n.buildItems(l),n.opContextMenu.show(n,e)})},n.prototype.triggerContextMenuAction=function(e,n){var t=e.link;switch(n){case"copy":this.$state.go("work-packages.copy",{copiedFromWorkPackageId:this.workPackage.id});break;case"delete":this.opModalService.show(hs,{workPackages:[this.workPackage]});break;default:window.location.href=t}},n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"right top",at:"right bottom"}),t},n.prototype.getPermittedActions=function(e){var n=e.permittedActionsWithLinks(rs);return _.each(this.getPermittedPluginActions(e),function(e){var t=e.indexBy?e.indexBy(n):n.length;n.splice(t,0,e)}),n},n.prototype.getPermittedPluginActions=function(e){var n=this.HookService.call("workPackageSingleContextMenu");return e.permittedActionsWithLinks(n)},n.prototype.buildItems=function(e){var n=this,t=this.workPackage.configureForm;return this.items=e.map(function(e){var t=e.key;return{disabled:!1,linkText:I18n.t("js.button_"+t),href:e.link,icon:e.icon||"icon-"+t,onClick:function(l){return(!e.link||!ns.isClickedWithModifier(l))&&(n.triggerContextMenuAction(e,t),!0)}}}),t&&this.items.push({href:t.href,icon:"icon-settings3",linkText:t.name,onClick:function(){return!1}}),this.items},n}(ju),Nd=function(){return function(e,n){this.I18n=e,this.wpEditing=n,this.text={button_more:this.I18n.t("js.button_more")}}}(),$d=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function qd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","work-packages--details-toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-watcher-button",[],null,null,null,Vd,Dd)),l["\u0275did"](2,245760,null,0,Od,[U.a,Ed,Oe],{workPackage:[0,"workPackage"],showText:[1,"showText"]},null),(e()(),l["\u0275eld"](3,0,null,null,4,"button",[["class","button dropdown-relative"],["wpSingleContextMenu",""]],[[1,"accesskey",0]],null,null,null,null)),l["\u0275did"](4,4210688,null,0,Ld,[Bn,d.G,R,l.ElementRef,On.b,ca,Xe],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](5,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--dropdown-indicator"]],null,null,null,Ct,wt)),l["\u0275did"](7,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,t.workPackage,!0),e(n,4,0,t.workPackage);e(n,7,0,"button--dropdown-indicator")},function(e,n){var t=n.component;e(n,3,0,7),e(n,5,0,t.text.button_more)})}l["\u0275ccf"]("wp-details-toolbar",Nd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-details-toolbar",[],null,null,null,qd,$d)),l["\u0275did"](1,49152,null,0,Nd,[U.a,Zn],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var Hd=function(){function e(e,n){this.wpCacheService=e,this.wpRelations=n,this.count=0}return e.prototype.ngOnInit=function(){var e=this;this.wpRelations.require(this.wpId.toString()),Object(Os.a)(this.wpRelations.state(this.wpId.toString()).values$(),this.wpCacheService.loadWorkPackage(this.wpId.toString()).values$()).pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){var t=n[0],l=n[1],i=_.size(t),o=_.size(l.children);e.count=i+o})},e.prototype.ngOnDestroy=function(){},e}(),Bd=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Wd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","wp-tabs-count"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.count)})}function zd(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Wd)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.count>0)},null)}l["\u0275ccf"]("wp-relations-count",Hd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-count",[],null,null,null,zd,Bd)),l["\u0275did"](1,245760,null,0,Hd,[Oe,Me],null,null)],function(e,n){e(n,1,0)},null)},{wpId:"wpId"},{},[]);var Qd=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(e){return this.halResourceService.get(this.pathHelper.api.v3.projects.id(e).toString()).toPromise()},e}(),Ud=function(e){function n(n,t){var l=e.call(this)||this;return l.states=n,l.projectDmService=t,l}return r.d(n,e),n.prototype.loadAll=function(e){var n=this;return Promise.all(e.map(function(e){return n.load(e)})).then(function(e){})},n.prototype.load=function(e){return this.projectDmService.load(e)},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.projects},enumerable:!0,configurable:!0}),n}(Te),Kd=function(){function e(e){this.titleService=e}return Object.defineProperty(e.prototype,"current",{get:function(){return this.titleService.getTitle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleParts",{get:function(){return this.current.split(" | ")},enumerable:!0,configurable:!0}),e.prototype.setFirstPart=function(e){var n=this.titleParts;n[0]=e,this.titleService.setTitle(n.join(" | "))},e}(),Yd=function(){function e(e,n){this.injector=e,this.workPackageId=n,this.wpCacheService=this.injector.get(Oe),this.states=this.injector.get(u),this.I18n=this.injector.get(U.a),this.keepTab=this.injector.get(dn),this.PathHelper=this.injector.get(R),this.wpTableRefresh=this.injector.get(Ae),this.wpEditing=this.injector.get(Zn),this.wpTableFocus=this.injector.get(Dr),this.projectCacheService=this.injector.get(Ud),this.authorisationService=this.injector.get(Xe),this.text={},this.titleService=this.injector.get(Kd),this.initializeTexts()}return e.prototype.ngOnDestroy=function(){},e.prototype.observeWorkPackage=function(){var e=this;this.wpCacheService.loadWorkPackage(this.workPackageId).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.workPackage=n,e.init()})},e.prototype.initializeTexts=function(){var e=this;this.text.tabs={},["overview","activity","relations","watchers"].forEach(function(n){e.text.tabs[n]=e.I18n.t("js.work_packages.tabs."+n)})},e.prototype.init=function(){var e=this;this.projectCacheService.require(this.workPackage.project.idFromLink).then(function(){e.projectIdentifier=e.workPackage.project.identifier}),this.authorisationService.initModelAuth("work_package",this.workPackage.$links),this.titleService.setFirstPart(this.workPackage.subjectWithType(20)),this.showStaticPagePath=this.PathHelper.workPackagePath(this.workPackageId),this.keepTab.observable.pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.updateFocusAnchorLabel(n.active)})},e.prototype.updateFocusAnchorLabel=function(e){var n=this.I18n.t("js.label_work_package_details_you_are_here",{tab:this.I18n.t("js.work_packages.tabs."+e),type:this.workPackage.type.name,subject:this.workPackage.subject});return this.focusAnchorLabel=n},e.prototype.canViewWorkPackageWatchers=function(){return!(!this.workPackage||!this.workPackage.watchers)},Object.defineProperty(e.prototype,"isEditable",{get:function(){return this.workPackage.isEditable},enumerable:!0,configurable:!0}),e}(),Gd=function(){function e(){}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return!this.name},enumerable:!0,configurable:!0}),e.prototype.setIfFirst=function(e,n){this.isEmpty&&e&&(this.name=e,this.params=n)},e}(),Zd=function(e){function n(n,t,l,i,o,r,a){var u=e.call(this,n,a.params.workPackageId)||this;u.injector=n,u.states=t,u.firstRoute=l,u.keepTab=i,u.wpTableSelection=o,u.wpTableFocus=r,u.$state=a,u.observeWorkPackage();var s=a.params.workPackageId;if(u.wpTableFocus.focusedWorkPackage)u.wpTableFocus.updateFocus(s,!1);else{var c="work-packages.list.details.overview"===l.name,d=l.params&&s===l.params.workPackageI;u.wpTableFocus.updateFocus(s,c&&d)}return u.wpTableSelection.isEmpty&&u.wpTableSelection.setRowState(s,!0),u.wpTableFocus.whenChanged().pipe(Object(q.a)(Object(an.a)(u))).subscribe(function(e){!(s.toString()===e.toString())&&a.includes("work-packages.list.details")&&a.go(a.current.name,{workPackageId:e,focus:!1})}),u}return r.d(n,e),n.prototype.close=function(){this.$state.go("work-packages.list",this.$state.params)},n.prototype.switchToFullscreen=function(){this.$state.go(this.keepTab.currentShowState,this.$state.params)},Object.defineProperty(n.prototype,"shouldFocus",{get:function(){return!0===this.$state.params.focus},enumerable:!0,configurable:!0}),n.prototype.initializeTexts=function(){e.prototype.initializeTexts.call(this),this.text.closeDetailsView=this.I18n.t("js.button_close_details"),this.text.goTofullScreen=this.I18n.t("js.work_packages.message_successful_show_in_fullscreen")},n}(Yd),Jd=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Xd(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"li",[["uiSref","work-packages.list.details.watchers"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,1).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](1,737280,[[4,4]],0,Xc.b,[d.P,[2,Xc.a],"UIView.PARENT_INJECT"],{state:[0,"state"]},null),l["\u0275did"](2,1196032,null,1,ed.a,[d.Q],null,null),l["\u0275qud"](603979776,4,{_srefs:1}),l["\u0275did"](4,147456,null,0,nd.a,[ed.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](5,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"wp-watchers-count",[],null,null,null,od,ld)),l["\u0275did"](7,245760,null,0,td,[Oe],{wpId:[0,"wpId"]},null)],function(e,n){var t=n.component;e(n,1,0,"work-packages.list.details.watchers");e(n,4,0,"selected"),e(n,7,0,t.workPackage.id)},function(e,n){e(n,5,0,n.component.text.tabs.watchers)})}function ep(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","work-packages--details-content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"span",[["class","hidden-for-sighted"],["focus","shouldFocus"],["tabindex","-1"]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](2,4210688,null,0,kr,[p.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"wp-breadcrumb",[],null,null,null,Id,bd)),l["\u0275did"](4,49152,null,0,vd,[U.a],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](5,0,null,null,5,"wp-edit-field-group",[],null,null,null,_d,jd)),l["\u0275did"](6,245760,null,0,Wr,[u,l.Injector,Gn,Zn,Ze,Er,Dr,d.O,Ke,d.G,U.a],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](7,0,null,0,1,"wp-subject",[],null,null,null,xd,Rd)),l["\u0275did"](8,245760,null,0,Sd,[d.Q,Oe],null,null),(e()(),l["\u0275eld"](9,16777216,null,0,1,"div",[["class","work-package-details-tab"],["ui-view",""]],null,null,null,st.c,st.a)),l["\u0275did"](10,245760,null,0,Ql.a,[d.P,"UIView.PARENT_INJECT",l.ViewContainerRef],{_name:[0,"_name"]},null)],function(e,n){var t=n.component;e(n,2,0,"shouldFocus"),e(n,4,0,t.workPackage),e(n,6,0,t.workPackage),e(n,8,0);e(n,10,0,"")},function(e,n){e(n,1,0,n.component.focusAnchorLabel)})}function np(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-packages--details-toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-details-toolbar",[],null,null,null,qd,$d)),l["\u0275did"](2,49152,null,0,Nd,[U.a,Zn],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,2,0,n.component.workPackage)},null)}function tp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,37,"div",[["class","work-packages--details loading-indicator--location"],["data-indicator-name","wpDetails"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,29,"div",[["id","tabs"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,28,"ul",[["class","tabrow"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,5,"li",[["uiSref","work-packages.list.details.overview"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,4).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](4,737280,[[1,4]],0,Xc.b,[d.P,[2,Xc.a],"UIView.PARENT_INJECT"],{state:[0,"state"]},null),l["\u0275did"](5,1196032,null,1,ed.a,[d.Q],null,null),l["\u0275qud"](603979776,1,{_srefs:1}),l["\u0275did"](7,147456,null,0,nd.a,[ed.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](8,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,5,"li",[["uiSref","work-packages.list.details.activity"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,10).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](10,737280,[[2,4]],0,Xc.b,[d.P,[2,Xc.a],"UIView.PARENT_INJECT"],{state:[0,"state"]},null),l["\u0275did"](11,1196032,null,1,ed.a,[d.Q],null,null),l["\u0275qud"](603979776,2,{_srefs:1}),l["\u0275did"](13,147456,null,0,nd.a,[ed.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](14,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,7,"li",[["uiSref","work-packages.list.details.relations"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,16).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](16,737280,[[3,4]],0,Xc.b,[d.P,[2,Xc.a],"UIView.PARENT_INJECT"],{state:[0,"state"]},null),l["\u0275did"](17,1196032,null,1,ed.a,[d.Q],null,null),l["\u0275qud"](603979776,3,{_srefs:1}),l["\u0275did"](19,147456,null,0,nd.a,[ed.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](20,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,1,"wp-relations-count",[],null,null,null,zd,Bd)),l["\u0275did"](22,245760,null,0,Hd,[Oe,Me],{wpId:[0,"wpId"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Xd)),l["\u0275did"](24,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](25,0,null,null,2,"li",[["class","tab-icon"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,1,"accessible-by-keyboard",[["linkClass","work-packages--details-fullscreen-icon"],["spanClass","icon-context icon-to-fullscreen"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.switchToFullscreen()&&l);return l},Dt,Ot)),l["\u0275did"](27,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],spanClass:[2,"spanClass"],linkAriaLabel:[3,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](28,0,null,null,2,"li",[["class","tab-icon"]],null,null,null,null,null)),(e()(),l["\u0275eld"](29,0,null,null,1,"accessible-by-keyboard",[["linkClass","work-packages--details-close-icon"],["spanClass","icon-context icon-close"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.close()&&l);return l},Dt,Ot)),l["\u0275did"](30,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],spanClass:[2,"spanClass"],linkAriaLabel:[3,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275and"](16777216,null,null,1,null,ep)),l["\u0275did"](32,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,np)),l["\u0275did"](34,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](35,0,null,null,2,"div",[["class","work-packages--details--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](36,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["\u0275nov"](e,37).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["\u0275nov"](e,37).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,37).handleMouseUp(t)&&i);return i},Qu,zu)),l["\u0275did"](37,245760,null,0,Wu,[Bu,l.ElementRef,d.O],{elementClass:[0,"elementClass"],localStorageKey:[1,"localStorageKey"]},null)],function(e,n){var t=n.component;e(n,4,0,"work-packages.list.details.overview");e(n,7,0,"selected");e(n,10,0,"work-packages.list.details.activity");e(n,13,0,"selected");e(n,16,0,"work-packages.list.details.relations");e(n,19,0,"selected"),e(n,22,0,t.workPackage.id),e(n,24,0,t.canViewWorkPackageWatchers());e(n,27,0,"work-packages--details-fullscreen-icon",t.text.goTofullScreen,"icon-context icon-to-fullscreen",t.text.goTofullScreen);e(n,30,0,"work-packages--details-close-icon",t.text.closeDetailsView,"icon-context icon-close",t.text.closeDetailsView),e(n,32,0,t.workPackage),e(n,34,0,t.workPackage);e(n,37,0,"work-packages-split-view--details-side","openProject-splitViewFlexBasis")},function(e,n){var t=n.component;e(n,8,0,t.text.tabs.overview),e(n,14,0,t.text.tabs.activity),e(n,20,0,t.text.tabs.relations)})}function lp(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,tp)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}var ip=l["\u0275ccf"]("wp-split-view-entry",Zd,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-split-view-entry",[],null,null,null,lp,Jd)),l["\u0275did"](1,180224,null,0,Zd,[l.Injector,u,Gd,dn,Er,Dr,d.G],null,null)],null,null)},{},{},[]),op=function(){function e(e,n,t){this.halResourceService=e,this.states=n,this.pathHelper=t}return e.prototype.loadAll=function(e){var n=this,t=this.pathHelper.api.v3.withOptionalProject(e).types.toString();return this.halResourceService.get(t).toPromise().then(function(e){return _.each(e.elements,function(e){return n.states.types.get(e.href).putValue(e)}),e.elements})},e.prototype.load=function(){return this.halResourceService.get(this.pathHelper.api.v3.root.toString()).toPromise()},e}(),rp=function(e){function n(n,t,l,i){var o=e.call(this,n,t)||this;return o.elementRef=n,o.opContextMenu=t,o.$state=l,o.typeDmService=i,o}return r.d(n,e),n.prototype.ngAfterViewInit=function(){var n=this;e.prototype.ngAfterViewInit.call(this),this.active&&(bowser.mobile&&(this.stateName="work-packages.new"),this.loadingPromise=this.typeDmService.loadAll(this.projectIdentifier).then(function(e){return n.buildItems(e)}))},n.prototype.open=function(e){var n=this;this.loadingPromise.then(function(){n.opContextMenu.show(n,e)})},Object.defineProperty(n.prototype,"locals",{get:function(){return{items:this.items,contextMenuId:"types-context-menu"}},enumerable:!0,configurable:!0}),n.prototype.buildItems=function(e){var n=this;this.items=e.map(function(e){return{disabled:!1,linkText:e.name,href:n.$state.href(n.stateName,{type:e.id}),ariaLabel:e.name,class:Ha.dotClass("type",e.id),onClick:function(t){return!ns.isClickedWithModifier(t)&&(n.$state.go(n.stateName,{type:e.id}),!0)}}})},n}(ju),ap=function(){function e(e,n,t){this.$state=e,this.currentProject=n,this.I18n=t,this.text={createWithDropdown:this.I18n.t("js.work_packages.create.button"),createButton:this.I18n.t("js.label_work_package"),explanation:this.I18n.t("js.label_create_work_package")}}return e.prototype.ngOnInit=function(){this.projectIdentifier=this.currentProject.identifier},e.prototype.createWorkPackage=function(){this.$state.go(this.stateName,{projectPath:this.projectIdentifier})},e.prototype.isDisabled=function(){return!this.allowed||this.$state.includes("**.new")},e}(),up=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function sp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"button",[["class","button -alt-highlight add-work-package"],["opTypesCreateDropdown",""]],[[8,"disabled",0],[1,"aria-label",0]],null,null,null,null)),l["\u0275did"](1,4210688,null,0,rp,[l.ElementRef,ca,d.G,op],{projectIdentifier:[0,"projectIdentifier"],stateName:[1,"stateName"],active:[2,"active"]},null),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-add"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[["aria-hidden","true"],["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-small icon-pulldown"]],null,null,null,Ct,wt)),l["\u0275did"](6,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,1,0,t.projectIdentifier,t.stateName,t.allowed);e(n,3,0,"button--icon icon-add");e(n,6,0,"button--icon icon-small icon-pulldown")},function(e,n){var t=n.component;e(n,0,0,t.isDisabled(),t.text.explanation),e(n,4,0,t.text.createWithDropdown)})}function cp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"button",[["class","button -alt-highlight add-work-package"]],[[8,"disabled",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.createWorkPackage()&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-add"]],null,null,null,Ct,wt)),l["\u0275did"](2,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["aria-hidden","true"],["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,2,0,"button--icon icon-add")},function(e,n){var t=n.component;e(n,0,0,t.isDisabled(),t.text.explanation),e(n,3,0,t.text.createButton)})}function dp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","wp-create-button"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,sp)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,cp)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.projectIdentifier),e(n,4,0,!t.projectIdentifier)},null)}l["\u0275ccf"]("wp-create-button",ap,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-create-button",[],null,null,null,dp,up)),l["\u0275did"](1,114688,null,0,ap,[d.G,T,U.a],null,null)],function(e,n){e(n,1,0)},null)},{stateName:"stateName",allowed:"allowed"},{},[]);var pp=function(e){function n(n,t,l,i,o,r,a){var u=e.call(this,n,t)||this;return u.elementRef=n,u.opContextMenu=t,u.$state=l,u.wpNotificationsService=i,u.wpEditing=o,u.I18n=r,u.wpTableRefresh=a,u}return r.d(n,e),n.prototype.open=function(e){var n=this;this.wpEditing.changesetFor(this.workPackage).getForm().then(function(t){var l=t.schema.status.allowedValues;n.buildItems(l),n.opContextMenu.show(n,e)})},Object.defineProperty(n.prototype,"locals",{get:function(){return{items:this.items,contextMenuId:"wp-status-context-menu"}},enumerable:!0,configurable:!0}),n.prototype.updateStatus=function(e){var n=this,t=this.wpEditing.changesetFor(this.workPackage);t.setValue("status",e),this.workPackage.isNew||t.save().then(function(){n.wpNotificationsService.showSave(n.workPackage),n.wpTableRefresh.request("Altered work package status via button")})},n.prototype.buildItems=function(e){var n=this;this.items=e.map(function(e){return{disabled:!1,linkText:e.name,postIcon:e.isReadonly?"icon-locked":null,postIconTitle:n.I18n.t("js.work_packages.message_work_package_read_only"),class:Ha.dotClass("status",e.getId()),onClick:function(){return n.updateStatus(e),!0}}})},n}(ju),hp=function(){function e(e,n,t){this.I18n=e,this.wpCacheService=n,this.wpEditing=t,this.text={explanation:this.I18n.t("js.label_edit_status"),workPackageReadOnly:this.I18n.t("js.work_packages.message_work_package_read_only")}}return e.prototype.ngOnInit=function(){var e=this;this.wpCacheService.observe(this.workPackage.id).pipe(Object(an.b)(this)).subscribe(function(n){e.workPackage=n,e.workPackage.status.$load()})},e.prototype.ngOnDestroy=function(){},e.prototype.isDisabled=function(){var e=this.wpEditing.changesetFor(this.workPackage);return!this.allowed||e.inFlight},Object.defineProperty(e.prototype,"buttonTitle",{get:function(){return this.workPackage.isReadonly?this.text.workPackageReadOnly:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusHighlightClass",{get:function(){return Ha.inlineClass("status",this.status.getId())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.wpEditing.changesetFor(this.workPackage).value("status")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowed",{get:function(){return this.workPackage.isAttributeEditable("status")},enumerable:!0,configurable:!0}),e}(),fp=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function gp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[["class","button--text"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-locked"]],null,null,null,Ct,wt)),l["\u0275did"](2,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"button--icon icon-locked")},null)}function mp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","wp-status-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,7,"button",[["class","button"],["wpStatusDropdown",""]],[[8,"disabled",0],[1,"title",0],[1,"aria-label",0]],null,null,null,null)),l["\u0275did"](2,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275did"](3,4210688,null,0,pp,[l.ElementRef,ca,d.G,Ze,Zn,U.a,Ae],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,gp)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"span",[["aria-hidden","true"],["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-small icon-pulldown"]],null,null,null,Ct,wt)),l["\u0275did"](8,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,"button",t.statusHighlightClass),e(n,3,0,t.workPackage),e(n,5,0,t.workPackage.isReadonly);e(n,8,0,"button--icon icon-small icon-pulldown")},function(e,n){var t=n.component;e(n,1,0,t.isDisabled(),t.buttonTitle,t.text.explanation),e(n,6,0,t.status.name)})}function vp(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,mp)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.status)},null)}l["\u0275ccf"]("wp-status-button",hp,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-status-button",[],null,null,null,vp,fp)),l["\u0275did"](1,245760,null,0,hp,[U.a,Oe,Zn],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var yp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n,"active_user_statuses",{get:function(){return["active","registered"]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.users.get(this.href)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showUserPath",{get:function(){return this.showUser.$link.href},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isActive",{get:function(){return n.active_user_statuses.indexOf(this.status)>=0},enumerable:!0,configurable:!0}),n}(K),bp=function(){function e(e,n){this.pathHelper=e,this.I18n=n}return e.prototype.ngOnInit=function(){this.href=this.pathHelper.userPath(this.user.idFromLink),this.name=this.user.name,this.label=this.I18n.t("js.label_author",{user:this.name})},e}(),wp=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function kp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"a",[],[[1,"href",4],[1,"title",0],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.href,t.label,t.user.name)})}l["\u0275ccf"]("user-link",bp,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-link",[],null,null,null,kp,wp)),l["\u0275did"](1,114688,null,0,bp,[R,U.a],null,null)],function(e,n){e(n,1,0)},null)},{user:"user"},{},[]);var Cp=t("g4QF"),Pp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(K),Ip=function(){function e(e,n,t,l){this.halResourceService=e,this.wpCacheService=n,this.wpActivity=t,this.wpNotificationsService=l}return e.prototype.fetchAction=function(){var e=this;this.halResourceService.get(this.action.href).toPromise().then(function(n){e.action=n})},e.prototype.update=function(){var e=this,n={lockVersion:this.workPackage.lockVersion,_links:{workPackage:{href:this.workPackage.href}}};this.halResourceService.post(this.action.href+"/execute",n).toPromise().then(function(n){e.wpNotificationsService.showSave(n,!1),e.workPackage=n,e.wpActivity.clear(e.workPackage.id),e.wpCacheService.updateWorkPackage(n)}).catch(function(n){e.wpNotificationsService.handleRawError(n,e.workPackage)})},e.prototype.onMouseEnter=function(){this.fetchAction()},e}(),jp=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function _p(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","custom-action--button button -narrow hide-when-print"]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.update()&&l);return l},null,null)),(e()(),l["\u0275ted"](1,null,[" ","\n"]))],null,function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"",t.action.description?t.action.description:t.action.name,"")),e(n,1,0,t.action.name)})}l["\u0275ccf"]("wp-custom-action",Ip,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-custom-action",[],null,[[null,"mouseenter"]],function(e,n,t){var i=!0;return"mouseenter"===n&&(i=!1!==l["\u0275nov"](e,1).onMouseEnter()&&i),i},_p,jp)),l["\u0275did"](1,49152,null,0,Ip,[ee,Oe,Yn,Ze],null,null)],null,null)},{workPackage:"workPackage",action:"action"},{},[]);var Sp=function(){function e(){}return Object.defineProperty(e.prototype,"actions",{get:function(){return this.workPackage.customActions},enumerable:!0,configurable:!0}),e}(),Rp=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Tp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-custom-action",[["class","custom-action"]],null,[[null,"mouseenter"]],function(e,n,t){var i=!0;"mouseenter"===n&&(i=!1!==l["\u0275nov"](e,1).onMouseEnter()&&i);return i},_p,jp)),l["\u0275did"](1,49152,null,0,Ip,[ee,Oe,Yn,Ze],{workPackage:[0,"workPackage"],action:[1,"action"]},null)],function(e,n){e(n,1,0,n.component.workPackage,n.context.$implicit)},null)}function xp(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Tp)),l["\u0275did"](1,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,1,0,n.component.actions)},null)}l["\u0275ccf"]("wp-custom-actions",Sp,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-custom-actions",[],null,null,null,xp,Rp)),l["\u0275did"](1,49152,null,0,Sp,[],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var Ep=function(){function e(e,n,t,l,i,o,r,u,s){this.I18n=e,this.currentProject=n,this.PathHelper=t,this.states=l,this.dynamicCssService=i,this.wpEditing=o,this.displayFieldService=r,this.wpCacheService=u,this.hook=s,this.groupedFields=[],this.resourceContextChange=Object(a.g)(),this.text={attachments:{label:this.I18n.t("js.label_attachments")},project:{required:this.I18n.t("js.project.required_outside_context"),context:this.I18n.t("js.project.context"),switchTo:this.I18n.t("js.project.click_to_switch_context")},fields:{description:this.I18n.t("js.work_packages.properties.description")},description:{placeholder:this.I18n.t("js.work_packages.placeholders.description")},infoRow:{createdBy:this.I18n.t("js.label_created_by"),lastUpdatedOn:this.I18n.t("js.label_last_updated_on")}},this.firstTimeFocused=!1}return e.prototype.ngOnInit=function(){var e=this;this.workPackage.attachments&&this.workPackage.attachments.updateElements(),this.dynamicCssService.requireHighlighting(),this.resourceContextChange.values$().pipe(Object(q.a)(Object(an.a)(this)),Object(Or.a)(function(e,n){return _.isEqual(e,n)}),Object(D.a)(function(){return e.wpEditing.temporaryEditResource(e.workPackage.id).value})).subscribe(function(n){var t=e.workPackage.isNew;n.project?e.projectContext={href:e.PathHelper.projectWorkPackagePath(n.project.idFromLink,e.workPackage.id),matches:n.project.href===e.currentProject.apiv3Path}:e.projectContext={matches:!1,href:null},t&&!e.currentProject.inProjectContext&&(e.projectContext.field=e.getFields(n,["project"]));var l=n.schema._attributeGroups;e.groupedFields=e.rebuildGroupedFields(n,l)}),this.wpEditing.temporaryEditResource(this.workPackage.id).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.resourceContextChange.putValue(e.contextFrom(n))})},e.prototype.ngOnDestroy=function(){},e.prototype.shouldHideGroup=function(e){return 0===e.members.length},e.prototype.trackByName=function(e,n){return n.name},e.prototype.attributeGroupComponent=function(e){return this.hook.call("attributeGroupComponent",e,this.workPackage).pop()||null},Object.defineProperty(e.prototype,"idLabel",{get:function(){return"#"+this.workPackage.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectContextText",{get:function(){var e=this.workPackage.project.idFromLink,n='<a href="'+this.PathHelper.projectPath(e)+'">'+this.workPackage.project.name+"<a>";return this.I18n.t("js.project.work_package_belongs_to",{projectname:n})},enumerable:!0,configurable:!0}),e.prototype.rebuildGroupedFields=function(e,n){var t=this;return n?n.map(function(n){return"WorkPackageFormAttributeGroup"===n._type?{name:n.name,members:t.getFields(e,n.attributes),type:n._type}:{name:n.name,query:n._embedded.query,relationType:n.relationType,members:[n._embedded.query],type:n._type}}):[]},e.prototype.getFields=function(e,n){var t=this,l=[];return n.forEach(function(n){if("date"!==n)if(e.schema[n]){var i=t.displayField(e,n);l.push({name:n,label:i.label,multiple:!1,spanAll:i.isFormattable,field:i})}else Object(Ee.a)("Unknown field for current schema",n);else l.push(t.getDateField(e))}),l},e.prototype.getDateField=function(e){var n={name:"date",label:this.I18n.t("js.work_packages.properties.date"),multiple:!1};return e.schema.hasOwnProperty("date")?n.field=this.displayField(e,"date"):(n.fields=[this.displayField(e,"startDate"),this.displayField(e,"dueDate")],n.multiple=!0),n},e.prototype.contextFrom=function(e){var n=e.schema,t=null,l=e.project&&e.project.href;return t=n.baseSchema?n.baseSchema.href:n.href,{isNew:e.isNew,schema:t,project:l}},e.prototype.displayField=function(e,n){return this.displayFieldService.getField(e,n,e.schema[n],{container:"single-view",options:{}})},e}(),Op=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Dp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","wp-new--subject-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-edit-field",[],null,null,null,ha,pa)),l["\u0275did"](2,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"]},null)],function(e,n){e(n,2,0,"subject",n.component.workPackage.id,"-no-label")},null)}function Fp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-status-button",[],null,null,null,vp,fp)),l["\u0275did"](1,245760,null,0,hp,[U.a,Oe,Zn],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}function Ap(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"attribute-help-text",[],null,null,null,ea,Jr)),l["\u0275did"](1,114688,null,0,Zr,[l.ElementRef,Kr,Yr,On.b,U.a],{attribute:[0,"attribute"],attributeScope:[1,"attributeScope"]},null)],function(e,n){e(n,1,0,"status","WorkPackage")},null)}function Vp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,14,"div",[["class","work-packages--info-row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[": "])),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\xa0"])),(e()(),l["\u0275eld"](6,0,null,null,1,"user-link",[["class","user-link"]],null,null,null,kp,wp)),l["\u0275did"](7,114688,null,0,bp,[R,U.a],{user:[0,"user"]},null),(e()(),l["\u0275ted"](-1,null,[". "])),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["\xa0"])),(e()(),l["\u0275eld"](12,0,null,null,1,"op-date-time",[],null,null,null,pt,dt)),l["\u0275did"](13,114688,null,0,ct,[Kn],{dateTimeValue:[0,"dateTimeValue"]},null),(e()(),l["\u0275ted"](-1,null,[". "]))],function(e,n){var t=n.component;e(n,7,0,t.workPackage.author),e(n,13,0,t.workPackage.updatedAt)},function(e,n){var t=n.component;e(n,1,0,t.idLabel),e(n,3,0,t.text.infoRow.createdBy),e(n,9,0,t.text.infoRow.lastUpdatedOn)})}function Mp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["*"]))],null,null)}function Lp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,13,"div",[["class","attributes-key-value"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-span-all-columns":0}),(e()(),l["\u0275eld"](3,0,null,null,7,"div",[["class","attributes-key-value--key"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,6,"wp-replacement-label",[],null,null,null,Ur,Qr)),l["\u0275did"](5,114688,null,0,zr,[Wr,l.ElementRef],{fieldName:[0,"fieldName"]},null),(e()(),l["\u0275ted"](6,0,[" "," "])),(e()(),l["\u0275and"](16777216,null,0,1,null,Mp)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](9,0,null,0,1,"attribute-help-text",[],null,null,null,ea,Jr)),l["\u0275did"](10,114688,null,0,Zr,[l.ElementRef,Kr,Yr,On.b,U.a],{attribute:[0,"attribute"],attributeScope:[1,"attributeScope"]},null),(e()(),l["\u0275eld"](11,0,null,null,2,"div",[["class","attributes-key-value--value-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"wp-edit-field",[],null,null,null,ha,pa)),l["\u0275did"](13,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.context.$implicit.spanAll);e(n,1,0,"attributes-key-value",l),e(n,5,0,n.context.$implicit.name),e(n,8,0,n.context.$implicit.field.required&&n.context.$implicit.field.writable);e(n,10,0,n.context.$implicit.name,"WorkPackage"),e(n,13,0,n.context.$implicit.name,t.workPackage.id)},function(e,n){e(n,6,0,n.context.$implicit.label)})}function Np(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","attributes-group -project-context"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"p",[],[[8,"hidden",0],[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Lp)),l["\u0275did"](6,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,6,0,t.projectContext.field,t.trackByName)},function(e,n){var t=n.component;e(n,4,0,t.projectContext.href,t.text.project.required)})}function $p(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","attributes-group -project-context hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"a",[["class","project-context--switch-link"]],[[1,"href",4],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.projectContextText),e(n,5,0,t.projectContext.href,t.text.project.switchTo)})}function qp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","attributes-group"]],[[8,"hidden",0],[1,"data-group-name",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Cp.b,Cp.a)),l["\u0275did"](5,573440,null,0,Su.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["\u0275prd"](131584,null,Su.f,Su.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275did"](7,802816,null,0,Su.b,[l.Injector,Su.f,Su.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"]},null),l["\u0275pod"](8,{workPackage:0,group:1,query:2})],function(e,n){var t=n.component;e(n,5,0,t.attributeGroupComponent(n.context.$implicit));var l=e(n,8,0,t.workPackage,n.context.$implicit,n.context.$implicit.query);e(n,7,0,l)},function(e,n){e(n,0,0,n.component.shouldHideGroup(n.context.$implicit),n.context.$implicit.name),e(n,3,0,n.context.$implicit.name)})}function Hp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,24,"div",[["class","work-package--single-view"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Dp)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,8,"div",[["class","wp-info-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Fp)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ap)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Vp)),l["\u0275did"](9,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](10,0,null,null,1,"wp-custom-actions",[["class","custom-actions"]],null,null,null,xp,Rp)),l["\u0275did"](11,49152,null,0,Sp,[],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Np)),l["\u0275did"](13,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,$p)),l["\u0275did"](15,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](16,0,null,null,6,"div",[["class","attributes-group description-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](19,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,2,"div",[["class","single-attribute work-packages--details--description"]],null,null,null,null,null)),(e()(),l["\u0275eld"](21,0,null,null,1,"wp-edit-field",[],null,null,null,ha,pa)),l["\u0275did"](22,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"],displayPlaceholder:[3,"displayPlaceholder"],isDropTarget:[4,"isDropTarget"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,qp)),l["\u0275did"](24,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,2,0,t.workPackage.isNew),e(n,5,0,!t.workPackage.isNew),e(n,7,0,!t.workPackage.isNew),e(n,9,0,!t.workPackage.isNew),e(n,11,0,t.workPackage),e(n,13,0,t.projectContext.field),e(n,15,0,!t.workPackage.isNew&&!t.projectContext.matches);e(n,22,0,"description",t.workPackage.id,"-no-label",t.text.description.placeholder,!0),e(n,24,0,t.groupedFields,t.trackByName)},function(e,n){e(n,19,0,n.component.text.fields.description)})}function Bp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","work-packages--attachments attributes-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[["class","work-packages--atachments-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"attachment-list",[],null,null,null,yi,gi)),l["\u0275did"](6,638976,null,0,fi,[l.ElementRef,ee],{resource:[0,"resource"],selfDestroy:[1,"selfDestroy"]},null),(e()(),l["\u0275eld"](7,0,null,null,1,"attachments-upload",[["class","hide-when-print"]],null,null,null,Ci,wi)),l["\u0275did"](8,114688,null,0,bi,[U.a,Ke,Ge,l.ElementRef,ee],{resource:[0,"resource"]},null)],function(e,n){var t=n.component;e(n,6,0,t.workPackage,!0),e(n,8,0,t.workPackage)},function(e,n){e(n,4,0,n.component.text.attachments.label)})}function Wp(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Hp)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Bp)),l["\u0275did"](3,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage),e(n,3,0,t.workPackage.canAddAttachments||t.workPackage.hasAttachments)},null)}l["\u0275ccf"]("wp-single-view",Ep,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-single-view",[],null,null,null,Wp,Op)),l["\u0275did"](1,245760,null,0,Ep,[U.a,T,R,u,en,Zn,ta,Oe,Bn],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var zp=function(e){function n(n,t,l,i,o,r,a){var u=e.call(this,n,a.params.workPackageId)||this;return u.injector=n,u.states=t,u.firstRoute=l,u.keepTab=i,u.wpTableSelection=o,u.wpTableFocus=r,u.$state=a,u.observeWorkPackage(),u}return r.d(n,e),n.prototype.initializeTexts=function(){e.prototype.initializeTexts.call(this),this.text.full_view={button_more:this.I18n.t("js.button_more")}},n.prototype.init=function(){e.prototype.init.call(this),this.wpTableFocus.updateFocus(this.workPackage.id),this.setWorkPackageScopeProperties(this.workPackage),this.text.goToList=this.I18n.t("js.button_back_to_list_view")},n.prototype.goToList=function(){this.$state.go("work-packages.list",this.$state.params)},n.prototype.setWorkPackageScopeProperties=function(e){this.isWatched=e.hasOwnProperty("unwatch"),this.displayWatchButton=e.hasOwnProperty("unwatch")||e.hasOwnProperty("watch"),e.watchers&&(this.watchers=e.watchers.elements),this.type=e.type,this.author=e.author,this.authorPath=this.author.showUserPath,this.authorActive=this.author.isActive,this.attachments=e.attachments.elements},n}(Yd),Qp=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Up(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-watcher-button",[],null,null,null,Vd,Dd)),l["\u0275did"](2,245760,null,0,Od,[U.a,Ed,Oe],{workPackage:[0,"workPackage"],showText:[1,"showText"]},null)],function(e,n){e(n,2,0,n.component.workPackage,!1)},null)}function Kp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"li",[["uiSref","work-packages.show.watchers"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,1).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](1,737280,[[3,4]],0,Xc.b,[d.P,[2,Xc.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](2,{workPackageId:0}),l["\u0275did"](3,1196032,null,1,ed.a,[d.Q],null,null),l["\u0275qud"](603979776,3,{_srefs:1}),l["\u0275did"](5,147456,null,0,nd.a,[ed.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,1,"wp-watchers-count",[],null,null,null,od,ld)),l["\u0275did"](8,245760,null,0,td,[Oe],{wpId:[0,"wpId"]},null)],function(e,n){var t=n.component,l=e(n,2,0,t.workPackage.id);e(n,1,0,"work-packages.show.watchers",l);e(n,5,0,"selected"),e(n,8,0,t.workPackage.id)},function(e,n){e(n,6,0,n.component.text.tabs.watchers)})}function Yp(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,63,"div",[["class","work-packages--show-view"],["wp-edit-field-group",""]],null,null,null,_d,jd)),l["\u0275did"](1,245760,null,0,Wr,[u,l.Injector,Gn,Zn,Ze,Er,Dr,d.O,Ke,d.G,U.a],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](2,0,null,0,1,"wp-breadcrumb",[],null,null,null,Id,bd)),l["\u0275did"](3,49152,null,0,vd,[U.a],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](4,0,null,0,25,"div",[["class","toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,24,"div",[["id","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,9,"div",[["class","wp-show--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,4,"div",[["class","wp-show--back-button hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,3,"accessible-by-keyboard",[["linkClass","work-packages-list-view-button button"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.goToList()&&l);return l},Dt,Ot)),l["\u0275did"](9,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](10,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-back-up"]],null,null,null,Ct,wt)),l["\u0275did"](11,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](12,0,null,null,3,"ul",[["class","subject-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,2,"li",[["class","subject-header-inner"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,1,"wp-subject",[],null,null,null,xd,Rd)),l["\u0275did"](15,245760,null,0,Sd,[d.Q,Oe],null,null),(e()(),l["\u0275eld"](16,0,null,null,13,"ul",[["class","toolbar-items hide-when-print"],["id","toolbar-items"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,1,"wp-create-button",[["stateName","work-packages.new"]],null,null,null,dp,up)),l["\u0275did"](19,114688,null,0,ap,[d.G,T,U.a],{stateName:[0,"stateName"],allowed:[1,"allowed"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Up)),l["\u0275did"](21,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](22,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,$l,Nl)),l["\u0275did"](24,49152,null,0,Ll,[U.a],null,null),(e()(),l["\u0275eld"](25,0,null,null,4,"li",[["class","toolbar-item action_menu_main"],["id","action-show-more-dropdown-menu"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,3,"button",[["class","button dropdown-relative toolbar-icon"],["wpSingleContextMenu",""]],[[1,"title",0]],null,null,null,null)),l["\u0275did"](27,4210688,null,0,Ld,[Bn,d.G,R,l.ElementRef,On.b,ca,Xe],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](28,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-show-more"]],null,null,null,Ct,wt)),l["\u0275did"](29,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](30,0,null,0,33,"div",[["class","work-packages-full-view--split-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](31,0,null,null,3,"div",[["class","work-packages-full-view--split-left"]],null,null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,2,"div",[["class","work-packages--panel-inner"]],null,null,null,null,null)),(e()(),l["\u0275eld"](33,0,null,null,1,"wp-single-view",[],null,null,null,Wp,Op)),l["\u0275did"](34,245760,null,0,Ep,[U.a,T,R,u,en,Zn,ta,Oe,Bn],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](35,0,null,null,28,"div",[["class","work-packages-full-view--split-right"]],null,null,null,null,null)),(e()(),l["\u0275eld"](36,0,null,null,24,"div",[["class","work-packages--panel-inner"]],null,null,null,null,null)),(e()(),l["\u0275eld"](37,0,null,null,1,"span",[["class","hidden-for-sighted"],["focus",""],["tabindex","-1"]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](38,4210688,null,0,kr,[p.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275eld"](39,0,null,null,19,"div",[["id","tabs"]],null,null,null,null,null)),(e()(),l["\u0275eld"](40,0,null,null,18,"ul",[["class","tabrow"]],null,null,null,null,null)),(e()(),l["\u0275eld"](41,0,null,null,6,"li",[["uiSref","work-packages.show.activity"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,42).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](42,737280,[[1,4]],0,Xc.b,[d.P,[2,Xc.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](43,{workPackageId:0}),l["\u0275did"](44,1196032,null,1,ed.a,[d.Q],null,null),l["\u0275qud"](603979776,1,{_srefs:1}),l["\u0275did"](46,147456,null,0,nd.a,[ed.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](47,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](48,0,null,null,8,"li",[["uiSref","work-packages.show.relations"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,49).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](49,737280,[[2,4]],0,Xc.b,[d.P,[2,Xc.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](50,{workPackageId:0}),l["\u0275did"](51,1196032,null,1,ed.a,[d.Q],null,null),l["\u0275qud"](603979776,2,{_srefs:1}),l["\u0275did"](53,147456,null,0,nd.a,[ed.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["\u0275eld"](54,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](55,0,null,null,1,"wp-relations-count",[],null,null,null,zd,Bd)),l["\u0275did"](56,245760,null,0,Hd,[Oe,Me],{wpId:[0,"wpId"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Kp)),l["\u0275did"](58,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](59,16777216,null,null,1,"div",[["class","tabcontent"],["ui-view",""]],null,null,null,st.c,st.a)),l["\u0275did"](60,245760,null,0,Ql.a,[d.P,"UIView.PARENT_INJECT",l.ViewContainerRef],{_name:[0,"_name"]},null),(e()(),l["\u0275eld"](61,0,null,null,2,"div",[["class","work-packages-full-view--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](62,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["\u0275nov"](e,63).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["\u0275nov"](e,63).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,63).handleMouseUp(t)&&i);return i},Qu,zu)),l["\u0275did"](63,245760,null,0,Wu,[Bu,l.ElementRef,d.O],{elementClass:[0,"elementClass"],localStorageKey:[1,"localStorageKey"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage),e(n,3,0,t.workPackage);e(n,9,0,"work-packages-list-view-button button",t.text.goToList,t.text.goToList);e(n,11,0,"button--icon icon-back-up"),e(n,15,0);e(n,19,0,"work-packages.new",!(!t.workPackage.addChild&&!t.workPackage.$links.copy)),e(n,21,0,t.displayWatchButton),e(n,27,0,t.workPackage);e(n,29,0,"button--icon icon-show-more"),e(n,34,0,t.workPackage);e(n,38,0,"");var l=e(n,43,0,t.workPackage.id);e(n,42,0,"work-packages.show.activity",l);e(n,46,0,"selected");var i=e(n,50,0,t.workPackage.id);e(n,49,0,"work-packages.show.relations",i);e(n,53,0,"selected"),e(n,56,0,t.workPackage.id),e(n,58,0,t.canViewWorkPackageWatchers());e(n,60,0,"");e(n,63,0,"work-packages-full-view--split-right","openProject-fullViewFlexBasis")},function(e,n){var t=n.component;e(n,26,0,t.text.full_view.button_more),e(n,37,0,t.focusAnchorLabel),e(n,47,0,t.text.tabs.activity),e(n,54,0,t.text.tabs.relations)})}function Gp(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Yp)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}var Zp=l["\u0275ccf"]("wp-full-view-entry",zp,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-full-view-entry",[["class","work-packages-page--ui-view"]],null,null,null,Gp,Qp)),l["\u0275did"](1,180224,null,0,zp,[l.Injector,u,Gd,dn,Er,Dr,d.G],null,null)],null,null)},{},{},[]),Jp=function(){function e(){}return e.prototype.ngOnInit=function(){this.activityHtmlId="activity-"+this.activityNo,this.activityLabel="#"+this.activityNo},e}();var Xp=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function eh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"a",[["uiSref","work-packages.show.activity"]],[[8,"id",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,2).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,Xc.a,[l.ElementRef,l.Renderer2],null,null),l["\u0275did"](2,737280,null,0,Xc.b,[d.P,[2,Xc.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](3,{workPackageId:0,"#":1})],function(e,n){var t=n.component,l=e(n,3,0,t.workPackage.id,t.activityHtmlId);e(n,2,0,"work-packages.show.activity",l)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"",t.activityHtmlId,"-link"),t.activityLabel)})}l["\u0275ccf"]("activity-link",Jp,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"activity-link",[],null,null,null,eh,Xp)),l["\u0275did"](1,114688,null,0,Jp,[],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",activityNo:"activityNo"},{},[]);var nh=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(e){var n=this.pathHelper.api.v3.users.id(e).toString();return this.halResourceService.get(n).toPromise()},e}(),th=function(e){function n(n,t){var l=e.call(this)||this;return l.states=n,l.userDmService=t,l}return r.d(n,e),n.prototype.load=function(e){return this.userDmService.load(e)},n.prototype.loadAll=function(e){var n=this,t=e.map(function(e){return n.load(e)});return Promise.all(t).then(function(){})},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.users},enumerable:!0,configurable:!0}),n}(Te),lh=function(){function e(e,n,t){this.I18n=e,this.timezoneService=n,this.userCacheService=t}return e.prototype.ngOnInit=function(){this.loadAuthor(),this.project=this.workPackage.project,this.revision=this.activity.identifier,this.message=this.activity.message.html;var e=this.activity.showRevision.$link.href,n=this.activity.formattedIdentifier,t=document.createElement("a");t.href=e,t.title=this.revision,t.textContent=this.I18n.t("js.label_committed_link",{revision_identifier:n}),this.revisionLink=this.I18n.t("js.label_committed_at",{committed_revision_link:t.outerHTML,date:this.timezoneService.formattedDatetime(this.activity.createdAt)})},e.prototype.loadAuthor=function(){var e=this;void 0===this.activity.author?this.userName=this.activity.authorName:this.userCacheService.require(this.activity.author.idFromLink).then(function(n){e.userId=n.id,e.userName=n.name,e.userAvatar=n.avatar,e.userActive=n.isActive,e.userPath=n.showUser.href,e.userLabel=e.I18n.t("js.label_author",{user:e.userName})})},e}(),ih=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function oh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"img",[["alt","Avatar"],["class","avatar"]],[[1,"src",4],[1,"title",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.userAvatar,t.userName)})}function rh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","user"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"a",[],[[1,"href",4],[1,"aria-label",0],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.userPath,t.userLabel,t.userName)})}function ah(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","user"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.userName)})}function uh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,12,"div",[["class","work-package-details-activities-activity-contents"],["tabindex","0"]],[[1,"aria-label",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","comments-number"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"activity-link",[],null,null,null,eh,Xp)),l["\u0275did"](3,114688,null,0,Jp,[],{workPackage:[0,"workPackage"],activityNo:[1,"activityNo"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,oh)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,rh)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ah)),l["\u0275did"](9,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](10,0,null,null,0,"span",[["class","revision-activity--revision-link date"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,1,"span",[["class","user-comment wiki"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,0,"span",[["class","message"]],[[8,"innerHTML",1]],null,null,null,null))],function(e,n){var t=n.component;e(n,3,0,t.workPackage,t.activityNo),e(n,5,0,t.userAvatar),e(n,7,0,t.userActive),e(n,9,0,!t.userActive)},function(e,n){var t=n.component;e(n,0,0,t.activityLabel),e(n,10,0,t.revisionLink),e(n,12,0,t.message)})}function sh(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,uh)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["\u0275ccf"]("revision-activity",lh,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"revision-activity",[],null,null,null,sh,ih)),l["\u0275did"](1,114688,null,0,lh,[U.a,Kn,th],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",activity:"activity",activityNo:"activityNo",activityLabel:"activityLabel"},{},[]);var ch=function(){function e(e,n,t){this.I18n=e,this.wpNotificationsService=n,this.NotificationsService=t,this.quoteEvents=new x.a}return e.prototype.createComment=function(e,n){var t=this;return e.addComment({comment:n},{"Content-Type":"application/json; charset=UTF-8"}).catch(function(n){return t.errorAndReject(n,e)})},e.prototype.updateComment=function(e,n){var t=this;JSON.stringify({comment:n});return e.update({comment:n},{"Content-Type":"application/json; charset=UTF-8"}).then(function(e){return t.NotificationsService.addSuccess(t.I18n.t("js.work_packages.comment_updated")),e}).catch(function(e){return t.errorAndReject(e)})},e.prototype.errorAndReject=function(e,n){return this.wpNotificationsService.handleRawError(e,n),Promise.reject(e)},e}(),dh=function(e){function n(n,t){var l=e.call(this)||this;return l.elementRef=n,l.injector=t,l.fieldName="comment",l.handler=l,l.inEdit=!1,l.inEditMode=!1,l.inFlight=!1,l.onDestroy=new x.a,l}return r.d(n,e),n.prototype.ngOnInit=function(){this.changeset=new Jn(this.injector,this.workPackage)},n.prototype.reset=function(e){void 0===e&&(e=""),e.length>0&&(e+="\n"),this.changeset.setValue("comment",{raw:e})},Object.defineProperty(n.prototype,"schema",{get:function(){return{name:I18n.t("js.label_comment"),writable:!0,required:!1,type:"_comment",hasDefault:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rawComment",{get:function(){return _.get(this.commentValue,"raw","")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"commentValue",{get:function(){return this.changeset.value("comment")},enumerable:!0,configurable:!0}),n.prototype.handleUserCancel=function(){this.deactivate(!0)},Object.defineProperty(n.prototype,"active",{get:function(){return this.inEdit},enumerable:!0,configurable:!0}),n.prototype.activate=function(e){this.inEdit=!0,this.reset(e)},n.prototype.deactivate=function(e){this.inEdit=!1,this.onDestroy.next(),this.onDestroy.complete()},n.prototype.focus=function(){var e=this.elementRef.nativeElement.querySelector(".inplace-editing--trigger-container");e&&e.focus()},n.prototype.handleUserKeydown=function(e,n){},n.prototype.isChanged=function(){return!1},n.prototype.stopPropagation=function(e){return!1},n}(eo),ph=function(e){function n(n,t,l,i,o,r,a,u,s){var c=e.call(this,n,t)||this;return c.elementRef=n,c.injector=t,c.PathHelper=l,c.wpLinkedActivities=i,c.commentService=o,c.wpCacheService=r,c.ConfigurationService=a,c.userCacheService=u,c.I18n=s,c.userCanEdit=!1,c.userCanQuote=!1,c.details=[],c.focused=!1,c.text={label_created_on:c.I18n.t("js.label_created_on"),label_updated_on:c.I18n.t("js.label_updated_on"),quote_comment:c.I18n.t("js.label_quote_comment"),edit_comment:c.I18n.t("js.label_edit_comment")},c.accessibilityModeEnabled=c.ConfigurationService.accessibilityModeEnabled(),c}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.isComment="Activity::Comment"===this.activity._type,this.$element=jQuery(this.elementRef.nativeElement),this.reset(),this.userCanEdit=!!this.activity.update,this.userCanQuote=!!this.workPackage.addComment,this.postedComment?this.fieldLabel=this.I18n.t("js.label_activity_with_comment_no",{activityNo:this.activityNo}):this.fieldLabel=this.I18n.t("js.label_activity_no",{activityNo:this.activityNo}),this.$element.bind("focusin",this.focus.bind(this)),this.$element.bind("focusout",this.blur.bind(this)),_.each(this.activity.details,function(e){n.details.push(e.html)}),this.userCacheService.require(this.activity.user.idFromLink).then(function(e){n.userId=e.id,n.userName=e.name,n.userAvatar=e.avatar,n.userActive=e.isActive,n.userPath=e.showUser.href,n.userLabel=n.I18n.t("js.label_author",{user:n.userName})})},n.prototype.shouldHideIcons=function(){return!(this.isComment&&(this.focussing()||this.accessibilityModeEnabled))},Object.defineProperty(n.prototype,"postedComment",{get:function(){return this.activity.comment.html},enumerable:!0,configurable:!0}),n.prototype.ngAfterViewInit=function(){window.location.hash==="activity-"+this.activityNo&&this.elementRef.nativeElement.scrollIntoView(!0)},n.prototype.activate=function(){e.prototype.activate.call(this,this.activity.comment.raw)},n.prototype.handleUserSubmit=function(){return this.changeset.inFlight||!this.rawComment?Promise.resolve():this.updateComment()},n.prototype.quoteComment=function(){this.commentService.quoteEvents.next(this.quotedText(this.activity.comment.raw))},n.prototype.updateComment=function(){return r.b(this,void 0,void 0,function(){var e=this;return r.e(this,function(n){switch(n.label){case 0:return[4,this.onSubmit()];case 1:return n.sent(),[2,this.commentService.updateComment(this.activity,this.rawComment||"").then(function(){e.wpLinkedActivities.require(e.workPackage,!0),e.wpCacheService.updateWorkPackage(e.workPackage),e.deactivate(!0)})]}})})},n.prototype.focusEditIcon=function(){jQuery(".edit-activity--"+this.activityNo+" a").focus()},n.prototype.focus=function(){var e=this;setTimeout(function(){return e.focused=!0})},n.prototype.blur=function(){var e=this;setTimeout(function(){return e.focused=!1})},n.prototype.focussing=function(){return this.focused},n.prototype.quotedText=function(e){var n=e.split("\n").map(function(e){return"\n> "+e}).join("");return this.userName+" wrote:\n"+n},Object.defineProperty(n.prototype,"htmlId",{get:function(){return"user_activity_edit_field_"+this.activityNo},enumerable:!0,configurable:!0}),n.prototype.deactivate=function(n){e.prototype.deactivate.call(this,n),n&&this.focusEditIcon()},n}(dh),hh=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function fh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"img",[["alt","Avatar"],["class","avatar avatar--fallback"],["data-avatar-fallback-remove","true"]],[[1,"src",4],[1,"title",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.userAvatar,t.userName)})}function gh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","user"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"a",[],[[1,"href",4],[1,"aria-label",0],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.userPath,t.userLabel,t.userName)})}function mh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"span",[["class","user"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.userName)})}function vh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"accessible-by-keyboard",[],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.quoteComment()&&l);return l},Dt,Ot)),l["\u0275did"](1,49152,null,0,Et,[],{linkTitle:[0,"linkTitle"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","action-icon icon-quote"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.quote_comment);e(n,3,0,"action-icon icon-quote",t.text.quote_comment)},null)}function yh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"accessible-by-keyboard",[],[[8,"className",0]],[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.activate()&&l);return l},Dt,Ot)),l["\u0275did"](1,49152,null,0,Et,[],{linkTitle:[0,"linkTitle"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","action-icon icon-edit"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.edit_comment);e(n,3,0,"action-icon icon-edit",t.text.edit_comment)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"edit-activity--",t.activityNo,""))})}function bh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","inplace-edit"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","user-comment--form inplace-edit--write-value"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"edit-form-portal",[],null,null,null,mo,ho)),l["\u0275did"](3,4440064,null,0,po,[l.Injector,co,l.ElementRef],{schemaInput:[0,"schemaInput"],changesetInput:[1,"changesetInput"],editFieldHandler:[2,"editFieldHandler"]},null)],function(e,n){var t=n.component;e(n,3,0,t.schema,t.changeset,t.handler)},null)}function wh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","message"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.postedComment)})}function kh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[["class","message"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function Ch(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ul",[["class","work-package-details-activities-messages"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,kh)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.details)},null)}function Ph(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,27,"div",[["class","work-package-details-activities-activity-contents"],["tabindex","0"]],[[1,"aria-label",0]],[[null,"mouseenter"],[null,"mouseleave"]],function(e,n,t){var l=!0,i=e.component;"mouseenter"===n&&(l=!1!==i.focus()&&l);"mouseleave"===n&&(l=!1!==i.blur()&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,fh)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,gh)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,mh)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,3,"span",[["class","date"]],null,null,null,null,null)),(e()(),l["\u0275ted"](8,null,[" "," "])),(e()(),l["\u0275eld"](9,0,null,null,1,"op-date-time",[],null,null,null,pt,dt)),l["\u0275did"](10,114688,null,0,ct,[Kn],{dateTimeValue:[0,"dateTimeValue"]},null),(e()(),l["\u0275eld"](11,0,null,null,7,"div",[["class","comments-number"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,1,"activity-link",[],null,null,null,eh,Xp)),l["\u0275did"](13,114688,null,0,Jp,[],{workPackage:[0,"workPackage"],activityNo:[1,"activityNo"]},null),(e()(),l["\u0275eld"](14,0,null,null,4,"div",[["class","comments-icons"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,vh)),l["\u0275did"](16,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,yh)),l["\u0275did"](18,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](19,0,null,null,8,"div",[["class","user-comment"]],null,null,null,null,null)),l["\u0275did"](20,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](21,{wiki:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,bh)),l["\u0275did"](23,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,wh)),l["\u0275did"](25,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ch)),l["\u0275did"](27,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.userAvatar),e(n,4,0,t.userActive),e(n,6,0,!t.userActive),e(n,10,0,t.activity.createdAt),e(n,13,0,t.workPackage,t.activityNo),e(n,16,0,t.userCanQuote),e(n,18,0,t.userCanEdit);var l=e(n,21,0,!t.inEdit);e(n,20,0,"user-comment",l),e(n,23,0,t.inEdit),e(n,25,0,!t.inEdit&&t.isComment),e(n,27,0,!t.isInitial)},function(e,n){var t=n.component;e(n,0,0,t.fieldLabel||t.activityLabel),e(n,8,0,t.isInitial?t.text.label_created_on:t.text.label_updated_on),e(n,14,0,t.shouldHideIcons())})}function Ih(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Ph)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["\u0275ccf"]("user-activity",ph,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-activity",[],null,null,null,Ih,hh)),l["\u0275did"](1,4308992,null,0,ph,[l.ElementRef,l.Injector,R,Yn,ch,Oe,Ke,th,U.a],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",activity:"activity",activityNo:"activityNo",activityLabel:"activityLabel",isInitial:"isInitial"},{},[]);var jh=function(){function e(e,n){this.PathHelper=e,this.I18n=n}return e.prototype.ngOnInit=function(){this.projectId=this.workPackage.project.idFromLink,this.activityType=this.activity._type,this.activityLabel=this.I18n.t("js.label_activity_no",{activityNo:this.activityNo})},e}(),_h=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Sh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"revision-activity",[],null,null,null,sh,ih)),l["\u0275did"](1,114688,null,0,lh,[U.a,Kn,th],{workPackage:[0,"workPackage"],activity:[1,"activity"],activityNo:[2,"activityNo"],activityLabel:[3,"activityLabel"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage,t.activity,t.activityNo,t.activityLabel)},null)}function Rh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"user-activity",[],null,null,null,Ih,hh)),l["\u0275did"](1,4308992,null,0,ph,[l.ElementRef,l.Injector,R,Yn,ch,Oe,Ke,th,U.a],{workPackage:[0,"workPackage"],activity:[1,"activity"],activityNo:[2,"activityNo"],activityLabel:[3,"activityLabel"],isInitial:[4,"isInitial"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage,t.activity,t.activityNo,t.activityLabel,t.isInitial)},null)}function Th(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[],null,null,null,null,null)),l["\u0275did"](2,16384,null,0,yt.n,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Sh)),l["\u0275did"](4,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Rh)),l["\u0275did"](6,16384,null,0,yt.p,[l.ViewContainerRef,l.TemplateRef,yt.n],null,null)],function(e,n){e(n,2,0,n.component.activityType);e(n,4,0,"Revision")},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"activity-",t.activityNo,""))})}l["\u0275ccf"]("activity-entry",jh,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"activity-entry",[],null,null,null,Th,_h)),l["\u0275did"](1,114688,null,0,jh,[R,U.a],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",activity:"activity",activityNo:"activityNo",isInitial:"isInitial"},{},[]);var xh=function(e){function n(n,t,l,i,o,r,a,u,s,c){var d=e.call(this,n,t)||this;return d.elementRef=n,d.injector=t,d.commentService=l,d.wpLinkedActivities=i,d.ConfigurationService=o,d.loadingIndicator=r,d.wpCacheService=a,d.wpNotificationsService=u,d.NotificationsService=s,d.I18n=c,d.text={editTitle:d.I18n.t("js.label_add_comment_title"),addComment:d.I18n.t("js.label_add_comment"),cancelTitle:d.I18n.t("js.label_cancel_comment"),placeholder:d.I18n.t("js.label_add_comment_title")},d.fieldLabel=d.text.editTitle,d.inFlight=!1,d}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.canAddComment=!!this.workPackage.addComment,this.showAbove=this.ConfigurationService.commentsSortedInDescendingOrder(),this.commentService.quoteEvents.pipe(Object(an.b)(this)).subscribe(function(e){n.activate(e),n.commentContainer.nativeElement.scrollIntoView()})},n.prototype.startDragOverActivation=function(e){return!!this.active||(this.activate(),e.preventDefault(),!1)},n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"htmlId",{get:function(){return"wp-comment-field"},enumerable:!0,configurable:!0}),n.prototype.activate=function(n){e.prototype.activate.call(this,n),this.showAbove||this.scrollToBottom()},n.prototype.deactivate=function(e){e&&this.focus(),this.inEdit=!1},n.prototype.handleUserSubmit=function(){return r.b(this,void 0,void 0,function(){var e=this;return r.e(this,function(n){switch(n.label){case 0:return this.inFlight||!this.rawComment?[2,Promise.resolve()]:(this.inFlight=!0,[4,this.onSubmit()]);case 1:return n.sent(),[2,this.loadingIndicator.wpDetails.promise=this.commentService.createComment(this.workPackage,this.commentValue).then(function(){e.inEdit=!1,e.NotificationsService.addSuccess(e.I18n.t("js.work_packages.comment_added")),e.wpLinkedActivities.require(e.workPackage,!0),e.wpCacheService.updateWorkPackage(e.workPackage),e.inFlight=!1,e.focus()}).catch(function(n){e.inFlight=!1,n instanceof ze?e.wpNotificationsService.showError(n,e.workPackage):e.NotificationsService.addError(e.I18n.t("js.work_packages.comment_send_failed"))})]}})})},n.prototype.scrollToBottom=function(){var e=jQuery(this.elementRef.nativeElement).scrollParent()[0];e&&setTimeout(function(){e.scrollTop=e.scrollHeight},400)},n}(dh),Eh=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Oh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,16777216,null,null,1,null,null,null,null,null,null,null)),l["\u0275did"](1,540672,null,0,yt.q,[l.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,1,0,n.component.template)},null)}function Dh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"edit-form-portal",[],null,null,null,mo,ho)),l["\u0275did"](1,4440064,null,0,po,[l.Injector,co,l.ElementRef],{schemaInput:[0,"schemaInput"],changesetInput:[1,"changesetInput"],editFieldHandler:[2,"editFieldHandler"]},null)],function(e,n){var t=n.component;e(n,1,0,t.schema,t.changeset,t.handler)},null)}function Fh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","inplace-edit--read"]],null,[[null,"dragover"]],function(e,n,t){var l=!0,i=e.component;"dragover"===n&&(l=!1!==i.startDragOverActivation(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"accessible-by-keyboard",[["class","inplace-editing--trigger-container"],["linkClass","inplace-editing--trigger-link"],["spanClass","inplace-editing--container wp-edit-field--display-field"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.activate()&&l);return l},Dt,Ot)),l["\u0275did"](2,49152,null,0,Et,[],{linkClass:[0,"linkClass"],spanClass:[1,"spanClass"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](3,0,null,0,1,"span",[["class","inplace-edit--read-value -default"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,0,2,"span",[["class","inplace-edit--icon-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-edit"]],null,null,null,Ct,wt)),l["\u0275did"](7,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,2,0,"inplace-editing--trigger-link","inplace-editing--container wp-edit-field--display-field",t.text.editTitle);e(n,7,0,"icon-edit",t.text.editTitle)},function(e,n){e(n,4,0,n.component.text.placeholder)})}function Ah(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,[[1,0],["commentContainer",1]],null,5,"div",[["class","work-package--details--long-field work-packages--activity--add-comment hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"div",[["class","wp-edit-field inplace-edit"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Dh)),l["\u0275did"](3,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Fh)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.active),e(n,5,0,!t.active)},null)}function Vh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,16777216,null,null,1,null,null,null,null,null,null,null)),l["\u0275did"](1,540672,null,0,yt.q,[l.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,1,0,n.component.template)},null)}function Mh(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{commentContainer:0}),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[["id","work-package-activites-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,6,"div",[["id","work-package-comment-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Oh)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ah)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Vh)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,!t.showAbove),e(n,6,0,t.canAddComment),e(n,8,0,t.showAbove)},null)}l["\u0275ccf"]("work-package-comment",xh,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"work-package-comment",[],null,null,null,Mh,Eh)),l["\u0275did"](1,245760,null,1,xh,[l.ElementRef,l.Injector,ch,Yn,Ke,Ue,Oe,Ze,Ge,U.a],null,null),l["\u0275qud"](335544320,1,{template:0})],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var Lh=function(){function e(e,n,t){this.wpCacheService=e,this.I18n=n,this.wpActivity=t,this.unfilteredActivities=[],this.visibleActivities=[],this.onlyComments=!1,this.text={commentsOnly:this.I18n.t("js.label_activity_show_only_comments"),showAll:this.I18n.t("js.label_activity_show_all")},this.reverse=t.isReversed,this.togglerText=this.text.commentsOnly}return e.prototype.ngOnInit=function(){var e=this;this.wpCacheService.loadWorkPackage(this.workPackageId).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.workPackage=n,e.wpActivity.require(e.workPackage).then(function(n){e.updateActivities(n)})})},e.prototype.ngOnDestroy=function(){},e.prototype.updateActivities=function(e){var n=this;this.unfilteredActivities=e;var t=this.getVisibleActivities();this.visibleActivities=t.map(function(e,t){return n.info(e,t)}),this.showToggler=this.shouldShowToggler()},e.prototype.shouldShowToggler=function(){var e=this.unfilteredActivities.length,n=this.getActivitiesWithComments().length;return e>1&&n>0&&n<this.unfilteredActivities.length},e.prototype.getVisibleActivities=function(){return this.onlyComments?this.getActivitiesWithComments():this.unfilteredActivities},e.prototype.getActivitiesWithComments=function(){return this.unfilteredActivities.filter(function(e){return!!_.get(e,"comment.html")})},e.prototype.toggleComments=function(){this.onlyComments=!this.onlyComments,this.updateActivities(this.unfilteredActivities),this.onlyComments?this.togglerText=this.text.showAll:this.togglerText=this.text.commentsOnly},e.prototype.info=function(e,n){return this.wpActivity.info(this.unfilteredActivities,e,n)},e}(),Nh=function(e){function n(n,t,l,i){var o=e.call(this,n,l,i)||this;return o.wpCacheService=n,o.$transition=t,o.I18n=l,o.wpActivity=i,o.tabName=o.I18n.t("js.work_packages.tabs.activity"),o.trackByHref=pr.trackByHrefAndProperty("version"),o.workPackageId=o.$transition.params("to").workPackageId,o}return r.d(n,e),n.prototype.ngOnDestroy=function(){},n}(Lh),$h=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function qh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"accessible-by-keyboard",[["linkClass","activity-comments--toggler button -small -transparent"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.toggleComments()&&l);return l},Dt,Ot)),l["\u0275did"](1,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkAriaLabel:[1,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,1,0,"activity-comments--toggler button -small -transparent",n.component.togglerText)},function(e,n){e(n,2,0,n.component.togglerText)})}function Hh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"h3",[["class","activity-date"]],null,null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-with-toggler":0}),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","activity-date--label"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,[[1,2]],null,1,null,qh)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,2,0,n.parent.context.first&&t.showToggler);e(n,1,0,"activity-date",l),e(n,5,0,n.parent.context.first&&t.showToggler)},function(e,n){e(n,3,0,n.parent.context.$implicit.date)})}function Bh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","work-package-details-activities-activity"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,[[1,2]],null,1,null,Hh)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"activity-entry",[],null,null,null,Th,_h)),l["\u0275did"](4,114688,null,0,jh,[R,U.a],{workPackage:[0,"workPackage"],activity:[1,"activity"],activityNo:[2,"activityNo"],isInitial:[3,"isInitial"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.first||n.context.$implicit.isNextDate);var l=t.workPackage,i=n.context.$implicit.activity,o=n.context.$implicit.number(n.context.$implicit.isReversed),r=n.context.$implicit.isInitial();e(n,4,0,l,i,o,r)},null)}function Wh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","detail-activity"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","work-package-details-activities-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,[[1,2]],null,1,null,Bh)),l["\u0275did"](3,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,3,0,t.visibleActivities,t.trackByHref)},null)}function zh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"work-package-comment",[],null,null,null,Mh,Eh)),l["\u0275did"](1,245760,null,1,xh,[l.ElementRef,l.Injector,ch,Yn,Ke,Ue,Oe,Ze,Ge,U.a],{workPackage:[0,"workPackage"]},null),l["\u0275qud"](603979776,1,{template:0}),(e()(),l["\u0275and"](0,[[1,2]],null,0,null,Wh))],function(e,n){e(n,1,0,n.component.workPackage)},null)}var Qh=l["\u0275ccf"]("wp-activity-tab",Nh,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-activity-tab",[],null,null,null,zh,$h)),l["\u0275did"](1,245760,null,0,Nh,[Oe,d.J,U.a,Yn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Uh=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.RELATION_TYPES=function(e){void 0===e&&(e=!0);var n=["relates","duplicates","duplicated","blocks","blocked","precedes","follows","includes","partof","requires","required"];return e&&n.push("parent","children"),n},n.LOCALIZED_RELATION_TYPES=function(e){return void 0===e&&(e=!0),n.RELATION_TYPES(e).map(function(e){return{name:e,label:I18n.t("js.relation_labels."+e)}})},n.DEFAULT=function(){return"relates"},n.prototype.normalizedType=function(e){return this.denormalized(e).relationType},n.prototype.denormalized=function(e){var n=this.to.href===e.$href?"from":"to";return{target:this[n],targetId:this[n].id,relationType:"from"===n?this.reverseType:this.type,reverseRelationType:"from"===n?this.type:this.reverseType}},n.prototype.isInvolved=function(e){return _.values(this.ids).indexOf(e.toString())>=0},Object.defineProperty(n.prototype,"ids",{get:function(){return{from:Br.idFromLink(this.from.href),to:Br.idFromLink(this.to.href)}},enumerable:!0,configurable:!0}),n.prototype.updateDescription=function(e){return this.$links.updateImmediately({description:e})},n.prototype.updateType=function(e){return this.$links.updateImmediately({type:e})},n}(K),Kh=function(){function e(e,n,t,l,i){this.wpCacheService=e,this.wpNotificationsService=n,this.wpRelations=t,this.I18n=l,this.PathHelper=i,this.showRelationInfo=!1,this.showEditForm=!1,this.userInputs={newRelationText:"",showDescriptionEditForm:!1,showRelationTypesForm:!1,showRelationInfo:!1},this.fieldController={handler:{active:!0},required:!1},this.text={cancel:this.I18n.t("js.button_cancel"),save:this.I18n.t("js.button_save"),removeButton:this.I18n.t("js.relation_buttons.remove"),description_label:this.I18n.t("js.relation_buttons.update_description"),toggleDescription:this.I18n.t("js.relation_buttons.toggle_description"),updateRelation:this.I18n.t("js.relation_buttons.update_relation"),placeholder:{description:this.I18n.t("js.placeholders.relation_description")}}}return e.prototype.ngOnInit=function(){this.relation=this.relatedWorkPackage.relatedBy,this.userInputs.newRelationText=this.relation.description||"",this.availableRelationTypes=Uh.LOCALIZED_RELATION_TYPES(!1),this.selectedRelationType=_.find(this.availableRelationTypes,{name:this.relation.normalizedType(this.workPackage)})},Object.defineProperty(e.prototype,"normalizedRelationType",{get:function(){var e=this.relation.normalizedType(this.workPackage);return this.I18n.t("js.relation_labels."+e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relationReady",{get:function(){return this.relatedWorkPackage&&this.relatedWorkPackage.$loaded},enumerable:!0,configurable:!0}),e.prototype.startDescriptionEdit=function(){var e=this;this.userInputs.showDescriptionEditForm=!0,setTimeout(function(){var n=jQuery(e.relationDescriptionTextarea.nativeElement),t=n.val().length;n.focus(),n.prop("selectionStart",t),n.prop("selectionEnd",t)})},e.prototype.handleDescriptionKey=function(e){27===e.which&&this.cancelDescriptionEdit()},e.prototype.cancelDescriptionEdit=function(){this.userInputs.showDescriptionEditForm=!1,this.userInputs.newRelationText=this.relation.description||""},e.prototype.saveDescription=function(){var e=this;this.wpRelations.updateRelation(this.relation,{description:this.userInputs.newRelationText}).then(function(n){e.relation=n,e.relatedWorkPackage.relatedBy=n,e.userInputs.showDescriptionEditForm=!1,e.wpNotificationsService.showSave(e.relatedWorkPackage)})},Object.defineProperty(e.prototype,"showDescriptionInfo",{get:function(){return this.userInputs.showRelationInfo||this.relation.description},enumerable:!0,configurable:!0}),e.prototype.activateRelationTypeEdit=function(){this.groupByWorkPackageType&&(this.userInputs.showRelationTypesForm=!0)},e.prototype.cancelRelationTypeEditOnEscape=function(e){this.userInputs.showRelationTypesForm=!1},e.prototype.saveRelationType=function(){var e=this;this.wpRelations.updateRelationType(this.workPackage,this.relatedWorkPackage,this.relation,this.selectedRelationType.name).then(function(n){e.wpNotificationsService.showSave(e.relatedWorkPackage),e.relatedWorkPackage.relatedBy=n,e.relation=n,e.userInputs.showRelationTypesForm=!1}).catch(function(n){return e.wpNotificationsService.handleRawError(n,e.workPackage)})},e.prototype.toggleUserDescriptionForm=function(){this.userInputs.showDescriptionEditForm=!this.userInputs.showDescriptionEditForm},e.prototype.removeRelation=function(){var e=this;this.wpRelations.removeRelation(this.relation).then(function(){e.wpCacheService.updateWorkPackage(e.relatedWorkPackage),e.wpNotificationsService.showSave(e.relatedWorkPackage)}).catch(function(n){return e.wpNotificationsService.handleRawError(n,e.relatedWorkPackage)})},e}(),Yh=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Gh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.normalizedRelationType)})}function Zh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.relatedWorkPackage.type.name)})}function Jh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"span",[["class","relation-row--type"],["tabindex","0"]],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.activateRelationTypeEdit()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275and"](16777216,null,null,1,null,Gh)),l["\u0275did"](3,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Zh)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"span",[["class","hidden-for-sighted"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,3,0,t.groupByWorkPackageType),e(n,5,0,!t.groupByWorkPackageType)},function(e,n){e(n,6,0,n.component.text.updateRelation)})}function Xh(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.label)})}function ef(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"div",[["class","wp-edit-field inplace-edit"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,8,"select",[["class","wp-inline-edit--field form--select"],["focus",""],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown.escape"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedRelationType=t)&&i);"change"===n&&(i=!1!==o.saveRelationType()&&i);"keydown.escape"===n&&(i=!1!==o.cancelRelationTypeEditOnEscape(t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,qi.p,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.p]),l["\u0275did"](4,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](6,16384,null,0,qi.i,[[4,qi.h]],null,null),l["\u0275did"](7,4210688,null,0,kr,[p.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Xh)),l["\u0275did"](9,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.selectedRelationType);e(n,7,0,""),e(n,9,0,t.availableRelationTypes)},function(e,n){e(n,1,0,l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending)})}function nf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","grid-content medium-5 collapse"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"a",[["class","wp-relations--subject-field"],["uiSref","work-packages.show.relations"]],[[8,"textContent",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["\u0275nov"](e,3).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,Xc.a,[l.ElementRef,l.Renderer2],null,null),l["\u0275did"](3,737280,null,0,Xc.b,[d.P,[2,Xc.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["\u0275pod"](4,{workPackageId:0})],function(e,n){var t=e(n,4,0,n.component.relatedWorkPackage.id);e(n,3,0,"work-packages.show.relations",t)},function(e,n){var t=n.component;e(n,1,0,t.relatedWorkPackage.subjectWithType(),t.normalizedRelationType+" "+t.relatedWorkPackage.subjectWithType())})}function tf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"wp-edit-field-group",[],null,null,null,_d,jd)),l["\u0275did"](1,245760,null,0,Wr,[u,l.Injector,Gn,Zn,Ze,Er,Dr,d.O,Ke,d.G,U.a],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](2,0,null,0,1,"wp-edit-field",[["fieldName","status"]],null,null,null,ha,pa)),l["\u0275did"](3,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.relatedWorkPackage);e(n,3,0,"status",t.relatedWorkPackage.id)},null)}function lf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","relation-row--remove-btn"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.removeRelation(i.relation)&&l);return l},Dt,Ot)),l["\u0275did"](1,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-remove -padded wp-relations--icon"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,"relation-row--remove-btn",t.text.removeButton,t.text.removeButton);e(n,3,0,"icon-remove -padded wp-relations--icon",t.text.removeButton)},null)}function of(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","wp-relation--description-read-value"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.startDescriptionEdit()&&i);return i},null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-placeholder":0}),l["\u0275did"](3,16384,null,0,xt,[],null,{onClick:"accessibleClick"})],function(e,n){var t=e(n,2,0,!n.component.relation.description);e(n,1,0,"wp-relation--description-read-value",t)},function(e,n){var t=n.component;e(n,0,0,t.relation.description||t.text.placeholder.description)})}function rf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","wp-relation--description-wrapper textarea-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,[[1,0],["relationDescriptionTextarea",1]],null,5,"textarea",[["autofocus",""],["class","wp-relation--description-textarea"],["name","description"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,2)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionEnd(t.target.value)&&i);"keyup"===n&&(i=!1!==o.handleDescriptionKey(t)&&i);"ngModelChange"===n&&(i=!1!==(o.userInputs.newRelationText=t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](4,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](6,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](7,0,null,null,1,"edit-field-controls",[],null,[[null,"onSave"],[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.saveDescription()&&l);"onCancel"===n&&(l=!1!==i.cancelDescriptionEdit()&&l);return l},Ko,Qo)),l["\u0275did"](8,49152,null,0,zo,[],{cancelTitle:[0,"cancelTitle"],saveTitle:[1,"saveTitle"],field:[2,"field"]},{onSave:"onSave",onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,4,0,"description",t.userInputs.newRelationText),e(n,8,0,t.text.cancel,t.text.save,t.fieldController)},function(e,n){e(n,1,0,l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending)})}function af(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","grid-block hierarchy-item description-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,of)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,rf)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.userInputs.showDescriptionEditForm),e(n,4,0,t.userInputs.showDescriptionEditForm)},null)}function uf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,23,"div",[["focus-within","'.wp-relations-controls-section accessible-by-keyboard'"]],[[8,"className",0]],null,null,null,null)),l["\u0275did"](1,212992,null,0,ei,[l.ElementRef],null,null),(e()(),l["\u0275eld"](2,0,null,null,19,"div",[["class","grid-block hierarchy-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,4,"div",[["class","grid-content medium-2 collapse"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Jh)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ef)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,nf)),l["\u0275did"](9,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](10,0,null,null,2,"div",[["class","grid-content medium-3 collapse wp-relations-status-field"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,tf)),l["\u0275did"](12,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](13,0,null,null,8,"div",[["class","grid-content medium-2 collapse wp-relations-controls-section"],["ng-class","{'-expanded': userInputs.showRelationInfo }"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,5,"accessible-by-keyboard",[["linkClass","wp-relations--description-btn"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!=(i.userInputs.showRelationInfo=!i.userInputs.showRelationInfo)&&l);return l},Dt,Ot)),l["\u0275did"](15,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pod"](16,{"-visible":0}),l["\u0275did"](17,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](18,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-info1 -padded wp-relations--icon wp-relations--description-icon"],["icon-title","text.toggleDescription"]],null,null,null,Ct,wt)),l["\u0275did"](19,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,lf)),l["\u0275did"](21,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,af)),l["\u0275did"](23,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0),e(n,5,0,!t.userInputs.showRelationTypesForm),e(n,7,0,t.userInputs.showRelationTypesForm),e(n,9,0,t.relatedWorkPackage),e(n,12,0,t.relatedWorkPackage);var l=e(n,16,0,t.showDescriptionInfo);e(n,15,0,l);e(n,17,0,"wp-relations--description-btn",t.text.description_label,t.text.description_label);e(n,19,0,"icon-info1 -padded wp-relations--icon wp-relations--description-icon","text.toggleDescription"),e(n,21,0,t.relation.delete),e(n,23,0,t.userInputs.showRelationInfo)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"relation-row relation-row-",t.relatedWorkPackage.id,""))})}function sf(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{relationDescriptionTextarea:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,uf)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.workPackage&&t.relatedWorkPackage)},null)}l["\u0275ccf"]("wp-relation-row",Kh,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relation-row",[],null,null,null,sf,Yh)),l["\u0275did"](1,114688,null,0,Kh,[Oe,Ze,Me,U.a,R],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",relatedWorkPackage:"relatedWorkPackage",groupByWorkPackageType:"groupByWorkPackageType"},{},[]);var cf=function(){function e(e){this.I18n=e,this.onToggleGroupBy=new l.EventEmitter,this.text={groupByType:this.I18n.t("js.relation_buttons.group_by_wp_type"),groupByRelation:this.I18n.t("js.relation_buttons.group_by_relation_type")}}return Object.defineProperty(e.prototype,"togglerText",{get:function(){return this.groupByWorkPackageType?this.text.groupByRelation:this.text.groupByType},enumerable:!0,configurable:!0}),e.prototype.toggleButton=function(){var e=this;this.onToggleGroupBy.emit(),setTimeout(function(){e.toggleElement.nativeElement.focus()},20)},e}(),df=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function pf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","attributes-group--header-toggle"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,[[1,0],["wpRelationGroupByToggler",1]],null,5,"div",[["class","panel-toggler ng-scope ng-isolate-scope hide-when-print"],["id","wp-relation-group-by-toggle"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"accessible-by-keyboard",[["linkClass","button -transparent"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.toggleButton()&&l);return l},Dt,Ot)),l["\u0275did"](3,49152,null,0,Et,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["\u0275eld"](4,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-small icon-group-by icon4"]],null,null,null,Ct,wt)),l["\u0275did"](5,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](6,0,null,0,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"button -transparent");e(n,5,0,"icon-small icon-group-by icon4")},function(e,n){e(n,6,0,n.component.togglerText)})}function hf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relation-row",[],null,null,null,sf,Yh)),l["\u0275did"](1,114688,null,0,Kh,[Oe,Ze,Me,U.a,R],{workPackage:[0,"workPackage"],relatedWorkPackage:[1,"relatedWorkPackage"],groupByWorkPackageType:[2,"groupByWorkPackageType"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage,n.context.$implicit,t.groupByWorkPackageType)},null)}function ff(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","content"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,hf)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.relatedWorkPackages)},null)}function gf(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{toggleElement:0}),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[["class","attributes-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"h3",[["class","attributes-group--header-text relation-group--header"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,pf)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ff)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,6,0,t.firstGroup),e(n,8,0,t.relatedWorkPackages)},function(e,n){e(n,4,0,n.component.header)})}l["\u0275ccf"]("wp-relations-group",cf,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-group",[],null,null,null,gf,df)),l["\u0275did"](1,49152,null,0,cf,[U.a],null,null)],null,null)},{relatedWorkPackages:"relatedWorkPackages",workPackage:"workPackage",header:"header",firstGroup:"firstGroup",groupByWorkPackageType:"groupByWorkPackageType"},{onToggleGroupBy:"onToggleGroupBy"},[]);var mf=function(){function e(e,n,t,l){this.I18n=e,this.wpRelations=n,this.wpNotificationsService=t,this.wpCacheService=l,this.showRelationsCreateForm=!1,this.selectedRelationType=Uh.DEFAULT(),this.relationTypes=Uh.LOCALIZED_RELATION_TYPES(!1),this.isDisabled=!1,this.text={save:this.I18n.t("js.relation_buttons.save"),abort:this.I18n.t("js.relation_buttons.abort"),relationType:this.I18n.t("js.relation_buttons.relation_type"),addNewRelation:this.I18n.t("js.relation_buttons.add_new_relation")}}return e.prototype.createRelation=function(){var e=this;this.selectedRelationType&&this.selectedWpId&&(this.isDisabled=!0,this.createCommonRelation().catch(function(){return e.isDisabled=!1}).then(function(){return e.isDisabled=!1}))},e.prototype.updateSelectedId=function(e){this.selectedWpId=e},e.prototype.createCommonRelation=function(){var e=this;return this.wpRelations.addCommonRelation(this.workPackage.id,this.selectedRelationType,this.selectedWpId).then(function(n){e.wpNotificationsService.showSave(e.workPackage),e.toggleRelationsCreateForm()}).catch(function(n){e.wpNotificationsService.handleRawError(n,e.workPackage),e.toggleRelationsCreateForm()})},e.prototype.toggleRelationsCreateForm=function(){var e=this;this.showRelationsCreateForm=!this.showRelationsCreateForm,setTimeout(function(){e.showRelationsCreateForm||(e.selectedWpId="",e.focusAfterSave.nativeElement.focus())})},e}(),vf=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function yf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","wp-relations-create-button hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"div",[["class","grid-block"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,5,"div",[["class","grid-content collapse wp-inline-create-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,[[1,0],["focusAfterSave",1]],null,4,"a",[["class","wp-inline-create--add-link relation-create"],["href",""],["id","relation--add-relation"]],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,4).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,4).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.toggleRelationsCreateForm()&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-add"]],null,null,null,Ct,wt)),l["\u0275did"](6,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,6,0,"icon icon-add")},function(e,n){e(n,7,0,n.component.text.addNewRelation)})}function bf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.name),e(n,2,0,n.context.$implicit.name)},function(e,n){e(n,0,0,n.context.$implicit.label)})}function wf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,23,"div",[["class","v-align wp-relations-create--form"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,10,"div",[["class","grid-content collapse medium-3"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"label",[["class","hidden-for-sighted"],["for","relation-type--select"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,8,"select",[["class","form--select relationTypeSelect"],["focus",""],["id","relation-type--select"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,4).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedRelationType=t)&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,qi.p,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.p]),l["\u0275did"](6,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](8,16384,null,0,qi.i,[[4,qi.h]],null,null),l["\u0275did"](9,4210688,null,0,kr,[p.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,bf)),l["\u0275did"](11,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](12,0,null,null,2,"div",[["class","grid-content medium-7"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,1,"wp-relations-autocomplete-upgraded",[["selectedRelationType","parent"]],null,[[null,"onWorkPackageIdSelected"]],function(e,n,t){var l=!0,i=e.component;"onWorkPackageIdSelected"===n&&(l=!1!==i.updateSelectedId(t)&&l);return l},ud,ad)),l["\u0275did"](14,245760,null,0,rd,[l.ElementRef,R,Ue,U.a],{workPackage:[0,"workPackage"],selectedRelationType:[1,"selectedRelationType"]},{onSelect:"onWorkPackageIdSelected"}),(e()(),l["\u0275eld"](15,0,null,null,8,"div",[["class","grid-content medium-2 collapse wp-relations-controls-section relation-row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","wp-create-relation--save"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.createRelation()&&l);return l},Dt,Ot)),l["\u0275did"](17,49152,null,0,Et,[],{isDisabled:[0,"isDisabled"],linkClass:[1,"linkClass"]},{execute:"execute"}),(e()(),l["\u0275eld"](18,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-checkmark -padded"]],null,null,null,Ct,wt)),l["\u0275did"](19,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),(e()(),l["\u0275eld"](20,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","wp-create-relation--cancel"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.toggleRelationsCreateForm()&&l);return l},Dt,Ot)),l["\u0275did"](21,49152,null,0,Et,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["\u0275eld"](22,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-remove -padded"]],null,null,null,Ct,wt)),l["\u0275did"](23,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,6,0,t.selectedRelationType);e(n,9,0,""),e(n,11,0,t.relationTypes);e(n,14,0,t.workPackage,"parent");e(n,17,0,t.isDisabled||!t.selectedWpId,"wp-create-relation--save");e(n,19,0,"icon-checkmark -padded",t.text.save);e(n,21,0,"wp-create-relation--cancel");e(n,23,0,"icon-remove -padded",t.text.abort)},function(e,n){e(n,2,0,n.component.text.relationType),e(n,3,0,l["\u0275nov"](n,8).ngClassUntouched,l["\u0275nov"](n,8).ngClassTouched,l["\u0275nov"](n,8).ngClassPristine,l["\u0275nov"](n,8).ngClassDirty,l["\u0275nov"](n,8).ngClassValid,l["\u0275nov"](n,8).ngClassInvalid,l["\u0275nov"](n,8).ngClassPending)})}function kf(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{focusAfterSave:0}),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","wp-relations-create"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,yf)),l["\u0275did"](3,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","loading-indicator--location"],["data-indicator-name","relationAddDynamic"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,wf)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,!t.showRelationsCreateForm),e(n,6,0,t.showRelationsCreateForm)},null)}l["\u0275ccf"]("wp-relations-create",mf,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-create",[],null,null,null,kf,vf)),l["\u0275did"](1,49152,null,0,mf,[U.a,Me,Ze,Oe],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var Cf=function(){function e(e,n,t,l){this.wpRelationsHierarchyService=e,this.wpCacheService=n,this.PathHelper=t,this.I18n=l,this.showEditForm=!1,this.text={parentHeadline:this.I18n.t("js.relations_hierarchy.parent_headline"),childrenHeadline:this.I18n.t("js.relations_hierarchy.children_headline")}}return e.prototype.ngOnInit=function(){var e=this;this.workPackagePath=this.PathHelper.workPackagePath(this.workPackage.id),this.canModifyHierarchy=!!this.workPackage.changeParent,this.canAddRelation=!!this.workPackage.addRelation,this.childrenQueryProps={filters:JSON.stringify([{parent:{operator:"=",values:[this.workPackage.id]}}]),"columns[]":["id","type","subject","status"],showHierarchies:!1},this.wpCacheService.loadWorkPackage(this.workPackage.id).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.workPackage=n;var t=[];e.workPackage.parent&&(t.push(e.workPackage.parent.id.toString()),e.wpCacheService.loadWorkPackage(e.workPackage.parent.id).values$().pipe(Object(H.a)(1)).subscribe(function(n){e.workPackage.parent=n})),e.wpCacheService.requireAll(t)})},e.prototype.ngOnDestroy=function(){},e}(),Pf=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function If(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","wp-relations-hierarchy-section wp-relations--children"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"wp-children-query",[],null,null,null,Zc,Gc)),l["\u0275prd"](512,null,Du,Qc,[l.Injector,os]),l["\u0275did"](6,245760,null,0,Yc,[os,R,Du,Oe,Ne,U.a],{workPackage:[0,"workPackage"],query:[1,"query"],addExistingChildEnabled:[2,"addExistingChildEnabled"]},null)],function(e,n){var t=n.component;e(n,6,0,t.workPackage,t.childrenQueryProps,!0)},function(e,n){e(n,3,0,n.component.text.childrenHeadline)})}var jf=l["\u0275ccf"]("wp-relations-hierarchy",Cf,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-hierarchy",[],null,null,null,If,Pf)),l["\u0275did"](1,245760,null,0,Cf,[os,Oe,R,U.a],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",relationType:"relationType"},{},[]),_f=t("909l"),Sf=function(){function e(e,n,t){this.I18n=e,this.wpRelations=n,this.wpCacheService=t,this.relationGroups={},this.relationGroupKeys=[],this.relationsPresent=!1,this.groupByWorkPackageType=!1,this.text={relations_header:this.I18n.t("js.work_packages.tabs.relations")},this.currentRelations=[]}return e.prototype.ngOnInit=function(){var e=this;this.canAddRelation=!!this.workPackage.addRelation,this.wpRelations.state(this.workPackage.id).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.loadedRelations(n)}),this.wpRelations.require(this.workPackage.id),this.wpCacheService.loadWorkPackage(this.workPackage.id).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.workPackage=n})},e.prototype.ngOnDestroy=function(){},e.prototype.getRelatedWorkPackages=function(e){var n=this,t=e.map(function(e){return n.wpCacheService.loadWorkPackage(e).values$()});return _f.a.apply(void 0,t)},e.prototype.getRelatedWorkPackageId=function(e){var n=e.ids;return e.to.href===this.workPackage.href?n.from:n.to},e.prototype.toggleGroupBy=function(){this.groupByWorkPackageType=!this.groupByWorkPackageType,this.buildRelationGroups()},e.prototype.buildRelationGroups=function(){var e=this;_.isNil(this.currentRelations)||(this.relationGroups=_.groupBy(this.currentRelations,function(n){if(e.groupByWorkPackageType)return n.type.name;var t=n.relatedBy.normalizedType(e.workPackage);return e.I18n.t("js.relation_labels."+t)}),this.relationGroupKeys=_.keys(this.relationGroups),this.relationsPresent=_.size(this.relationGroups)>0)},e.prototype.loadedRelations=function(e){var n=this,t=[],l=[];if(0===_.size(e))return this.currentRelations=[],this.buildRelationGroups();_.each(e,function(e){var i=n.getRelatedWorkPackageId(e);t.push(i),l[i]=e}),this.getRelatedWorkPackages(t).pipe(Object(H.a)(1)).subscribe(function(e){n.currentRelations=e.map(function(e){return e.relatedBy=l[e.id],e}),n.buildRelationGroups()})},e}(),Rf=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Tf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","wp-relations-hierarchy-section"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,3,0,n.component.text.relations_header)})}function xf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-relations-group",[],null,[[null,"onToggleGroupBy"]],function(e,n,t){var l=!0,i=e.component;"onToggleGroupBy"===n&&(l=!1!==i.toggleGroupBy()&&l);return l},gf,df)),l["\u0275did"](2,49152,null,0,cf,[U.a],{relatedWorkPackages:[0,"relatedWorkPackages"],workPackage:[1,"workPackage"],header:[2,"header"],firstGroup:[3,"firstGroup"],groupByWorkPackageType:[4,"groupByWorkPackageType"]},{onToggleGroupBy:"onToggleGroupBy"})],function(e,n){var t=n.component;e(n,2,0,t.relationGroups[n.context.$implicit],t.workPackage,n.context.$implicit,n.context.first,t.groupByWorkPackageType)},null)}function Ef(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-create",[],null,null,null,kf,vf)),l["\u0275did"](1,49152,null,0,mf,[U.a,Me,Ze,Oe],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}function Of(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","loading-indicator--location"],["data-indicator-name","relation-groups"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Tf)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,xf)),l["\u0275did"](4,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ef)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,1,"wp-relations-hierarchy",[],null,null,null,If,Pf)),l["\u0275did"](8,245760,null,0,Cf,[os,Oe,R,U.a],{workPackage:[0,"workPackage"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.relationsPresent),e(n,4,0,t.relationGroupKeys),e(n,6,0,t.canAddRelation),e(n,8,0,t.workPackage)},null)}l["\u0275ccf"]("wp-relations",Sf,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations",[],null,null,null,Of,Rf)),l["\u0275did"](1,245760,null,0,Sf,[U.a,Me,Oe],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var Df=function(){function e(e,n,t){this.I18n=e,this.$transition=n,this.wpCacheService=t}return e.prototype.ngOnInit=function(){var e=this,n=this.workPackageId||this.$transition.params("to").workPackageId;this.wpCacheService.loadWorkPackage(n).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.workPackageId=n.id,e.workPackage=n})},e.prototype.ngOnDestroy=function(){},e}(),Ff=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Af(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","detail-panel-description detail-panel--relations detail-panel--autocomplete-target"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","detail-panel-description-content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"wp-relations",[],null,null,null,Of,Rf)),l["\u0275did"](3,245760,null,0,Sf,[U.a,Me,Oe],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,3,0,n.component.workPackage)},null)}function Vf(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Af)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}var Mf=l["\u0275ccf"]("wp-relations-tab",Df,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-relations-tab",[],null,null,null,Vf,Ff)),l["\u0275did"](1,245760,null,0,Df,[U.a,d.J,Oe],null,null)],function(e,n){e(n,1,0)},null)},{workPackageId:"workPackageId"},{},[]),Lf=function(){function e(e,n,t,l,i,o,r){this.I18n=e,this.elementRef=n,this.wpWatchersService=t,this.$transition=l,this.wpNotificationsService=i,this.loadingIndicator=o,this.wpCacheService=r,this.autocompleteInput="",this.error=!1,this.noResults=!1,this.allowedToView=!1,this.allowedToAdd=!1,this.allowedToRemove=!1,this.watching=[],this.text={loading:this.I18n.t("js.watchers.label_loading"),loadingError:this.I18n.t("js.watchers.label_error_loading"),autocomplete:{placeholder:this.I18n.t("js.watchers.typeahead_placeholder")}}}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.workPackageId=this.$transition.params("to").workPackageId,this.wpCacheService.loadWorkPackage(this.workPackageId).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(n){e.workPackage=n,e.loadCurrentWatchers()})},e.prototype.loadCurrentWatchers=function(){var e=this;this.error=!1,this.allowedToView=!!this.workPackage.watchers,this.allowedToAdd=!!this.workPackage.addWatcher,this.allowedToRemove=!!this.workPackage.removeWatcher,this.allowedToView?(this.wpWatchersService.require(this.workPackage).then(function(n){e.watching=n}).catch(function(n){e.wpNotificationsService.showError(n,e.workPackage)}),this.setupAutoCompletion()):this.error=!0},e.prototype.setupAutoCompletion=function(){var e=this,n=this.$element.find(".ui-autocomplete--input");n.autocomplete({delay:250,autoFocus:!1,classes:{"ui-autocomplete":"wp-watchers-autocomplete--results"},source:function(n,t){e.autocompleteWatchers(n.term).then(function(e){t(e.map(function(e){return{watcher:e,value:e.name}}))})},select:function(t,l){return e.addWatcher(l.item.watcher),n.val(""),!1},minLength:0}),n.focus(function(){return n.autocomplete("search",n.val())}),n.autocomplete("instance")._renderItem=function(n,t){return e.renderWatcherItem(n,t)}},Object.defineProperty(e.prototype,"loadingPromise",{set:function(e){this.loadingIndicator.wpDetails.promise=e},enumerable:!0,configurable:!0}),e.prototype.renderWatcherItem=function(e,n){var t=document.createElement("li");t.classList.add("ui-menu-item"),t.dataset.value=n.value;var l=document.createElement("div");l.classList.add("ui-menu-item-wrapper");var i=document.createElement("a");if(i.tabIndex=-1,n.watcher.avatar){var o=document.createElement("img");o.src=n.watcher.avatar,o.alt=n.watcher.name,o.classList.add("avatar-mini","avatar--fallback"),i.appendChild(o)}var r=document.createElement("span");return r.textContent=n.value,i.appendChild(r),l.appendChild(i),t.appendChild(l),e.append(t),jQuery(t)},e.prototype.autocompleteWatchers=function(e){var n=this,t={sortBy:JSON.stringify([["name","asc"]])};if(e&&e.length>0){var l={name:{operator:"~",values:e}};t.filters=JSON.stringify([l])}return new Promise(function(e,l){n.workPackage.availableWatchers.$link.$fetch(t).then(function(t){n.noResults=0===t.count,e(t.elements)}).catch(l)})},e.prototype.addWatcher=function(e){var n=this;this.loadingPromise=this.workPackage.addWatcher.$link.$fetch({user:{href:e.href}}).then(function(){n.wpWatchersService.require(n.workPackage,!0),n.wpCacheService.loadWorkPackage(n.workPackage.id,!0),n.autocompleteInput=""}).catch(function(e){return n.wpNotificationsService.showError(e,n.workPackage)})},e.prototype.removeWatcher=function(e){var n=this;this.workPackage.removeWatcher.$link.$prepare({user_id:e.id})().then(function(){_.remove(n.watching,function(n){return n.href===e.href}),n.wpWatchersService.require(n.workPackage,!0),n.wpCacheService.loadWorkPackage(n.workPackage.id,!0)}).catch(function(e){return n.wpNotificationsService.showError(e,n.workPackage)})},e.prototype.ngOnDestroy=function(){},e}(),Nf=function(){function e(e,n){this.I18n=e,this.panelCtrl=n,this.deleting=!1}return e.prototype.ngOnInit=function(){this.text={remove:this.I18n.t("js.label_remove_watcher",{name:this.watcher.name})}},e.prototype.remove=function(){this.deleting=!0,this.panelCtrl.removeWatcher(this.watcher)},e}(),$f=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function qf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"img",[["class","avatar-mini avatar--fallback"]],[[1,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.watcher.avatar)})}function Hf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,13,"div",[["class","form--selected-value--container"],["focus-within","accessible-by-keyboard"]],null,null,null,null,null)),l["\u0275did"](1,212992,null,0,ei,[l.ElementRef],null,null),(e()(),l["\u0275eld"](2,0,null,null,7,"span",[["class","form--selected-value"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,6,"span",[],null,null,null,null,null)),l["\u0275did"](4,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{ngClass:[0,"ngClass"]},null),l["\u0275pod"](5,{deleting:0}),(e()(),l["\u0275eld"](6,0,null,null,3,"a",[],[[1,"href",4]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,qf)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[["class","work-package--watcher-name"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,3,"accessible-by-keyboard",[["linkClass","form--selected-value--remover"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.remove()&&l);return l},Dt,Ot)),l["\u0275did"](11,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](12,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-remove"]],null,null,null,Ct,wt)),l["\u0275did"](13,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0);var l=e(n,5,0,t.deleting);e(n,4,0,l),e(n,8,0,t.watcher.avatar);e(n,11,0,"form--selected-value--remover",t.text.remove,t.text.remove);e(n,13,0,"icon-remove",t.text.remove)},function(e,n){var t=n.component;e(n,6,0,t.watcher.showUser.href),e(n,9,0,t.watcher.name)})}l["\u0275ccf"]("wp-watcher-entry",Nf,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-watcher-entry",[],null,null,null,Hf,$f)),l["\u0275did"](1,114688,null,0,Nf,[U.a,Lf],null,null)],function(e,n){e(n,1,0)},null)},{watcher:"watcher"},{},[]);var Bf=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Wf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"div",[["class","notification-box--content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,2,0,n.component.text.loadingError)})}function zf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-watcher-entry",[],null,null,null,Hf,$f)),l["\u0275did"](1,114688,null,0,Nf,[U.a,Lf],{watcher:[0,"watcher"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function Qf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,17,"div",[["id","detail-panel-watchers"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Wf)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,14,"div",[],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,4,"div",[["class","work-package--watchers form--selected-value--list"]],null,null,null,null,null)),l["\u0275did"](5,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](6,{"-read-only":0}),(e()(),l["\u0275and"](16777216,null,null,1,null,zf)),l["\u0275did"](8,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](9,0,null,null,8,"div",[["class","work-package--watchers-lookup hide-when-print"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,7,"form",[["name","watcherForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,12).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,12).onReset()&&i);return i},null,null)),l["\u0275did"](11,16384,null,0,qi.t,[],null,null),l["\u0275did"](12,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](14,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](15,0,null,null,2,"input",[["class","wp-watcher--autocomplete ui-autocomplete--input"],["type","text"]],[[1,"placeholder",0]],null,null,null,null)),l["\u0275did"](16,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](17,{"-error":0})],function(e,n){var t=n.component;e(n,2,0,t.error);var l=e(n,6,0,!t.allowedToRemove);e(n,5,0,"work-package--watchers form--selected-value--list",l),e(n,8,0,t.watching);var i=e(n,17,0,t.noResults);e(n,16,0,"wp-watcher--autocomplete ui-autocomplete--input",i)},function(e,n){var t=n.component;e(n,3,0,t.error),e(n,9,0,!t.allowedToAdd),e(n,10,0,l["\u0275nov"](n,14).ngClassUntouched,l["\u0275nov"](n,14).ngClassTouched,l["\u0275nov"](n,14).ngClassPristine,l["\u0275nov"](n,14).ngClassDirty,l["\u0275nov"](n,14).ngClassValid,l["\u0275nov"](n,14).ngClassInvalid,l["\u0275nov"](n,14).ngClassPending),e(n,15,0,t.text.autocomplete.placeholder)})}var Uf=l["\u0275ccf"]("wp-watchers-tab",Lf,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-watchers-tab",[],null,null,null,Qf,Bf)),l["\u0275did"](1,245760,null,0,Lf,[U.a,l.ElementRef,Ed,d.J,Ze,Ue,Oe],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Kf=function(e){function n(n,t,l){var i=e.call(this,n,t,l)||this;return i.wpCacheService=n,i.I18n=t,i.wpActivity=l,i.latestActivityInfo=[],i.trackByHref=pr.trackByHref,i}return r.d(n,e),n.prototype.ngOnInit=function(){this.workPackageId=this.workPackage.id,e.prototype.ngOnInit.call(this)},n.prototype.shouldShowToggler=function(){return!1},n.prototype.updateActivities=function(n){e.prototype.updateActivities.call(this,n),this.latestActivityInfo=this.latestActivities()},n.prototype.latestActivities=function(e){var n=this;if(void 0===e&&(e=3),this.reverse)return(t=this.unfilteredActivities.slice(0,e)).map(function(e,t){return n.info(e,t)});var t=this.unfilteredActivities.slice(-e),l=this.unfilteredActivities.length-t.length;return t.map(function(e,t){return n.info(e,l+t)})},n}(Lh),Yf=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Gf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-package-details-activities-activity"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"activity-entry",[],null,null,null,Th,_h)),l["\u0275did"](2,114688,null,0,jh,[R,U.a],{workPackage:[0,"workPackage"],activity:[1,"activity"],activityNo:[2,"activityNo"],isInitial:[3,"isInitial"]},null)],function(e,n){var t=n.component.workPackage,l=n.context.$implicit.activity,i=n.context.$implicit.number(n.context.$implicit.isReversed),o=n.context.$implicit.isInitial();e(n,2,0,t,l,i,o)},null)}function Zf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-package-details-activities-list"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,[[1,2]],null,1,null,Gf)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,2,0,t.latestActivityInfo,t.trackByHref)},null)}function Jf(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"work-package-comment",[],null,null,null,Mh,Eh)),l["\u0275did"](1,245760,null,1,xh,[l.ElementRef,l.Injector,ch,Yn,Ke,Ue,Oe,Ze,Ge,U.a],{workPackage:[0,"workPackage"]},null),l["\u0275qud"](603979776,1,{template:0}),(e()(),l["\u0275and"](0,[[1,2]],null,0,null,Zf))],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["\u0275ccf"]("newest-activity-on-overview",Kf,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"newest-activity-on-overview",[],null,null,null,Jf,Yf)),l["\u0275did"](1,245760,null,0,Kf,[Oe,U.a,Yn],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var Xf=function(){function e(e,n,t){var l=this;this.I18n=e,this.$state=n,this.wpCacheService=t,this.tabName=this.I18n.t("js.label_latest_activity"),this.workPackageId=this.$state.params.workPackageId,t.loadWorkPackage(this.workPackageId).values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(e){return l.workPackage=e})}return e.prototype.ngOnDestroy=function(){},e}(),eg=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ng(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-single-view",[],null,null,null,Wp,Op)),l["\u0275did"](1,245760,null,0,Ep,[U.a,T,R,u,en,Zn,ta,Oe,Bn],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}function tg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","attributes-group"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"newest-activity-on-overview",[],null,null,null,Jf,Yf)),l["\u0275did"](5,245760,null,0,Kf,[Oe,U.a,Yn],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,5,0,n.component.workPackage)},function(e,n){e(n,3,0,n.component.tabName)})}function lg(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,ng)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,tg)),l["\u0275did"](3,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage),e(n,3,0,t.workPackage)},null)}var ig=l["\u0275ccf"]("wp-overview-tab",Xf,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-overview-tab",[],null,null,null,lg,eg)),l["\u0275did"](1,180224,null,0,Xf,[U.a,d.G,Oe],null,null)],null,null)},{},{},[]),og=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.isBusy=!1,n.ConfigurationService=n.$injector.get(Ke),n}return r.d(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"comment"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"required",{get:function(){return!0},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.rawValue=this.rawValue||""},n}(Yo),rg=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ag(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"edit-field-controls",[],null,[[null,"onSave"],[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.handler.handleUserSubmit()&&l);"onCancel"===n&&(l=!1!==i.handler.handleUserCancel()&&l);return l},Ko,Qo)),l["\u0275did"](1,49152,null,0,zo,[],{cancelTitle:[0,"cancelTitle"],saveTitle:[1,"saveTitle"],field:[2,"field"]},{onSave:"onSave",onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,1,0,t.text.cancel,t.text.save,t.field)},null)}function ug(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{instance:0}),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","textarea-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-ckeditor--wrapper op-ckeditor-element"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"op-ckeditor",[],null,[[null,"onContentChange"],[null,"onInitializationFailed"],[null,"onInitialized"]],function(e,n,t){var l=!0,i=e.component;"onContentChange"===n&&(l=!1!==i.onContentChange(t)&&l);"onInitializationFailed"===n&&(l=!1!=(i.initializationError=!0)&&l);"onInitialized"===n&&(l=!1!==i.onCkeditorSetup(t)&&l);return l},Ai,Di)),l["\u0275did"](4,245760,[[1,4]],0,Ei,[l.ElementRef,Ge,U.a,Ke,xi],{ckEditorType:[0,"ckEditorType"],context:[1,"context"],_content:[2,"_content"]},{onInitialized:"onInitialized",onContentChange:"onContentChange",onInitializationFailed:"onInitializationFailed"}),(e()(),l["\u0275and"](16777216,null,null,1,null,ag)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.editorType,t.ckEditorContext,t.rawValue),e(n,6,0,!(t.handler.inEditMode||t.initializationError))},null)}var sg=l["\u0275ccf"]("ng-component",og,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,ug,rg)),l["\u0275did"](1,245760,null,0,og,[U.a,l.ElementRef,Zn,ro,io,oo,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),cg=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function dg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,14,"div",[["class","loading-indicator--location"],["data-indicator-name","relationAddChild"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,13,"div",[["class","v-align wp-relations-create--form wp-relations--add-form"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","grid-content medium-10"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"wp-relations-autocomplete-upgraded",[["appendToContainer",".work-packages--details-content"]],null,[[null,"onWorkPackageIdSelected"]],function(e,n,t){var l=!0,i=e.component;"onWorkPackageIdSelected"===n&&(l=!1!==i.updateSelectedId(t)&&l);return l},ud,ad)),l["\u0275did"](4,245760,null,0,rd,[l.ElementRef,R,Ue,U.a],{workPackage:[0,"workPackage"],filterCandidatesFor:[1,"filterCandidatesFor"],appendToContainer:[2,"appendToContainer"]},{onSelect:"onWorkPackageIdSelected"}),(e()(),l["\u0275eld"](5,0,null,null,9,"div",[["class","grid-content medium-2 collapse wp-relations-controls-section relation-row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","wp-create-relation--save"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.addExisting()&&l);return l},Dt,Ot)),l["\u0275did"](7,49152,null,0,Et,[],{isDisabled:[0,"isDisabled"],linkClass:[1,"linkClass"]},{execute:"execute"}),(e()(),l["\u0275eld"](8,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-checkmark"]],null,null,null,Ct,wt)),l["\u0275did"](9,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),(e()(),l["\u0275ted"](-1,null,[" \xa0 "])),(e()(),l["\u0275eld"](11,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","wp-create-relation--cancel"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.cancel()&&l);return l},Dt,Ot)),l["\u0275did"](12,49152,null,0,Et,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["\u0275eld"](13,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-remove"]],null,null,null,Ct,wt)),l["\u0275did"](14,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,4,0,t.workPackage,t.relationType,".work-packages--details-content");e(n,7,0,t.isDisabled,"wp-create-relation--save");e(n,9,0,"icon-checkmark",t.text.save);e(n,12,0,"wp-create-relation--cancel");e(n,14,0,"icon-remove",t.text.abort)},null)}var pg=l["\u0275ccf"]("ng-component",zc,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,dg,cg)),l["\u0275did"](1,49152,null,0,zc,[Fu,Du,Oe,Me,Ze,U.a],null,null)],null,null)},{},{},[]),hg=function(){return function(){}}(),fg=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function gg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-packages-page--ui-view"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,16777216,null,null,1,"ui-view",[],null,null,null,st.c,st.a)),l["\u0275did"](2,245760,null,0,Ql.a,[d.P,"UIView.PARENT_INJECT",l.ViewContainerRef],null,null)],function(e,n){e(n,2,0)},null)}var mg=l["\u0275ccf"]("work-packages-base",hg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"work-packages-base",[],null,null,null,gg,fg)),l["\u0275did"](1,49152,null,0,hg,[],null,null)],null,null)},{},{},[]),vg=function(e){function n(n,t,l){var i=e.call(this,n)||this;return i.I18n=n,i.wpFiltersService=t,i.wpTableFilters=l,i.initialized=!1,i.buttonId="work-packages-filter-toggle-button",i.iconClass="icon-filter",i.setupObserver(),i}return r.d(n,e),n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"labelKey",{get:function(){return"js.button_filter"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textKey",{get:function(){return"js.toolbar.filter"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"label",{get:function(){return this.prefix+this.text.label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filterCount",{get:function(){return this.count},enumerable:!0,configurable:!0}),n.prototype.isActive=function(){return this.wpFiltersService.visible},n.prototype.performAction=function(e){this.toggleVisibility()},n.prototype.toggleVisibility=function(){this.wpFiltersService.toggleVisibility()},n.prototype.setupObserver=function(){var e=this;this.wpTableFilters.observeUntil(Object(an.a)(this)).subscribe(function(n){e.count=n.currentVisibleFilters.length,e.initialized=!0})},n}(Vl),yg=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function bg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","badge -secondary"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.filterCount)})}function wg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"button",[["class","button"]],[[1,"id",0],[1,"accesskey",0],[1,"title",0],[1,"aria-label",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.performAction(t)&&l);return l},null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-active":0}),(e()(),l["\u0275eld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Ct,wt)),l["\u0275did"](4,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](5,0,null,null,3,"span",[["class","button--text"]],null,null,null,null,null)),(e()(),l["\u0275ted"](6,null,[" "," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,bg)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,i=e(n,2,0,t.isActive());e(n,1,0,"button",i),e(n,4,0,l["\u0275inlineInterpolate"](1,"",t.iconClass," button--icon")),e(n,8,0,t.initialized)},function(e,n){var t=n.component;e(n,0,0,t.buttonId,t.accessKey,t.label,t.label,t.disabled),e(n,6,0,t.buttonText)})}l["\u0275ccf"]("wp-filter-button",vg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-filter-button",[],null,null,null,wg,yg)),l["\u0275did"](1,180224,null,0,vg,[U.a,kn,ke],null,null)],null,null)},{},{},[]);var kg=function(e){function n(n,t,l,i,o){var r=e.call(this,t)||this;return r.$state=n,r.I18n=t,r.states=l,r.wpTableFocus=i,r.keepTab=o,r.accessKey=8,r.activeState="work-packages.list.details",r.listState="work-packages.list",r.buttonId="work-packages-details-view-button",r.buttonClass="toolbar-icon",r.iconClass="icon-info2",r.activateLabel=t.t("js.button_open_details"),r.deactivateLabel=t.t("js.button_close_details"),r}return r.d(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return this.isActive()?this.deactivateLabel:this.activateLabel},enumerable:!0,configurable:!0}),n.prototype.isToggle=function(){return!0},n.prototype.isActive=function(){return this.$state.includes(this.activeState)},n.prototype.performAction=function(e){this.isActive()?this.openListView():this.openDetailsView()},n.prototype.openListView=function(){var e={projectPath:this.projectIdentifier};_.extend(e,this.$state.params),this.$state.go(this.listState,e)},n.prototype.openDetailsView=function(){var e={workPackageId:this.wpTableFocus.focusedWorkPackage,projectPath:this.projectIdentifier};_.extend(e,this.$state.params),this.$state.go(this.keepTab.currentDetailsState,e)},n}(Vl),Cg=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Pg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"button",[["type","button"]],[[8,"disabled",0],[1,"id",0],[1,"title",0],[1,"accesskey",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.performAction(t)&&i);return i},null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-active":0}),l["\u0275did"](3,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](4,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Ct,wt)),l["\u0275did"](5,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component,i=l["\u0275inlineInterpolate"](1,"button ",t.buttonClass,""),o=e(n,2,0,t.isActive());e(n,1,0,i,o),e(n,5,0,l["\u0275inlineInterpolate"](1,"",t.iconClass," button--icon"))},function(e,n){var t=n.component;e(n,0,0,t.disabled||!t.isToggle()&&t.isActive(),t.buttonId,t.label,t.accessKey)})}l["\u0275ccf"]("wp-details-view-button",kg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-details-view-button",[],null,null,null,Pg,Cg)),l["\u0275did"](1,49152,null,0,kg,[d.G,U.a,u,Dr,dn],null,null)],null,null)},{},{},[]);var Ig=function(e){function n(n,t){var l=e.call(this,n)||this;return l.I18n=n,l.wpTableTimeline=t,l.buttonId="work-packages-timeline-toggle-button",l.iconClass="icon-view-timeline",l.minZoomLevel="days",l.maxZoomLevel="years",l.activateLabel=n.t("js.timelines.button_activate"),l.deactivateLabel=n.t("js.timelines.button_deactivate"),l.text.zoomIn=n.t("js.timelines.zoom.in"),l.text.zoomOut=n.t("js.timelines.zoom.out"),l.text.zoomAuto=n.t("js.timelines.zoom.auto"),l}return r.d(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return this.isActive()?this.deactivateLabel:this.activateLabel},enumerable:!0,configurable:!0}),n.prototype.isToggle=function(){return!0},n.prototype.isActive=function(){return this.wpTableTimeline.isVisible},n.prototype.isAutoZoomEnabled=function(){return this.wpTableTimeline.isAutoZoomEnabled()},n.prototype.updateZoomWithDelta=function(e){this.wpTableTimeline.updateZoomWithDelta(e)},Object.defineProperty(n.prototype,"currentZoom",{get:function(){return this.wpTableTimeline.zoomLevel},enumerable:!0,configurable:!0}),n.prototype.performAction=function(e){this.toggleTimeline()},n.prototype.toggleTimeline=function(){this.wpTableTimeline.toggle()},n.prototype.toggleAutoZoom=function(){this.wpTableTimeline.toggleAutoZoom()},n.prototype.getAutoZoomToggleClass=function(){return this.isAutoZoomEnabled()?"-disabled":""},n}(Vl),jg=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function _g(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"button",[["class","button timeline-toolbar--button toolbar-icon"],["id","work-packages-timeline-zoom-auto-button"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleAutoZoom()&&l);return l},null,null)),l["\u0275did"](2,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["\u0275eld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-zoom-auto button--icon"]],null,null,null,Ct,wt)),l["\u0275did"](4,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"button timeline-toolbar--button toolbar-icon",n.component.getAutoZoomToggleClass());e(n,4,0,"icon-zoom-auto button--icon")},function(e,n){e(n,1,0,n.component.text.zoomAuto)})}function Sg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"button",[["class","button timeline-toolbar--button toolbar-icon"],["id","work-packages-timeline-zoom-in-button"]],[[1,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.updateZoomWithDelta(-1)&&l);return l},null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-zoom-in button--icon"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"icon-zoom-in button--icon")},function(e,n){var t=n.component;e(n,1,0,t.text.zoomIn,t.currentZoom==t.minZoomLevel)})}function Rg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"button",[["class","button timeline-toolbar--button toolbar-icon"],["id","work-packages-timeline-zoom-out-button"]],[[1,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.updateZoomWithDelta(1)&&l);return l},null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-zoom-out button--icon"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"icon-zoom-out button--icon")},function(e,n){var t=n.component;e(n,1,0,t.text.zoomOut,t.currentZoom==t.maxZoomLevel)})}function Tg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,12,"ul",[["class","toolbar-button-group"],["id","work-packages-timeline-mode-selection"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,_g)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Sg)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Rg)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,5,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,4,"button",[["class","button timeline-toolbar--button toolbar-icon"]],[[1,"id",0],[1,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleTimeline()&&l);return l},null,null)),l["\u0275did"](9,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](10,{"-active":0}),(e()(),l["\u0275eld"](11,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Ct,wt)),l["\u0275did"](12,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,t.isActive()),e(n,4,0,t.isActive()),e(n,6,0,t.isActive());var i=e(n,10,0,t.isActive());e(n,9,0,"button timeline-toolbar--button toolbar-icon",i),e(n,12,0,l["\u0275inlineInterpolate"](1,"",t.iconClass," button--icon"))},function(e,n){var t=n.component;e(n,8,0,t.buttonId,t.label,t.disabled||!t.isToggle()&&t.isActive())})}l["\u0275ccf"]("wp-timeline-toggle-button",Ig,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-timeline-toggle-button",[],null,null,null,Tg,jg)),l["\u0275did"](1,49152,null,0,Ig,[U.a,ve],null,null)],null,null)},{},{},[]);var xg,Eg=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.memoizedCurrentSchemas={},n}return r.d(n,e),n.prototype.$copy=function(){var n=e.prototype.$copy.call(this);return n.schema=this.schema,n},Object.defineProperty(n.prototype,"id",{get:function(){return this.filter.id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentSchema",{get:function(){if(!this.schema||!this.operator)return null;var e=this.operator.href.toString();return void 0===this.memoizedCurrentSchemas[e]&&(this.memoizedCurrentSchemas[e]=this.schema.resultingSchema(this.operator)),this.memoizedCurrentSchemas[e]},enumerable:!0,configurable:!0}),n.prototype.isCompletelyDefined=function(){return this.values.length||this.currentSchema&&!this.currentSchema.isValueRequired()},n}(K),Og=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.$initialize=function(n){var t=this;e.prototype.$initialize.call(this,n),this.filters=this.filters.map(function(e){return new Eg(t.injector,e,!0,t.halInitializer,"QueryFilterInstance")})},n}(K),Dg=function(e){function n(n,t,l,i,o,r,a){var u=e.call(this,n,r,l)||this;return u.locals=n,u.I18n=t,u.elementRef=l,u.UrlParamsHelper=i,u.tableState=o,u.cdRef=r,u.wpTableColumns=a,u.closeOnEscape=!0,u.closeOnOutsideClick=!0,u.text={title:u.I18n.t("js.label_export"),closePopup:u.I18n.t("js.close_popup_title")},u}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.tableState.results.valuesPromise().then(function(e){return n.exportOptions=n.buildExportOptions(e)})},n.prototype.buildExportOptions=function(e){var n=this;return e.representations.map(function(e){var t=e.$link;return{identifier:t.identifier,label:t.title,url:n.addColumnsToHref(e.href)}})},n.prototype.addColumnsToHref=function(e){var n=this.wpTableColumns.getColumns().map(function(e){return e.id}),t=URI(e);return t.removeSearch("columns[]"),t.addSearch("columns[]",n),t.toString()},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return jQuery("#work-packages-settings-button")},enumerable:!0,configurable:!0}),n}(yn.a),Fg=function(e){function n(n,t,l,i,o,r,a,u,s){var c=e.call(this,t,u,n)||this;return c.elementRef=n,c.locals=t,c.I18n=l,c.states=i,c.tableState=o,c.wpListService=r,c.wpNotificationsService=a,c.cdRef=u,c.notificationsService=s,c.queryName="",c.isStarred=!1,c.isPublic=!1,c.isBusy=!1,c.text={title:c.I18n.t("js.modals.form_submit.title"),text:c.I18n.t("js.modals.form_submit.text"),save_as:c.I18n.t("js.label_save_as"),label_name:c.I18n.t("js.modals.label_name"),label_visibility_settings:c.I18n.t("js.label_visibility_settings"),button_save:c.I18n.t("js.modals.button_save"),button_cancel:c.I18n.t("js.button_cancel"),close_popup:c.I18n.t("js.close_popup_title")},c}return r.d(n,e),n.prototype.setValues=function(e){this.isStarred=e.isStarred,this.isPublic=e.isPublic},n.prototype.onOpen=function(){this.queryNameField.nativeElement.focus()},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return jQuery("#work-packages-settings-button")},enumerable:!0,configurable:!0}),n.prototype.saveQueryAs=function(e){var n=this;if(!this.isBusy&&this.queryName){this.isBusy=!0;var t=this.tableState.query.value;t.public=this.isPublic,this.wpListService.create(t,this.queryName).then(function(t){return n.isStarred&&!t.starred?n.wpListService.toggleStarred(t).then(function(){return n.closeMe(e)}):(n.closeMe(e),Promise.resolve(!0))}).catch(function(e){return n.wpNotificationsService.handleRawError(e)}).then(function(){return n.isBusy=!1})}},n}(yn.a),Ag=function(e){function n(n,t,l,i,o,r,a,u,s){var c=e.call(this,t,r,n)||this;return c.elementRef=n,c.locals=t,c.I18n=l,c.states=i,c.tableState=o,c.cdRef=r,c.wpListService=a,c.wpNotificationsService=u,c.notificationsService=s,c.isStarred=!1,c.isPublic=!1,c.isBusy=!1,c.text={title:c.I18n.t("js.modals.form_submit.title"),text:c.I18n.t("js.modals.form_submit.text"),save_as:c.I18n.t("js.label_save_as"),label_name:c.I18n.t("js.modals.label_name"),label_visibility_settings:c.I18n.t("js.label_visibility_settings"),button_save:c.I18n.t("js.modals.button_save"),button_cancel:c.I18n.t("js.button_cancel"),close_popup:c.I18n.t("js.close_popup_title")},c}return r.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.query=this.tableState.query.value,this.isStarred=this.query.starred,this.isPublic=this.query.public},n.prototype.setValues=function(e){this.isStarred=e.isStarred,this.isPublic=e.isPublic},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return jQuery("#work-packages-settings-button")},enumerable:!0,configurable:!0}),n.prototype.saveQuery=function(e){var n=this;if(!this.isBusy){this.isBusy=!0;var t=[];this.query.public!==this.isPublic&&(this.query.public=this.isPublic,t.push(this.wpListService.save(this.query))),this.query.starred!==this.isStarred&&t.push(this.wpListService.toggleStarred(this.query)),Promise.all(t).then(function(){n.closeMe(e),n.isBusy=!1}).catch(function(){n.notificationsService.addError(n.I18n.t("js.errors.query_saving")),n.isBusy=!1})}},n}(yn.a);!function(e){function n(e,n){return e===n||e.contains(n)}e.whenOutside=function(e,t){setTimeout(function(){n(e,document.activeElement)||t()},20)},e.insideOrSelf=n}(xg||(xg={}));var Vg="wp-query-selectable-title",Mg=function(){function e(e,n,t,l,i,o){this.elementRef=e,this.I18n=n,this.wpListService=t,this.authorisationService=l,this.$state=i,this.states=o,this.queryEditable=!0,this.inFlight=!1,this.selectableTitleIdentifier=Vg,this.text={click_to_edit:this.I18n.t("js.work_packages.query.click_to_edit_query_name"),press_enter_to_save:this.I18n.t("js.label_press_enter_to_save"),query_has_changed_click_to_save:"Query has changed, click to save",input_title:"",input_placeholder:this.I18n.t("js.work_packages.query.rename_query_placeholder"),search_query_title:this.I18n.t("js.toolbar.search_query_title"),confirm_edit_cancel:this.I18n.t("js.work_packages.query.confirm_edit_cancel"),duplicate_query_title:this.I18n.t("js.work_packages.query.errors.duplicate_query_title")}}return e.prototype.ngOnInit=function(){var e=this;this.text.input_title=this.text.click_to_edit+" "+this.text.press_enter_to_save,jQuery(this.elementRef.nativeElement).on("op:selectableTitle:trigger",function(n,t){void 0===t&&(t=""),e.inputField&&(e.selectedTitle=t,setTimeout(function(){jQuery(e.inputField.nativeElement).focus()},20),n.stopPropagation())})},e.prototype.resetWhenFocusOutside=function(e){var n=this;xg.whenOutside(this.elementRef.nativeElement,function(){return n.reset()})},e.prototype.reset=function(){this.resetInputField(),this.selectedTitle=this.currentTitle},Object.defineProperty(e.prototype,"editable",{get:function(){return this.queryEditable&&this.authorisationService.can("query","updateImmediately")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSave",{get:function(){return this.editable&&this.$state.params.query_props},enumerable:!0,configurable:!0}),e.prototype.save=function(e,n){if(void 0===n&&(n=!1),e.preventDefault(),this.resetInputField(),this.selectedTitle=this.selectedTitle.trim(),this.isEmpty)return this.updateItemInMenu(),void this.focusInputOnError();(n||this.currentTitle!==this.selectedTitle)&&this.updateItemInMenu()},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return""===this.selectedTitle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTitle",{get:function(){return this.currentQuery.name},enumerable:!0,configurable:!0}),e.prototype.updateItemInMenu=function(){var e=this;this.inFlight=!0,this.currentQuery.name=this.selectedTitle,this.wpListService.save(this.currentQuery).then(function(){return e.inFlight=!1}).catch(function(){return e.inFlight=!1})},e.prototype.focusInputOnError=function(){if(this.inputField){var e=this.inputField.nativeElement;e.classList.add("-error"),e.focus()}},e.prototype.resetInputField=function(){this.inputField&&this.inputField.nativeElement.classList.remove("-error")},e}(),Lg=function(e){function n(n,t,l,i,o,r,a,u){var s=e.call(this,n,t)||this;return s.elementRef=n,s.opContextMenu=t,s.opModalService=l,s.wpListService=i,s.authorisationService=o,s.states=r,s.tableState=a,s.I18n=u,s.focusAfterClose=!0,s}return r.d(n,e),n.prototype.ngOnDestroy=function(){},n.prototype.ngAfterViewInit=function(){var n=this;e.prototype.ngAfterViewInit.call(this),this.tableState.query.values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(e){n.query=e}),this.loadingPromise=this.tableState.queryForm.valuesPromise(),this.tableState.queryForm.values$().pipe(Object(q.a)(Object(an.a)(this))).subscribe(function(e){n.form=e})},n.prototype.open=function(e){var n=this;this.loadingPromise.then(function(){n.buildItems(),n.opContextMenu.show(n,e)})},Object.defineProperty(n.prototype,"locals",{get:function(){return{contextMenuId:"settingsDropdown",items:this.items}},enumerable:!0,configurable:!0}),n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"right top",at:"right bottom"}),t},n.prototype.onClose=function(){this.focusAfterClose&&this.afterFocusOn.focus()},n.prototype.allowQueryAction=function(e,n){return this.allowAction(e,"query",n)},n.prototype.allowWorkPackageAction=function(e,n){return this.allowAction(e,"work_packages",n)},n.prototype.allowFormAction=function(e,n){return!!this.form.$links[n]||(e.stopPropagation(),!1)},n.prototype.allowAction=function(e,n,t){return!!this.authorisationService.can(n,t)||(e.stopPropagation(),!1)},n.prototype.buildItems=function(){var e=this;this.items=[{disabled:!1,linkText:this.I18n.t("js.toolbar.settings.configure_view"),icon:"icon-settings",onClick:function(n){return e.opContextMenu.close(),e.opModalService.show(En),!0}},{disabled:!this.query.id||this.authorisationService.cannot("query","updateImmediately"),linkText:this.I18n.t("js.toolbar.settings.page_settings"),icon:"icon-edit",onClick:function(n){return e.allowQueryAction(n,"update")&&(e.focusAfterClose=!1,jQuery("#"+Vg).trigger("op:selectableTitle:trigger")),!0}},{disabled:this.authorisationService.cannot("query","updateImmediately"),linkText:this.I18n.t("js.toolbar.settings.save"),icon:"icon-save",onClick:function(n){var t=e.query;return!t.id&&e.allowQueryAction(n,"updateImmediately")?e.opModalService.show(Fg):t.id&&e.allowQueryAction(n,"updateImmediately")&&e.wpListService.save(t),!0}},{disabled:this.form?!this.form.$links.create_new:this.authorisationService.cannot("query","updateImmediately"),linkText:this.I18n.t("js.toolbar.settings.save_as"),icon:"icon-save",onClick:function(n){return e.allowFormAction(n,"create_new")&&e.opModalService.show(Fg),!0}},{disabled:this.authorisationService.cannot("query","delete"),linkText:this.I18n.t("js.toolbar.settings.delete"),icon:"icon-delete",onClick:function(n){return e.allowQueryAction(n,"delete")&&window.confirm(e.I18n.t("js.text_query_destroy_confirmation"))&&e.wpListService.delete(),!0}},{disabled:this.authorisationService.cannot("work_packages","representations"),linkText:this.I18n.t("js.toolbar.settings.export"),icon:"icon-export",onClick:function(n){return e.allowWorkPackageAction(n,"representations")&&e.opModalService.show(Dg),!0}},{disabled:this.authorisationService.cannot("query","unstar")&&this.authorisationService.cannot("query","star"),linkText:this.I18n.t("js.toolbar.settings.visibility_settings"),icon:"icon-watched",onClick:function(n){return(e.allowQueryAction(n,"unstar")||e.allowQueryAction(n,"star"))&&e.opModalService.show(Ag),!0}},{divider:!0,hidden:!(this.query.results.customFields&&this.form.configureForm)},{hidden:!this.query.results.customFields,href:this.query.results.customFields&&this.query.results.customFields.href,linkText:this.query.results.customFields&&this.query.results.customFields.name,icon:"icon-custom-fields",onClick:function(){return!1}}]},n}(ju),Ng=[[".wp-query-selectable-title--container{display:flex;align-items:center}.wp-query-selectable-title--fixed{padding:0}.wp-query-selectable-title--save span:before{color:#5f5f5f}.wp-query-selectable-title--save:hover span:before{color:#2c2c2c}.wp-query--selectable-title{color:#5f5f5f}.wp-query--selectable-title.-changed{font-style:italic}"]],$g=l["\u0275crt"]({encapsulation:2,styles:Ng,data:{}});function qg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"accessible-by-keyboard",[["linkClass","wp-query-selectable-title--save"],["spanClass","icon icon-save"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.save(t,!0)&&l);return l},Dt,Ot)),l["\u0275did"](1,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],spanClass:[2,"spanClass"],linkAriaLabel:[3,"linkAriaLabel"]},{execute:"execute"})],function(e,n){var t=n.component;e(n,1,0,"wp-query-selectable-title--save",t.text.query_has_changed_click_to_save,"icon icon-save",t.text.query_has_changed_click_to_save)},null)}function Hg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","wp-query-selectable-title--container"]],null,[[null,"focusout"]],function(e,n,t){var l=!0,i=e.component;"focusout"===n&&(l=!1!==i.resetWhenFocusOutside(t)&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,qg)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,[[1,0],["editableTitleInput",1]],null,7,"input",[["aria-required","true"],["class","wp-query--selectable-title -border-on-hover-only toolbar--editable-toolbar ellipsis"],["type","text"]],[[1,"name",0],[1,"id",0],[1,"placeholder",0],[1,"title",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keydown.escape"],[null,"keydown.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,6)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,6).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,6)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,6)._compositionEnd(t.target.value)&&i);"keydown.escape"===n&&(i=!1!==o.reset(t)&&i);"keydown.enter"===n&&(i=!1!==o.save(t)&&i);"ngModelChange"===n&&(i=!1!==(o.selectedTitle=t)&&i);return i},null,null)),l["\u0275did"](4,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](5,{"-error":0,"-changed":1}),l["\u0275did"](6,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](8,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](10,16384,null,0,qi.i,[[4,qi.h]],null,null)],function(e,n){var t=n.component;e(n,2,0,t.showSave);var l=e(n,5,0,t.isEmpty,t.showSave);e(n,4,0,"wp-query--selectable-title -border-on-hover-only toolbar--editable-toolbar ellipsis",l),e(n,8,0,t.inFlight,t.selectedTitle)},function(e,n){var t=n.component;e(n,3,1,[t.selectableTitleIdentifier,t.selectableTitleIdentifier,t.text.input_placeholder,t.text.input_title,l["\u0275nov"](n,10).ngClassUntouched,l["\u0275nov"](n,10).ngClassTouched,l["\u0275nov"](n,10).ngClassPristine,l["\u0275nov"](n,10).ngClassDirty,l["\u0275nov"](n,10).ngClassValid,l["\u0275nov"](n,10).ngClassInvalid,l["\u0275nov"](n,10).ngClassPending])})}function Bg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"h2",[["class","wp-query-selectable-title--fixed"]],[[1,"title",0]],null,null,null,null)),l["\u0275did"](1,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](2,{"-disabled":0}),(e()(),l["\u0275ted"](3,null,[" ","\n"])),l["\u0275pid"](0,yt.t,[])],function(e,n){var t=e(n,2,0,n.component.disabled);e(n,1,0,"wp-query-selectable-title--fixed",t)},function(e,n){var t=n.component;e(n,0,0,t.selectedTitle),e(n,3,0,l["\u0275unv"](n,3,0,l["\u0275nov"](n,4).transform(t.selectedTitle,0,50)))})}function Wg(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{inputField:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,Hg)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Bg)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.editable),e(n,4,0,!t.editable)},null)}l["\u0275ccf"]("wp-query-selectable-title",Mg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-query-selectable-title",[["class","title-container"]],null,null,null,Wg,$g)),l["\u0275did"](1,114688,null,0,Mg,[l.ElementRef,U.a,ds,Xe,d.G,u],null,null)],function(e,n){e(n,1,0)},null)},{selectedTitle:"selectedTitle",currentQuery:"currentQuery",queryEditable:"queryEditable"},{},[]);var zg=function(){function e(e,n){void 0===n&&(n=250);var t=this;this.emitter=new l.EventEmitter,this.debouncer=new x.a,this.debouncer.pipe(Object(Ku.a)(n),Object(q.a)(e)).subscribe(function(e){return t.emitter.emit(e)})}return e.prototype.emit=function(e){this.debouncer.next(e)},e.prototype.subscribe=function(e,n,t){return this.emitter.subscribe(e,n,t)},e}(),Qg=function(){function e(e){this.I18n=e,this.filterChanged=new zg(Object(an.a)(this))}return e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"value",{get:function(){return parseInt(this.filter.values[0])},set:function(e){this.filter.values="number"==typeof e?[e.toString()]:[],this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unit",{get:function(){switch(this.filter.schema.filter.allowedValues[0].id){case"startDate":case"dueDate":case"updatedAt":case"createdAt":return this.I18n.t("js.work_packages.time_relative.days");default:return""}},enumerable:!0,configurable:!0}),e}(),Ug=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Kg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,8,"input",[["class","advanced-filters--number-field"],["min","0"],["required",""],["type","number"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,2)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,3).onChange(t.target.value)&&i);"input"===n&&(i=!1!==l["\u0275nov"](e,3).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,3).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](3,16384,null,0,qi.s,[l.Renderer2,l.ElementRef],null,null),l["\u0275did"](4,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e,n){return[e,n]},[qi.d,qi.s]),l["\u0275did"](7,671744,null,0,qi.l,[[8,null],[6,qi.f],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](9,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](10,0,null,null,0,"label",[["class","advanced-filters--affix"]],[[8,"htmlFor",0],[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,4,0,""),e(n,7,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]"),t.value)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,1,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,""),l["\u0275nov"](n,4).required?"":null,l["\u0275nov"](n,9).ngClassUntouched,l["\u0275nov"](n,9).ngClassTouched,l["\u0275nov"](n,9).ngClassPristine,l["\u0275nov"](n,9).ngClassDirty,l["\u0275nov"](n,9).ngClassValid,l["\u0275nov"](n,9).ngClassInvalid,l["\u0275nov"](n,9).ngClassPending),e(n,10,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,""),t.unit)})}l["\u0275ccf"]("filter-integer-value",Qg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-integer-value",[],null,null,null,Kg,Ug)),l["\u0275did"](1,180224,null,0,Qg,[U.a],null,null)],null,null)},{filter:"filter"},{filterChanged:"filterChanged"},[]);var Yg=function(){function e(e,n){this.timezoneService=e,this.I18n=n,this.filterChanged=new zg(Object(an.a)(this))}return e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"value",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values=[e],this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),e.prototype.parser=function(e){return moment(e,"YYYY-MM-DD",!0).isValid()?e:null},e.prototype.formatter=function(e){if(moment(e,"YYYY-MM-DD",!0).isValid()){var n=this.timezoneService.parseDate(e);return this.timezoneService.formattedISODate(n)}return null},e}(),Gg=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Zg(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.value=i.parser(t))&&l);return l},Ro,So)),l["\u0275did"](2,245760,null,0,_o,[l.ElementRef,Ke,Kn],null,{onChange:"onChange"}),(e()(),l["\u0275eld"](3,0,null,0,7,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.value=o.parser(t))&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](5,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](8,671744,null,0,qi.l,[[8,null],[6,qi.f],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](10,16384,null,0,qi.i,[[4,qi.h]],null,null)],function(e,n){var t=n.component;e(n,2,0);e(n,5,0,""),e(n,8,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]"),t.formatter(t.value))},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,3,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,""),l["\u0275nov"](n,5).required?"":null,l["\u0275nov"](n,10).ngClassUntouched,l["\u0275nov"](n,10).ngClassTouched,l["\u0275nov"](n,10).ngClassPristine,l["\u0275nov"](n,10).ngClassDirty,l["\u0275nov"](n,10).ngClassValid,l["\u0275nov"](n,10).ngClassInvalid,l["\u0275nov"](n,10).ngClassPending)})}l["\u0275ccf"]("filter-date-value",Yg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-date-value",[],null,null,null,Zg,Gg)),l["\u0275did"](1,180224,null,0,Yg,[Kn,U.a],null,null)],null,null)},{filter:"filter"},{filterChanged:"filterChanged"},[]);var Jg=function(){function e(e,n){this.timezoneService=e,this.I18n=n,this.filterChanged=new zg(Object(an.a)(this)),this.text={spacer:this.I18n.t("js.filter.value_spacer")}}return e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"begin",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values[0]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.filter.values[1]},set:function(e){this.filter.values[1]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),e.prototype.parser=function(e){return ae(e,"YYYY-MM-DD",!0).isValid()?e:null},e.prototype.formatter=function(e){if(ae(e,"YYYY-MM-DD",!0).isValid()){var n=this.timezoneService.parseDate(e);return this.timezoneService.formattedISODate(n)}return null},e}(),Xg=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function em(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,21,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.begin=i.parser(t))&&l);return l},Ro,So)),l["\u0275did"](2,245760,null,0,_o,[l.ElementRef,Ke,Kn],null,{onChange:"onChange"}),(e()(),l["\u0275eld"](3,0,null,0,7,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.begin=o.parser(t))&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](5,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](8,671744,null,0,qi.l,[[8,null],[6,qi.f],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](10,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](11,0,null,null,0,"span",[["class","advanced-filters--affix"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,9,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.end=i.parser(t))&&l);return l},Ro,So)),l["\u0275did"](13,245760,null,0,_o,[l.ElementRef,Ke,Kn],null,{onChange:"onChange"}),(e()(),l["\u0275eld"](14,0,null,0,7,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,15)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,15).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,15)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,15)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.end=o.parser(t))&&i);return i},null,null)),l["\u0275did"](15,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](16,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](19,671744,null,0,qi.l,[[8,null],[6,qi.f],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](21,16384,null,0,qi.i,[[4,qi.h]],null,null)],function(e,n){var t=n.component;e(n,2,0);e(n,5,0,""),e(n,8,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]-begin"),t.formatter(t.begin)),e(n,13,0);e(n,16,0,""),e(n,19,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]-end"),t.formatter(t.end))},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,3,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,"-begin"),l["\u0275nov"](n,5).required?"":null,l["\u0275nov"](n,10).ngClassUntouched,l["\u0275nov"](n,10).ngClassTouched,l["\u0275nov"](n,10).ngClassPristine,l["\u0275nov"](n,10).ngClassDirty,l["\u0275nov"](n,10).ngClassValid,l["\u0275nov"](n,10).ngClassInvalid,l["\u0275nov"](n,10).ngClassPending),e(n,11,0,t.text.spacer),e(n,14,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,"-end"),l["\u0275nov"](n,16).required?"":null,l["\u0275nov"](n,21).ngClassUntouched,l["\u0275nov"](n,21).ngClassTouched,l["\u0275nov"](n,21).ngClassPristine,l["\u0275nov"](n,21).ngClassDirty,l["\u0275nov"](n,21).ngClassValid,l["\u0275nov"](n,21).ngClassInvalid,l["\u0275nov"](n,21).ngClassPending)})}l["\u0275ccf"]("filter-dates-value",Jg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-dates-value",[],null,null,null,em,Xg)),l["\u0275did"](1,180224,null,0,Jg,[Kn,U.a],null,null)],null,null)},{filter:"filter"},{filterChanged:"filterChanged"},[]);var nm=function(){function e(e,n){this.I18n=e,this.timezoneService=n}return e.prototype.ngOnInit=function(){var e=this;_.remove(this.filter.values,function(n){return!e.timezoneService.isValidISODateTime(n)})},e.prototype.isoDateParser=function(e){if(!this.timezoneService.isValidISODate(e))return"";var n=this.timezoneService.parseISODatetime(e);return this.timezoneService.formattedISODateTime(n)},e.prototype.isoDateFormatter=function(e){if(!this.timezoneService.isValidISODateTime(e))return"";var n=this.timezoneService.parseISODatetime(e);return this.timezoneService.formattedISODate(n)},Object.defineProperty(e.prototype,"isTimeZoneDifferent",{get:function(){var e=this.lowerBoundary||this.upperBoundary;return!!e&&(0!==e.hours()||0!==e.minutes())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeZoneText",{get:function(){return this.lowerBoundary&&this.upperBoundary?this.I18n.t("js.filter.time_zone_converted.two_values",{from:this.lowerBoundary.format("YYYY-MM-DD HH:mm"),to:this.upperBoundary.format("YYYY-MM-DD HH:mm")}):this.upperBoundary?this.I18n.t("js.filter.time_zone_converted.only_end",{to:this.upperBoundary.format("YYYY-MM-DD HH:mm")}):this.lowerBoundary?this.I18n.t("js.filter.time_zone_converted.only_start",{from:this.lowerBoundary.format("YYYY-MM-DD HH:mm")}):""},enumerable:!0,configurable:!0}),e}(),tm=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.I18n=n,l.timezoneService=t,l.filterChanged=new zg(Object(an.a)(l)),l}return r.d(n,e),n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"value",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values=[e],this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.filter.values[0].toString()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lowerBoundary",{get:function(){return this.value&&this.timezoneService.isValidISODateTime(this.valueString)?this.timezoneService.parseDatetime(this.valueString):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"upperBoundary",{get:function(){return this.value&&this.timezoneService.isValidISODateTime(this.valueString)?this.timezoneService.parseDatetime(this.valueString).add(24,"hours"):null},enumerable:!0,configurable:!0}),n}(nm),lm=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function im(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[["class","advanced-filters--tooltip-trigger -multiline"]],[[1,"data-tooltip",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-warning"]],null,null,null,Ct,wt)),l["\u0275did"](2,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon icon-warning")},function(e,n){e(n,0,0,n.component.timeZoneText)})}function om(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,12,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.value=i.isoDateParser(t))&&l);return l},Ro,So)),l["\u0275did"](2,245760,null,0,_o,[l.ElementRef,Ke,Kn],null,{onChange:"onChange"}),(e()(),l["\u0275eld"](3,0,null,0,7,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.value=o.isoDateParser(t))&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](5,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](8,671744,null,0,qi.l,[[8,null],[6,qi.f],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](10,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,im)),l["\u0275did"](12,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0);e(n,5,0,""),e(n,8,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]"),t.isoDateFormatter(t.value)),e(n,12,0,t.isTimeZoneDifferent)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,3,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,""),l["\u0275nov"](n,5).required?"":null,l["\u0275nov"](n,10).ngClassUntouched,l["\u0275nov"](n,10).ngClassTouched,l["\u0275nov"](n,10).ngClassPristine,l["\u0275nov"](n,10).ngClassDirty,l["\u0275nov"](n,10).ngClassValid,l["\u0275nov"](n,10).ngClassInvalid,l["\u0275nov"](n,10).ngClassPending)})}l["\u0275ccf"]("filter-date-time-value",tm,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-date-time-value",[],null,null,null,om,lm)),l["\u0275did"](1,245760,null,0,tm,[U.a,Kn],null,null)],function(e,n){e(n,1,0)},null)},{filter:"filter"},{filterChanged:"filterChanged"},[]);var rm=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.I18n=n,l.timezoneService=t,l.filterChanged=new zg(Object(an.a)(l)),l.text={spacer:l.I18n.t("js.filter.value_spacer")},l}return r.d(n,e),n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"begin",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values[0]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this.filter.values[1]},set:function(e){this.filter.values[1]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lowerBoundary",{get:function(){return this.begin&&this.timezoneService.isValidISODateTime(this.begin.toString())?this.timezoneService.parseDatetime(this.begin.toString()):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"upperBoundary",{get:function(){return this.end&&this.timezoneService.isValidISODateTime(this.end.toString())?this.timezoneService.parseDatetime(this.end.toString()):null},enumerable:!0,configurable:!0}),n}(nm),am=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function um(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[["class","advanced-filters--tooltip-trigger -multiline"]],[[1,"data-tooltip",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-warning"]],null,null,null,Ct,wt)),l["\u0275did"](2,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon icon-warning")},function(e,n){e(n,0,0,n.component.timeZoneText)})}function sm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,21,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.begin=i.isoDateParser(t))&&l);return l},Ro,So)),l["\u0275did"](2,245760,null,0,_o,[l.ElementRef,Ke,Kn],null,{onChange:"onChange"}),(e()(),l["\u0275eld"](3,0,null,0,7,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,4)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.begin=o.isoDateParser(t))&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](5,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](8,671744,null,0,qi.l,[[8,null],[6,qi.f],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](10,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](11,0,null,null,0,"span",[["class","advanced-filters--affix"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,7,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.end=i.isoDateParser(t))&&l);return l},Ro,So)),l["\u0275did"](13,245760,null,0,_o,[l.ElementRef,Ke,Kn],null,{onChange:"onChange"}),(e()(),l["\u0275eld"](14,0,null,0,5,"input",[["class","advanced-filters--date-field"],["size","10"],["type","text"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,15)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,15).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,15)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,15)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.end=o.isoDateParser(t))&&i);return i},null,null)),l["\u0275did"](15,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](17,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](19,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,um)),l["\u0275did"](21,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0);e(n,5,0,""),e(n,8,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]-begin"),t.isoDateFormatter(t.begin)),e(n,13,0),e(n,17,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"]-end"),t.isoDateFormatter(t.end)),e(n,21,0,t.isTimeZoneDifferent)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,3,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,"-begin"),l["\u0275nov"](n,5).required?"":null,l["\u0275nov"](n,10).ngClassUntouched,l["\u0275nov"](n,10).ngClassTouched,l["\u0275nov"](n,10).ngClassPristine,l["\u0275nov"](n,10).ngClassDirty,l["\u0275nov"](n,10).ngClassValid,l["\u0275nov"](n,10).ngClassInvalid,l["\u0275nov"](n,10).ngClassPending),e(n,11,0,t.text.spacer),e(n,14,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,"-end"),l["\u0275nov"](n,19).ngClassUntouched,l["\u0275nov"](n,19).ngClassTouched,l["\u0275nov"](n,19).ngClassPristine,l["\u0275nov"](n,19).ngClassDirty,l["\u0275nov"](n,19).ngClassValid,l["\u0275nov"](n,19).ngClassInvalid,l["\u0275nov"](n,19).ngClassPending)})}l["\u0275ccf"]("filter-date-times-value",rm,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-date-times-value",[],null,null,null,sm,am)),l["\u0275did"](1,245760,null,0,rm,[U.a,Kn],null,null)],function(e,n){e(n,1,0)},null)},{filter:"filter"},{filterChanged:"filterChanged"},[]);var cm=function(){function e(e){this.I18n=e,this.filterChanged=new zg(Object(an.a)(this)),this.text={enter_text:this.I18n.t("js.work_packages.description_enter_text")}}return e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"value",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values[0]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),e}(),dm=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function pm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"input",[["class","advanced-filters--text-field"],["requried","true"],["type","text"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,2)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](4,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](6,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](7,0,null,null,0,"label",[["class","hidden-for-sighted"]],[[8,"htmlFor",0],[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,4,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.name,"]"),t.value)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.name,"")),e(n,1,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.name,""),l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending),e(n,7,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.name,""),t.text.enter_text)})}l["\u0275ccf"]("filter-string-value",cm,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-string-value",[],null,null,null,pm,dm)),l["\u0275did"](1,180224,null,0,cm,[U.a],null,null)],null,null)},{filter:"filter"},{filterChanged:"filterChanged"},[]);var hm=function(){function e(e){this.I18n=e,this.filterChanged=new l.EventEmitter,this.text={placeholder:this.I18n.t("js.placeholders.selection"),true:this.I18n.t("js.general_text_Yes"),false:this.I18n.t("js.general_text_No")}}return Object.defineProperty(e.prototype,"value",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values[0]=e,this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNoValue",{get:function(){return _.isEmpty(this.filter.values)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availableOptions",{get:function(){return[!0,!1]},enumerable:!0,configurable:!0}),e}(),fm=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function gm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["disabled",""],["value",""]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,"");e(n,2,0,"")},function(e,n){e(n,0,0,n.component.text.placeholder)})}function mm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.component.text[n.context.$implicit])})}function vm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"select",[["class","advanced-filters--select-field"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,qi.p,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.p]),l["\u0275did"](4,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](6,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,gm)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,mm)),l["\u0275did"](10,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.name,"]"),t.value),e(n,8,0,t.hasNoValue),e(n,10,0,t.availableOptions)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.name,"")),e(n,1,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.name,""),l["\u0275nov"](n,6).ngClassUntouched,l["\u0275nov"](n,6).ngClassTouched,l["\u0275nov"](n,6).ngClassPristine,l["\u0275nov"](n,6).ngClassDirty,l["\u0275nov"](n,6).ngClassValid,l["\u0275nov"](n,6).ngClassInvalid,l["\u0275nov"](n,6).ngClassPending)})}l["\u0275ccf"]("filter-boolean-value",hm,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-boolean-value",[],null,null,null,vm,fm)),l["\u0275did"](1,49152,null,0,hm,[U.a],null,null)],null,null)},{filter:"filter"},{filterChanged:"filterChanged"},[]);var ym=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(){return this.halResourceService.get(this.pathHelper.api.v3.root.toString()).toPromise()},e}(),bm=function(){function e(e,n,t,i,o){this.RootDm=e,this.halResourceService=n,this.halSorting=t,this.PathHelper=i,this.I18n=o,this.filterChanged=new l.EventEmitter,this._availableOptions=[],this.compareByHrefOrString=pr.compareByHrefOrString,this.text={placeholder:this.I18n.t("js.placeholders.selection"),enableMulti:this.I18n.t("js.work_packages.label_enable_multi_select"),disableMulti:this.I18n.t("js.work_packages.label_disable_multi_select")}}return e.prototype.ngOnInit=function(){this.isMultiselect=this.isValueMulti(!0),this.fetchAllowedValues()},Object.defineProperty(e.prototype,"value",{get:function(){return this.isValueMulti()?this.filter.values:this.filter.values.length>0?this.filter.values[0]:null},set:function(e){this.filter.values=_.castArray(e),this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),e.prototype.isValueMulti=function(e){return void 0===e&&(e=!1),this.isMultiselect&&!e||this.filter.values&&this.filter.values.length>1},e.prototype.toggleMultiselect=function(){return this.isMultiselect=!this.isMultiselect,!1},Object.defineProperty(e.prototype,"hasNoValue",{get:function(){return _.isEmpty(this.filter.values)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availableOptions",{get:function(){return this._availableOptions},set:function(e){this._availableOptions=this.halSorting.sort(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUserResource",{get:function(){var e=_.get(this.filter.currentSchema,"values.type",null);return e&&e.indexOf("User")>0},enumerable:!0,configurable:!0}),e.prototype.fetchAllowedValues=function(){this.filter.currentSchema.values.allowedValues.$load?this.loadAllowedValues():this.availableOptions=this.filter.currentSchema.values.allowedValues},e.prototype.loadAllowedValues=function(){var e=this,n=[this.filter.currentSchema.values.allowedValues.$load()];this.isUserResource&&n.push(this.RootDm.load()),Promise.all(n).then(function(n){var t=n[0].elements;e.availableOptions=t,e.isUserResource&&"memberOfGroup"!==e.filter.filter.id&&e.addMeValue(n[1].user)})},e.prototype.addMeValue=function(e){if(e&&e.$href){var n=this.halResourceService.createHalResource({_links:{self:{href:this.PathHelper.api.v3.users.me,title:this.I18n.t("js.label_me")}}},!0);this._availableOptions.unshift(n)}},e}(),wm=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function km(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["disabled",""]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,null);e(n,2,0,null)},function(e,n){e(n,0,0,n.component.text.placeholder)})}function Cm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name)})}function Pm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"select",[["class","advanced-filters--select"],["filter-value-select",""]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,1).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.p,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.p]),l["\u0275did"](3,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](5,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,km)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Cm)),l["\u0275did"](9,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.compareByHrefOrString),e(n,3,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"][]"),t.value),e(n,7,0,t.hasNoValue),e(n,9,0,t.availableOptions)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,""),l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending)})}function Im(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["disabled",""],["selected",""]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[2,qi.q]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,null);e(n,2,0,null)},function(e,n){e(n,0,0,n.component.text.placeholder)})}function jm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[2,qi.q]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name)})}function _m(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"select",[["class","advanced-filters--select"],["filter-value-select",""],["multiple",""]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,1).onChange(t.target)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.value=t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.q,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.q]),l["\u0275did"](3,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](5,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,Im)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,jm)),l["\u0275did"](9,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.compareByHrefOrString),e(n,3,0,l["\u0275inlineInterpolate"](1,"v[",t.filter.id,"][]"),t.value),e(n,7,0,t.hasNoValue),e(n,9,0,t.availableOptions)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"values-",t.filter.id,""),l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending)})}function Sm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon4 icon-minus2"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){e(n,1,0,"icon4 icon-minus2",n.component.text.disableMulti)},null)}function Rm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon4 icon-add"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){e(n,1,0,"icon4 icon-add",n.component.text.enableMulti)},null)}function Tm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Pm)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,_m)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](5,0,null,null,4,"a",[["class","form-label filter-toggled-multiselect--toggler no-decoration-on-hover -transparent"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleMultiselect()&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Sm)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Rm)),l["\u0275did"](9,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.isMultiselect),e(n,4,0,t.isMultiselect),e(n,7,0,t.isMultiselect),e(n,9,0,!t.isMultiselect)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"div-values-",t.filter.id,""))})}l["\u0275ccf"]("filter-toggled-multiselect-value",bm,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-toggled-multiselect-value",[],null,null,null,Tm,wm)),l["\u0275did"](1,114688,null,0,bm,[ym,ee,fr,R,U.a],null,null)],function(e,n){e(n,1,0)},null)},{filter:"filter"},{filterChanged:"filterChanged"},[]);var xm=function(){function e(e,n,t){this.wpTableFilters=e,this.wpFiltersService=n,this.I18n=t,this.filterChanged=new l.EventEmitter,this.deactivateFilter=new l.EventEmitter,this.showValuesInput=!1,this.eeShowBanners=!1,this.trackByHref=pr.halHref,this.compareByHref=pr.compareByHref,this.text={open_filter:this.I18n.t("js.filter.description.text_open_filter"),close_filter:this.I18n.t("js.filter.description.text_close_filter"),label_filter_add:this.I18n.t("js.work_packages.label_filter_add"),upsale_for_more:this.I18n.t("js.filter.upsale_for_more"),upsale_link:this.I18n.t("js.filter.upsale_link"),button_delete:this.I18n.t("js.button_delete")}}return e.prototype.onFilterUpdated=function(e){this.filter=e,this.showValuesInput=this.filter.currentSchema.isValueRequired(),this.filterChanged.emit(this.filter)},e.prototype.removeThisFilter=function(){this.deactivateFilter.emit(this.filter)},Object.defineProperty(e.prototype,"valueType",{get:function(){if(this.filter.currentSchema&&this.filter.currentSchema.values)return this.filter.currentSchema.values.type},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.eeShowBanners=jQuery("body").hasClass("ee-banners-visible"),this.availableOperators=this.filter.schema.availableOperators,this.showValuesInput=this.filter.currentSchema.isValueRequired()},e.prototype.ngOnDestroy=function(){},e}(),Em=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Om(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name)})}function Dm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-integer-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Kg,Ug)),l["\u0275did"](1,180224,null,0,Qg,[U.a],{filter:[0,"filter"]},{filterChanged:"filterChanged"})],function(e,n){e(n,1,0,n.component.filter)},null)}function Fm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-date-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Zg,Gg)),l["\u0275did"](1,180224,null,0,Yg,[Kn,U.a],{filter:[0,"filter"]},{filterChanged:"filterChanged"})],function(e,n){e(n,1,0,n.component.filter)},null)}function Am(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-dates-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},em,Xg)),l["\u0275did"](1,180224,null,0,Jg,[Kn,U.a],{filter:[0,"filter"]},{filterChanged:"filterChanged"})],function(e,n){e(n,1,0,n.component.filter)},null)}function Vm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-date-time-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},om,lm)),l["\u0275did"](1,245760,null,0,tm,[U.a,Kn],{filter:[0,"filter"]},{filterChanged:"filterChanged"})],function(e,n){e(n,1,0,n.component.filter)},null)}function Mm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-date-times-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},sm,am)),l["\u0275did"](1,245760,null,0,rm,[U.a,Kn],{filter:[0,"filter"]},{filterChanged:"filterChanged"})],function(e,n){e(n,1,0,n.component.filter)},null)}function Lm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-string-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},pm,dm)),l["\u0275did"](1,180224,null,0,cm,[U.a],{filter:[0,"filter"]},{filterChanged:"filterChanged"})],function(e,n){e(n,1,0,n.component.filter)},null)}function Nm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-string-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},pm,dm)),l["\u0275did"](1,180224,null,0,cm,[U.a],{filter:[0,"filter"]},{filterChanged:"filterChanged"})],function(e,n){e(n,1,0,n.component.filter)},null)}function $m(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-boolean-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},vm,fm)),l["\u0275did"](1,49152,null,0,hm,[U.a],{filter:[0,"filter"]},{filterChanged:"filterChanged"})],function(e,n){e(n,1,0,n.component.filter)},null)}function qm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-toggled-multiselect-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Tm,wm)),l["\u0275did"](1,114688,null,0,bm,[ym,ee,fr,R,U.a],{filter:[0,"filter"]},{filterChanged:"filterChanged"})],function(e,n){e(n,1,0,n.component.filter)},null)}function Hm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,20,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,19,"div",[["class","advanced-filters--filter-value"]],null,null,null,null,null)),l["\u0275did"](2,16384,null,0,yt.n,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Dm)),l["\u0275did"](4,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Fm)),l["\u0275did"](6,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Am)),l["\u0275did"](8,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Vm)),l["\u0275did"](10,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Mm)),l["\u0275did"](12,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Lm)),l["\u0275did"](14,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Nm)),l["\u0275did"](16,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,$m)),l["\u0275did"](18,278528,null,0,yt.o,[l.ViewContainerRef,l.TemplateRef,yt.n],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,qm)),l["\u0275did"](20,16384,null,0,yt.p,[l.ViewContainerRef,l.TemplateRef,yt.n],null,null)],function(e,n){e(n,2,0,n.component.valueType);e(n,4,0,"[1]Integer");e(n,6,0,"[1]Date");e(n,8,0,"[2]Date");e(n,10,0,"[1]DateTime");e(n,12,0,"[2]DateTime");e(n,14,0,"[1]String");e(n,16,0,"[1]Float");e(n,18,0,"[1]Boolean")},null)}function Bm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","advanced-filters--filter-value"]],null,null,null,null,null))],null,null)}function Wm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,23,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"label",[["class","advanced-filters--filter-name"]],[[8,"htmlFor",0],[8,"textContent",0],[1,"title",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,12,"div",[["class","advanced-filters--filter-operator"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"label",[["class","hidden-for-sighted"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),l["\u0275ted"](4,null,[" "," "," "])),(e()(),l["\u0275eld"](5,0,null,null,9,"select",[["class","advanced-filters--select"],["required",""],["style","vertical-align: top;"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,6).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,6).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.filter.operator=t)&&i);"ngModelChange"===n&&(i=!1!==o.onFilterUpdated(o.filter)&&i);return i},null,null)),l["\u0275did"](6,16384,null,0,qi.p,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["\u0275did"](7,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.p]),l["\u0275did"](10,671744,null,0,qi.l,[[8,null],[6,qi.f],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](12,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,Om)),l["\u0275did"](14,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Hm)),l["\u0275did"](16,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Bm)),l["\u0275did"](18,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](19,0,null,null,4,"div",[["class","advanced-filters--remove-filter"]],null,null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,3,"accessible-by-keyboard",[],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.removeThisFilter()&&l);return l},Dt,Ot)),l["\u0275did"](21,49152,null,0,Et,[],null,{execute:"execute"}),(e()(),l["\u0275eld"](22,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-close advanced-filters--remove-filter-icon"]],null,null,null,Ct,wt)),l["\u0275did"](23,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,6,0,t.compareByHref);e(n,7,0,""),e(n,10,0,l["\u0275inlineInterpolate"](1,"op[",t.filter.id,"]"),t.filter.operator),e(n,14,0,t.availableOperators),e(n,16,0,t.showValuesInput&&t.valueType),e(n,18,0,!t.showValuesInput);e(n,23,0,"icon-close advanced-filters--remove-filter-icon",t.text.button_delete)},function(e,n){var t=n.component;e(n,1,0,l["\u0275inlineInterpolate"](1,"operators-",t.filter.id,""),t.filter.name,t.filter.name),e(n,3,0,l["\u0275inlineInterpolate"](1,"operators-",t.filter.id,"")),e(n,4,0,t.filter.name,t.text.open_filter),e(n,5,0,l["\u0275inlineInterpolate"](1,"operators-",t.filter.id,""),l["\u0275nov"](n,7).required?"":null,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending)})}l["\u0275ccf"]("[query-filter]",xm,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["query-filter",""]],null,null,null,Wm,Em)),l["\u0275did"](1,245760,null,0,xm,[ke,kn,U.a],null,null)],function(e,n){e(n,1,0)},null)},{filter:"filter"},{filterChanged:"filterChanged",deactivateFilter:"deactivateFilter"},[]);var zm=function(){function e(e,n,t){this.wpTableFilters=e,this.wpFiltersService=n,this.I18n=t,this.showCloseFilter=!1,this.filtersChanged=new zg(Object(an.a)(this)),this.remainingFilters=[],this.eeShowBanners=!1,this.focusElementIndex=0,this.compareByName=pr.trackByName,this.text={open_filter:this.I18n.t("js.filter.description.text_open_filter"),label_filter_add:this.I18n.t("js.work_packages.label_filter_add"),close_filter:this.I18n.t("js.filter.description.text_close_filter"),upsale_for_more:this.I18n.t("js.filter.upsale_for_more"),upsale_link:this.I18n.t("js.filter.upsale_link"),close_form:this.I18n.t("js.close_form_title"),selected_filter_list:this.I18n.t("js.label_selected_filter_list"),button_delete:this.I18n.t("js.button_delete"),please_select:this.I18n.t("js.placeholders.selection")}}return e.prototype.ngOnInit=function(){this.eeShowBanners=jQuery("body").hasClass("ee-banners-visible")},e.prototype.ngOnDestroy=function(){},e.prototype.ngOnChanges=function(){this.updateRemainingFilters()},e.prototype.onFilterAdded=function(e){if(e){this.filters.add(e);this.filterToBeAdded=void 0;var n=this.currentFilterLength();this.updateFilterFocus(n),this.updateRemainingFilters(),this.filtersChanged.emit(this.filters)}},e.prototype.closeFilter=function(){this.wpFiltersService.toggleVisibility()},e.prototype.isHiddenFilter=function(e){return _.includes(this.filters.hidden,e.id)},e.prototype.deactivateFilter=function(e){var n=this.filters.current.indexOf(e);this.filters.remove(e),e.isCompletelyDefined()&&this.filtersChanged.emit(this.filters),this.updateFilterFocus(n),this.updateRemainingFilters()},e.prototype.updateRemainingFilters=function(){this.remainingFilters=_.sortBy(this.filters.remainingVisibleFilters,"name")},e.prototype.updateFilterFocus=function(e){var n=this.currentFilterLength();if(0===n)this.focusElementIndex=-1;else{var t=e<n?e:n-1,l=this.currentFilterAt(t);this.focusElementIndex=this.filters.current.indexOf(l)}},e.prototype.currentFilterLength=function(){return this.filters.current.length},e.prototype.currentFilterAt=function(e){return this.filters.current[e]},e}(),Qm=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Um(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"a",[["class","advanced-filters--close icon-context icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeFilter()&&l);return l},null,null))],null,function(e,n){e(n,0,0,n.component.text.close_form)})}function Km(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"li",[["class","advanced-filters--filter"],["query-filter",""]],[[8,"id",0],[8,"hidden",0]],[[null,"deactivateFilter"],[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"deactivateFilter"===n&&(l=!1!==i.deactivateFilter(t)&&l);"filterChanged"===n&&(l=!1!==i.filtersChanged.emit(i.filters)&&l);return l},Wm,Em)),l["\u0275did"](2,245760,null,0,xm,[ke,kn,U.a],{filter:[0,"filter"]},{filterChanged:"filterChanged",deactivateFilter:"deactivateFilter"})],function(e,n){e(n,2,0,n.context.$implicit)},function(e,n){var t=n.component;e(n,1,0,l["\u0275inlineInterpolate"](1,"filter_",n.context.$implicit.id,""),t.isHiddenFilter(n.context.$implicit))})}function Ym(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"li",[["class","advanced-filters--spacer"]],null,null,null,null,null))],null,null)}function Gm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name)})}function Zm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","advanced-filters--add-filter-info"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","notification-box"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","notification-box--content"]],null,null,null,null,null)),(e()(),l["\u0275ted"](3,null,[" "," "])),(e()(),l["\u0275eld"](4,0,null,null,0,"a",[["href","https://www.openproject.org/enterprise-edition/?op_edtion=community-edition&op_referrer=wp-filter#filters"],["target","blank"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.text.upsale_for_more),e(n,4,0,t.text.upsale_link)})}function Jm(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,29,"fieldset",[["class","advanced-filters--container"],["id","filters"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"legend",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Um)),l["\u0275did"](3,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](4,0,null,null,25,"ul",[["class","advanced-filters--filters"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Km)),l["\u0275did"](6,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Ym)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](9,0,null,null,20,"li",[["class","advanced-filters--add-filter"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,3,"label",[["aria-hidden","true"],["class","advanced-filters--add-filter-label"],["for","add_filter_select"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-add icon4"]],null,null,null,Ct,wt)),l["\u0275did"](12,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275ted"](13,null,[" ",": "])),(e()(),l["\u0275eld"](14,0,null,null,1,"label",[["class","hidden-for-sighted"],["for","add_filter_select"]],null,null,null,null,null)),(e()(),l["\u0275ted"](15,null,[" "," "," "," "])),(e()(),l["\u0275eld"](16,0,null,null,11,"div",[["class","advanced-filters--add-filter-value"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,10,"select",[["class","advanced-filters--select"],["id","add_filter_select"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,18).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,18).onTouched()&&i);"ngModelChange"===n&&(i=!1!==o.onFilterAdded(t)&&i);return i},null,null)),l["\u0275did"](18,16384,null,0,qi.p,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.p]),l["\u0275did"](20,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](22,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](23,0,null,null,2,"option",[["disabled",""],["value",""]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](24,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{value:[0,"value"]},null),l["\u0275did"](25,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Gm)),l["\u0275did"](27,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Zm)),l["\u0275did"](29,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.showCloseFilter),e(n,6,0,t.filters.current,t.trackByName),e(n,8,0,t.filters.current.length>0);e(n,12,0,"icon-add icon4"),e(n,20,0,t.filterToBeAdded);e(n,24,0,"");e(n,25,0,""),e(n,27,0,t.remainingFilters),e(n,29,0,t.eeShowBanners)},function(e,n){var t=n.component;e(n,1,0,t.text.selected_filter_list),e(n,13,0,t.text.label_filter_add),e(n,15,0,t.text.label_filter_add,t.text.open_filter,t.text.close_filter),e(n,17,0,l["\u0275nov"](n,22).ngClassUntouched,l["\u0275nov"](n,22).ngClassTouched,l["\u0275nov"](n,22).ngClassPristine,l["\u0275nov"](n,22).ngClassDirty,l["\u0275nov"](n,22).ngClassValid,l["\u0275nov"](n,22).ngClassInvalid,l["\u0275nov"](n,22).ngClassPending),e(n,23,0,t.text.please_select)})}function Xm(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Jm)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.filters&&t.filters.current)},null)}l["\u0275ccf"]("query-filters",zm,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"query-filters",[],null,null,null,Xm,Qm)),l["\u0275did"](1,770048,null,0,zm,[ke,kn,U.a],null,null)],function(e,n){e(n,1,0)},null)},{filters:"filters",showCloseFilter:"showCloseFilter"},{filtersChanged:"filtersChanged"},[]);var ev=function(){function e(e,n){var t=this;this.wpTableFilters=e,this.wpFiltersService=n,this.filters=this.wpTableFilters.currentState,this.wpTableFilters.observeUntil(Object(an.a)(this)).subscribe(function(){t.filters=t.wpTableFilters.currentState})}return e.prototype.ngOnDestroy=function(){},e.prototype.replaceIfComplete=function(e){this.wpTableFilters.replaceIfComplete(this.filters)},e}(),nv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function tv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"query-filters",[],null,[[null,"filtersChanged"]],function(e,n,t){var l=!0,i=e.component;"filtersChanged"===n&&(l=!1!==i.replaceIfComplete(t)&&l);return l},Xm,Qm)),l["\u0275did"](1,770048,null,0,zm,[ke,kn,U.a],{filters:[0,"filters"],showCloseFilter:[1,"showCloseFilter"]},{filtersChanged:"filtersChanged"})],function(e,n){e(n,1,0,n.component.filters,!0)},null)}function lv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","work-packages--filters-optional-container"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","hide-when-print"],["id","query_form_content"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,tv)),l["\u0275did"](3,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,3,0,!!n.component.filters)},function(e,n){e(n,0,0,!n.component.wpFiltersService.visible)})}l["\u0275ccf"]("filter-container",ev,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"filter-container",[],null,null,null,lv,nv)),l["\u0275did"](1,180224,null,0,ev,[ke,kn],null,null)],null,null)},{},{},[]);var iv=function(){function e(e,n,t,l,i,o,r,a,u,s,c,d,p,h,f,g,m,v,y,b,w){this.injector=e,this.states=n,this.tableState=t,this.authorisationService=l,this.wpTableRefresh=i,this.wpTableColumns=o,this.wpTableHighlighting=r,this.wpTableSortBy=a,this.wpTableGroupBy=u,this.wpTableFilters=s,this.wpTableSum=c,this.wpTableTimeline=d,this.wpTableHierarchies=p,this.wpTablePagination=h,this.wpListService=f,this.wpListChecksumService=g,this.loadingIndicator=m,this.$transitions=v,this.$state=y,this.I18n=b,this.wpStaticQueries=w,this.projectIdentifier=this.$state.params.projectPath||null,this.tableInformationLoaded=!1}return e.prototype.ngOnInit=function(){var e=this.wpListChecksumService.isUninitialized();this.setupQueryObservers(),this.initialQueryLoading(e),this.setupRefreshObserver(),this.updateQueryOnParamsChanges()},e.prototype.ngOnDestroy=function(){this.removeTransitionSubscription&&this.removeTransitionSubscription(),this.wpTableRefresh.clear("Table controller scope destroyed.")},e.prototype.setupQueryObservers=function(){var e=this;this.tableState.tableRendering.onQueryUpdated.values$().pipe(Object(H.a)(1)).subscribe(function(){return e.tableInformationLoaded=!0}),this.tableState.ready.fireOnStateChange(this.wpTablePagination.state,"Query loaded").values$().pipe(Object(an.b)(this),Object(rn.a)(this.tableState.query.values$())).subscribe(function(n){var t=n[0],l=n[1];e.wpListChecksumService.isQueryOutdated(l,t)&&(e.wpListChecksumService.update(l,t),e.updateResultsVisibly())}),this.setupChangeObserver(this.wpTableFilters,!0),this.setupChangeObserver(this.wpTableGroupBy),this.setupChangeObserver(this.wpTableSortBy),this.setupChangeObserver(this.wpTableSum),this.setupChangeObserver(this.wpTableTimeline),this.setupChangeObserver(this.wpTableHierarchies),this.setupChangeObserver(this.wpTableColumns),this.setupChangeObserver(this.wpTableHighlighting)},e.prototype.setupChangeObserver=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.tableState.query;this.tableState.ready.fireOnStateChange(e.state,"Query loaded").values$().pipe(Object(an.b)(this),Object(E.a)(function(){return l.hasValue()&&e.hasChanged(l.value)})).subscribe(function(){var i=l.value,o=e.applyToQuery(i);t.tableState.query.putValue(i),t.wpListChecksumService.updateIfDifferent(i,t.wpTablePagination.current),o&&t.wpTableRefresh.request("Query updated by user",!0,n)})},e.prototype.setupRefreshObserver=function(){var e=this;this.wpTableRefresh.state.values$("Refresh listener in wp-list.controller").pipe(Object(an.b)(this),Object(Xl.a)(20)).subscribe(function(n){var t=n[0],l=n[1];t?(Object(Ee.a)("Refreshing work package results visibly."),e.updateResultsVisibly(l)):(Object(Ee.a)("Refreshing work package results in the background."),e.updateResults())})},e.prototype.updateResults=function(){return this.wpListService.reloadCurrentResultsList()},e.prototype.updateResultsVisibly=function(e){void 0===e&&(e=!1),this.loadingIndicator.table.promise=e?this.updateToFirstResultsPage():this.updateResults()},e.prototype.updateToFirstResultsPage=function(){return this.wpListService.loadCurrentResultsListFirstPage()},e.prototype.updateQueryOnParamsChanges=function(){var e=this;this.removeTransitionSubscription=this.$transitions.onSuccess({},function(n){var t=n.options();if(t.reload||t.custom&&!1===t.custom.notify)return!0;var l=n.params("to"),i=e.wpListService.getCurrentQueryProps(l),o=l.query_id&&parseInt(l.query_id);e.wpListChecksumService.executeIfOutdated(o,i,function(){return e.loadCurrentQuery()})})},e.prototype.initialQueryLoading=function(e){e&&(this.wpTableRefresh.clear("Impending query loading."),this.loadCurrentQuery())},e.prototype.loadCurrentQuery=function(){var e=this.wpListService.loadCurrentQueryFromParams(this.projectIdentifier);return this.loadingIndicator.table.promise=e,e},e}(),ov=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={jump_to_pagination:n.I18n.t("js.work_packages.jump_marks.pagination"),text_jump_to_pagination:n.I18n.t("js.work_packages.jump_marks.label_pagination"),button_settings:n.I18n.t("js.button_settings")},n.titleService=n.injector.get(Kd),n}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.unRegisterTitleListener=this.$transitions.onSuccess({to:"work-packages.list"},function(){n.selectedTitle&&n.titleService.setFirstPart(n.selectedTitle)}),this.tableState.query.values$().pipe(Object(an.b)(this)).subscribe(function(e){n.updateTitle(e),n.currentQuery=e})},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.unRegisterTitleListener()},n.prototype.setAnchorToNextElement=function(){var e=jQuery("#pagination--next-link, #pagination--prev-link, #pagination-empty-text").not(":hidden").first();e.length&&e.focus()},n.prototype.allowed=function(e,n){return this.authorisationService.can(e,n)},n.prototype.updateTitle=function(e){e.id?(this.selectedTitle=e.name,this.titleEditingEnabled=!0):(this.selectedTitle=this.wpStaticQueries.getStaticName(e),this.titleEditingEnabled=!1),"work-packages.list"===this.$state.current.name&&this.titleService.setFirstPart(this.selectedTitle)},n.prototype.loadCurrentQuery=function(){var n=this;return e.prototype.loadCurrentQuery.call(this).then(function(){return n.tableState.rendered.valuesPromise()})},n}(iv),rv=function(){function e(e,n,t,l,i){this.I18n=e,this.$state=n,this.CurrentProject=t,this.PathHelper=l,this.CurrentUserService=i,this.text={assignee:this.I18n.t("js.work_packages.properties.assignee"),author:this.I18n.t("js.work_packages.properties.author"),created_at:this.I18n.t("js.work_packages.properties.createdAt"),updated_at:this.I18n.t("js.work_packages.properties.updatedAt"),status:this.I18n.t("js.work_packages.properties.status"),work_packages:this.I18n.t("js.label_work_package_plural"),gantt:this.I18n.t("js.timelines.gantt_chart"),latest_activity:this.I18n.t("js.work_packages.default_queries.latest_activity"),created_by_me:this.I18n.t("js.work_packages.default_queries.created_by_me"),assigned_to_me:this.I18n.t("js.work_packages.default_queries.assigned_to_me"),recently_created:this.I18n.t("js.work_packages.default_queries.recently_created"),all_open:this.I18n.t("js.work_packages.default_queries.all_open"),summary:this.I18n.t("js.work_packages.default_queries.summary")}}return Object.defineProperty(e.prototype,"all",{get:function(){var e=[{identifier:"latest_activity",label:this.text.latest_activity,query_props:'{"c":["id","subject","type","status","assignee","updatedAt"],"hi":false,"g":"","t":"updatedAt:desc","f":[{"n":"status","o":"o","v":[]}]}'},{identifier:"gantt",label:this.text.gantt,query_props:'{"c":["id","subject"], "tv":true,"hi":true}'},{identifier:"recently_created",label:this.text.recently_created,query_props:'{"c":["id","subject","type","status","assignee","createdAt"],"hi":false,"g":"","t":"createdAt:desc,","f":[{"n":"status","o":"o","v":[]}]}'},{identifier:"all_open",label:this.text.all_open,query_props:null}],n=this.CurrentProject.identifier;return n&&e.push({identifier:"summary",label:this.text.summary,static_link:this.PathHelper.projectWorkPackagesPath(n)+"/report"}),this.CurrentUserService.isLoggedIn&&(e=e.concat([{identifier:"created_by_me",label:this.text.created_by_me,query_props:'{"c":["id","subject","type","status","assignee","updatedAt"],"tzl":"days","hi":false,"g":"","t":"updatedAt:desc,parent:asc","f":[{"n":"status","o":"o","v":[]},{"n":"author","o":"=","v":["me"]}],"pa":1,"pp":20}'},{identifier:"assigned_to_me",label:this.text.assigned_to_me,query_props:'{"c":["id","subject","type","status", "author", "updatedAt"],"t":"updatedAt:desc,parent:asc","f":[{"n":"status","o":"o","v":[]},{"n":"assignee","o":"=","v":["me"]}]}'}])),e},enumerable:!0,configurable:!0}),e.prototype.getStaticName=function(e){var n=this,t=_.find(this.all,function(e){return e.query_props&&e.query_props===decodeURIComponent(n.$state.params.query_props)});return t?t.label:1===e.filters.length&&"status"===e.filters[0].id&&"o"===e.filters[0].operator.id?this.text.all_open:this.text.work_packages},e}(),av=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function uv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,20,"ul",[["class","toolbar-items hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"wp-create-button",[["stateName","work-packages.list.new"]],null,null,null,dp,up)),l["\u0275did"](3,114688,null,0,ap,[d.G,T,U.a],{stateName:[0,"stateName"],allowed:[1,"allowed"]},null),(e()(),l["\u0275eld"](4,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"wp-filter-button",[],null,null,null,wg,yg)),l["\u0275did"](6,180224,null,0,vg,[U.a,kn,ke],null,null),(e()(),l["\u0275eld"](7,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,1,"wp-details-view-button",[],null,null,null,Pg,Cg)),l["\u0275did"](9,49152,null,0,kg,[d.G,U.a,u,Dr,dn],null,null),(e()(),l["\u0275eld"](10,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,1,"wp-timeline-toggle-button",[],null,null,null,Tg,jg)),l["\u0275did"](12,49152,null,0,Ig,[U.a,ve],null,null),(e()(),l["\u0275eld"](13,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,$l,Nl)),l["\u0275did"](15,49152,null,0,Ll,[U.a],null,null),(e()(),l["\u0275eld"](16,0,null,null,4,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,3,"button",[["class","button last work-packages-settings-button toolbar-icon"],["id","work-packages-settings-button"],["opSettingsContextMenu",""],["opSettingsContextMenu-query","query"]],[[8,"title",0]],null,null,null,null)),l["\u0275did"](18,4341760,null,0,Lg,[l.ElementRef,ca,On.b,ds,Xe,u,A,U.a],{query:[0,"query"]},null),(e()(),l["\u0275eld"](19,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-show-more"]],null,null,null,Ct,wt)),l["\u0275did"](20,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"work-packages.list.new",n.component.allowed("work_packages","createWorkPackage"));e(n,18,0,"query");e(n,20,0,"button--icon icon-show-more")},function(e,n){var t=n.component;e(n,17,0,l["\u0275inlineInterpolate"](1,"",t.text.button_settings,""))})}function sv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-table",[["class","work-packages-split-view--tabletimeline-content"]],null,null,null,wc,cc)),l["\u0275did"](1,245760,null,0,Fs,[l.ElementRef,l.Injector,u,A,On.b,ca,U.a,l.ChangeDetectorRef,Pe,ve,Se],{projectIdentifier:[0,"projectIdentifier"]},null)],function(e,n){e(n,1,0,n.component.projectIdentifier)},null)}function cv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","work-packages-split-view--tabletimeline-footer hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"wp-table-pagination",[],null,null,null,Nc,Pc)),l["\u0275did"](2,245760,null,0,Cc,[le,ie,U.a],null,null)],function(e,n){e(n,2,0)},null)}function dv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,19,"div",[["class","work-packages-list-view--container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","toolbar-container -editable"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,4,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"wp-query-selectable-title",[["class","title-container"]],null,null,null,Wg,$g)),l["\u0275did"](4,114688,null,0,Mg,[l.ElementRef,U.a,ds,Xe,d.G,u],{selectedTitle:[0,"selectedTitle"],currentQuery:[1,"currentQuery"],queryEditable:[2,"queryEditable"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,uv)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](7,0,null,null,1,"filter-container",[],null,null,null,lv,nv)),l["\u0275did"](8,180224,null,0,ev,[ke,kn],null,null),(e()(),l["\u0275eld"](9,0,null,null,2,"accessible-by-keyboard",[["linkClass","hidden-for-sighted skip-navigation-link"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.setAnchorToNextElement()&&l);return l},Dt,Ot)),l["\u0275did"](10,49152,null,0,Et,[],{linkClass:[0,"linkClass"],linkAriaLabel:[1,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["\u0275eld"](11,0,null,0,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,7,"div",[["class","work-packages-split-view"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,4,"div",[["class","work-packages-split-view--tabletimeline-side loading-indicator--location"],["data-indicator-name","table"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,sv)),l["\u0275did"](15,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,cv)),l["\u0275did"](17,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](18,16777216,null,null,1,"div",[["class","work-packages-split-view--details-side"],["ui-view",""]],null,null,null,st.c,st.a)),l["\u0275did"](19,245760,null,0,Ql.a,[d.P,"UIView.PARENT_INJECT",l.ViewContainerRef],{_name:[0,"_name"]},null)],function(e,n){var t=n.component;e(n,4,0,t.selectedTitle,t.currentQuery,t.titleEditingEnabled),e(n,6,0,t.tableInformationLoaded);e(n,10,0,"hidden-for-sighted skip-navigation-link",t.text.text_jump_to_pagination),e(n,15,0,t.tableInformationLoaded),e(n,17,0,t.tableInformationLoaded);e(n,19,0,"")},function(e,n){e(n,11,0,n.component.text.jump_to_pagination)})}var pv=l["\u0275ccf"]("wp-list",ov,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-list",[],null,null,null,dv,av)),l["\u0275did"](1,245760,null,0,ov,[l.Injector,u,A,Xe,Ae,Se,ln,We,Pe,ke,be,ve,re,ie,ds,$e,Ue,d.O,d.G,U.a,rv],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),hv=function(){return function(){}}(),fv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function gv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","wp-new-top-row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","work-packages--status-selector wp-new-top-row--element"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"wp-edit-field",[],null,null,null,ha,pa)),l["\u0275did"](3,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"],displayFieldOptions:[3,"displayFieldOptions"]},null),l["\u0275pod"](4,{colorize:0}),(e()(),l["\u0275eld"](5,0,null,null,3,"div",[["class","work-packages--type-selector wp-new-top-row--element"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,2,"wp-edit-field",[],null,null,null,ha,pa)),l["\u0275did"](7,114688,null,0,da,[u,l.Injector,l.ElementRef,Ze,Ke,ca,Zn,Oe,Wr,Ge,U.a],{fieldName:[0,"fieldName"],workPackageId:[1,"workPackageId"],wrapperClasses:[2,"wrapperClasses"],displayFieldOptions:[3,"displayFieldOptions"]},null),l["\u0275pod"](8,{colorize:0})],function(e,n){var t=n.component,l=t.workPackage.id,i=e(n,4,0,!1);e(n,3,0,"status",l,"wp-new-top-row--status -no-label",i);var o=t.workPackage.id,r=e(n,8,0,!1);e(n,7,0,"type",o,"wp-new-top-row--type -no-label",r)},null)}function mv(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,gv)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["\u0275ccf"]("wp-type-status",hv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-type-status",[],null,null,null,mv,fv)),l["\u0275did"](1,49152,null,0,hv,[],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var vv=function(e){function n(n,t,l,i){var o=e.call(this,n,t)||this;return o.elementRef=n,o.opContextMenu=t,o.states=l,o.wpEditing=i,o}return r.d(n,e),n.prototype.open=function(e){var n=this,t=this.states.workPackages.get("new").value;t&&this.wpEditing.changesetFor(t).getForm().then(function(t){n.buildItems(t),n.opContextMenu.show(n,e)})},n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"right top",at:"right bottom"}),t},n.prototype.buildItems=function(e){this.items=[];var n=e.configureForm,t=e.customFields;t&&this.items.push({href:t.href,icon:"icon-custom-fields",linkText:t.name,onClick:function(){return!1}}),n&&this.items.push({href:n.href,icon:"icon-settings3",linkText:n.name,onClick:function(){return!1}})},n}(ju),yv=function(){function e(e,n){this.I18n=e,this.wpEditFieldGroup=n,this.onSave=new l.EventEmitter,this.onCancel=new l.EventEmitter,this.saving=!1,this.text={save:this.I18n.t("js.button_save"),cancel:this.I18n.t("js.button_cancel")}}return e.prototype.save=function(){var e=this;this.saving||(this.saving=!0,this.wpEditFieldGroup.saveWorkPackage().then(function(){e.saving=!1,e.onSave.emit()}).catch(function(){e.saving=!1}))},e.prototype.cancel=function(){this.wpEditFieldGroup.stop(),this.onCancel.emit()},e}(),bv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function wv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","work-packages--edit-actions"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"button",[["accesskey","3"],["class","button -alt-highlight"],["id","work-packages--edit-actions-save"]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.save()&&l);return l},null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-checkmark"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,3,"button",[["accesskey","7"],["class","button"],["id","work-packages--edit-actions-cancel"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.cancel()&&l);return l},null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-close"]],null,null,null,Ct,wt)),l["\u0275did"](7,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](8,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"button--icon icon-checkmark");e(n,7,0,"button--icon icon-close")},function(e,n){var t=n.component;e(n,1,0,t.saving),e(n,4,0,t.text.save),e(n,8,0,t.text.cancel)})}l["\u0275ccf"]("wp-edit-actions-bar",yv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-edit-actions-bar",[],null,null,null,wv,bv)),l["\u0275did"](1,49152,null,0,yv,[U.a,Wr],null,null)],null,null)},{},{onSave:"onSave",onCancel:"onCancel"},[]);var kv=function(){function e(e,n,t,l,i,o,r,a,u,s,c,d,p){this.$transition=e,this.$state=n,this.I18n=t,this.titleService=l,this.injector=i,this.currentUser=o,this.wpNotificationsService=r,this.states=a,this.wpCreate=u,this.wpTableFilters=s,this.wpCacheService=c,this.pathHelper=d,this.RootDm=p,this.wpEditing=this.injector.get(Zn),this.stateParams=this.$transition.params("to"),this.text={button_settings:this.I18n.t("js.button_settings")}}return e.prototype.ngOnInit=function(){var e=this;this.newWorkPackageFromParams(this.stateParams).then(function(n){e.changeset=n,e.newWorkPackage=n.workPackage,e.setTitle(),e.wpCacheService.updateWorkPackage(e.newWorkPackage),e.wpEditing.updateValue("new",n),e.stateParams.parent_id&&e.changeset.setValue("parent",{href:e.pathHelper.api.v3.work_packages.id(e.stateParams.parent_id).path}),e.stateParams.parent_id&&e.wpCacheService.loadWorkPackage(e.stateParams.parent_id).values$().pipe(Object(q.a)(Object(an.a)(e))).subscribe(function(n){e.parentWorkPackage=n})}).catch(function(n){"urn:openproject-org:api:v3:errors:MissingPermission"===n.errorIdentifier&&(e.RootDm.load().then(function(n){if(!n.user){var t=URI(e.pathHelper.loginPath());t.search({back_url:t}),window.location.href=t.toString()}}),e.wpNotificationsService.handleRawError(n))})},e.prototype.ngOnDestroy=function(){},e.prototype.switchToFullscreen=function(){this.$state.go("work-packages.new",this.$state.params)},e.prototype.setTitle=function(){this.titleService.setFirstPart(this.I18n.t("js.work_packages.create.title"))},e.prototype.newWorkPackageFromParams=function(e){var n=this,t=parseInt(e.type),l=this.wpEditing.state("new").value;if(void 0!==l){var i=l.workPackage.type,o=!l.empty,r=!i&&!t,a=i&&i.idFromLink===t.toString();if(o&&(r||a))return Promise.resolve(l)}return this.wpCreate.createNewTypedWorkPackage(e.projectPath,t).then(function(e){return new Tu(n.injector,e,n.wpTableFilters.current,["type"]).applyDefaultsFromFilters().then(function(){return e})})},e.prototype.cancelAndBackToList=function(){this.wpEditing.stopEditing(this.newWorkPackage.id),this.$state.go("work-packages.list",this.$state.params)},e}(),Cv=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.successState="work-packages.show",n}return r.d(n,e),n}(kv),Pv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Iv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,18,"div",[["class","work-package--new-state work-packages--new work-packages--show-view toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,17,"wp-edit-field-group",[],null,null,null,_d,jd)),l["\u0275did"](2,245760,null,0,Wr,[u,l.Injector,Gn,Zn,Ze,Er,Dr,d.O,Ke,d.G,U.a],{workPackage:[0,"workPackage"],successState:[1,"successState"],initializeEditMode:[2,"initializeEditMode"]},null),(e()(),l["\u0275eld"](3,0,null,0,11,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"wp-type-status",[],null,null,null,mv,fv)),l["\u0275did"](6,49152,null,0,hv,[],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](7,0,null,null,7,"ul",[["class","toolbar-items hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,$l,Nl)),l["\u0275did"](10,49152,null,0,Ll,[U.a],null,null),(e()(),l["\u0275eld"](11,0,null,null,3,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,2,"button",[["class","button last work-packages-settings-button toolbar-icon"],["id","create-wp-menu-button"],["wpCreateSettingsMenu",""]],[[1,"title",0]],null,null,null,null)),l["\u0275did"](13,4210688,null,0,vv,[l.ElementRef,ca,u,Zn],null,null),(e()(),l["\u0275eld"](14,0,null,null,0,"i",[["class","button--icon icon-show-more"]],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,0,1,"wp-single-view",[],null,null,null,Wp,Op)),l["\u0275did"](16,245760,null,0,Ep,[U.a,T,R,u,en,Zn,ta,Oe,Bn],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](17,0,null,0,1,"wp-edit-actions-bar",[],null,[[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.cancelAndBackToList()&&l);return l},wv,bv)),l["\u0275did"](18,49152,null,0,yv,[U.a,Wr],null,{onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,2,0,t.newWorkPackage,t.successState,!0),e(n,6,0,t.newWorkPackage),e(n,16,0,t.newWorkPackage)},function(e,n){e(n,12,0,n.component.text.button_settings)})}function jv(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Iv)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.newWorkPackage)},null)}var _v=l["\u0275ccf"]("wp-new-full-view",Cv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-new-full-view",[["class","work-packages-page--ui-view"]],null,null,null,jv,Pv)),l["\u0275did"](1,245760,null,0,Cv,[d.J,d.G,U.a,Kd,l.Injector,Ru,Ze,u,Gn,ke,Oe,R,ym],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Sv=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.successState="work-packages.list.details",n}return r.d(n,e),n}(kv),Rv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Tv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,17,"div",[["class","work-packages--details work-packages--new"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,16,"wp-edit-field-group",[],null,null,null,_d,jd)),l["\u0275did"](2,245760,null,0,Wr,[u,l.Injector,Gn,Zn,Ze,Er,Dr,d.O,Ke,d.G,U.a],{workPackage:[0,"workPackage"],successState:[1,"successState"],initializeEditMode:[2,"initializeEditMode"]},null),(e()(),l["\u0275eld"](3,0,null,0,8,"div",[["class","work-packages--details-content -create-mode"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,5,"div",[["class","work-packages--new-details-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"wp-type-status",[],null,null,null,mv,fv)),l["\u0275did"](6,49152,null,0,hv,[],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](7,0,null,null,2,"div",[["class","hidden-for-accessibility wp--details--switch-fullscreen-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,1,"a",[["class","work-packages-show-view-button wp--details--switch-fullscreen "]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.switchToFullscreen()&&l);return l},null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[["class","icon-context icon-to-fullscreen"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,1,"wp-single-view",[],null,null,null,Wp,Op)),l["\u0275did"](11,245760,null,0,Ep,[U.a,T,R,u,en,Zn,ta,Oe,Bn],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](12,0,null,0,2,"div",[["class","work-packages--details-toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,1,"wp-edit-actions-bar",[],null,[[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.cancelAndBackToList()&&l);return l},wv,bv)),l["\u0275did"](14,49152,null,0,yv,[U.a,Wr],null,{onCancel:"onCancel"}),(e()(),l["\u0275eld"](15,0,null,0,2,"div",[["class","work-packages--details--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["\u0275nov"](e,17).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["\u0275nov"](e,17).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,17).handleMouseUp(t)&&i);return i},Qu,zu)),l["\u0275did"](17,245760,null,0,Wu,[Bu,l.ElementRef,d.O],{elementClass:[0,"elementClass"],localStorageKey:[1,"localStorageKey"]},null)],function(e,n){var t=n.component;e(n,2,0,t.newWorkPackage,t.successState,!0),e(n,6,0,t.newWorkPackage),e(n,11,0,t.newWorkPackage);e(n,17,0,"work-packages-split-view--details-side","openProject-splitViewFlexBasis")},null)}function xv(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Tv)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.newWorkPackage)},null)}var Ev=l["\u0275ccf"]("wp-new-split-view",Sv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-new-split-view",[],null,null,null,xv,Rv)),l["\u0275did"](1,245760,null,0,Sv,[d.J,d.G,U.a,Kd,l.Injector,Ru,Ze,u,Gn,ke,Oe,R,ym],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Ov=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.wpRelations=n.injector.get(Me),n}return r.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.wpCreate.onNewWorkPackage().pipe(Object(an.b)(this)).subscribe(function(e){e.__initialized_at===n.__initialized_at&&n.wpRelations.addCommonRelation(e.id,"relates",n.copiedWorkPackageId)})},n.prototype.newWorkPackageFromParams=function(e){var n=this;return this.copiedWorkPackageId=e.copiedFromWorkPackageId,new Promise(function(e,t){n.wpCacheService.loadWorkPackage(n.copiedWorkPackageId).values$().pipe(Object(H.a)(1)).subscribe(function(l){n.createCopyFrom(l).then(e,t)})})},n.prototype.setTitle=function(){this.titleService.setFirstPart(this.I18n.t("js.work_packages.copy.title"))},n.prototype.createCopyFrom=function(e){var n=this;return this.wpEditing.changesetFor(e).getForm().then(function(t){return n.wpCreate.copyWorkPackage(t,e.project.identifier).then(function(e){return n.__initialized_at=e.workPackage.__initialized_at,e})})},n}(kv),Dv=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.successState="work-packages.show",n}return r.d(n,e),n}(Ov),Fv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Av(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,18,"div",[["class","work-package--new-state work-packages--new work-packages--show-view toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,17,"wp-edit-field-group",[],null,null,null,_d,jd)),l["\u0275did"](2,245760,null,0,Wr,[u,l.Injector,Gn,Zn,Ze,Er,Dr,d.O,Ke,d.G,U.a],{workPackage:[0,"workPackage"],successState:[1,"successState"],initializeEditMode:[2,"initializeEditMode"]},null),(e()(),l["\u0275eld"](3,0,null,0,11,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"wp-type-status",[],null,null,null,mv,fv)),l["\u0275did"](6,49152,null,0,hv,[],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](7,0,null,null,7,"ul",[["class","toolbar-items hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,$l,Nl)),l["\u0275did"](10,49152,null,0,Ll,[U.a],null,null),(e()(),l["\u0275eld"](11,0,null,null,3,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,2,"button",[["class","button last work-packages-settings-button toolbar-icon"],["id","create-wp-menu-button"],["wpCreateSettingsMenu",""]],[[1,"title",0]],null,null,null,null)),l["\u0275did"](13,4210688,null,0,vv,[l.ElementRef,ca,u,Zn],null,null),(e()(),l["\u0275eld"](14,0,null,null,0,"i",[["class","button--icon icon-show-more"]],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,0,1,"wp-single-view",[],null,null,null,Wp,Op)),l["\u0275did"](16,245760,null,0,Ep,[U.a,T,R,u,en,Zn,ta,Oe,Bn],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](17,0,null,0,1,"wp-edit-actions-bar",[],null,[[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.cancelAndBackToList()&&l);return l},wv,bv)),l["\u0275did"](18,49152,null,0,yv,[U.a,Wr],null,{onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,2,0,t.newWorkPackage,t.successState,!0),e(n,6,0,t.newWorkPackage),e(n,16,0,t.newWorkPackage)},function(e,n){e(n,12,0,n.component.text.button_settings)})}function Vv(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Av)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.newWorkPackage)},null)}var Mv=l["\u0275ccf"]("wp-copy-full-view",Dv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-copy-full-view",[["class","work-packages-page--ui-view"]],null,null,null,Vv,Fv)),l["\u0275did"](1,245760,null,0,Dv,[d.J,d.G,U.a,Kd,l.Injector,Ru,Ze,u,Gn,ke,Oe,R,ym],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Lv=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.successState="work-packages.list.details",n}return r.d(n,e),n}(Ov),Nv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function $v(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,17,"div",[["class","work-packages--details work-packages--new"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,16,"wp-edit-field-group",[],null,null,null,_d,jd)),l["\u0275did"](2,245760,null,0,Wr,[u,l.Injector,Gn,Zn,Ze,Er,Dr,d.O,Ke,d.G,U.a],{workPackage:[0,"workPackage"],successState:[1,"successState"],initializeEditMode:[2,"initializeEditMode"]},null),(e()(),l["\u0275eld"](3,0,null,0,8,"div",[["class","work-packages--details-content -create-mode"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,5,"div",[["class","work-packages--new-details-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"wp-type-status",[],null,null,null,mv,fv)),l["\u0275did"](6,49152,null,0,hv,[],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](7,0,null,null,2,"div",[["class","hidden-for-accessibility wp--details--switch-fullscreen-wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,1,"a",[["class","work-packages-show-view-button wp--details--switch-fullscreen "]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.switchToFullscreen()&&l);return l},null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[["class","icon-context icon-to-fullscreen"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,1,"wp-single-view",[],null,null,null,Wp,Op)),l["\u0275did"](11,245760,null,0,Ep,[U.a,T,R,u,en,Zn,ta,Oe,Bn],{workPackage:[0,"workPackage"]},null),(e()(),l["\u0275eld"](12,0,null,0,2,"div",[["class","work-packages--details-toolbar-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,1,"wp-edit-actions-bar",[],null,[[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.cancelAndBackToList()&&l);return l},wv,bv)),l["\u0275did"](14,49152,null,0,yv,[U.a,Wr],null,{onCancel:"onCancel"}),(e()(),l["\u0275eld"](15,0,null,0,2,"div",[["class","work-packages--details--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["\u0275nov"](e,17).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["\u0275nov"](e,17).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,17).handleMouseUp(t)&&i);return i},Qu,zu)),l["\u0275did"](17,245760,null,0,Wu,[Bu,l.ElementRef,d.O],{elementClass:[0,"elementClass"],localStorageKey:[1,"localStorageKey"]},null)],function(e,n){var t=n.component;e(n,2,0,t.newWorkPackage,t.successState,!0),e(n,6,0,t.newWorkPackage),e(n,11,0,t.newWorkPackage);e(n,17,0,"work-packages-split-view--details-side","openProject-splitViewFlexBasis")},null)}function qv(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,$v)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.newWorkPackage)},null)}var Hv=l["\u0275ccf"]("wp-copy-split-view",Lv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-copy-split-view",[],null,null,null,qv,Nv)),l["\u0275did"](1,245760,null,0,Lv,[d.J,d.G,U.a,Kd,l.Injector,Ru,Ze,u,Gn,ke,Oe,R,ym],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Bv=function(){function e(e){this.elementRef=e}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.queryProps=JSON.parse(e.getAttribute("query-props")),this.configuration=JSON.parse(e.getAttribute("configuration"))},e}();ot.DynamicBootstrapper.register({selector:"wp-embedded-table-entry",cls:Bv});var Wv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function zv(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,17,"wp-embedded-table",[],null,null,null,Bc,$c)),l["\u0275prd"](4608,null,Er,Er,[A,u,Oe]),l["\u0275prd"](4608,null,Ae,Ae,[A]),l["\u0275prd"](512,null,A,A,[]),l["\u0275prd"](512,null,gn,gn,[l.Injector]),l["\u0275prd"](512,null,ve,ve,[A]),l["\u0275prd"](512,null,ie,ie,[A,le]),l["\u0275prd"](512,null,Se,Se,[u,A]),l["\u0275prd"](512,null,Pe,Pe,[u,A]),l["\u0275prd"](512,null,We,We,[u,A]),l["\u0275prd"](512,null,ke,ke,[A]),l["\u0275prd"](512,null,be,be,[A]),l["\u0275prd"](512,null,re,re,[A]),l["\u0275prd"](512,null,ln,ln,[u,tn,en,A]),l["\u0275prd"](512,null,Le,Le,[A,Se,ee,Oe,Me]),l["\u0275prd"](512,null,Je,Je,[A,re,Se,Ze,ee,Oe,Me]),l["\u0275prd"](512,null,on,on,[u,A,Se,Pe,We,ke,be,ve,re,ln,Le,ie,Je,Oe,$e,Xe]),l["\u0275did"](17,4440064,null,0,An,[vn,A,l.Injector,On.b,U.a,Ne,Ue,gn,ve,ie,on,T],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"]},null)],function(e,n){var t=n.component;e(n,17,0,t.configuration,t.queryProps)},null)}var Qv=l["\u0275ccf"]("wp-embedded-table-entry",Bv,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-embedded-table-entry",[],null,null,null,zv,Wv)),l["\u0275did"](1,114688,null,0,Bv,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Uv=function(e){function n(n,t){var l=e.call(this,t)||this;return l.locals=n,l.I18n=t,l}return r.d(n,e),Object.defineProperty(n.prototype,"tabs",{get:function(){var e=this.locals.disabledTabs||{};return this._tabs.map(function(n){var t=e[n.name];return null!=t&&(n.disableBecause=t),n})},enumerable:!0,configurable:!0}),n}(Sn),Kv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Yv(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{embeddedTable:0}),(e()(),l["\u0275eld"](1,0,null,null,18,"wp-embedded-table",[],null,null,null,Bc,$c)),l["\u0275prd"](4608,null,Er,Er,[A,u,Oe]),l["\u0275prd"](4608,null,Ae,Ae,[A]),l["\u0275prd"](512,null,A,A,[]),l["\u0275prd"](512,null,gn,gn,[l.Injector]),l["\u0275prd"](512,null,ve,ve,[A]),l["\u0275prd"](512,null,ie,ie,[A,le]),l["\u0275prd"](512,null,Se,Se,[u,A]),l["\u0275prd"](512,null,Pe,Pe,[u,A]),l["\u0275prd"](512,null,We,We,[u,A]),l["\u0275prd"](512,null,ke,ke,[A]),l["\u0275prd"](512,null,be,be,[A]),l["\u0275prd"](512,null,re,re,[A]),l["\u0275prd"](512,null,ln,ln,[u,tn,en,A]),l["\u0275prd"](512,null,Le,Le,[A,Se,ee,Oe,Me]),l["\u0275prd"](512,null,Je,Je,[A,re,Se,Ze,ee,Oe,Me]),l["\u0275prd"](512,null,on,on,[u,A,Se,Pe,We,ke,be,ve,re,ln,Le,ie,Je,Oe,$e,Xe]),l["\u0275did"](18,4440064,[[1,4],["embeddedTableForConfiguration",4]],0,An,[vn,A,l.Injector,On.b,U.a,Ne,Ue,gn,ve,ie,on,T],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"]},null),l["\u0275pod"](19,{tableVisible:0})],function(e,n){var t=n.component,i=e(n,19,0,!1);e(n,18,0,i,t.locals.currentQuery||l["\u0275EMPTY_MAP"])},null)}var Gv=l["\u0275ccf"]("ng-component",Vn,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ng-component",[],null,null,null,Yv,Kv)),l["\u0275prd"](4608,null,Sn,Uv,[Mn,U.a]),l["\u0275did"](2,4243456,null,0,Vn,[Mn],null,null)],null,null)},{},{},[]),Zv=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Jv(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{embeddedTable:0}),(e()(),l["\u0275eld"](1,0,null,null,18,"wp-embedded-table",[],null,null,null,Bc,$c)),l["\u0275prd"](4608,null,Er,Er,[A,u,Oe]),l["\u0275prd"](4608,null,Ae,Ae,[A]),l["\u0275prd"](512,null,A,A,[]),l["\u0275prd"](512,null,gn,gn,[l.Injector]),l["\u0275prd"](512,null,ve,ve,[A]),l["\u0275prd"](512,null,ie,ie,[A,le]),l["\u0275prd"](512,null,Se,Se,[u,A]),l["\u0275prd"](512,null,Pe,Pe,[u,A]),l["\u0275prd"](512,null,We,We,[u,A]),l["\u0275prd"](512,null,ke,ke,[A]),l["\u0275prd"](512,null,be,be,[A]),l["\u0275prd"](512,null,re,re,[A]),l["\u0275prd"](512,null,ln,ln,[u,tn,en,A]),l["\u0275prd"](512,null,Le,Le,[A,Se,ee,Oe,Me]),l["\u0275prd"](512,null,Je,Je,[A,re,Se,Ze,ee,Oe,Me]),l["\u0275prd"](512,null,on,on,[u,A,Se,Pe,We,ke,be,ve,re,ln,Le,ie,Je,Oe,$e,Xe]),l["\u0275did"](18,4440064,[[1,4],["embeddedTableForConfiguration",4]],0,An,[vn,A,l.Injector,On.b,U.a,Ne,Ue,gn,ve,ie,on,T],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"]},null),l["\u0275pod"](19,{tableVisible:0})],function(e,n){var t=n.component,i=e(n,19,0,!1);e(n,18,0,i,t.locals.currentQuery||l["\u0275EMPTY_MAP"])},null)}var Xv=l["\u0275ccf"]("ng-component",qn,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"ng-component",[],null,null,null,Jv,Zv)),l["\u0275prd"](4608,null,Sn,Uv,[Mn,U.a]),l["\u0275did"](2,4243456,null,0,qn,[Mn],null,null),l["\u0275prd"](256,null,xn,$n,[])],null,null)},{},{},[]),ey=function(e){function n(n){var t=e.call(this,n)||this;return t.injector=n,t.wpRelations=t.injector.get(Me),t.referenceComponentClass=zc,t.relationType="",t.referenceTarget=null,t.buttonTexts={reference:t.I18n.t("js.relation_buttons.add_existing"),create:t.I18n.t("js.relation_buttons.create_new")},t}return r.d(n,e),n.prototype.add=function(e,n){return this.wpRelations.addCommonRelation(n,this.relationType,e.id)},n.prototype.remove=function(e,n){var t=this.wpRelations.find(n,e,this.relationType);return void 0!==t?this.wpRelations.removeRelation(t):Promise.reject()},Object.defineProperty(n.prototype,"canAdd",{get:function(){return!!(this.referenceTarget&&this.canCreateWorkPackages&&this.referenceTarget.addRelation)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canReference",{get:function(){return!!this.canAdd},enumerable:!0,configurable:!0}),n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},n}(Du),ny=function(e){function n(n,t,l,i,o,r){var a=e.call(this,i)||this;return a.PathHelper=n,a.wpInlineCreate=t,a.wpRelations=l,a.queryUrlParamsHelper=i,a.wpNotifications=o,a.I18n=r,a.tableActions=[Uc.factoryFor("remove-relation-action",a.I18n.t("js.relation_buttons.remove"),function(e){a.embeddedTable.loadingIndicator=a.wpRelations.require(e.id).then(function(){return a.wpInlineCreate.remove(a.workPackage,e)}).then(function(){return a.refreshTable()}).catch(function(e){return a.wpNotifications.handleRawError(e,a.workPackage)})},function(e){return!!e.changeParent})],a}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this,n=this.getRelationTypeFromQuery();this.wpInlineCreate.referenceTarget=this.workPackage,this.wpInlineCreate.relationType=n,this.buildQueryProps(),this.wpInlineCreate.newInlineWorkPackageCreated.pipe(Object(an.b)(this)).subscribe(function(n){return e.addRelation(n)}),this.wpRelations.observe(this.workPackage.id).pipe(Object(an.b)(this)).subscribe(function(){return e.refreshTable()})},n.prototype.ngOnDestroy=function(){},n.prototype.addRelation=function(e){var n=this;this.wpInlineCreate.add(this.workPackage,e).catch(function(e){return n.wpNotifications.handleRawError(e,n.workPackage)})},n.prototype.getRelationTypeFromQuery=function(){return this.group.relationType},n}(Kc),ty=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ly(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{embeddedTable:0}),(e()(),l["\u0275eld"](1,0,null,null,18,"wp-embedded-table",[],null,null,null,Bc,$c)),l["\u0275prd"](4608,null,Er,Er,[A,u,Oe]),l["\u0275prd"](4608,null,Ae,Ae,[A]),l["\u0275prd"](512,null,A,A,[]),l["\u0275prd"](512,null,gn,gn,[l.Injector]),l["\u0275prd"](512,null,ve,ve,[A]),l["\u0275prd"](512,null,ie,ie,[A,le]),l["\u0275prd"](512,null,Se,Se,[u,A]),l["\u0275prd"](512,null,Pe,Pe,[u,A]),l["\u0275prd"](512,null,We,We,[u,A]),l["\u0275prd"](512,null,ke,ke,[A]),l["\u0275prd"](512,null,be,be,[A]),l["\u0275prd"](512,null,re,re,[A]),l["\u0275prd"](512,null,ln,ln,[u,tn,en,A]),l["\u0275prd"](512,null,Le,Le,[A,Se,ee,Oe,Me]),l["\u0275prd"](512,null,Je,Je,[A,re,Se,Ze,ee,Oe,Me]),l["\u0275prd"](512,null,on,on,[u,A,Se,Pe,We,ke,be,ve,re,ln,Le,ie,Je,Oe,$e,Xe]),l["\u0275did"](18,4440064,[[1,4],["embeddedTable",4]],0,An,[vn,A,l.Injector,On.b,U.a,Ne,Ue,gn,ve,ie,on,T],{providedConfiguration:[0,"providedConfiguration"],initialLoadingIndicator:[1,"initialLoadingIndicator"],queryProps:[2,"queryProps"],tableActions:[3,"tableActions"],compactTableStyle:[4,"compactTableStyle"]},null),l["\u0275pod"](19,{actionsColumnEnabled:0,hierarchyToggleEnabled:1,inlineCreateEnabled:2,columnMenuEnabled:3,contextMenuEnabled:4,projectIdentifier:5,projectContext:6})],function(e,n){var t=n.component,l=e(n,19,0,!0,!1,!0,!1,!1,t.workPackage.project.idFromLink,!1);e(n,18,0,l,!1,t.queryProps,t.tableActions,!0)},null)}var iy=l["\u0275ccf"]("wp-relation-query",ny,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"wp-relation-query",[],null,null,null,ly,ty)),l["\u0275prd"](512,null,Du,ey,[l.Injector]),l["\u0275did"](2,245760,null,0,ny,[R,Du,Me,Ne,Ze,U.a],null,null)],function(e,n){e(n,2,0)},null)},{workPackage:"workPackage",query:"query",group:"group"},{},[]),oy=t("xdbM"),ry=function(e){function n(n,t,l,i,o,r,a){var u=e.call(this,n,t,l,i,o,r,a)||this;return u.QueryDm=n,u.tableState=t,u.I18n=l,u.urlParamsHelper=i,u.loadingIndicatorService=o,u.wpStatesInitialization=r,u.currentProject=a,u.tableInformationLoaded=!1,u.showTablePagination=!1,u.error=null,u.chartLabels=[],u.chartData=[],u.chartType="horizontalBar",u.chartOptions={responsive:!0,scales:{xAxes:[{stacked:!0,ticks:{callback:function(e){return Math.floor(e)===e?e:null}}}],yAxes:[{stacked:!0}]}},u}return r.d(n,e),n.prototype.refresh=function(n){var t=this;return void 0===n&&(n=!0),e.prototype.refresh.call(this,n).then(function(){return t.updateChartData()})},n.prototype.updateChartData=function(){var e,n=this,t=_.uniq(this.datasets.reduce(function(e,n){return e.concat(n.groups.map(function(e){return e.value}))},[])),l=this.datasets.map(function(e){var n=e.groups.reduce(function(e,n){return e[n.value]=n.count,e},{});return{label:e.label,data:t.map(function(e){return n[e]||0})}});t=t.map(function(e){return e||n.I18n.t("js.placeholders.default")}),this.chartLabels.length=0,(e=this.chartLabels).push.apply(e,t),this.chartData=l},n.prototype.loadQuery=function(e){var n=this;void 0===e&&(e=!1),this.error=null;var t=this.datasets.map(function(e){return n.QueryDm.find(e.queryProps,e.queryId,n.queryProjectScope).then(function(n){return e.groups=n.results.groups,e})}),l=Promise.all(t).then(function(e){return n.setLoaded(),e}).catch(function(e){n.error=n.I18n.t("js.error.embedded_table_loading",{message:_.get(e,"message",e)})});return e&&(this.loadingIndicator=l),l},n}(Fn),ay=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function uy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"canvas",[["baseChart",""]],null,null,null,null,null)),l["\u0275did"](2,737280,null,0,oy.BaseChartDirective,[l.ElementRef],{datasets:[0,"datasets"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"]},null)],function(e,n){var t=n.component;e(n,2,0,t.chartData,t.chartLabels,t.chartOptions,t.chartType)},null)}function sy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.error.message||t.error)})}function cy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","work-packages-embedded-view--container loading-indicator--location"]],[[1,"data-indicator-name",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,uy)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,sy)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.tableInformationLoaded),e(n,4,0,t.error)},function(e,n){e(n,0,0,n.component.uniqueEmbeddedTableName)})}l["\u0275ccf"]("wp-embedded-graph",ry,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,16,"wp-embedded-graph",[],null,null,null,cy,ay)),l["\u0275prd"](4608,null,gn,gn,[l.Injector]),l["\u0275prd"](4608,null,Er,Er,[A,u,Oe]),l["\u0275prd"](4608,null,Ae,Ae,[A]),l["\u0275prd"](512,null,A,A,[]),l["\u0275prd"](512,null,Se,Se,[u,A]),l["\u0275prd"](512,null,Pe,Pe,[u,A]),l["\u0275prd"](512,null,We,We,[u,A]),l["\u0275prd"](512,null,ke,ke,[A]),l["\u0275prd"](512,null,be,be,[A]),l["\u0275prd"](512,null,ve,ve,[A]),l["\u0275prd"](512,null,re,re,[A]),l["\u0275prd"](512,null,Le,Le,[A,Se,ee,Oe,Me]),l["\u0275prd"](512,null,ie,ie,[A,le]),l["\u0275prd"](512,null,Je,Je,[A,re,Se,Ze,ee,Oe,Me]),l["\u0275prd"](512,null,on,on,[u,A,Se,Pe,We,ke,be,ve,re,ln,Le,ie,Je,Oe,$e,Xe]),l["\u0275did"](16,4440064,null,0,ry,[vn,A,U.a,Ne,Ue,on,T],null,null)],function(e,n){e(n,16,0)},null)},{providedConfiguration:"configuration",uniqueEmbeddedTableName:"uniqueEmbeddedTableName",initialLoadingIndicator:"initialLoadingIndicator",datasets:"datasets"},{},[]);var dy=function(){function e(e,n){this.elementRef=e,this.I18n=n,this.groupBy="status",this.datasets=[],this.displayModeSingle=!0,this.availableGroupBy=[{label:n.t("js.work_packages.properties.category"),key:"category"},{label:n.t("js.work_packages.properties.type"),key:"type"},{label:n.t("js.work_packages.properties.status"),key:"status"},{label:n.t("js.work_packages.properties.priority"),key:"priority"},{label:n.t("js.work_packages.properties.author"),key:"author"},{label:n.t("js.work_packages.properties.assignee"),key:"assignee"}]}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.versionId=JSON.parse(e.getAttribute("version-id")),this.setQueryProps()},e.prototype.setQueryProps=function(){this.datasets.length=0,"status"===this.groupBy?(this.displayModeSingle=!0,this.datasets.push({label:this.I18n.t("js.label_all"),queryProps:this.propsBoth})):(this.displayModeSingle=!1,this.datasets.push({label:this.I18n.t("js.label_open_work_packages"),queryProps:this.propsOpen}),this.datasets.push({label:this.I18n.t("js.label_closed_work_packages"),queryProps:this.propsClosed})),this.currentGraph&&this.currentGraph.tableState.refreshRequired.putValue([!1,!1],"")},Object.defineProperty(e.prototype,"propsBoth",{get:function(){return this.baseProps()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"propsOpen",{get:function(){return this.baseProps({status:{operator:"o",values:[]}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"propsClosed",{get:function(){return this.baseProps({status:{operator:"c",values:[]}})},enumerable:!0,configurable:!0}),e.prototype.baseProps=function(e){var n=[{version:{operator:"=",values:[this.versionId]}},{subprojectId:{operator:"*",values:[]}}];return e&&n.push(e),{"columns[]":[],filters:JSON.stringify(n),group_by:this.groupBy,pageSize:0}},Object.defineProperty(e.prototype,"displaySingle",{get:function(){return this.displayModeSingle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMulti",{get:function(){return!this.displayModeSingle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentGraph",{get:function(){return this.displaySingle?this.embeddedGraphSingle:this.embeddedGraphMulti},enumerable:!0,configurable:!0}),e}();ot.DynamicBootstrapper.register({selector:"wp-by-version-graph",cls:dy});var py=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function hy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"option",[],null,null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null),(e()(),l["\u0275ted"](3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.key),e(n,2,0,n.context.$implicit.key)},function(e,n){e(n,3,0,n.context.$implicit.label)})}function fy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,16,"wp-embedded-graph",[],null,null,null,cy,ay)),l["\u0275prd"](4608,null,gn,gn,[l.Injector]),l["\u0275prd"](4608,null,Er,Er,[A,u,Oe]),l["\u0275prd"](4608,null,Ae,Ae,[A]),l["\u0275prd"](512,null,A,A,[]),l["\u0275prd"](512,null,Se,Se,[u,A]),l["\u0275prd"](512,null,Pe,Pe,[u,A]),l["\u0275prd"](512,null,We,We,[u,A]),l["\u0275prd"](512,null,ke,ke,[A]),l["\u0275prd"](512,null,be,be,[A]),l["\u0275prd"](512,null,ve,ve,[A]),l["\u0275prd"](512,null,re,re,[A]),l["\u0275prd"](512,null,Le,Le,[A,Se,ee,Oe,Me]),l["\u0275prd"](512,null,ie,ie,[A,le]),l["\u0275prd"](512,null,Je,Je,[A,re,Se,Ze,ee,Oe,Me]),l["\u0275prd"](512,null,on,on,[u,A,Se,Pe,We,ke,be,ve,re,ln,Le,ie,Je,Oe,$e,Xe]),l["\u0275did"](16,4440064,[[1,4],["wpEmbeddedGraphMulti",4]],0,ry,[vn,A,U.a,Ne,Ue,on,T],{initialLoadingIndicator:[0,"initialLoadingIndicator"],datasets:[1,"datasets"]},null)],function(e,n){e(n,16,0,!1,n.component.datasets)},null)}function gy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,16,"wp-embedded-graph",[],null,null,null,cy,ay)),l["\u0275prd"](4608,null,gn,gn,[l.Injector]),l["\u0275prd"](4608,null,Er,Er,[A,u,Oe]),l["\u0275prd"](4608,null,Ae,Ae,[A]),l["\u0275prd"](512,null,A,A,[]),l["\u0275prd"](512,null,Se,Se,[u,A]),l["\u0275prd"](512,null,Pe,Pe,[u,A]),l["\u0275prd"](512,null,We,We,[u,A]),l["\u0275prd"](512,null,ke,ke,[A]),l["\u0275prd"](512,null,be,be,[A]),l["\u0275prd"](512,null,ve,ve,[A]),l["\u0275prd"](512,null,re,re,[A]),l["\u0275prd"](512,null,Le,Le,[A,Se,ee,Oe,Me]),l["\u0275prd"](512,null,ie,ie,[A,le]),l["\u0275prd"](512,null,Je,Je,[A,re,Se,Ze,ee,Oe,Me]),l["\u0275prd"](512,null,on,on,[u,A,Se,Pe,We,ke,be,ve,re,ln,Le,ie,Je,Oe,$e,Xe]),l["\u0275did"](16,4440064,[[2,4],["wpEmbeddedGraphSingle",4]],0,ry,[vn,A,U.a,Ne,Ue,on,T],{initialLoadingIndicator:[0,"initialLoadingIndicator"],datasets:[1,"datasets"]},null)],function(e,n){e(n,16,0,!1,n.component.datasets)},null)}function my(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{embeddedGraphMulti:0}),l["\u0275qud"](671088640,2,{embeddedGraphSingle:0}),(e()(),l["\u0275eld"](2,0,null,null,7,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,3).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,3).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.groupBy=t)&&i);"ngModelChange"===n&&(i=!1!==o.setQueryProps()&&i);return i},null,null)),l["\u0275did"](3,16384,null,0,qi.p,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.p]),l["\u0275did"](5,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](7,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,hy)),l["\u0275did"](9,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,fy)),l["\u0275did"](11,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,gy)),l["\u0275did"](13,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.groupBy),e(n,9,0,t.availableGroupBy),e(n,11,0,t.displayMulti),e(n,13,0,t.displaySingle)},function(e,n){e(n,2,0,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending)})}var vy=l["\u0275ccf"]("wp-by-version-graph",dy,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-by-version-graph",[],null,null,null,my,py)),l["\u0275did"](1,114688,null,0,dy,[l.ElementRef,U.a],null,null)],function(e,n){e(n,1,0)},null)},{versionId:"versionId"},{},[]),yy=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function by(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function wy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,2,null,by)),l["\u0275did"](2,671744,null,0,yt.i,[l.ViewContainerRef],{ngComponentOutlet:[0,"ngComponentOutlet"],ngComponentOutletInjector:[1,"ngComponentOutletInjector"]},null),l["\u0275did"](3,16384,null,0,Su.g,[yt.i],null,null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.prependModalComponent,t.injector)},null)}function ky(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"a",[["class","tab-show"],["href",""],["role","button"]],[[1,"title",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.switchTo(e.context.$implicit.name)&&l);return l},null,null)),l["\u0275did"](2,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](3,{"-disabled":0,selected:1})],function(e,n){var t=n.component,l=e(n,3,0,null!=n.context.$implicit.disableBecause,t.currentTab&&n.context.$implicit.name===t.currentTab.name);e(n,2,0,"tab-show",l)},function(e,n){e(n,1,0,n.context.$implicit.disableBecause||n.context.$implicit.title,n.context.$implicit.title)})}function Cy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","tabs--container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ky)),l["\u0275did"](3,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","tabs-buttons"],["style","display:none;"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"button",[["class","tab-left icon-context icon-arrow-left4"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"button",[["class","tab-right icon-context icon-arrow-right5"]],null,null,null,null,null))],function(e,n){e(n,3,0,n.component.availableTabs)},null)}function Py(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{tabContentOutlet:0}),(e()(),l["\u0275eld"](1,0,null,null,13,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,12,"div",[["class","op-modal--modal-container -wide wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,wy)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Cy)),l["\u0275did"](10,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](11,0,[[1,0],["tabContentOutlet",1]],null,0,"div",[["class","tab-content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,2,"div",[["class","modal--form-actions"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,0,"button",[["class","button -highlight"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.saveChanges()&&l);return l},null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,8,0,!!t.prependModalComponent),e(n,10,0,!!t.tabPortalHost)},function(e,n){var t=n.component;e(n,5,0,t.text.closePopup),e(n,6,0,t.text.title),e(n,13,0,t.text.applyButton),e(n,14,0,t.text.cancelButton)})}var Iy=l["\u0275ccf"]("ng-component",En,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Py,yy)),l["\u0275did"](1,245760,null,0,En,[On.a,[2,xn],U.a,Sn,l.Injector,l.ApplicationRef,l.ComponentFactoryResolver,Ue,A,Tn,on,Ze,Se,l.ChangeDetectorRef,Ke,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),jy=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function _y(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.component.text[n.context.$implicit.id])})}function Sy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,13,"div",[["class","relation-filter-selector"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,12,"h5",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](4,0,null,null,7,"select",[["class","form--select form--inline-select"],["id",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,5).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,5).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedRelationFilter=t)&&i);"ngModelChange"===n&&(i=!1!==o.onRelationFilterSelected()&&i);return i},null,null)),l["\u0275did"](5,16384,null,0,qi.p,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.p]),l["\u0275did"](7,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](9,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,_y)),l["\u0275did"](11,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](13,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,5,0,t.compareRelationFilters),e(n,7,0,t.selectedRelationFilter),e(n,11,0,t.availableRelationFilters)},function(e,n){var t=n.component;e(n,2,0,t.text.first_part),e(n,4,0,l["\u0275nov"](n,9).ngClassUntouched,l["\u0275nov"](n,9).ngClassTouched,l["\u0275nov"](n,9).ngClassPristine,l["\u0275nov"](n,9).ngClassDirty,l["\u0275nov"](n,9).ngClassValid,l["\u0275nov"](n,9).ngClassInvalid,l["\u0275nov"](n,9).ngClassPending),e(n,13,0,t.text.second_part)})}var Ry=l["\u0275ccf"]("wp-table-configuration-relation-selector",Nn,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-table-configuration-relation-selector",[],null,null,null,Sy,jy)),l["\u0275did"](1,114688,null,0,Nn,[l.Injector,U.a,ke,Ke],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Ty=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function xy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,[[1,0],["select2Columns",1]],null,0,"input",[["type","hidden"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"p",[["class","form--inline-instructions"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,3,0,n.component.text.columnsHelp)})}function Ey(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"label",[["class","form--label-with-check-box"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,7,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,6,"input",[["focus","first"],["type","checkbox"]],[[8,"id",0],[8,"title",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,4).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedColumnMap[e.context.$implicit.id]=t)&&i);"ngModelChange"===n&&(i=!1!==o.setSelectedColumn(e.context.$implicit)&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,qi.b,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.b]),l["\u0275did"](6,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](8,16384,null,0,qi.i,[[4,qi.h]],null,null),l["\u0275did"](9,4210688,null,0,kr,[p.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["\u0275ted"](10,null,[" "," "]))],function(e,n){e(n,6,0,n.component.selectedColumnMap[n.context.$implicit.id]);e(n,9,0,"first")},function(e,n){e(n,1,0,l["\u0275inlineInterpolate"](1,"column-",n.context.$implicit.id,"")),e(n,3,0,l["\u0275inlineInterpolate"](1,"column-",n.context.$implicit.id,""),l["\u0275inlineInterpolate"](1,"",n.context.$implicit.name,""),l["\u0275nov"](n,8).ngClassUntouched,l["\u0275nov"](n,8).ngClassTouched,l["\u0275nov"](n,8).ngClassPristine,l["\u0275nov"](n,8).ngClassDirty,l["\u0275nov"](n,8).ngClassValid,l["\u0275nov"](n,8).ngClassInvalid,l["\u0275nov"](n,8).ngClassPending),e(n,10,0,n.context.$implicit.name)})}function Oy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ey)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){e(n,2,0,n.component.availableColumns)},null)}function Dy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","ee-relation-columns-upsale"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,[" "," "])),(e()(),l["\u0275eld"](2,0,null,null,0,"a",[["href","https://www.openproject.org/enterprise-edition/?op_edtion=community-edition&op_referrer=wp-list-columns#relations"],["target","blank"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.text.upsaleRelationColumns),e(n,2,0,t.text.upsaleCheckOutLink)})}function Fy(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{select2Columns:0}),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","columns-modal--content select2-modal-content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"label",[["class","hidden-for-sighted"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,xy)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Oy)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Dy)),l["\u0275did"](8,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,!t.impaired),e(n,6,0,t.impaired),e(n,8,0,t.eeShowBanners)},function(e,n){e(n,2,0,n.component.text.selectedColumns)})}var Ay=l["\u0275ccf"]("ng-component",wn,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Fy,Ty)),l["\u0275did"](1,4440064,null,0,wn,[l.Injector,U.a,Se,Ke],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Vy=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function My(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[["class","form--inline-instructions"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.display_mode.hierarchy_hint)})}function Ly(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.href),e(n,2,0,n.context.$implicit.href)},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.name,t.currentGroup&&t.currentGroup.href===n.context.$implicit.href)})}function Ny(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,65,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,64,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,3).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,3).onReset()&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,qi.t,[],null,null),l["\u0275did"](3,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](5,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](6,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,15,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,14,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,13,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,6,"input",[["name","display_mode_switch"],["type","radio"],["value","default"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,11)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,11).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,11)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,11)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,12).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,12).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.displayMode=t)&&i);return i},null,null)),l["\u0275did"](11,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](12,212992,null,0,qi.n,[l.Renderer2,l.ElementRef,qi.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,qi.g,function(e,n){return[e,n]},[qi.d,qi.n]),l["\u0275did"](14,671744,null,0,qi.l,[[2,qi.c],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](16,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](17,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-no-hierarchy"]],[[1,"icon-title",0]],null,null,Ct,wt)),l["\u0275did"](18,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](20,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](22,0,null,null,0,"span",[["class","form--inline-instructions"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,16,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](24,0,null,null,15,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](25,0,null,null,14,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,6,"input",[["name","display_mode_switch"],["type","radio"],["value","hierarchy"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,27)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,27).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,27)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,27)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,28).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,28).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.displayMode=t)&&i);return i},null,null)),l["\u0275did"](27,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](28,212992,null,0,qi.n,[l.Renderer2,l.ElementRef,qi.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,qi.g,function(e,n){return[e,n]},[qi.d,qi.n]),l["\u0275did"](30,671744,null,0,qi.l,[[2,qi.c],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](32,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](33,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-hierarchy"]],[[1,"icon-title",0]],null,null,Ct,wt)),l["\u0275did"](34,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](36,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275and"](16777216,null,null,1,null,My)),l["\u0275did"](39,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](40,0,null,null,17,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](41,0,null,null,16,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](42,0,null,null,15,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](43,0,null,null,6,"input",[["name","display_mode_switch"],["type","radio"],["value","grouped"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,44)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,44).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,44)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,44)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,45).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,45).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.displayMode=t)&&i);return i},null,null)),l["\u0275did"](44,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](45,212992,null,0,qi.n,[l.Renderer2,l.ElementRef,qi.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,qi.g,function(e,n){return[e,n]},[qi.d,qi.n]),l["\u0275did"](47,671744,null,0,qi.l,[[2,qi.c],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](49,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](50,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-group-by"]],[[1,"icon-title",0]],null,null,Ct,wt)),l["\u0275did"](51,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](53,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](55,0,null,null,2,"select",[["class","form--select form--inline-select"],["id","selected_grouping"],["name","selected_grouping"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateGroup(t.target.value)&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ly)),l["\u0275did"](57,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](58,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),l["\u0275eld"](59,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](60,0,null,null,5,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](61,0,null,null,4,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](62,0,null,null,3,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](63,0,null,null,0,"input",[["name","display_sums_switch"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!=(i.displaySums=!i.displaySums)&&l);return l},null,null)),(e()(),l["\u0275ted"](64,null,[" "," "])),(e()(),l["\u0275eld"](65,0,null,null,0,"span",[["class","form--inline-instructions"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,12,0,"display_mode_switch","default");e(n,14,0,"display_mode_switch",t.displayMode);e(n,18,0,"icon-no-hierarchy");e(n,28,0,"display_mode_switch","hierarchy");e(n,30,0,"display_mode_switch",t.displayMode);e(n,34,0,"icon-hierarchy"),e(n,39,0,"hierarchy"===t.displayMode);e(n,45,0,"display_mode_switch","grouped");e(n,47,0,"display_mode_switch",t.displayMode);e(n,51,0,"icon-group-by"),e(n,57,0,t.availableGroups)},function(e,n){var t=n.component;e(n,1,0,l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending),e(n,6,0,t.text.choose_mode),e(n,10,0,l["\u0275nov"](n,16).ngClassUntouched,l["\u0275nov"](n,16).ngClassTouched,l["\u0275nov"](n,16).ngClassPristine,l["\u0275nov"](n,16).ngClassDirty,l["\u0275nov"](n,16).ngClassValid,l["\u0275nov"](n,16).ngClassInvalid,l["\u0275nov"](n,16).ngClassPending),e(n,17,0,t.text.display_mode.default),e(n,20,0,t.text.display_mode.default),e(n,22,0,t.text.default),e(n,26,0,l["\u0275nov"](n,32).ngClassUntouched,l["\u0275nov"](n,32).ngClassTouched,l["\u0275nov"](n,32).ngClassPristine,l["\u0275nov"](n,32).ngClassDirty,l["\u0275nov"](n,32).ngClassValid,l["\u0275nov"](n,32).ngClassInvalid,l["\u0275nov"](n,32).ngClassPending),e(n,33,0,t.text.display_mode.hierarchy),e(n,36,0,t.text.display_mode.hierarchy),e(n,43,0,l["\u0275nov"](n,49).ngClassUntouched,l["\u0275nov"](n,49).ngClassTouched,l["\u0275nov"](n,49).ngClassPristine,l["\u0275nov"](n,49).ngClassDirty,l["\u0275nov"](n,49).ngClassValid,l["\u0275nov"](n,49).ngClassInvalid,l["\u0275nov"](n,49).ngClassPending),e(n,50,0,t.text.label_group_by),e(n,53,0,t.text.label_group_by),e(n,63,0,t.displaySums),e(n,64,0,t.text.display_sums),e(n,65,0,t.text.display_sums_hint)})}var $y=l["\u0275ccf"]("ng-component",bn,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Ny,Vy)),l["\u0275did"](1,114688,null,0,bn,[l.Injector,U.a,Pe,re,be],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),qy=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Hy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"query-filters",[],null,null,null,Xm,Qm)),l["\u0275did"](1,770048,null,0,zm,[ke,kn,U.a],{filters:[0,"filters"]},null)],function(e,n){e(n,1,0,n.component.filters)},null)}function By(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,Hy)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,!!n.component.filters)},null)}var Wy=l["\u0275ccf"]("ng-component",Cn,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,By,qy)),l["\u0275did"](1,114688,null,0,Cn,[l.Injector,U.a,ke,kn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),zy=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Qy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["selected",""]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit.column.href),e(n,2,0,n.parent.context.$implicit.column.href)},function(e,n){e(n,0,0,n.parent.context.$implicit.column.name)})}function Uy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.href),e(n,2,0,n.context.$implicit.href)},function(e,n){e(n,0,0,n.context.$implicit.name)})}function Ky(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"input",[["type","radio"]],[[8,"textContent",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0;"input"===n&&(i=!1!==l["\u0275nov"](e,2)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,2).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,2)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,3).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,3).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(e.parent.context.$implicit.direction=t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](3,212992,null,0,qi.n,[l.Renderer2,l.ElementRef,qi.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,qi.g,function(e,n){return[e,n]},[qi.d,qi.n]),l["\u0275did"](5,671744,null,0,qi.l,[[2,qi.c],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](7,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275ted"](8,null,[" "," "]))],function(e,n){e(n,3,0,l["\u0275inlineInterpolate"](1,"modal-sorting-attribute-",n.parent.context.index,"--sort-direction"),n.context.$implicit.$href),e(n,5,0,l["\u0275inlineInterpolate"](1,"modal-sorting-attribute-",n.parent.context.index,"--sort-direction"),n.parent.context.$implicit.direction)},function(e,n){e(n,1,0,n.context.$implicit.name,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending),e(n,8,0,n.context.$implicit.name)})}function Yy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,16,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,11,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"label",[["class","form--label hidden-for-sighted"]],[[8,"htmlFor",0],[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,8,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,7,"select",[["class","form--select"]],[[8,"id",0],[8,"name",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateSelection(e.context.$implicit,t.target.value)&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Qy)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](8,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](9,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](10,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,Uy)),l["\u0275did"](12,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](13,0,null,null,3,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,2,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ky)),l["\u0275did"](16,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,7,0,!!n.context.$implicit.column.href),e(n,9,0,t.emptyColumn.href),e(n,10,0,t.emptyColumn.href),e(n,12,0,t.availableColumns),e(n,16,0,t.availableDirections)},function(e,n){var t=n.component;e(n,0,0,l["\u0275inlineInterpolate"](1,"form--row modal-sorting-row-",n.context.index,"")),e(n,2,0,l["\u0275inlineInterpolate"](1,"modal-sorting-attribute-",n.context.index,""),t.text["sort_criteria_"+n.context.index]),e(n,5,0,l["\u0275inlineInterpolate"](1,"modal-sorting-attribute-",n.context.index,""),l["\u0275inlineInterpolate"](1,"modal-sorting-attribute-",n.context.index,"")),e(n,8,0,t.emptyColumn.name,!n.context.$implicit.column.href)})}function Gy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"form",[["name","modalSortingForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,2).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,2).onReset()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.t,[],null,null),l["\u0275did"](2,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](4,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](5,0,null,null,2,"div",[["class","modal-content-container loading-indicator--location"],["data-indicator-name","sorting-modal"],["id","modal-sorting"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Yy)),l["\u0275did"](7,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,7,0,n.component.sortationObjects)},function(e,n){e(n,0,0,l["\u0275nov"](n,4).ngClassUntouched,l["\u0275nov"](n,4).ngClassTouched,l["\u0275nov"](n,4).ngClassPristine,l["\u0275nov"](n,4).ngClassDirty,l["\u0275nov"](n,4).ngClassValid,l["\u0275nov"](n,4).ngClassInvalid,l["\u0275nov"](n,4).ngClassPending)})}var Zy=l["\u0275ccf"]("ng-component",In,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Gy,zy)),l["\u0275did"](1,114688,null,0,In,[l.Injector,U.a,We],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Jy=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Xy(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){var t=n.component;e(n,0,0,t.text.zoom[n.context.$implicit],t.zoomLevel===n.context.$implicit)})}function eb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.id),e(n,2,0,n.context.$implicit.id)},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.name,t.labels[n.parent.context.$implicit]===n.context.$implicit.id)})}function nb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","form--row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"label",[["class","form--label"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),l["\u0275ted"](3,null,[" "," "])),(e()(),l["\u0275eld"](4,0,null,null,4,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,3,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,2,"select",[["class","form--select"]],[[8,"id",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateLabels(e.context.$implicit,t.target.value)&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,eb)),l["\u0275did"](8,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,8,0,n.component.availableAttributes)},function(e,n){var t=n.component;e(n,2,0,l["\u0275inlineInterpolate"](1,"modal-timelines-label-",n.context.$implicit,"")),e(n,3,0,t.text.labels[n.context.$implicit]),e(n,6,0,l["\u0275inlineInterpolate"](1,"modal-timelines-label-",n.context.$implicit,""))})}function tb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,14,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,8,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"legend",[["class","form--fieldset-legend"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,5,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,4,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,3,"div",[["class","form--text-select-container -slim"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,2,"select",[["class","form--select"],["id","modal-timelines-zoomlevel"]],[[1,"disabled",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.zoomLevel=t.target.value)&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Xy)),l["\u0275did"](9,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](10,0,null,null,4,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,0,"legend",[["class","form--fieldset-legend"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,nb)),l["\u0275did"](14,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,9,0,t.availableZoomLevels),e(n,14,0,t.availableLabels)},function(e,n){var t=n.component;e(n,2,0,t.text.zoom.level),e(n,3,0,t.text.zoom.description),e(n,7,0,!0===t.autoZoom?"disabled":void 0),e(n,11,0,t.text.labels.title),e(n,12,0,t.text.labels.description)})}function lb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,13,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,12,"form",[["class","form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,3).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,3).onReset()&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,qi.t,[],null,null),l["\u0275did"](3,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](5,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](6,0,null,null,5,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"label",[["class","form--label"],["for","display_timelines_switch"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,2,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,1,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"input",[["id","display_timelines_switch"],["name","display_timelines_switch"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!=(i.timelineVisible=!i.timelineVisible)&&l);return l},null,null)),(e()(),l["\u0275eld"](11,0,null,null,0,"p",[["class","form--field-instructions"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,tb)),l["\u0275did"](13,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,13,0,n.component.timelineVisible)},function(e,n){var t=n.component;e(n,1,0,l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending),e(n,7,0,t.text.display_timelines),e(n,10,0,t.timelineVisible),e(n,11,0,t.text.display_timelines_hint)})}var ib=l["\u0275ccf"]("ng-component",jn,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,lb,Jy)),l["\u0275did"](1,114688,null,0,jn,[l.Injector,U.a,ve,Se],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ob=function(){function e(e){this.I18n=e,this.isRequired=!1,this.isDisabled=!1,this.currentValueInvalid=!1,this.onValueChange=new l.EventEmitter,this.onMultiToggle=new l.EventEmitter,this.onValueKeydown=new l.EventEmitter,this.text={requiredPlaceholder:this.I18n.t("js.placeholders.selection"),placeholder:this.I18n.t("js.placeholders.default"),switch_to_single_select:this.I18n.t("js.work_packages.label_switch_to_single_select"),switch_to_multi_select:this.I18n.t("js.work_packages.label_switch_to_multi_select")},this.isMultiselect=!1,this.compareByValue=pr.compareByAttribute("value")}return e.prototype.ngOnInit=function(){this.ensureSingleInitialSelectionIsNotArray(),this.isMultiselect=this.hasMultipleSelectedOptions()},e.prototype.hasMultipleSelectedOptions=function(){return this.selectedOption instanceof Array&&this.selectedOption.length>1},e.prototype.emitValueChange=function(){this.onValueChange.emit(_.castArray(this.selectedOption||[]))},e.prototype.toggleMultiselect=function(){this.isMultiselect=!this.isMultiselect,this.isMultiselect?this._selectedOption=_.castArray(this.selectedOption||[]):Array.isArray(this.selectedOption)&&(0===this.selectedOption.length?this.onEmptySelection():this._selectedOption=this.selectedOption[0],this.emitValueChange())},Object.defineProperty(e.prototype,"availableMultiOptions",{get:function(){return this.availableOptions.filter(function(e){return!0!==e.singleOnly})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedOption",{get:function(){return this._selectedOption},set:function(e){this._selectedOption=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nullOption",{get:function(){return{name:this.text.placeholder,value:""}},enumerable:!0,configurable:!0}),e.prototype.ensureSingleInitialSelectionIsNotArray=function(){Array.isArray(this.initialSelection)&&(1===this.initialSelection.length?this.selectedOption=this.initialSelection[0]:this.selectedOption=this.initialSelection)},e.prototype.onEmptySelection=function(){var e=_.find(this.availableOptions,function(e){return!0===e.selectWhenEmptySelection});e&&(this.selectedOption=e)},e}(),rb=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ab(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["disabled",""],["value",""]],[[8,"textContent",0],[1,"label",0],[8,"selected",0],[1,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,"");e(n,2,0,"")},function(e,n){var t=n.component;e(n,0,0,t.text.requiredPlaceholder,t.text.requiredPlaceholder,t.currentValueInvalid||0==t.availableOptions.length,t.currentValueInvalid||0==t.availableOptions.length||void 0)})}function ub(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[1,"label",0],[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[2,qi.p]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name,n.context.$implicit.name)})}function sb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"select",[["class","focus-input wp-inline-edit--field inplace-edit--field form--select"]],[[1,"aria-required",0],[1,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,1).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedOption=t)&&i);"keydown"===n&&(i=!1!==o.onValueKeydown.emit(t)&&i);"change"===n&&(i=!1!==o.emitValueChange()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.p,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["\u0275did"](2,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.p]),l["\u0275did"](5,671744,null,0,qi.l,[[8,null],[6,qi.f],[8,null],[6,qi.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](7,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,ab)),l["\u0275did"](9,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,ub)),l["\u0275did"](11,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.compareByValue),e(n,2,0,t.isRequired),e(n,5,0,t.isDisabled,t.selectedOption),e(n,9,0,t.currentValueInvalid||0==t.availableOptions.length),e(n,11,0,t.availableOptions)},function(e,n){var t=n.component;e(n,0,0,t.isRequired,t.selectHtmlId||void 0,l["\u0275nov"](n,2).required?"":null,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending)})}function cb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[["disabled",""],["value",""]],[[8,"textContent",0],[1,"label",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[2,qi.q]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,"");e(n,2,0,"")},function(e,n){var t=n.component;e(n,0,0,t.text.requiredPlaceholder,t.text.requiredPlaceholder,t.currentValueInvalid||0==t.availableOptions.length)})}function db(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[1,"label",0],[8,"textContent",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[2,qi.q]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name,n.context.$implicit.name)})}function pb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"select",[["class","focus-input wp-inline-edit--field inplace-edit--textarea -animated form--select"],["multiple",""],["size","5"]],[[1,"aria-required",0],[1,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,1).onChange(t.target)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,1).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.selectedOption=t)&&i);"keydown"===n&&(i=!1!==o.onValueKeydown.emit(t)&&i);"change"===n&&(i=!1!==o.emitValueChange()&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,qi.q,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["\u0275did"](2,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.q]),l["\u0275did"](5,671744,null,0,qi.l,[[8,null],[6,qi.f],[8,null],[6,qi.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](7,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,cb)),l["\u0275did"](9,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,db)),l["\u0275did"](11,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.compareByValue),e(n,2,0,t.isRequired),e(n,5,0,t.isDisabled,t.selectedOption),e(n,9,0,t.currentValueInvalid||0==t.availableOptions.length),e(n,11,0,t.availableMultiOptions)},function(e,n){var t=n.component;e(n,0,0,t.isRequired,t.selectHtmlId||void 0,l["\u0275nov"](n,2).required?"":null,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending)})}function hb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-minus2 icon4"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){e(n,1,0,"icon-minus2 icon4",n.component.text.switch_to_single_select)},null)}function fb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-add icon4"]],null,null,null,Ct,wt)),l["\u0275did"](1,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){e(n,1,0,"icon-add icon4",n.component.text.switch_to_multi_select)},null)}function gb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"div",[["class","inline-label"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,sb)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,pb)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](5,0,null,null,4,"a",[["class","wp-inline-edit--toggle-multiselect form-label no-decoration-on-hover -transparent"],["href",""]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleMultiselect()&&l);return l},null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,hb)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,fb)),l["\u0275did"](9,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.isMultiselect),e(n,4,0,t.isMultiselect),e(n,7,0,t.isMultiselect),e(n,9,0,!t.isMultiselect)},null)}l["\u0275ccf"]("multi-toggled-select",ob,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"multi-toggled-select",[],null,null,null,gb,rb)),l["\u0275did"](1,114688,null,0,ob,[U.a],null,null)],function(e,n){e(n,1,0)},null)},{availableOptions:"availableOptions",initialSelection:"initialSelection",selectHtmlId:"selectHtmlId",isRequired:"isRequired",isDisabled:"isDisabled",currentValueInvalid:"currentValueInvalid"},{onValueChange:"onValueChange",onMultiToggle:"onMultiToggle",onValueKeydown:"onValueKeydown"},[]);var mb=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function vb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","ee-attribute-highlighting-upsale notification-box -ee-upsale"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","notification-box--content"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"a",[["href","https://www.openproject.org/enterprise-edition/?op_edtion=community-edition&op_referrer=wp-attribute-highlighting#attribute-highlighting"],["target","blank"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.text.upsaleEnterpriseOnly),e(n,4,0,t.text.upsaleAttributeHighlighting),e(n,6,0,t.text.upsaleCheckOutLink)})}function yb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,54,"div",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,vb)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](3,0,null,null,51,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,5).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,5).onReset()&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,qi.t,[],null,null),l["\u0275did"](5,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](7,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](8,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,12,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,11,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,10,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,6,"input",[["name","highlighting_mode_switch"],["type","radio"],["value","inline"]],[[1,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,13)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,13).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,13)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,13)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,14).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,14).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.highlightingMode=t)&&i);"change"===n&&(i=!1!==o.updateMode(t.target.value)&&i);return i},null,null)),l["\u0275did"](13,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](14,212992,null,0,qi.n,[l.Renderer2,l.ElementRef,qi.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,qi.g,function(e,n){return[e,n]},[qi.d,qi.n]),l["\u0275did"](16,671744,null,0,qi.l,[[2,qi.c],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](18,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275ted"](19,null,[" "," \xa0 "])),(e()(),l["\u0275eld"](20,0,null,null,1,"multi-toggled-select",[],null,[[null,"onValueChange"]],function(e,n,t){var l=!0,i=e.component;"onValueChange"===n&&(l=!1!==(i.selectedAttributes=t)&&l);return l},gb,rb)),l["\u0275did"](21,114688,null,0,ob,[U.a],{availableOptions:[0,"availableOptions"],initialSelection:[1,"initialSelection"],isDisabled:[2,"isDisabled"]},{onValueChange:"onValueChange"}),(e()(),l["\u0275eld"](22,0,null,null,21,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,20,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](24,0,null,null,19,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](25,0,null,null,6,"input",[["name","entire_row_switch"],["type","radio"]],[[1,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,26)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,26).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,26)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,26)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,27).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,27).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.entireRowMode=t)&&i);"change"===n&&(i=!1!==o.updateMode("entire-row")&&i);return i},null,null)),l["\u0275did"](26,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](27,212992,null,0,qi.n,[l.Renderer2,l.ElementRef,qi.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,qi.g,function(e,n){return[e,n]},[qi.d,qi.n]),l["\u0275did"](29,671744,null,0,qi.l,[[2,qi.c],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](31,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](32,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](34,0,null,null,9,"select",[["class","form--select form--inline-select"],["id","selected_attribute"],["name","selected_attribute"]],[[1,"disabled",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateMode(t.target.value)&&l);return l},null,null)),(e()(),l["\u0275eld"](35,0,null,null,2,"option",[["value","status"]],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](36,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](37,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["\u0275eld"](38,0,null,null,2,"option",[["value","type"]],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](39,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](40,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["\u0275eld"](41,0,null,null,2,"option",[["value","priority"]],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](42,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](43,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["\u0275eld"](44,0,null,null,10,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["\u0275eld"](45,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](46,0,null,null,8,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](47,0,null,null,6,"input",[["name","highlighting_mode_switch"],["type","radio"],["value","none"]],[[1,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,48)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,48).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,48)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,48)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["\u0275nov"](e,49).onChange()&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,49).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.highlightingMode=t)&&i);"change"===n&&(i=!1!==o.updateMode(t.target.value)&&i);return i},null,null)),l["\u0275did"](48,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](49,212992,null,0,qi.n,[l.Renderer2,l.ElementRef,qi.u,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["\u0275prd"](1024,null,qi.g,function(e,n){return[e,n]},[qi.d,qi.n]),l["\u0275did"](51,671744,null,0,qi.l,[[2,qi.c],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](53,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](54,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,2,0,t.eeShowBanners);e(n,14,0,"highlighting_mode_switch","inline");e(n,16,0,"highlighting_mode_switch",t.highlightingMode),e(n,21,0,t.availableMappedHighlightedAttributes,t.selectedAttributes,"inline"!==t.highlightingMode);e(n,27,0,"entire_row_switch",!0);e(n,29,0,"entire_row_switch",t.entireRowMode);e(n,36,0,"status");e(n,37,0,"status");e(n,39,0,"type");e(n,40,0,"type");e(n,42,0,"priority");e(n,43,0,"priority");e(n,49,0,"highlighting_mode_switch","none");e(n,51,0,"highlighting_mode_switch",t.highlightingMode)},function(e,n){var t=n.component;e(n,3,0,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending),e(n,8,0,t.text.highlighting_mode.description),e(n,12,0,t.disabledValue(t.eeShowBanners),l["\u0275nov"](n,18).ngClassUntouched,l["\u0275nov"](n,18).ngClassTouched,l["\u0275nov"](n,18).ngClassPristine,l["\u0275nov"](n,18).ngClassDirty,l["\u0275nov"](n,18).ngClassValid,l["\u0275nov"](n,18).ngClassInvalid,l["\u0275nov"](n,18).ngClassPending),e(n,19,0,t.text.highlighting_mode.inline),e(n,25,0,t.disabledValue(t.eeShowBanners),l["\u0275nov"](n,31).ngClassUntouched,l["\u0275nov"](n,31).ngClassTouched,l["\u0275nov"](n,31).ngClassPristine,l["\u0275nov"](n,31).ngClassDirty,l["\u0275nov"](n,31).ngClassValid,l["\u0275nov"](n,31).ngClassInvalid,l["\u0275nov"](n,31).ngClassPending),e(n,32,0,t.text.highlighting_mode.entire_row_by),e(n,34,0,t.disabledValue(t.eeShowBanners)),e(n,35,0,t.text.highlighting_mode.status,"status"===t.lastEntireRowAttribute),e(n,38,0,t.text.highlighting_mode.type,"type"===t.lastEntireRowAttribute),e(n,41,0,t.text.highlighting_mode.priority,"priority"===t.lastEntireRowAttribute),e(n,47,0,t.disabledValue(t.eeShowBanners),l["\u0275nov"](n,53).ngClassUntouched,l["\u0275nov"](n,53).ngClassTouched,l["\u0275nov"](n,53).ngClassPristine,l["\u0275nov"](n,53).ngClassDirty,l["\u0275nov"](n,53).ngClassValid,l["\u0275nov"](n,53).ngClassInvalid,l["\u0275nov"](n,53).ngClassPending),e(n,54,0,t.text.highlighting_mode.none)})}var bb=l["\u0275ccf"]("ng-component",_n,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,yb,mb)),l["\u0275did"](1,114688,null,0,_n,[l.Injector,U.a,u,A,tn,ln],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),wb=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function kb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"a",[],[[1,"href",4],[8,"id",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,Ct,wt)),l["\u0275did"](3,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[["class","export-label"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,l["\u0275inlineInterpolate"](1,"icon-export-",n.context.$implicit.identifier," icon-big"))},function(e,n){e(n,1,0,n.context.$implicit.url,l["\u0275inlineInterpolate"](1,"export-",n.context.$implicit.identifier,"")),e(n,4,0,n.context.$implicit.label)})}function Cb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"ul",[["class","export-options"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,kb)),l["\u0275did"](2,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.exportOptions)},null)}function Pb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"div",[["class","op-modal--modal-container wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Cb)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,7,0,n.component.exportOptions)},function(e,n){var t=n.component;e(n,4,0,t.text.closePopup),e(n,5,0,t.text.title)})}var Ib=l["\u0275ccf"]("ng-component",Dg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Pb,wb)),l["\u0275did"](1,245760,null,0,Dg,[On.a,U.a,l.ElementRef,Ne,A,l.ChangeDetectorRef,Se],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),jb=function(){function e(e,n,t,i){this.states=e,this.tableState=n,this.authorisationService=t,this.I18n=i,this.onChange=new l.EventEmitter,this.text={showInMenu:this.I18n.t("js.label_star_query"),visibleForOthers:this.I18n.t("js.label_public_query")}}return Object.defineProperty(e.prototype,"canStar",{get:function(){return this.isSave||this.authorisationService.can("query","star")||this.authorisationService.can("query","unstar")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canPublish",{get:function(){var e=this.tableState.queryForm.value;return this.authorisationService.can("query","updateImmediately")&&e.schema.public.writable},enumerable:!0,configurable:!0}),e.prototype.updateStarred=function(e){this.isStarred=e,this.changed()},e.prototype.updatePublic=function(e){this.isPublic=e,this.changed()},e.prototype.changed=function(){this.onChange.emit({isStarred:!!this.isStarred,isPublic:!!this.isPublic})},e}(),_b=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Sb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,19,"div",[["class","form--field -wide-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,18,"div",[["class","form--field-container -vertical"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,8,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,6,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,5,"input",[["class","form--check-box"],["id","show-public"],["name","is_public"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,5).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,5).onTouched()&&i);"ngModelChange"===n&&(i=!1!==o.updatePublic(t)&&i);return i},null,null)),l["\u0275did"](5,16384,null,0,qi.b,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.b]),l["\u0275did"](7,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](9,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275ted"](10,null,[" "," "])),(e()(),l["\u0275eld"](11,0,null,null,8,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,6,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,5,"input",[["class","form--check-box"],["id","show-in-menu"],["name","show_in_menu"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,14).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,14).onTouched()&&i);"ngModelChange"===n&&(i=!1!==o.updateStarred(t)&&i);return i},null,null)),l["\u0275did"](14,16384,null,0,qi.b,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.b]),l["\u0275did"](16,671744,null,0,qi.l,[[8,null],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](18,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275ted"](19,null,[" "," "]))],function(e,n){var t=n.component;e(n,7,0,"is_public",!t.canPublish,t.isPublic);e(n,16,0,"show_in_menu",!t.canStar,t.isStarred)},function(e,n){var t=n.component;e(n,4,0,l["\u0275nov"](n,9).ngClassUntouched,l["\u0275nov"](n,9).ngClassTouched,l["\u0275nov"](n,9).ngClassPristine,l["\u0275nov"](n,9).ngClassDirty,l["\u0275nov"](n,9).ngClassValid,l["\u0275nov"](n,9).ngClassInvalid,l["\u0275nov"](n,9).ngClassPending),e(n,10,0,t.text.visibleForOthers),e(n,13,0,l["\u0275nov"](n,18).ngClassUntouched,l["\u0275nov"](n,18).ngClassTouched,l["\u0275nov"](n,18).ngClassPristine,l["\u0275nov"](n,18).ngClassDirty,l["\u0275nov"](n,18).ngClassValid,l["\u0275nov"](n,18).ngClassInvalid,l["\u0275nov"](n,18).ngClassPending),e(n,19,0,t.text.showInMenu)})}l["\u0275ccf"]("query-sharing-form",jb,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"query-sharing-form",[],null,null,null,Sb,_b)),l["\u0275did"](1,49152,null,0,jb,[u,A,Xe,U.a],null,null)],null,null)},{isSave:"isSave",isStarred:"isStarred",isPublic:"isPublic"},{onChange:"onChange"},[]);var Rb=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Tb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"div",[["class","op-modal--modal-container wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"query-sharing-form",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==i.setValues(t)&&l);return l},Sb,_b)),l["\u0275did"](7,49152,null,0,jb,[u,A,Xe,U.a],{isSave:[0,"isSave"],isStarred:[1,"isStarred"],isPublic:[2,"isPublic"]},{onChange:"onChange"}),(e()(),l["\u0275eld"](8,0,null,null,2,"div",[["class","form--space"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"button",[["class","button -highlight -with-icon icon-checkmark"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.saveQuery(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,7,0,!1,t.isStarred,t.isPublic)},function(e,n){var t=n.component;e(n,4,0,t.text.close_popup),e(n,5,0,t.text.label_visibility_settings),e(n,9,0,t.text.button_save),e(n,10,0,t.text.button_cancel,t.isBusy)})}var xb=l["\u0275ccf"]("ng-component",Ag,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Tb,Rb)),l["\u0275did"](1,245760,null,0,Ag,[l.ElementRef,On.a,U.a,u,A,l.ChangeDetectorRef,ds,Ze,Ge],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Eb=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ob(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{queryNameField:0}),(e()(),l["\u0275eld"](1,0,null,null,30,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,29,"div",[["class","op-modal--modal-container wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,6).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,6).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.closeMe(t)&&i);return i},null,null)),l["\u0275did"](6,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](7,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,23,"form",[["class","form"],["name","modalSaveForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,10).onReset()&&i);return i},null,null)),l["\u0275did"](9,16384,null,0,qi.t,[],null,null),l["\u0275did"](10,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](12,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](13,0,null,null,11,"div",[["class","form--field -required"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"label",[["class","form--label"],["for","save-query-name"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,8,"div",[["class","form--text-field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](17,0,[[1,0],["queryNameField",1]],null,7,"input",[["class","form--text-field"],["id","save-query-name"],["name","save-query-name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,18)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,18).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,18)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,18)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.queryName=t)&&i);return i},null,null)),l["\u0275did"](18,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275did"](19,16384,null,0,qi.o,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,qi.f,function(e){return[e]},[qi.o]),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](22,671744,null,0,qi.l,[[2,qi.c],[6,qi.f],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](24,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](25,0,null,null,3,"section",[["class","form--section"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](27,0,null,null,1,"query-sharing-form",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==i.setValues(t)&&l);return l},Sb,_b)),l["\u0275did"](28,49152,null,0,jb,[u,A,Xe,U.a],{isSave:[0,"isSave"],isStarred:[1,"isStarred"],isPublic:[2,"isPublic"]},{onChange:"onChange"}),(e()(),l["\u0275eld"](29,0,null,null,2,"div",[["class","form--space"]],null,null,null,null,null)),(e()(),l["\u0275eld"](30,0,null,null,0,"button",[["class","button -highlight -with-icon icon-checkmark"]],[[8,"textContent",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.saveQueryAs(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](31,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,19,0,"");e(n,22,0,"save-query-name",t.queryName);e(n,28,0,!0,t.isStarred,t.isPublic)},function(e,n){var t=n.component;e(n,5,0,t.text.close_popup),e(n,7,0,t.text.save_as),e(n,8,0,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending),e(n,14,0,t.text.label_name),e(n,17,0,l["\u0275nov"](n,19).required?"":null,l["\u0275nov"](n,24).ngClassUntouched,l["\u0275nov"](n,24).ngClassTouched,l["\u0275nov"](n,24).ngClassPristine,l["\u0275nov"](n,24).ngClassDirty,l["\u0275nov"](n,24).ngClassValid,l["\u0275nov"](n,24).ngClassInvalid,l["\u0275nov"](n,24).ngClassPending),e(n,26,0,t.text.label_visibility_settings),e(n,30,0,t.text.button_save,t.isBusy||!t.queryName),e(n,31,0,t.text.button_cancel)})}var Db=l["\u0275ccf"]("ng-component",Fg,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Ob,Eb)),l["\u0275did"](1,245760,null,0,Fg,[l.ElementRef,On.a,U.a,u,A,ds,Ze,l.ChangeDetectorRef,Ge],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Fb=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ab(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" #"])),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,2,0,n.context.$implicit.id),e(n,3,0,n.context.$implicit.subject||"")})}function Vb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"p",[["class","danger-zone--warning"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[["class","icon icon-error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[": "])),(e()(),l["\u0275eld"](5,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ab)),l["\u0275did"](8,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](9,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,8,0,n.component.singleWorkPackageChildren)},function(e,n){var t=n.component;e(n,3,0,t.text.warning),e(n,5,0,t.text.hasChildren(t.singleWorkPackage)),e(n,10,0,t.text.deletesChildren)})}function Mb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["\u0275ted"](5,null,[" "," #"," "," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,Vb)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](0,null,null,0))],function(e,n){var t=n.component;e(n,7,0,t.singleWorkPackageChildren&&t.singleWorkPackageChildren.length>0)},function(e,n){var t=n.component;e(n,2,0,t.text.text),e(n,5,0,t.singleWorkPackage.type.name,t.singleWorkPackage.id,t.singleWorkPackage.subject)})}function Lb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,[" (+ ",") "]))],null,function(e,n){e(n,1,0,n.component.text.childCount(n.parent.context.$implicit))})}function Nb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" #"])),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" "])),(e()(),l["\u0275eld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Lb)),l["\u0275did"](6,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,6,0,n.component.children(n.context.$implicit).length>0)},function(e,n){e(n,2,0,n.context.$implicit.id),e(n,4,0,n.context.$implicit.subject)})}function $b(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"p",[["class","danger-zone--warning"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"span",[["class","icon icon-error"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Nb)),l["\u0275did"](6,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.workPackages)},function(e,n){e(n,3,0,n.component.text.text)})}function qb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,8,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,6,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,5,"input",[["class","form--check-box"],["id","confirm-children-deletion"],["name","confirm-children-deletion"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,o=e.component;"change"===n&&(i=!1!==l["\u0275nov"](e,4).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,4).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(o.childrenDeletionConfirmed=t)&&i);return i},null,null)),l["\u0275did"](4,16384,null,0,qi.b,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.b]),l["\u0275did"](6,671744,null,0,qi.l,[[2,qi.c],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](8,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275ted"](9,null,[" "," "]))],function(e,n){e(n,6,0,"confirm-children-deletion",n.component.childrenDeletionConfirmed)},function(e,n){var t=n.component;e(n,3,0,l["\u0275nov"](n,8).ngClassUntouched,l["\u0275nov"](n,8).ngClassTouched,l["\u0275nov"](n,8).ngClassPristine,l["\u0275nov"](n,8).ngClassDirty,l["\u0275nov"](n,8).ngClassValid,l["\u0275nov"](n,8).ngClassInvalid,l["\u0275nov"](n,8).ngClassPending),e(n,9,0,t.text.label_confirm_children_deletion)})}function Hb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,21,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,20,"div",[["class","op-modal--modal-container wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["id","wp_destroy_modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](5,0,null,null,16,"form",[["class","form danger-zone"],["name","modalWpDestroyForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["\u0275nov"](e,7).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,7).onReset()&&i);return i},null,null)),l["\u0275did"](6,16384,null,0,qi.t,[],null,null),l["\u0275did"](7,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](9,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](10,0,null,null,8,"section",[["class","form--section -inner-scrolling"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,0,null,null,0,"h3",[["class","form--section-title"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,6,"div",[["class","modal-inner-scrolling-container"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Mb)),l["\u0275did"](14,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,$b)),l["\u0275did"](16,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,qb)),l["\u0275did"](18,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](19,0,null,null,2,"div",[["class","form--space -left-spacing"]],null,null,null,null,null)),(e()(),l["\u0275eld"](20,0,null,null,0,"button",[["class","button -danger"]],[[8,"textContent",0],[1,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.confirmDeletion(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](21,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,14,0,t.singleWorkPackage),e(n,16,0,t.workPackages.length>1),e(n,18,0,t.mustConfirmChildren)},function(e,n){var t=n.component;e(n,4,0,t.text.close),e(n,5,0,l["\u0275nov"](n,9).ngClassUntouched,l["\u0275nov"](n,9).ngClassTouched,l["\u0275nov"](n,9).ngClassPristine,l["\u0275nov"](n,9).ngClassDirty,l["\u0275nov"](n,9).ngClassValid,l["\u0275nov"](n,9).ngClassInvalid,l["\u0275nov"](n,9).ngClassPending),e(n,11,0,t.text.title),e(n,20,0,t.text.confirm,t.busy||t.blockedDueToUnconfirmedChildren||void 0),e(n,21,0,t.text.cancel)})}var Bb,Wb=l["\u0275ccf"]("ng-component",hs,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Hb,Fb)),l["\u0275did"](1,245760,null,0,hs,[l.ElementRef,ps,On.a,U.a,l.ChangeDetectorRef,d.G,u,Dr,ds,Ze,Ge],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);!function(e){e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESCAPE=27]="ESCAPE",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT_ARROW=37]="LEFT_ARROW",e[e.UP_ARROW=38]="UP_ARROW",e[e.RIGHT_ARROW=39]="RIGHT_ARROW",e[e.DOWN_ARROW=40]="DOWN_ARROW",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.KEY_0=48]="KEY_0",e[e.KEY_1=49]="KEY_1",e[e.KEY_2=50]="KEY_2",e[e.KEY_3=51]="KEY_3",e[e.KEY_4=52]="KEY_4",e[e.KEY_5=53]="KEY_5",e[e.KEY_6=54]="KEY_6",e[e.KEY_7=55]="KEY_7",e[e.KEY_8=56]="KEY_8",e[e.KEY_9=57]="KEY_9",e[e.KEY_A=65]="KEY_A",e[e.KEY_B=66]="KEY_B",e[e.KEY_C=67]="KEY_C",e[e.KEY_D=68]="KEY_D",e[e.KEY_E=69]="KEY_E",e[e.KEY_F=70]="KEY_F",e[e.KEY_G=71]="KEY_G",e[e.KEY_H=72]="KEY_H",e[e.KEY_I=73]="KEY_I",e[e.KEY_J=74]="KEY_J",e[e.KEY_K=75]="KEY_K",e[e.KEY_L=76]="KEY_L",e[e.KEY_M=77]="KEY_M",e[e.KEY_N=78]="KEY_N",e[e.KEY_O=79]="KEY_O",e[e.KEY_P=80]="KEY_P",e[e.KEY_Q=81]="KEY_Q",e[e.KEY_R=82]="KEY_R",e[e.KEY_S=83]="KEY_S",e[e.KEY_T=84]="KEY_T",e[e.KEY_U=85]="KEY_U",e[e.KEY_V=86]="KEY_V",e[e.KEY_W=87]="KEY_W",e[e.KEY_X=88]="KEY_X",e[e.KEY_Y=89]="KEY_Y",e[e.KEY_Z=90]="KEY_Z",e[e.LEFT_META=91]="LEFT_META",e[e.RIGHT_META=92]="RIGHT_META",e[e.SELECT=93]="SELECT",e[e.NUMPAD_0=96]="NUMPAD_0",e[e.NUMPAD_1=97]="NUMPAD_1",e[e.NUMPAD_2=98]="NUMPAD_2",e[e.NUMPAD_3=99]="NUMPAD_3",e[e.NUMPAD_4=100]="NUMPAD_4",e[e.NUMPAD_5=101]="NUMPAD_5",e[e.NUMPAD_6=102]="NUMPAD_6",e[e.NUMPAD_7=103]="NUMPAD_7",e[e.NUMPAD_8=104]="NUMPAD_8",e[e.NUMPAD_9=105]="NUMPAD_9",e[e.MULTIPLY=106]="MULTIPLY",e[e.ADD=107]="ADD",e[e.SUBTRACT=109]="SUBTRACT",e[e.DECIMAL=110]="DECIMAL",e[e.DIVIDE=111]="DIVIDE",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUM_LOCK=144]="NUM_LOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.SEMICOLON=186]="SEMICOLON",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.DASH=189]="DASH",e[e.PERIOD=190]="PERIOD",e[e.FORWARD_SLASH=191]="FORWARD_SLASH",e[e.GRAVE_ACCENT=192]="GRAVE_ACCENT",e[e.OPEN_BRACKET=219]="OPEN_BRACKET",e[e.BACK_SLASH=220]="BACK_SLASH",e[e.CLOSE_BRACKET=221]="CLOSE_BRACKET",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE"}(Bb||(Bb={}));var zb=function(){function e(e,n,t,l,i,o,r,a,u,s,c,d,p,h,f){this.ref=e,this.element=n,this.QueryDm=t,this.$state=l,this.$transitions=i,this.I18n=o,this.states=r,this.CurrentProject=a,this.wpListService=u,this.wpListChecksumService=s,this.loadingIndicator=c,this.pathHelper=d,this.wpStaticQueries=p,this.toggleService=h,this.wpStatesInitialization=f,this.loading=!1,this.noResults=!1,this.text={search:this.I18n.t("js.toolbar.search_query_label"),label:this.I18n.t("js.toolbar.search_query_label"),scope_default:this.I18n.t("js.label_default_queries"),scope_starred:this.I18n.t("js.label_starred_queries"),scope_global:this.I18n.t("js.label_global_queries"),scope_private:this.I18n.t("js.label_custom_queries"),no_results:this.I18n.t("js.work_packages.query.text_no_results")},this.hiddenCategories=[],this.reportsBodySelector=".controller-work_packages\\/reports",this.initialized=!1}return e.prototype.ngOnInit=function(){var e=this;this.queryResultsContainer=jQuery(this._queryResultsContainerElement.nativeElement),this.projectIdentifier=this.element.nativeElement.getAttribute("data-project-identifier"),jQuery(document).ready(function(){jQuery("#main-menu-work-packages-wrapper .toggler").one("click",function(n){e.initializeAutocomplete()}),jQuery("body").is(e.reportsBodySelector)&&e.initializeAutocomplete()}),this.unregisterTransitionListener=this.$transitions.onSuccess({},function(n){e.initializeAutocomplete()}),this.addClickHandler()},e.prototype.ngOnDestroy=function(){this.unregisterTransitionListener()},e.prototype.initializeAutocomplete=function(){this.initialized||(this.searchInput=jQuery(this._wpQueryMenuSearchInput.nativeElement),this.buttonArrowLeft=jQuery(".main-menu--arrow-left-to-project",jQuery("#main-menu-work-packages-wrapper").parent()),this.initialized=!0,this.buttonArrowLeft.focus(),this.setupAutoCompletion(this.searchInput),this.updateMenuOnChanges(this.searchInput))},e.prototype.transformQueries=function(e){var n=_.map(e.elements,function(e){return{label:e.name,query:e,query_props:null}}).concat(this.wpStaticQueries.all);return this.sortQueries(n)},e.prototype.sortQueries=function(e){var n=this,t={starred:[],default:[],public:[],private:[]},l=0;return e.forEach(function(e){return e.auto_id=l++,e.query?e.query.starred?(e.category="starred",t.starred.push(e)):!e.query.starred&&e.query.public?(e.category="public",t.public.push(e)):e.query.starred||e.query.public?void 0:(e.category="private",t.private.push(e)):(e.category="default",t.default.push(e))}),_.flatten([t.starred,t.default,t.public,t.private].map(function(e){return n.sortByLabel(e)}))},e.prototype.sortByLabel=function(e){return e.sort(function(e,n){return e.label.toLowerCase().localeCompare(n.label.toLowerCase())})},e.prototype.loadQueries=function(){return this.loadingPromise=this.QueryDm.all(this.CurrentProject.identifier)},Object.defineProperty(e.prototype,"loadingPromise",{set:function(e){var n=this;this.loading=!0,e.then(function(){return n.loading=!1}).catch(function(){return n.loading=!1})},enumerable:!0,configurable:!0}),e.prototype.setupAutoCompletion=function(e){var n=this;this.defineJQueryQueryComplete(),e.querycomplete({delay:100,source:[],select:function(e,n){return!1},response:function(e,t){n.noResults=0===t.content.length},close:function(e,t){var l=n.queryResultsContainer.find("ul.ui-autocomplete");l.is(":visible")||n.noResults||l.show()},focus:function(e,t){for(var l=e;l&&l.originalEvent;)l=l.originalEvent;return l&&"keydown"===l.type&&n.queryResultsContainer.find("#wp-query-menu-item-"+t.item.auto_id+" .wp-query-menu--item-link").focus(),!1},appendTo:".wp-query-menu--results-container",classes:{"ui-autocomplete":"wp-query-menu--search-ul -inplace","ui-menu-divider":"wp-query-menu--category-icon"},autoFocus:!1,minLength:0})},e.prototype.defineJQueryQueryComplete=function(){var e=this;jQuery.widget("custom.querycomplete",jQuery.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items",".wp-query-menu--item"),this._search("")},_renderItem:function(n,t){var l=jQuery("<a>").addClass("wp-query-menu--item-link").attr("href",e.buildQueryItemUrl(t)).text(t.label),i=jQuery("<li>").addClass("ui-menu-item wp-query-menu--item").attr("id","wp-query-menu-item-"+t.auto_id).attr("data-category",t.category||"").data("ui-autocomplete-item",t).append(l).appendTo(n);return e.setInitialHighlighting(i,t),i},_renderMenu:function(n,t){var l,i=this;if(_.each(t,function(t){if(t.category!==l){l=t.category;var o=e.labelFunction(l);n.append('<a tabindex="0" class="wp-query-menu--category-icon wp-query-menu--category-toggle" data-category="'+l+'" aria-hidden="true"></a>'),jQuery("<li>").addClass("ui-autocomplete--category wp-query-menu--category-toggle ellipsis").attr("title",o).attr("data-category",l).text(o).appendTo(n)}i._renderItemData(n,t)}),""===e.searchInput.val()){var o=e.queryResultsContainer.find(".wp-query-menu--item.selected");o.length>0&&setTimeout(function(){return o[0].scrollIntoView({behavior:"instant",block:"center"})},20)}}})},e.prototype.setInitialHighlighting=function(e,n){var t=this.getQueryParams(n),l=this.$state.params.query_id,i=this.$state.params.query_props,o=this.$state.includes("work-packages"),r=jQuery("body").hasClass("controller-work_packages/reports"),a=t.query_id&&(l||"").toString()===t.query_id.toString(),u=!n.query&&n.query_props&&n.query_props===i,s=o&&!l&&!i&&"all_open"===n.identifier,c=r&&"summary"===n.identifier;(a||u||s||c)&&e.addClass("selected")},e.prototype.labelFunction=function(e){switch(e){case"starred":return this.text.scope_starred;case"public":return this.text.scope_global;case"private":return this.text.scope_private;case"default":return this.text.scope_default;default:return""}},e.prototype.updateMenuOnChanges=function(e){var n=this;this.wpListService.queryChanges$.pipe(Object(an.b)(this)).subscribe(function(){n.loadQueries().then(function(t){e.querycomplete("option",{source:n.transformQueries(t)}),e.querycomplete("search",e.val()),_.each(n.hiddenCategories,function(e){var t=jQuery(e).attr("category");n.expandCollapseCategory(t)}),n.ref.detectChanges()})})},e.prototype.expandCollapseCategory=function(e){jQuery('[data-category="'+e+'"]').not(".ui-autocomplete--category").toggleClass("-hidden"),jQuery('.wp-query-menu--category-icon[data-category="'+e+'"]').toggleClass("-collapsed")},e.prototype.loadQuery=function(e){var n=this.getQueryParams(e),t=_.toString(this.$state.params.query_id),l={reload:!1};e.identifier;n.query_id&&n.query_id===t.toString()&&(this.wpStatesInitialization.clearStates(),this.wpListChecksumService.clear(),l.reload=!0),this.$state.go("work-packages.list",n,l),this.toggleService.closeWhenOnMobile()},e.prototype.getQueryParams=function(e){var n={query_id:e.query?_.toString(e.query.id):null,query_props:e.query?null:e.query_props};return this.projectIdentifier&&(n.projects="projects",n.projectPath=this.projectIdentifier),n},e.prototype.buildQueryItemUrl=function(e){if(e.static_link)return e.static_link;var n=this.getQueryParams(e);return this.$state.href("work-packages.list",n)},e.prototype.highlightSelected=function(e){this.highlightBySelector("#wp-query-menu-item-"+e.auto_id)},e.prototype.highlightBySelector=function(e){this.queryResultsContainer.find(".ui-menu-item").removeClass("selected"),this.queryResultsContainer.find(e).addClass("selected")},e.prototype.addClickHandler=function(){var e=this;this.queryResultsContainer.on("click keydown",".ui-menu-item a",function(n){if("keydown"===n.type&&n.which!==Bb.ENTER)return!0;var t=jQuery(n.target),l=t.closest(".wp-query-menu--item").data("ui-autocomplete-item"),i="click"===n.type&&ns.isClickedWithModifier(n),o=!!l.static_link;return i||o?(n.stopImmediatePropagation(),"keydown"===n.type&&(window.location.href=t.attr("href")),!0):(n.preventDefault(),e.loadQuery(l),e.highlightSelected(l),!1)}).on("click keydown",".wp-query-menu--category-toggle",function(n){if("keydown"===n.type&&n.which!==Bb.ENTER)return!0;var t=jQuery(n.target).data("category");return t&&e.expandCollapseCategory(t),e.hiddenCategories=e.queryResultsContainer.find(".ui-autocomplete--category.hidden"),n.preventDefault(),!1})},e}();ot.DynamicBootstrapper.register({selector:"wp-query-select",cls:zb});var Qb=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ub(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"div",[["class","loading-indicator -compact"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"div",[["class","block-1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"div",[["class","block-2"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"div",[["class","block-3"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"div",[["class","block-4"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"div",[["class","block-5"]],null,null,null,null,null))],null,null)}function Kb(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{_wpQueryMenuSearchInput:0}),l["\u0275qud"](402653184,2,{_queryResultsContainerElement:0}),(e()(),l["\u0275eld"](2,0,null,null,9,"div",[["class","wp-query-menu--container"],["id","querySelectDropdown"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,8,"div",[["class","wp-query-menu--search-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,3,"div",[["class","wp-query-menu--search-bar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"label",[["class","hidden-for-sighted"],["for","query-title-filter"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,[[1,0],["wpQueryMenuSearchInput",1]],null,0,"input",[["class","wp-query-menu--search-input ui-autocomplete--input ellipsis"],["id","query-title-filter"],["name","query-title-filter"],["type","text"]],[[1,"placeholder",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"i",[["class","icon-search wp-query-menu--search-icon"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,[[2,0],["queryResultsContainer",1]],null,3,"div",[["class","wp-query-menu--results-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"p",[["class","wp-query-menu--no-results-container"]],[[8,"hidden",0],[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ub)),l["\u0275did"](11,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,11,0,n.component.loading)},function(e,n){var t=n.component;e(n,5,0,t.text.label),e(n,6,0,t.text.search),e(n,9,0,!t.noResults||t.loading,t.text.no_results)})}var Yb=l["\u0275ccf"]("wp-query-select",zb,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-query-select",[],null,null,null,Kb,Qb)),l["\u0275did"](1,245760,null,0,zb,[l.ChangeDetectorRef,l.ElementRef,vn,d.G,d.O,U.a,u,T,ds,$e,Ue,R,rv,Bu,on],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Gb=function(){function e(e){this.elementRef=e,this.configuration={actionsColumnEnabled:!1,columnMenuEnabled:!1,contextMenuEnabled:!1}}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.queryProps=JSON.parse(e.dataset.queryProps)},e}();ot.DynamicBootstrapper.register({selector:"macro.embedded-table",cls:Gb,embeddable:!0});var Zb=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Jb(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,17,"wp-embedded-table",[],null,null,null,Bc,$c)),l["\u0275prd"](4608,null,Er,Er,[A,u,Oe]),l["\u0275prd"](4608,null,Ae,Ae,[A]),l["\u0275prd"](512,null,A,A,[]),l["\u0275prd"](512,null,gn,gn,[l.Injector]),l["\u0275prd"](512,null,ve,ve,[A]),l["\u0275prd"](512,null,ie,ie,[A,le]),l["\u0275prd"](512,null,Se,Se,[u,A]),l["\u0275prd"](512,null,Pe,Pe,[u,A]),l["\u0275prd"](512,null,We,We,[u,A]),l["\u0275prd"](512,null,ke,ke,[A]),l["\u0275prd"](512,null,be,be,[A]),l["\u0275prd"](512,null,re,re,[A]),l["\u0275prd"](512,null,ln,ln,[u,tn,en,A]),l["\u0275prd"](512,null,Le,Le,[A,Se,ee,Oe,Me]),l["\u0275prd"](512,null,Je,Je,[A,re,Se,Ze,ee,Oe,Me]),l["\u0275prd"](512,null,on,on,[u,A,Se,Pe,We,ke,be,ve,re,ln,Le,ie,Je,Oe,$e,Xe]),l["\u0275did"](17,4440064,null,0,An,[vn,A,l.Injector,On.b,U.a,Ne,Ue,gn,ve,ie,on,T],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"],compactTableStyle:[2,"compactTableStyle"]},null)],function(e,n){var t=n.component;e(n,17,0,t.configuration,t.queryProps,!0)},null)}var Xb=l["\u0275ccf"]("macro.embedded-table",Gb,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"macro",[["class","embedded-table"]],null,null,null,Jb,Zb)),l["\u0275did"](1,114688,null,0,Gb,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ew=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function nw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function tw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](1,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["\u0275did"](2,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.name),e(n,2,0,n.context.$implicit.name)},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.name,t.selectedType===n.context.$implicit.name)})}function lw(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{typeSelect:0}),(e()(),l["\u0275eld"](1,0,null,null,33,"div",[["class","op-modal--portal op-modal--macro-modal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,32,"div",[["class","op-modal--modal-container loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,nw)),l["\u0275did"](5,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](6,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,24,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,23,"form",[["class","form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;"submit"===n&&(i=!1!==l["\u0275nov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,10).onReset()&&i);"submit"===n&&(i=!1!==o.applyAndClose(t)&&i);return i},null,null)),l["\u0275did"](9,16384,null,0,qi.t,[],null,null),l["\u0275did"](10,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](12,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](13,0,null,null,11,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,0,"legend",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](15,0,null,null,9,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](16,0,null,null,0,"label",[["class","form--label hidden-for-sighted"],["for","selected-type"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](17,0,null,null,7,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,6,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](19,0,[[1,0],["typeSelect",1]],null,5,"select",[["class","form--select"],["id","selected-type"],["name","selected-type"],["tabindex","1"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.selectedType=t.target.value)&&l);return l},null,null)),(e()(),l["\u0275eld"](20,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["\u0275did"](21,147456,null,0,qi.m,[l.ElementRef,l.Renderer2,[8,null]],null,null),l["\u0275did"](22,147456,null,0,qi.v,[l.ElementRef,l.Renderer2,[8,null]],null,null),(e()(),l["\u0275and"](16777216,null,null,1,null,tw)),l["\u0275did"](24,278528,null,0,yt.j,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](25,0,null,null,5,"div",[["class","form--field -wide-label"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,4,"div",[["class","form--field-container -vertical"]],null,null,null,null,null)),(e()(),l["\u0275eld"](27,0,null,null,3,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["\u0275eld"](28,0,null,null,1,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](29,0,null,null,0,"input",[["id","wp_button_macro_style"],["name","button_style"],["tabindex","2"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.buttonStyle=t.target.checked)&&l);return l},null,null)),(e()(),l["\u0275ted"](30,null,[" "," "])),(e()(),l["\u0275eld"](31,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](32,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](33,0,null,null,0,"button",[["class","op-modal--cancel-button button"],["tabindex","4"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](34,0,null,null,0,"button",[["class","op-modal--submit-button button -highlight"],["tabindex","3"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.applyAndClose(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,5,0,t.showClose),e(n,24,0,t.availableTypes)},function(e,n){var t=n.component;e(n,6,0,t.text.title),e(n,8,0,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending),e(n,14,0,t.text.selected_type),e(n,16,0,t.text.selected_type),e(n,20,0,t.text.none,!t.selectedType),e(n,29,0,t.buttonStyle),e(n,30,0,t.text.button_style),e(n,31,0,t.text.button_style_hint),e(n,33,0,t.text.button_cancel,t.text.button_cancel),e(n,34,0,t.text.button_save,t.text.button_save)})}var iw=l["\u0275ccf"]("ng-component",et,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,lw,ew)),l["\u0275did"](1,4440064,null,0,et,[l.ElementRef,On.a,Gn,T,l.ChangeDetectorRef,U.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ow=t("XFe1"),rw=t("qfZ4"),aw=function(){function e(e,n,t,l,i,o,r,a,u,s){this.states=e,this.$state=n,this.wpTableFilters=t,this.wpListService=l,this.tableState=i,this.urlParamsHelper=o,this.element=r,this.i18n=a,this.notificationsService=u,this.sanitizer=s,this.static=!1}return e.prototype.ngOnInit=function(){this.tableState.stopAllSubscriptions.next(),this.setCalendarOptions()},e.prototype.ngOnDestroy=function(){},e.prototype.onCalendarInitialized=function(){this.setupWorkPackagesListener()},e.prototype.updateTimeframe=function(e){var n=this.calendarElement.fullCalendar("getView"),t=n.start.format("YYYY-MM-DD"),l=n.end.format("YYYY-MM-DD");if(!this.wpTableFilters.currentState&&this.tableState.query.value);else if(this.wpTableFilters.currentState){this.$state.params;var i=this.wpTableFilters.currentState,o=_.find(i.current,{id:"datesInterval"});o.values[0]=t,o.values[1]=l,this.wpTableFilters.replace(i)}else{var r=this.defaultQueryProps(t,l);this.$state.params.query_props&&(r=decodeURIComponent(this.$state.params.query_props||"")),this.wpListService.fromQueryParams({query_props:r},this.projectIdentifier).toPromise()}},e.prototype.addTooltip=function(e){var n=e.detail.event,t=e.detail.element,l=n.workPackage;jQuery(t).tooltip({content:this.contentString(l),items:".fc-content",track:!0})},e.prototype.toWPFullView=function(e){var n=e.detail.event.workPackage;this.removeTooltip(e.detail.jsEvent.currentTarget),this.$state.go("work-packages.show",{workPackageId:n.id})},Object.defineProperty(e.prototype,"calendarElement",{get:function(){return jQuery(this.element.nativeElement).find("ng-fullcalendar")},enumerable:!0,configurable:!0}),e.prototype.setCalendarsDate=function(){var e=this.tableState.query.value;if(e){var n=_.find(e.filters||[],{id:"datesInterval"}),t=null,l="month";if(n){var i=ae(n.values[0]),o=ae(n.values[1]).diff(i,"days");t=i.add(o/2,"days"),7===o&&(l="basicWeek")}t?this.calendarElement.fullCalendar("changeView",l,t):this.calendarElement.fullCalendar("changeView",l)}},e.prototype.setupWorkPackagesListener=function(){var e=this;this.tableState.results.values$().pipe(Object(an.b)(this)).subscribe(function(n){e.warnOnTooManyResults(n),e.mapToCalendarEvents(n.elements),e.setCalendarsDate()})},e.prototype.mapToCalendarEvents=function(e){var n=this,t=e.map(function(e){var t=n.eventDate(e,"start"),l=n.eventDate(e,"due");return{title:e.subject,start:t,end:l,className:"__hl_row_type_"+e.type.getId(),workPackage:e}});this.ucCalendar.renderEvents(t)},e.prototype.warnOnTooManyResults=function(n){if(n.count<n.total){var t=this.i18n.t("js.calendar.too_many",{count:n.total,max:e.MAX_DISPLAYED});this.notificationsService.addNotice(t)}},e.prototype.setCalendarOptions=function(){this.static?this.calendarOptions=this.staticOptions:this.calendarOptions=this.dynamicOptions},Object.defineProperty(e.prototype,"dynamicOptions",{get:function(){var e=this;return{editable:!1,eventLimit:!1,locale:this.i18n.locale,height:function(){return jQuery(window).height()-e.calendarElement.offset().top-12},header:{left:"prev,next today",center:"title",right:"month,basicWeek"},views:{month:{fixedWeekCount:!1}}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"staticOptions",{get:function(){return{editable:!1,eventLimit:18,locale:this.i18n.locale,height:400,header:!1,defaultView:"basicWeek"}},enumerable:!0,configurable:!0}),e.prototype.defaultQueryProps=function(n,t){var l={c:["id"],t:"id:asc",f:[{n:"status",o:"o",v:[]},{n:"datesInterval",o:"<>d",v:[n,t]}],pp:e.MAX_DISPLAYED};return JSON.stringify(l)},e.prototype.eventDate=function(e,n){return e.isMilestone?e.date:e[n+"Date"]},e.prototype.contentString=function(e){return"\n        "+this.sanitizedValue(e,"type")+" #"+e.id+": "+this.sanitizedValue(e,"subject",null)+'\n        <ul class="tooltip--map">\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.projectName")+':</span>\n            <span class="tooltip--map--value">'+this.sanitizedValue(e,"project")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.status")+':</span>\n            <span class="tooltip--map--value">'+this.sanitizedValue(e,"status")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.startDate")+':</span>\n            <span class="tooltip--map--value">'+this.eventDate(e,"start")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.dueDate")+':</span>\n            <span class="tooltip--map--value">'+this.eventDate(e,"due")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.assignee")+':</span>\n            <span class="tooltip--map--value">'+this.sanitizedValue(e,"assignee")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.priority")+':</span>\n            <span class="tooltip--map--value">'+this.sanitizedValue(e,"priority")+"</span>\n          </li>\n        </ul>\n        "},e.prototype.sanitizedValue=function(e,n,t){void 0===t&&(t="name");var i=e[n];return i=(i=t&&i?i[t]:i)||this.i18n.t("js.placeholders.default"),this.sanitizer.sanitize(l.SecurityContext.HTML,i)},e.prototype.removeTooltip=function(e){jQuery(e).tooltip({disabled:!0})},e.MAX_DISPLAYED=100,e}(),uw=t("ZYjt"),sw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function cw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","loading-indicator--location"],["style","position: relative"]],[[1,"data-indicator-name",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"ng-fullcalendar",[],null,[[null,"initialized"],[null,"viewRender"],[null,"eventRender"],[null,"eventClick"]],function(e,n,t){var l=!0,i=e.component;"initialized"===n&&(l=!1!==i.onCalendarInitialized()&&l);"viewRender"===n&&(l=!1!==i.updateTimeframe(t)&&l);"eventRender"===n&&(l=!1!==i.addTooltip(t)&&l);"eventClick"===n&&(l=!1!==i.toWPFullView(t)&&l);return l},ow.b,ow.a)),l["\u0275did"](2,14794752,[[1,4],["ucCalendar",4]],0,rw.a,[l.ElementRef,l.NgZone],{options:[0,"options"]},{eventClick:"eventClick",viewRender:"viewRender",eventRender:"eventRender",initialized:"initialized"})],function(e,n){e(n,2,0,n.component.calendarOptions)},function(e,n){e(n,0,0,"table")})}function dw(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{ucCalendar:0}),(e()(),l["\u0275and"](16777216,null,null,1,null,cw)),l["\u0275did"](2,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.calendarOptions)},null)}var pw=l["\u0275ccf"]("wp-calendar",aw,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-calendar",[],null,null,null,dw,sw)),l["\u0275did"](1,245760,null,0,aw,[u,d.G,ke,ds,A,Ne,l.ElementRef,U.a,Ge,uw.b],null,null)],function(e,n){e(n,1,0)},null)},{projectIdentifier:"projectIdentifier",static:"static"},{},[]),hw=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.initialQueryLoading=function(e){},n}(iv),fw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function gw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"ul",[["class","toolbar-items hide-when-print"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"wp-filter-button",[],null,null,null,wg,yg)),l["\u0275did"](3,180224,null,0,vg,[U.a,kn,ke],null,null),(e()(),l["\u0275eld"](4,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,$l,Nl)),l["\u0275did"](6,49152,null,0,Ll,[U.a],null,null)],null,null)}function mw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,11,"div",[["class","work-packages-list-view--container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,6,"div",[["class","toolbar-container -editable"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,5,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,2,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),l["\u0275ted"](5,null,[" "," "])),(e()(),l["\u0275and"](16777216,null,null,1,null,gw)),l["\u0275did"](7,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](8,0,null,null,1,"filter-container",[],null,null,null,lv,nv)),l["\u0275did"](9,180224,null,0,ev,[ke,kn],null,null),(e()(),l["\u0275eld"](10,0,null,null,1,"wp-calendar",[],null,null,null,dw,sw)),l["\u0275did"](11,245760,null,0,aw,[u,d.G,ke,ds,A,Ne,l.ElementRef,U.a,Ge,uw.b],{projectIdentifier:[0,"projectIdentifier"]},null)],function(e,n){var t=n.component;e(n,7,0,t.tableInformationLoaded),e(n,11,0,t.projectIdentifier)},function(e,n){e(n,5,0,n.component.I18n.t("js.calendar.title"))})}var vw=l["\u0275ccf"]("ng-component",hw,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,mw,fw)),l["\u0275did"](1,245760,null,0,hw,[l.Injector,u,A,Xe,Ae,Se,ln,We,Pe,ke,be,ve,re,ie,ds,$e,Ue,d.O,d.G,U.a,rv],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),yw=function(){function e(e){this.elementRef=e}return e.prototype.ngOnInit=function(){this.elementRef.nativeElement},e}();ot.DynamicBootstrapper.register({selector:"wp-embedded-calendar",cls:yw});var bw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ww(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-calendar",[],null,null,null,dw,sw)),l["\u0275did"](1,245760,null,0,aw,[u,d.G,ke,ds,A,Ne,l.ElementRef,U.a,Ge,uw.b],{static:[0,"static"]},null)],function(e,n){e(n,1,0,!0)},null)}var kw,Cw=l["\u0275ccf"]("wp-embedded-calendar",yw,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"wp-embedded-calendar",[],null,null,null,ww,bw)),l["\u0275did"](1,114688,null,0,yw,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);!function(e){function n(e,n){var l=document.createElement("canvas"),i=l.getContext("2d"),o=n.width,r=n.height;o>r?o>e&&(r*=e/o,o=e):r>e&&(o*=e/r,r=e),l.width=o,l.height=r,i.drawImage(n,0,0,o,r);var a=l.toDataURL("image/jpeg");return[a,t(a)]}function t(e){for(var n=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]),t=e.split(",")[0].split(":")[1].split(";")[0],l=n.length,i=new Uint8Array(l),o=0;o<l;o++)i[o]=n.charCodeAt(o);return new Blob([i],{type:t})}e.resizeFile=function(e,t){return new Promise(function(l,i){var o=new FileReader;o.onload=function(t){var i=new Image;i.onload=function(){return l(n(e,i))},i.src=t.target.result},o.readAsDataURL(t)})},e.resizeImage=n}(kw||(kw={}));var Pw=function(){function e(e,n,t,l){this.I18n=e,this.elementRef=n,this.notificationsService=t,this.opFileUpload=l,this.busy=!1,this.fileInvalid=!1,this.text={label_choose_avatar:this.I18n.t("js.avatars.label_choose_avatar"),upload_instructions:this.I18n.t("js.avatars.text_upload_instructions"),error_too_large:this.I18n.t("js.avatars.error_image_too_large"),wrong_file_format:this.I18n.t("js.avatars.wrong_file_format"),button_update:this.I18n.t("js.button_update"),uploading:this.I18n.t("js.avatars.uploading_avatar"),preview:this.I18n.t("js.label_preview")}}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.target=e.getAttribute("target"),this.method=e.getAttribute("method")},e.prototype.onFilePickerChanged=function(e){var n=this,t=Array.from(this.avatarFilePicker.nativeElement.files);if(0!==t.length){var l=t[0];-1!==["image/jpeg","image/png","image/gif"].indexOf(l.type)?kw.resizeFile(128,l).then(function(e){var t=e[0],i=e[1];i.name=l.name,n.avatarFile=i,n.avatarPreviewUrl=t}):this.fileInvalid=!0}},e.prototype.uploadAvatar=function(e){var n=this;e.preventDefault(),this.busy=!0;var t=this.opFileUpload.uploadSingle(this.target,this.avatarFile,this.method,"text");this.notificationsService.addAttachmentUpload(this.text.uploading,[t]),t[1].subscribe(function(e){switch(e.type){case 0:return;case 4:return n.avatarFile.progress=100,n.busy=!1,void window.location.reload();default:return}},function(e){n.notificationsService.addError(e.error),n.busy=!1})},e}(),Iw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function jw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.wrong_file_format)})}function _w(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"fieldset",[["class","preview"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"legend",[["class","preview--legend"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,0,"img",[["class","avatars--local-avatar-preview"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.text.preview),e(n,2,0,t.avatarPreviewUrl)})}function Sw(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{avatarFilePicker:0}),(e()(),l["\u0275eld"](1,0,null,null,10,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"label",[["class","form--label"],["for","avatar_file_input"]],[[8,"textContent",0]],null,null,null,null)),l["\u0275did"](3,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](4,{"-error":0}),(e()(),l["\u0275eld"](5,0,null,null,1,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,[[1,0],["avatarFilePicker",1]],null,0,"input",[["accept","image/jpeg,image/png,image/gif"],["id","avatar_file_input"],["name","avatar_file_input"],["type","file"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.onFilePickerChanged(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](7,0,null,null,4,"div",[["class","form--field-instructions"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,2,"div",[["class","avatars--error-pane"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,jw)),l["\u0275did"](11,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,null,1,null,_w)),l["\u0275did"](13,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](14,0,null,null,0,"button",[["class","button -highlight -with-icon icon-checkmark"],["type","submit"]],[[1,"disabled",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.uploadAvatar(t)&&l);return l},null,null))],function(e,n){var t=n.component,l=e(n,4,0,t.fileInvalid);e(n,3,0,"form--label",l),e(n,11,0,t.fileInvalid),e(n,13,0,t.avatarPreviewUrl)},function(e,n){var t=n.component;e(n,2,0,t.text.label_choose_avatar),e(n,8,0,t.text.upload_instructions),e(n,14,0,!t.avatarFile||t.busy||void 0,t.text.button_update)})}var Rw=l["\u0275ccf"]("avatar-upload-form",Pw,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"avatar-upload-form",[],null,null,null,Sw,Iw)),l["\u0275did"](1,114688,null,0,Pw,[U.a,l.ElementRef,Ge,qr],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Tw=function(){function e(e,n,t,l){this.FocusHelper=e,this.elementRef=n,this.renderer=t,this.I18n=l,this.collapsed=!0,this.focused=!1}return e.prototype.handleClick=function(e){e.stopPropagation(),e.preventDefault(),!this.collapsed&&xg.insideOrSelf(this.btn.nativeElement,e.target)&&this.submitNonEmptySearch(),this.collapsed&&(this.collapsed=!1,this.FocusHelper.focusElement(jQuery(this.input.nativeElement)),this.registerOutsideClick())},e.prototype.closeWhenFocussedOutside=function(){var e=this;return xg.whenOutside(this.elementRef.nativeElement,function(){return e.close()}),!1},e.prototype.ngOnDestroy=function(){this.unregister()},e.prototype.registerOutsideClick=function(){var e=this;this.unregisterGlobalListener=this.renderer.listen("document","click",function(){e.close()})},e.prototype.close=function(){this.collapsed=!0,this.searchValue="",this.unregister()},e.prototype.unregister=function(){this.unregisterGlobalListener&&(this.unregisterGlobalListener(),this.unregisterGlobalListener=void 0)},e.prototype.submitNonEmptySearch=function(){""!==this.searchValue&&jQuery(this.input.nativeElement).closest("form").submit()},Object.defineProperty(e.prototype,"searchValue",{get:function(){return this.input.nativeElement.value},set:function(e){this.input.nativeElement.value=e},enumerable:!0,configurable:!0}),e}();ot.DynamicBootstrapper.register({selector:"expandable-search",cls:Tw});var xw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ew(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{input:0}),l["\u0275qud"](402653184,2,{btn:0}),(e()(),l["\u0275eld"](2,0,null,null,7,"div",[["class","top-menu-search -collapsed"]],null,[[null,"focusout"]],function(e,n,t){var l=!0,i=e.component;"focusout"===n&&(l=!1!==i.closeWhenFocussedOutside()&&l);return l},null,null)),l["\u0275did"](3,278528,null,0,yt.h,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](4,{"-collapsed":0}),(e()(),l["\u0275eld"](5,0,[[1,0],["inputEl",1]],null,0,"input",[["class","top-menu-search--input"],["id","q"],["name","q"],["size","20"],["type","text"]],[[8,"placeholder",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,[[2,0],["btn",1]],null,3,"a",[["accesskey","4"],["class","top-menu-search--button search-form-normal"],["id","top-menu-search-button"],["role","button"],["tabindex","0"],["title","Search"]],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,7).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,7).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.handleClick(t)&&i);return i},null,null)),l["\u0275did"](7,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](8,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon5 icon-search ellipsis"]],null,null,null,Ct,wt)),l["\u0275did"](9,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=e(n,4,0,n.component.collapsed);e(n,3,0,"top-menu-search -collapsed",t);e(n,9,0,"icon5 icon-search ellipsis")},function(e,n){var t=n.component;e(n,5,0,l["\u0275inlineInterpolate"](1,"",t.I18n.t("js.select2.searching"),""))})}var Ow,Dw=l["\u0275ccf"]("expandable-search",Tw,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"expandable-search",[],null,[[null,"click"]],function(e,n,t){var i=!0;return"click"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i),i},Ew,xw)),l["\u0275did"](1,180224,null,0,Tw,[p.a,l.ElementRef,l.Renderer2,U.a],null,null)],null,null)},{},{},[]),Fw=t("/+cc"),Aw=function(){function e(e){this.widgetName=e,Ow.register(e,this)}return e.prototype.renderItem=function(e,n){n.text(e.label)},e.prototype.fuzzySearch=function(e,n){if(""===n)return e;if(n.length>=3){var t=this.literalSearch(e,n);if(t.length>0)return t}return this.fuseInstance.search(n)},e.prototype.literalSearch=function(e,n){var t=[],l=n.toLowerCase();return e.forEach(function(e){-1!==e.label.toLowerCase().indexOf(l)&&t.push(e)}),t},e.prototype.augmentedResultSet=function(e,n){var t=[];return n.forEach(function(e){t.push({label:e.label,object:e.object,render:"match"})}),t},e.prototype.setup=function(e,n){this.currentPage=0,this.input=e,this.input[this.widgetName].call(this.input,this.setupParams(n));this.fuseInstance=new Fw(n,{shouldSort:!0,tokenize:!1,threshold:.2,location:0,distance:1e4,maxPatternLength:16,minMatchCharLength:2,keys:["label"]})},e.prototype.setupParams=function(e){var n=this;return{delay:50,source:function(t,l){var i=n.fuzzySearch(e,t.term);l(n.augmentedResultSet(e,i))},select:function(e,t){"match"===t.item.render&&n.onItemSelected(t.item.object)},create:function(){return n.input.focus()},response:function(e,t){n.onNoResultsFound(e,t)},autoFocus:!0,minLength:0}},e}();!function(e){e.register=function(e,n){jQuery.widget("custom."+e,jQuery.ui.autocomplete,{_create:function(){n.currentPage=0,this._super(),this.widget().menu("option","items","> .ui-matched-item"),this._search("")},_renderMenu:function(e,n){jQuery(e).unbind("scroll"),this._renderLazyMenu(e,n)},_renderMenuPage:function(e,t,l){void 0===l&&(l=null);var i=this,o=t.length,r=t,a=n.maxItemsPerPage;if(null!==l&&(r=t.slice(l*a,l*a+a),o=Math.min(t.length,l*a+a)),jQuery.each(r,function(n,t){i._renderItemData(e,t)}),e.css("height","auto"),o<t.length){var u=32*o;u<.55*document.body.offsetHeight&&e.css("height",u-50)}},_pages:function(e){return Math.ceil(e.length/n.maxItemsPerPage)},_repositionMenu:function(e){var n=this.menu;n.refresh(),this._resizeMenu(),e.position(jQuery.extend({of:this.element},this.options.position)),this.options.autoFocus&&n.next(new jQuery.Event("mouseover"))},_resizeMenu:function(){this.menu.element.outerWidth(this.element.outerWidth())},_renderItem:function(e,t){var l=this.element.val(),i="disabled"===t.render,o=jQuery("<div>").addClass("ui-menu-item-wrapper");n.renderItem(t,o);var r=jQuery("<li>").toggleClass("ui-state-disabled",i).toggleClass("ui-matched-item",!i).append(o).appendTo(e);return""!==l&&r.mark(l,{className:"ui-autocomplete-match"}),r},_renderLazyMenu:function(e,t){var l=this,i=jQuery(e),o=this._pages(t);if(o<=1)return l._renderMenuPage(e,t);l._renderMenuPage(e,t,0),i.scroll(function(){if(function(e){var n=e.outerHeight(),t=e[0].scrollHeight;return e.scrollTop()>=t-n}(i)){if(++n.currentPage>=o)return;l._renderMenuPage(e,t,n.currentPage),l._repositionMenu(e)}})}})}}(Ow||(Ow={}));var Vw=function(e){function n(n,t,l,i,o,r){var a=e.call(this,"projectMenuAutocomplete")||this;return a.PathHelper=n,a.elementRef=t,a.http=l,a.cdRef=i,a.I18n=o,a.currentProject=r,a.results=null,a.loaded=!1,a.text={label:o.t("js.projects.autocompleter.label"),no_results:o.t("js.select2.no_matches"),loading:o.t("js.ajax.loading")},a}return r.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.dropdownMenu=this.$element.parents("li.drop-down"),this.input=this.$element.find(".project-menu-autocomplete--input"),this.noResults=this.$element.find(".project-menu-autocomplete--no-results"),this.dropdownMenu.on("opened",function(){return e.open()}),this.dropdownMenu.on("closed",function(){return e.close()})},n.prototype.close=function(){this.input.projectMenuAutocomplete("destroy"),this.$element.find(".project-search-results").css("visibility","hidden")},n.prototype.open=function(){var e=this;this.$element.find(".project-search-results").css("visibility","visible"),this.loadProjects().then(function(n){var t=_.map(n,function(e){return{label:e.name,render:"match",object:e}});e.setup(e.input,t),e.addInputHandlers(),e.addClickHandler(),e.loaded=!0,e.cdRef.detectChanges(),e.scrollCurrentProjectIntoView()})},Object.defineProperty(n.prototype,"maxItemsPerPage",{get:function(){return 250},enumerable:!0,configurable:!0}),n.prototype.onItemSelected=function(e){window.location.href=this.projectLink(e.identifier)},n.prototype.onNoResultsFound=function(e,n){this.noResults.toggle(0===n.content.length)},n.prototype.renderItem=function(e,n){var t=jQuery("<a>").attr("href",this.projectLink(e.object.identifier)).text(e.label).appendTo(n);e.object.level>0&&t.text("\xbb "+e.label).css("padding-left",4+16*e.object.level+"px"),e.object.identifier===this.currentProject.identifier&&n.addClass("selected")},n.prototype.projectLink=function(e){var n=jQuery('meta[name="current_menu_item"]').attr("content"),t=this.PathHelper.projectPath(e);return n&&(t+="?jump="+encodeURIComponent(n)),t},Object.defineProperty(n.prototype,"loadingText",{get:function(){return this.loaded?"":this.text.loading},enumerable:!0,configurable:!0}),n.prototype.loadProjects=function(){var e=this;if(null!==this.results)return Promise.resolve(this.results);var n=this.PathHelper.projectLevelListPath();return this.http.get(n).toPromise().then(function(n){return e.results=e.augmentWithParents(n.projects)})},n.prototype.augmentWithParents=function(e){var n=[],t=-1;return e.map(function(e){for(;t>=e.level;)n.pop(),t--;return n.push(e),t=e.level,e.parents=n.slice(0,-1),e})},n.prototype.augmentedResultSet=function(e,n){var t=n.map(function(e){return e.object.identifier}),l=_.flatten(n.map(function(e){return e.object.parents})),i=[];return e.forEach(function(e){var n,o=e.object.identifier;if(t.indexOf(o)>=0)n="match";else{if(!_.find(l,function(e){return e.identifier===o}))return;n="disabled"}i.push({label:e.label,object:e.object,render:n})}),i},n.prototype.addInputHandlers=function(){var e=this;this.input.off("blur"),this.input.keydown(function(n){return n.which!==Tt.a.ESCAPE||(e.input.val(""),e.input[e.widgetName].call(e.input,"search",""),!1)})},n.prototype.addClickHandler=function(){var e=!1;this.$element.find(".project-menu-autocomplete--results").on("click",".ui-menu-item a",function(e){return ns.isClickedWithModifier(e)&&e.stopImmediatePropagation(),!0}).on("touchend",".ui-menu-item a",function(n){e||(window.location.href=n.target.href)}).on("touchmove",".ui-menu-item a",function(){e=!0}).on("touchstart",".ui-menu-item a",function(){e=!1})},n.prototype.setupParams=function(n){var t=e.prototype.setupParams.call(this,n);return t.appendTo=".project-menu-autocomplete--wrapper",t.classes={"ui-autocomplete":"-inplace project-menu-autocomplete--results"},t.position={of:".project-menu-autocomplete--input-container"},t},n.prototype.scrollCurrentProjectIntoView=function(){var e=document.querySelector(".ui-menu-item-wrapper.selected");if(e){var n=e.offsetHeight,t=document.getElementsByClassName("project-menu-autocomplete--results")[0],l=e.offsetTop-t.offsetHeight/2+n/2;t.scrollTop=l%n==0?l:l-l%n}},n}(Aw);ot.DynamicBootstrapper.register({selector:"project-menu-autocomplete",cls:Vw});var Mw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Lw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,6,"div",[["class","dropdown dropdown-relative project-search-results"],["id","project_autocompletion_wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","project-menu-autocomplete--wrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"div",[["class","project-menu-autocomplete--input-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"label",[["class","hidden-for-sighted"],["for","project_autocompletion_input"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"input",[["class","ui-autocomplete--input project-menu-autocomplete--input"],["id","project_autocompletion_input"],["name","project_autocompletion_input"],["type","text"]],[[1,"placeholder",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,0,"i",[["class","project-menu-autocomplete--search-icon icon-search"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,0,"p",[["class","project-menu-autocomplete--no-results"],["hidden",""]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.text.label),e(n,4,0,t.loadingText),e(n,6,0,t.text.no_results)})}var Nw=l["\u0275ccf"]("project-menu-autocomplete",Vw,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"project-menu-autocomplete",[],null,null,null,Lw,Mw)),l["\u0275did"](1,114688,null,0,Vw,[R,l.ElementRef,W.c,l.ChangeDetectorRef,U.a,T],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),$w=t("5Lfy"),qw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Hw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"div",[["class","op-modal--modal-container dynamic-content-modal--wrapper loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null))],null,null)}var Bw=l["\u0275ccf"]("ng-component",$w.a,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Hw,qw)),l["\u0275did"](1,245760,null,0,$w.a,[l.ElementRef,On.a,l.ChangeDetectorRef,U.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Ww=function(e){function n(n,t,l,i){var o=e.call(this,t,l,n)||this;return o.elementRef=n,o.locals=t,o.cdRef=l,o.I18n=i,o.confirmed=!1,o.text={title:o.I18n.t("js.modals.form_submit.title"),text:o.I18n.t("js.modals.form_submit.text"),button_continue:o.I18n.t("js.button_continue"),button_cancel:o.I18n.t("js.button_cancel"),close_popup:o.I18n.t("js.close_popup_title")},o.options=t.options||{},o.closeOnEscape=_.defaultTo(o.options.closeByEscape,!0),o.closeOnOutsideClick=_.defaultTo(o.options.closeByDocument,!0),o.showClose=_.defaultTo(o.options.showClose,!0),o.text=_.defaults(o.options.text,o.text),o}return r.d(n,e),n.prototype.confirmAndClose=function(e){this.confirmed=!0,this.closeMe(e)},n}(yn.a),zw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Qw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function Uw(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,10,"div",[["class","op-modal--portal confirm-form-submit--modal  ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,9,"div",[["class","op-modal--modal-container confirm-dialog--modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Qw)),l["\u0275did"](4,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](5,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,1,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"button",[["class","confirm-form-submit--cancel button"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["\u0275eld"](10,0,null,null,0,"button",[["class","confirm-form-submit--continue button -highlight"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.confirmAndClose(t)&&l);return l},null,null))],function(e,n){e(n,4,0,n.component.showClose)},function(e,n){var t=n.component;e(n,5,0,t.text.title),e(n,7,0,t.text.text),e(n,9,0,t.text.button_cancel,t.text.button_cancel),e(n,10,0,t.text.button_continue,t.text.button_continue)})}var Kw=l["\u0275ccf"]("ng-component",Ww,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Uw,zw)),l["\u0275did"](1,245760,null,0,Ww,[l.ElementRef,On.a,l.ChangeDetectorRef,U.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Yw=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.password_confirmation=null,n}return r.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.text.title=I18n.t("js.password_confirmation.title"),this.text.field_description=I18n.t("js.password_confirmation.field_description"),this.text.confirm_button=I18n.t("js.button_confirm"),this.text.password=I18n.t("js.label_password"),this.closeOnEscape=!1,this.closeOnOutsideClick=!1,this.showClose=!1},n.prototype.confirmAndClose=function(n){this.passwordValuePresent()&&e.prototype.confirmAndClose.call(this,n)},n.prototype.onOpen=function(n){e.prototype.onOpen.call(this,n),this.passwordConfirmationField.nativeElement.focus()},n.prototype.passwordValuePresent=function(){return null!==this.password_confirmation&&this.password_confirmation.length>0},n}(Ww),Gw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Zw(e){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{passwordConfirmationField:0}),(e()(),l["\u0275eld"](1,0,null,null,23,"div",[["class","op-modal--portal confirm-form-submit--modal  ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,22,"div",[["class","op-modal--modal-container password-confirm-dialog--modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,0,"h3",[["class","icon-context icon-locked"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,16,"div",[["class","op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,15,"form",[["class","request-for-confirmation--form form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,o=e.component;"submit"===n&&(i=!1!==l["\u0275nov"](e,8).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["\u0275nov"](e,8).onReset()&&i);"submit"===n&&(i=!1!==o.confirmAndClose(t)&&i);return i},null,null)),l["\u0275did"](7,16384,null,0,qi.t,[],null,null),l["\u0275did"](8,4210688,null,0,qi.k,[[8,null],[8,null]],null,null),l["\u0275prd"](2048,null,qi.c,null,[qi.k]),l["\u0275did"](10,16384,null,0,qi.j,[[4,qi.c]],null,null),(e()(),l["\u0275eld"](11,0,null,null,10,"div",[["class","form--field -required"]],null,null,null,null,null)),(e()(),l["\u0275eld"](12,0,null,null,0,"label",[["class","form--label"],["for","request_for_confirmation_password"]],[[1,"aria-label",0],[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](13,0,null,null,7,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,6,"div",[["class","form--text-field-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](15,0,[[1,0],["passwordConfirmationField",1]],null,5,"input",[["class","form--text-field"],["id","request_for_confirmation_password"],["name","request_for_confirmation_password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,o=e.component;"input"===n&&(i=!1!==l["\u0275nov"](e,16)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["\u0275nov"](e,16).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,16)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["\u0275nov"](e,16)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(o.password_confirmation=t)&&i);return i},null,null)),l["\u0275did"](16,16384,null,0,qi.d,[l.Renderer2,l.ElementRef,[2,qi.a]],null,null),l["\u0275prd"](1024,null,qi.g,function(e){return[e]},[qi.d]),l["\u0275did"](18,671744,null,0,qi.l,[[2,qi.c],[8,null],[8,null],[6,qi.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,qi.h,null,[qi.l]),l["\u0275did"](20,16384,null,0,qi.i,[[4,qi.h]],null,null),(e()(),l["\u0275eld"](21,0,null,null,0,"div",[["class","form--field-instructions"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](22,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](23,0,null,null,1,"button",[["class","confirm-form-submit--continue button"]],[[1,"title",0],[8,"textContent",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.confirmAndClose(t)&&l);return l},null,null)),(e()(),l["\u0275ted"](-1,null,[' [attr.title]="text.button_cancel"> ']))],function(e,n){e(n,18,0,"request_for_confirmation_password",n.component.password_confirmation)},function(e,n){var t=n.component;e(n,4,0,t.text.title),e(n,6,0,l["\u0275nov"](n,10).ngClassUntouched,l["\u0275nov"](n,10).ngClassTouched,l["\u0275nov"](n,10).ngClassPristine,l["\u0275nov"](n,10).ngClassDirty,l["\u0275nov"](n,10).ngClassValid,l["\u0275nov"](n,10).ngClassInvalid,l["\u0275nov"](n,10).ngClassPending),e(n,12,0,t.text.field_description,t.text.password),e(n,15,0,l["\u0275nov"](n,20).ngClassUntouched,l["\u0275nov"](n,20).ngClassTouched,l["\u0275nov"](n,20).ngClassPristine,l["\u0275nov"](n,20).ngClassDirty,l["\u0275nov"](n,20).ngClassValid,l["\u0275nov"](n,20).ngClassInvalid,l["\u0275nov"](n,20).ngClassPending),e(n,21,0,t.text.field_description),e(n,23,0,t.text.confirm_button,t.text.confirm_button,!t.passwordValuePresent())})}var Jw=l["\u0275ccf"]("ng-component",Yw,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Zw,Gw)),l["\u0275did"](1,245760,null,0,Yw,[l.ElementRef,On.a,l.ChangeDetectorRef,U.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Xw=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ek(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"a",[["class","help-text--edit-button button"]],[[1,"href",4],[1,"title",0]],null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-edit"]],null,null,null,Ct,wt)),l["\u0275did"](2,49152,null,0,bt,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["\u0275eld"](3,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,2,0,"button--icon icon-edit")},function(e,n){var t=n.component;e(n,0,0,t.helpTextLink,t.text.edit),e(n,3,0,t.text.edit)})}function nk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,12,"div",[["class","op-modal--portal  loading-indicator--location"],["data-indicator-name","modal"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,11,"div",[["class","op-modal--modal-container attribute-help-text--modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,2,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,1,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.closeMe(t)&&i);return i},null,null)),l["\u0275did"](5,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](6,0,null,null,2,"h3",[],null,null,null,null,null)),(e()(),l["\u0275eld"](7,0,null,null,0,"span",[["class","icon-context icon-help1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](8,0,null,null,0,"span",[["class","ellipsis"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"div",[["class","op-modal--modal-body -formattable"],["tabindex","0"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,2,"div",[["class","modal--form-actions"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,ek)),l["\u0275did"](12,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,12,0,n.component.helpText.editText)},function(e,n){var t=n.component;e(n,4,0,t.text.close),e(n,8,0,t.helpText.attributeCaption),e(n,9,0,t.helpText.helpText.html)})}var tk=l["\u0275ccf"]("ng-component",Gr,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,nk,Xw)),l["\u0275did"](1,245760,null,0,Gr,[On.a,U.a,l.ChangeDetectorRef,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),lk=function(){function e(e,n,t){this.toggleService=e,this.cdRef=n,this.elementRef=t,this.mainMenu=jQuery("#main-menu")[0],this.moving=!1}return e.prototype.ngOnInit=function(){var e=this;this.subscription=this.toggleService.titleData$.pipe(Object(Or.a)(),Object(an.b)(this)).subscribe(function(n){e.toggleTitle=n,e.cdRef.detectChanges()}),this.resizeEvent="main-menu-resize",this.localStorageKey="openProject-mainMenuWidth"},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.handleMouseDown=function(e){var n=jQuery(".main-menu--navigation-toggler i")[0];e.target!==n&&(e.preventDefault(),e.stopPropagation(),1!==e.buttons&&1!==e.which||(this.oldPosition=e.clientX,this.elementWidth=this.mainMenu.clientWidth,this.moving=!0,this.mouseMoveHandler=this.resizeElement.bind(this,this.mainMenu),document.getElementsByTagName("body")[0].setAttribute("style","cursor: col-resize !important"),window.addEventListener("mousemove",this.mouseMoveHandler)))},e.prototype.handleMouseUp=function(e){if(!this.moving)return!0;window.removeEventListener("mousemove",this.mouseMoveHandler),document.body.style.cursor="auto",this.moving=!1,this.toggleService.saveWidth();var n=new Event(this.resizeEvent);return window.dispatchEvent(n),!1},e.prototype.resizeElement=function(e,n){n.preventDefault(),n.stopPropagation();var t=n.clientX-this.oldPosition;this.oldPosition=n.clientX,this.elementWidth=this.elementWidth+t,this.toggleService.saveWidth(this.elementWidth)},e}();ot.DynamicBootstrapper.register({selector:"main-menu-resizer",cls:lk});var ik=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ok(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","main-menu--resizer"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"a",[["class","main-menu--navigation-toggler"],["href","#"]],[[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.toggleService.toggleNavigation(t)&&i);return i},null,null)),l["\u0275did"](2,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](3,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-resizer-vertical-lines"]],null,null,null,null,null))],null,function(e,n){e(n,1,0,n.component.toggleTitle)})}var rk=l["\u0275ccf"]("main-menu-resizer",lk,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"main-menu-resizer",[],null,[[null,"mousedown"],["window","mouseup"]],function(e,n,t){var i=!0;return"mousedown"===n&&(i=!1!==l["\u0275nov"](e,1).handleMouseDown(t)&&i),"window:mouseup"===n&&(i=!1!==l["\u0275nov"](e,1).handleMouseUp(t)&&i),i},ok,ik)),l["\u0275did"](1,245760,null,0,lk,[Bu,l.ChangeDetectorRef,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ak=function(){function e(e,n,t){this.toggleService=e,this.cdRef=n,this.injector=t,this.toggleTitle="",this.currentProject=this.injector.get(T)}return e.prototype.ngOnInit=function(){var e=this;this.toggleService.initializeMenu(),this.toggleService.titleData$.pipe(Object(Or.a)(),Object(an.b)(this)).subscribe(function(n){e.toggleTitle=n,e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){},e}();ot.DynamicBootstrapper.register({selector:"main-menu-toggle",cls:ak});var uk=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function sk(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["aria-haspopup","true"],["id","main-menu-toggle"],["tabindex","0"]],[[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,o=e.component;"click"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["\u0275nov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==o.toggleService.toggleNavigation(t)&&i);return i},null,null)),l["\u0275did"](1,16384,null,0,xt,[],null,{onClick:"accessibleClick"}),(e()(),l["\u0275eld"](2,0,null,null,1,"a",[["icon","icon-hamburger"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-hamburger"]],null,null,null,null,null))],null,function(e,n){e(n,0,0,n.component.toggleTitle)})}function ck(e){return l["\u0275vid"](0,[(e()(),l["\u0275and"](16777216,null,null,1,null,sk)),l["\u0275did"](1,16384,null,0,yt.k,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,null!==t.currentProject.id||t.toggleService.isMobile)},null)}var dk=l["\u0275ccf"]("main-menu-toggle",ak,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"main-menu-toggle",[],null,null,null,ck,uk)),l["\u0275did"](1,245760,null,0,ak,[Bu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),pk=function(){function e(e){this.opModalService=e}return e.prototype.confirm=function(e){var n=this;return new Promise(function(t,l){n.opModalService.show(Ww,{options:e}).closingEvent.subscribe(function(e){e.confirmed?t():l()})})},e}(),hk=function(){function e(e,n,t){this.element=e,this.confirmDialog=n,this.I18n=t,this.confirmed=!1,this.text={title:this.I18n.t("js.modals.form_submit.title"),text:this.I18n.t("js.modals.form_submit.text")}}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.element.nativeElement),this.$element.is("form")?this.$form=this.$element:this.$form=this.$element.closest("form"),this.$form.on("submit",function(n){return!!e.confirmed||(n.preventDefault(),e.openConfirmationDialog(),!1)})},e.prototype.openConfirmationDialog=function(){var e=this;this.confirmDialog.confirm({text:this.text,closeByEscape:!0,showClose:!0,closeByDocument:!0}).then(function(){e.confirmed=!0,e.$form.trigger("submit")}).catch(function(){return e.confirmed=!1})},e}();ot.DynamicBootstrapper.register({selector:"confirm-form-submit",cls:hk});var fk=l["\u0275crt"]({encapsulation:2,styles:[],data:{}});function gk(e){return l["\u0275vid"](0,[],null,null)}var mk=l["\u0275ccf"]("confirm-form-submit",hk,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"confirm-form-submit",[],null,null,null,gk,fk)),l["\u0275did"](1,114688,null,0,hk,[l.ElementRef,pk,U.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),vk=function(){function e(e){this.sanitizer=e}return e.prototype.sanitize=function(e){return this.sanitizer.sanitize(l.SecurityContext.HTML,e)||""},e}(),yk=t("yLKq"),bk=function(){function e(){}return e.prototype.intercept=function(e,n){var t=jQuery("meta[name=csrf-token]").attr("content"),l=e.headers.set("X-Authentication-Scheme","Session").set("X-Requested-With","XMLHttpRequest");t&&(l=l.set("X-CSRF-TOKEN",t));var i=e.clone({withCredentials:!0,headers:l});return n.handle(i)},e}(),wk=function(){function e(e,n,t){this.componentFactoryResolver=e,this.appRef=n,this.injector=t}return e.prototype.render=function(e,n){var t=this;e.innerHTML=n;var l=[];return ot.DynamicBootstrapper.getEmbeddable().forEach(function(n){for(var i=e.querySelectorAll(n.selector),o=0,r=i.length;o<r;o++){var a=t.componentFactoryResolver.resolveComponentFactory(n.cls).create(t.injector,[],i[o]);l.push(a),t.appRef.attachView(a.hostView),a.changeDetectorRef.detectChanges()}}),function(){l.forEach(function(e){t.appRef.detachView(e.hostView),e.destroy()}),l.length=0,e.innerHTML=""}},e}(),kk=function(e){function n(n){var t=e.call(this)||this;return t.I18n=n,t.text={internal_error:t.I18n.t("js.errors.internal")},t}return r.d(n,e),n.prototype.handleError=function(n){var t=this.text.internal_error;n instanceof ze?(console.error("Returned error resource %O",n),t+=" "+n.errorMessages.join("\n")):n instanceof K?(console.error("Returned hal resource %O",n),t+="Resource returned "+n.name):t=n,e.prototype.handleError.call(this,t)},n}(l.ErrorHandler),Ck={preview:1,newWorkPackage:2,edit:3,quickSearch:4,projectSearch:5,help:6,moreMenu:7,details:8},Pk=function(){function e(e,n,t){var l=this;this.PathHelper=e,this.FocusHelper=n,this.currentProject=t,this.shortcuts={"?":function(){return l.showHelpModal()},"g m":this.globalAction("myPagePath"),"g o":this.projectScoped("projectPath"),"g w p":this.projectScoped("projectWorkPackagesPath"),"g w i":this.projectScoped("projectWikiPath"),"g a":this.projectScoped("projectActivityPath"),"g c":this.projectScoped("projectCalendarPath"),"g n":this.projectScoped("projectNewsPath"),"g t":this.projectScoped("projectTimelinesPath"),"n w p":this.projectScoped("projectWorkPackageNewPath"),"g e":this.accessKey("edit"),"g p":this.accessKey("preview"),"d w p":this.accessKey("details"),m:this.accessKey("moreMenu"),p:this.accessKey("projectSearch"),s:this.accessKey("quickSearch"),k:function(){return l.focusPrevItem()},j:function(){return l.focusNextItem()}}}return e.prototype.register=function(){var e=this;_.each(this.shortcuts,function(e,n){return Mousetrap.bind(n,e)}),jQuery(".help-link-shortcuts-link").click(function(){return e.showHelpModal(),!1})},e.prototype.accessKey=function(e){var n=this,t=Ck[e];return function(){var e=jQuery("[accesskey="+t+"]:first");e.is("input")?n.FocusHelper.focus(e):e.is("[href]")?n.clickLink(e[0]):e[0].click()}},e.prototype.globalAction=function(e){var n=this;return function(){var t=n.PathHelper[e]();window.location.href=t}},e.prototype.projectScoped=function(e){var n=this;return function(){var t=n.currentProject.identifier;if(t){var l=n.PathHelper[e](t);window.location.href=l}}},e.prototype.clickLink=function(e){var n=!1;if(document.createEvent){var t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});n=!e.dispatchEvent(t)}else e.fireEvent&&(n=!e.fireEvent("onclick"));n||(window.location.href=e.href)},e.prototype.showHelpModal=function(){window.open(this.PathHelper.keyboardShortcutsHelpPath())},e.prototype.findListInPage=function(){var e=jQuery("table.keyboard-accessible-list"),n=[];return e.find("tbody tr").each(function(e,t){var l=jQuery(t).find(":visible:tabbable")[0];void 0!==l&&n.push(l)}),n},e.prototype.focusItemOffset=function(e){var n,t=this.findListInPage();null!==t&&(n=t.indexOf(jQuery(document.activeElement).closest("table.keyboard-accessible-list tbody tr").find(":visible:tabbable")[0]),jQuery(t[(n+e+t.length)%t.length]).focus())},e.prototype.focusNextItem=function(){this.focusItemOffset(1)},e.prototype.focusPrevItem=function(){this.focusItemOffset(-1)},e.ngInjectableDef=l.defineInjectable({factory:function(){return new e(l.inject(R),l.inject(p.a),l.inject(T))},token:e,providedIn:"root"}),e}();var Ik=t("KuCF");function jk(e,n){void 0===n&&(n="add"),e&&document.body.classList[n](e)}function _k(e,n,t){e.urlService.config.strictMode(!1),e.urlService.config.type("opQueryString",{encode:encodeURIComponent,decode:decodeURIComponent,raw:!0,dynamic:!0,is:function(e){return"string"==typeof e},equals:function(e,n){return _.isEqual(e,n)}})}var Sk=function(e){return function(){return e.register()}},Rk=function(){return function(){}}();var Tk=function(){return function(){}}(),xk=function(e){return function(){var n=e.get(d.O),t=e.get(d.G),l=e.get(Ge),i=e.get(T),o=e.get(Gd),r=document.querySelector(Ul);n.onEnter({},function(e){var n=e.to();jk(_.get(n,"data.bodyClasses"),"add")}),n.onExit({},function(e){var n=e.from();jk(_.get(n,"data.bodyClasses"),"remove")}),n.onStart({},function(e){var n=e.router.stateService,a=e.params("to"),u=(e.from(),e.to()),s=window.MiniProfiler;if(s&&s.pageTransition(),jk(_.get(u,"data.bodyClasses"),"add"),null===r&&("url"!==e.options().source||!o.isEmpty)){var c=t.href(u,a);return window.location.href=c,!1}o.setIfFirst(u.name,a),e.to().name!==e.from().name&&l.clear();var d=a.projectPath||i.identifier;if(!a.projects&&d){var p=_.clone(a);return _.assign(p,{projectPath:d,projects:"projects"}),n.target(u,p,{location:"replace"})}return!0})}},Ek=function(){return function(){}}(),Ok=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.schemas.get(this.href)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableAttributes",{get:function(){return _.keys(this.$source).filter(function(e){return 0!==e.indexOf("_")})},enumerable:!0,configurable:!0}),n}(K),Dk=(function(){}(),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.types.get(this.href)},enumerable:!0,configurable:!0}),n}(K)),Fk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.forValue=function(e){return this.dependencies[e]},n}(K),Ak=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(Lr),Vk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.getErrors=function(){var e,n=_.values(this.validationErrors),t=n.length;return 0===t?null:(1===t?e=new ze(this.injector,n[0],!0,this.halInitializer,"Error"):((e=new ze(this.injector,{},!0,this.halInitializer,"Error")).errorIdentifier="urn:openproject-org:api:v3:errors:MultipleErrors",e.errors=n),e.isValidationError=!0,e)},n}(K),Mk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"_type",{get:function(){return"QueryFilterInstanceSchema"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableOperators",{get:function(){return this.operator.allowedValues},enumerable:!0,configurable:!0}),n.prototype.$initialize=function(n){e.prototype.$initialize.call(this,n),n._dependencies&&(this.dependency=new Fk(this.injector,n._dependencies[0],!0,this.halInitializer,"SchemaDependency"))},n.prototype.getFilter=function(){var e=this.operator.allowedValues[0],n=this.filter.allowedValues[0],t={name:n.name,_links:{filter:n.$source._links.self,schema:this.$source._links.self,operator:e.$source._links.self}};this.definesAllowedValues()?t._links.values=[]:t.values=[];var l=new Eg(this.injector,t,!0,this.halInitializer,"QueryFilterInstance");return l.schema=this,l},n.prototype.isValueRequired=function(){return!!this.values},n.prototype.isResourceValue=function(){return!(!this.values||!this.values.allowedValues)},n.prototype.resultingSchema=function(e){var t=this.$source,l=this.dependency.forValue(e.href.toString()),i={};return _.merge(i,t,l),new n(this.injector,i,!0,this.halInitializer,"QueryFilterInstanceSchema")},n.prototype.definesAllowedValues=function(){return _.some(this._dependencies[0].dependencies,function(e){return e.values&&e.values._links&&e.values._links.allowedValues})},n}(Ok),Lk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"id",{get:function(){return this.$source.id||this.idFromLink},set:function(e){this.$source.id=e},enumerable:!0,configurable:!0}),n}(K),Nk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(K),$k=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"id",{get:function(){return this.$source.id||this.idFromLink},set:function(e){this.$source.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"idFromLink",{get:function(){if(this.$href){var e=K.idFromLink(this.$href);return decodeURIComponent(e)}return""},enumerable:!0,configurable:!0}),n}(K),qk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(K),Hk=Hr(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return r.d(n,e),n}(K)),Bk=Hr(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return r.d(n,e),n}(K)),Wk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.statuses.get(this.href)},enumerable:!0,configurable:!0}),n}(K),zk={WorkPackage:{cls:Br,attrTypes:{parent:"WorkPackage",ancestors:"WorkPackage",children:"WorkPackage",relations:"Relation",schema:"Schema",status:"Status",type:"Type"}},Activity:{cls:K,attrTypes:{user:"User"}},"Activity::Comment":{cls:K,attrTypes:{user:"User"}},"Activity::Revision":{cls:K,attrTypes:{user:"User"}},Relation:{cls:Uh,attrTypes:{from:"WorkPackage",to:"WorkPackage"}},Schema:{cls:Ok},Type:{cls:Dk},Status:{cls:Wk},SchemaDependency:{cls:Fk},Error:{cls:ze},User:{cls:yp},Collection:{cls:Lr},WorkPackageCollection:{cls:Ak},Query:{cls:Og,attrTypes:{filters:"QueryFilterInstance"}},Form:{cls:Vk},QueryFilterInstance:{cls:Eg,attrTypes:{schema:"QueryFilterInstanceSchema",filter:"QueryFilter",operator:"QueryOperator"}},QueryFilterInstanceSchema:{cls:Mk},QueryFilter:{cls:Lk},Root:{cls:Nk},QueryOperator:{cls:$k},HelpText:{cls:qk},CustomAction:{cls:Pp},WikiPage:{cls:Hk},Post:{cls:Bk}};var Qk=function(e){return function(){_.each(zk,function(n,t){return e.registerResource(t,n)})}},Uk=function(){return function(){}}();var Kk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(la),Yk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"valueString",{get:function(){return null==this.value?"":this.value.toLocaleString(this.I18n.locale,{useGrouping:!0,maximumFractionDigits:20})},enumerable:!0,configurable:!0}),n}(la),Gk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return parseInt(this.resource[this.name])},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return isNaN(this.value)},n}(la),Zk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.attribute&&this.attribute.name:null},enumerable:!0,configurable:!0}),n}(la),Jk=function(){function e(){}return Object.defineProperty(e,"UNESCAPED_EXPRESSION",{get:function(){return"{{"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ESCAPED_EXPRESSION",{get:function(){return"{{ \\$root\\.DOUBLE_LEFT_CURLY_BRACE }}"},enumerable:!0,configurable:!0}),e.escape=function(e){return e.replace(new RegExp(this.UNESCAPED_EXPRESSION,"g"),this.ESCAPED_EXPRESSION)},e.unescape=function(e){return e.replace(new RegExp(this.ESCAPED_EXPRESSION,"g"),this.UNESCAPED_EXPRESSION)},e}(),Xk=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.appRef=n.$injector.get(l.ApplicationRef),n}return r.d(n,e),n.prototype.render=function(e,n){var t=document.createElement("div");t.classList.add("read-value--html","wiki","highlight","-multiline"),t.innerHTML=n,e.innerHTML="",e.appendChild(t),ot.DynamicBootstrapper.bootstrapOptionalEmbeddable(this.appRef,t)},Object.defineProperty(n.prototype,"isFormattable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){if(!this.schema)return null;var e=this.resource[this.name];return e&&e.html?this.unescape(e.html):""},enumerable:!0,configurable:!0}),n.prototype.unescape=function(e){return e?Jk.unescape(e):""},n}(la),eC=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timezoneService=n.$injector.get(Kn),n}return r.d(n,e),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.timezoneService.formattedDuration(this.value)},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return 0===this.timezoneService.toHours(this.value)},n}(la),nC=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.wpTableHighlighting=n.$injector.get(ln),n}return r.d(n,e),Object.defineProperty(n.prototype,"shouldHighlight",{get:function(){return!1!==this.context.options.colorize&&("table"!==this.context.container||this.wpTableHighlighting.shouldHighlightInline(this.name))},enumerable:!0,configurable:!0}),n}(la),tC=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timezoneService=n.$injector.get(Kn),n}return r.d(n,e),n.prototype.render=function(n,t){if(e.prototype.render.call(this,n,t),this.shouldHighlight&&this.canOverdue){var l=this.timezoneService.daysFromToday(this.value);n.classList.add(Ha.overdueDate(l))}},Object.defineProperty(n.prototype,"canOverdue",{get:function(){return-1!==["dueDate","date"].indexOf(this.name)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.value?this.timezoneService.formattedDate(this.value):""},enumerable:!0,configurable:!0}),n}(nC),lC=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timezoneService=n.$injector.get(Kn),n}return r.d(n,e),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.value?this.timezoneService.formattedDatetime(this.value):""},enumerable:!0,configurable:!0}),n}(la),iC=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.translatedValue()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"placeholder",{get:function(){return this.translatedValue()},enumerable:!0,configurable:!0}),n.prototype.translatedValue=function(){return this.value?this.I18n.t("js.general_text_yes"):this.I18n.t("js.general_text_no")},n.prototype.isEmpty=function(){return!1},n}(la),oC=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={linkTitle:n.I18n.t("js.work_packages.message_successful_show_in_fullscreen"),none:n.I18n.t("js.filter.noneElement")},n.$state=n.$injector.get(d.G),n.keepTab=n.$injector.get(dn),n.uiStateBuilder=new pn(n.$state,n.keepTab),n}return r.d(n,e),n.prototype.render=function(e,n){if(this.isEmpty())e.innerText=this.placeholder;else{var t=this.uiStateBuilder.linkToShow(this.wpId,this.text.linkTitle,this.valueString);e.innerHTML="",e.appendChild(t)}},Object.defineProperty(n.prototype,"value",{get:function(){return this.resource[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.isEmpty()?this.text.none:this.value.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"wpId",{get:function(){return this.isEmpty()?null:this.value.$loaded?this.value.id:this.value.href.match(/(\d+)$/)[0]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"writable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueString",{get:function(){return"#"+this.wpId},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return!this.value},Object.defineProperty(n.prototype,"unknownAttribute",{get:function(){return!1},enumerable:!0,configurable:!0}),n}(la),rC=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.template="/components/wp-display/field-types/wp-display-spent-time-field.directive.html",n.text={linkTitle:n.I18n.t("js.work_packages.message_view_spent_time")},n.PathHelper=n.$injector.get(R),n.projectCacheService=n.$injector.get(Ud),n}return r.d(n,e),n.prototype.render=function(e,n){var t=this;if(this.value){var l=document.createElement("a");l.textContent=n,l.setAttribute("title",this.text.linkTitle),this.resource.project&&this.projectCacheService.require(this.resource.project.idFromLink).then(function(e){var n=URI(t.PathHelper.projectTimeEntriesPath(e.identifier)).search({work_package_id:t.resource.id}).toString();l.href=n}),e.innerHTML="",e.appendChild(l)}},n}(eC),aC=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={linkTitle:n.I18n.t("js.work_packages.message_successful_show_in_fullscreen")},n.$state=n.$injector.get(d.G),n.keepTab=n.$injector.get(dn),n.uiStateBuilder=new pn(n.$state,n.keepTab),n}return r.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.resource.isNew?null:this.resource[this.name]},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){if(this.value){var t=this.uiStateBuilder.linkToShow(this.value,n,this.value);e.appendChild(t)}},n.prototype.isEmpty=function(){return!1},n}(la),uC=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.render=function(n,t){e.prototype.render.call(this,n,t),this.shouldHighlight&&this.addHighlight(n)},Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.attribute&&this.attribute.name:null},enumerable:!0,configurable:!0}),n.prototype.addHighlight=function(e){if(this.attribute instanceof K){var n=Ha.dotClass(this.name,this.attribute.getId());e.classList.add(n)}},n}(nC);var sC=function(e){return function(){e.defaultFieldType="text",e.addFieldType(Cr,"text",["String"]).addFieldType(qo,"integer",["Integer"]).addFieldType(Do,"duration",["Duration"]).addFieldType(gr,"select",["Priority","Status","Type","User","Version","Category","CustomOption","Project"]).addFieldType(er,"multi-select",["[]CustomOption","[]User"]).addFieldType(Mo,"float",["Float"]).addFieldType(_r,"workPackage",["WorkPackage"]).addFieldType(ko,"boolean",["Boolean"]).addFieldType(To,"date",["Date"]).addFieldType(Yo,"wiki-textarea",["Formattable"]).addFieldType(og,"_comment",["comment"])}},cC=function(e){return function(){e.defaultFieldType="text",e.addFieldType(Kk,"text",["String"]).addFieldType(Yk,"float",["Float"]).addFieldType(Gk,"integer",["Integer"]).addFieldType(uC,"highlight",["Status","Type","Priority"]).addFieldType(Zk,"resource",["User","Project","Version","Category","CustomOption"]).addFieldType(ia,"resources",["[]CustomOption","[]User"]).addFieldType(Xk,"formattable",["Formattable"]).addFieldType(eC,"duration",["Duration"]).addFieldType(tC,"date",["Date"]).addFieldType(lC,"datetime",["DateTime"]).addFieldType(iC,"boolean",["Boolean"]).addFieldType(ra,"progress",["percentageDone"]).addFieldType(oC,"work_package",["WorkPackage"]).addFieldType(rC,"spentTime",["spentTime"]).addFieldType(aC,"id",["id"])}},dC=function(){return function(){}}(),pC=function(){function e(){}return e.bootstrapAttributeGroups=function(e){return this.bootstrapAttributeGroupsCalled?function(){}:(this.bootstrapAttributeGroupsCalled=!0,function(){e.get(Bn).register("attributeGroupComponent",function(e,n){return"WorkPackageFormAttributeGroup"===e.type?fa:n.isNew||"WorkPackageFormChildrenQueryGroup"!==e.type?n.isNew||"WorkPackageFormRelationQueryGroup"!==e.type?null:ny:Yc})})},e.bootstrapAttributeGroupsCalled=!1,e}(),hC=function(){function e(e){var n=this;this.injector=e,this._knownHookNames=["workPackageTableContextMenu","workPackageSingleContextMenu","workPackageNewInitialization"],this.services={confirmDialog:this.injector.get(pk),externalQueryConfiguration:this.injector.get(Ln),externalRelationQueryConfiguration:this.injector.get(Hn),halResource:this.injector.get(ee),hooks:this.injector.get(Bn),i18n:this.injector.get(U.a),notifications:this.injector.get(Ge),wpNotifications:this.injector.get(Ze),opModalService:this.injector.get(On.b),opFileUpload:this.injector.get(qr),helpTextDm:this.injector.get(Kr),attributeHelpTexts:this.injector.get(Yr),displayField:this.injector.get(ta),editField:this.injector.get(co),wpCache:this.injector.get(Oe),macros:this.injector.get(it),htmlSanitizeService:this.injector.get(vk),ckEditorPreview:this.injector.get(wk),pathHelperService:this.injector.get(R),states:this.injector.get(u)},this.classes={modals:{passwordConfirmation:Yw,attributeHelpTexts:Gr,dynamicContent:$w.a},HalResource:K,DisplayField:la},this.hooks={},this.zone=this.injector.get(l.NgZone),this._knownHookNames.forEach(function(e){n.hooks[e]=function(t){return n.services.hooks.register(e,t)}})}return e.prototype.runInZone=function(e){this.zone.run(e)},e.prototype.bootstrap=function(e){ot.DynamicBootstrapper.bootstrapOptionalEmbeddable(this.injector.get(l.ApplicationRef),e)},e}();function fC(e){return function(){Object(Ee.a)("Registering OpenProject plugin context");var n=new hC(e);window.OpenProject.pluginContext.putValue(n)}}var gC=function(){return function(){}}();t("omw0");function mC(e){return function(){e.get(Bn).register("openProjectAngularBootstrap",function(){return[{selector:"avatar-upload-form",cls:Pw}]})}}var vC=function(){return function(){}}(),yC=function(e){function n(n,t,l,i){var o=e.call(this,n,t,l,i)||this;return o.resource=n,o.name=t,o.schema=l,o.context=i,o.wpCacheService=o.$injector.get(Oe),o.loadIfNecessary(),o}return r.d(n,e),n.prototype.loadIfNecessary=function(){var e=this;this.value&&!1===this.value.$loaded&&this.value.$load().then(function(){"WorkPackage"===e.resource.$source._type&&e.wpCacheService.updateWorkPackage(e.resource)})},Object.defineProperty(n.prototype,"title",{get:function(){return""},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){var t=this,l=this.resource.showCosts;!this.isEmpty()&&l?this.value.elements.forEach(function(n,i){var o=document.createElement("a");if(o.href=l.href+"?cost_type_id="+n.costObjectId,o.setAttribute("target","_blank"),o.textContent=n.spentUnits+" "+n.costType.name,e.appendChild(o),i<t.value.elements.length-1){var r=document.createElement("span");r.textContent=", ",e.appendChild(r)}}):e.textContent=this.placeholder},n.prototype.isEmpty=function(){return!this.value||!this.value.elements||0===this.value.elements.length},n}(la),bC=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n.prototype.isEmpty=function(){return!this.value||!parseFloat(this.value.match(/\d+/g)[0])},n}(la),wC=Hr(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.d(n,e),n}(K));var kC=function(){return function(){}}(),CC=Hr(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return r.d(n,e),n}(K));var PC=function(){return function(){}}(),IC=Hr(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return r.d(n,e),n}(K));var jC=function(){return function(){}}(),_C=function(){return function(){}}(),SC=function(){return function(){}}(),RC=function(){return function(){}}();t("Iia5");t("T61X");var TC=function(){return function(){}}(),xC=function(){return function(){}}(),EC=t("ZYCi"),OC=l["\u0275cmf"](at,[],function(e){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[st.b,ht,vt,Zt,tl,rl,jl,Al,ql,zl,Zl,Ti,$i,zi,Yi,Xi,vo,wo,Io,Oo,Vo,$o,Wo,Xo,hr,wr,jr,xr,_a,Jc,ip,Zp,Qh,Mf,Uf,ig,sg,pg,mg,pv,_v,Ev,Mv,Hv,Wc,Qv,Gv,Xv,iy,kc,vy,Iy,Ry,Ay,$y,Wy,Zy,ib,bb,Ib,xb,Db,Wb,Yb,jf,Xb,iw,vw,Cw,pw,Rw,Dw,Nw,Bw,Kw,Jw,tk,rk,dk,mk]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](5120,l.LOCALE_ID,l["\u0275angular_packages_core_core_o"],[[3,l.LOCALE_ID]]),l["\u0275mpd"](4608,yt.m,yt.l,[l.LOCALE_ID,[2,yt.y]]),l["\u0275mpd"](4608,l.Compiler,l.Compiler,[]),l["\u0275mpd"](5120,l.APP_ID,l["\u0275angular_packages_core_core_g"],[]),l["\u0275mpd"](5120,l.IterableDiffers,l["\u0275angular_packages_core_core_m"],[]),l["\u0275mpd"](5120,l.KeyValueDiffers,l["\u0275angular_packages_core_core_n"],[]),l["\u0275mpd"](4608,uw.b,uw.l,[yt.c]),l["\u0275mpd"](6144,l.Sanitizer,null,[uw.b]),l["\u0275mpd"](4608,uw.e,uw.g,[]),l["\u0275mpd"](5120,uw.c,function(e,n,t,l,i,o,r,a){return[new uw.j(e,n,t),new uw.o(l),new uw.n(i,o,r,a)]},[yt.c,l.NgZone,l.PLATFORM_ID,yt.c,yt.c,uw.e,l["\u0275Console"],[2,uw.f]]),l["\u0275mpd"](4608,uw.d,uw.d,[uw.c,l.NgZone]),l["\u0275mpd"](135680,uw.m,uw.m,[yt.c]),l["\u0275mpd"](4608,uw.k,uw.k,[uw.d,uw.m]),l["\u0275mpd"](6144,l.RendererFactory2,null,[uw.k]),l["\u0275mpd"](6144,uw.p,null,[uw.m]),l["\u0275mpd"](4608,l.Testability,l.Testability,[l.NgZone]),l["\u0275mpd"](4608,qi.u,qi.u,[]),l["\u0275mpd"](4608,en,en,[yt.c,R]),l["\u0275mpd"](4608,tn,tn,[yt.c]),l["\u0275mpd"](4608,Ke,Ke,[W.c,R,U.a]),l["\u0275mpd"](4608,Ge,Ge,[Ke]),l["\u0275mpd"](4608,Ue,Ue,[]),l["\u0275mpd"](4608,Xe,Xe,[]),l["\u0275mpd"](4608,Kr,Kr,[ee,R]),l["\u0275mpd"](4608,Yr,Yr,[Kr]),l["\u0275mpd"](4608,vk,vk,[uw.b]),l["\u0275mpd"](4608,Kn,Kn,[Ke,U.a]),l["\u0275mpd"](5120,d.F,yk.f,[d.P]),l["\u0275mpd"](5120,"UIView.PARENT_INJECT",yk.m,[d.F]),l["\u0275mpd"](5120,d.G,yk.g,[d.P]),l["\u0275mpd"](5120,d.U,yk.i,[d.P]),l["\u0275mpd"](5120,d.V,yk.j,[d.P]),l["\u0275mpd"](5120,d.Y,yk.k,[d.P]),l["\u0275mpd"](5120,d.Z,yk.l,[d.P]),l["\u0275mpd"](5120,d.Q,yk.e,[d.P]),l["\u0275mpd"](4608,Gd,Gd,[]),l["\u0275mpd"](4608,W.k,W.q,[yt.c,l.PLATFORM_ID,W.o]),l["\u0275mpd"](4608,W.r,W.r,[W.k,W.p]),l["\u0275mpd"](5120,W.a,function(e){return[e,new bk]},[W.r]),l["\u0275mpd"](4608,fr,fr,[]),l["\u0275mpd"](4608,ne,ne,[ee,R]),l["\u0275mpd"](4608,mn,mn,[]),l["\u0275mpd"](4608,le,le,[ne]),l["\u0275mpd"](4608,Ne,Ne,[le]),l["\u0275mpd"](4608,vn,vn,[ee,R,Ne,mn]),l["\u0275mpd"](4608,nh,nh,[ee,R]),l["\u0275mpd"](4608,Tn,Tn,[ee,R]),l["\u0275mpd"](4608,Fe,Fe,[ee,R]),l["\u0275mpd"](4608,Qd,Qd,[ee,R]),l["\u0275mpd"](4608,ym,ym,[ee,R]),l["\u0275mpd"](4608,op,op,[ee,u,R]),l["\u0275mpd"](4608,On.b,On.b,[l.ComponentFactoryResolver,p.a,l.ApplicationRef,d.O,l.Injector]),l["\u0275mpd"](4608,it,it,[On.b]),l["\u0275mpd"](4608,xi,xi,[R]),l["\u0275mpd"](4608,wk,wk,[l.ComponentFactoryResolver,l.ApplicationRef,l.Injector]),l["\u0275mpd"](4608,Ar,Ar,[l.Injector,l.ApplicationRef,l.ComponentFactoryResolver]),l["\u0275mpd"](4608,Su.h,Su.h,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["\u0275mpd"](5120,Su.i,Su.d,[]),l["\u0275mpd"](4608,Su.j,Su.j,[l.Injector]),l["\u0275mpd"](4608,A,A,[]),l["\u0275mpd"](4608,ie,ie,[A,le]),l["\u0275mpd"](4608,ve,ve,[A]),l["\u0275mpd"](4608,Ln,Ln,[l.ComponentFactoryResolver,p.a,l.ApplicationRef,d.O,l.Injector]),l["\u0275mpd"](4608,Hn,Hn,[l.ComponentFactoryResolver,p.a,l.ApplicationRef,d.O,l.Injector]),l["\u0275mpd"](4608,Se,Se,[u,A]),l["\u0275mpd"](4608,xe,xe,[u,ee]),l["\u0275mpd"](4608,Re,Re,[ee,R,u]),l["\u0275mpd"](4608,Oe,Oe,[u,xe,Re]),l["\u0275mpd"](4608,Ae,Ae,[A]),l["\u0275mpd"](4608,Me,Me,[Fe,Ae,R,ee]),l["\u0275mpd"](4608,Le,Le,[A,Se,ee,Oe,Me]),l["\u0275mpd"](4608,Pe,Pe,[u,A]),l["\u0275mpd"](4608,re,re,[A]),l["\u0275mpd"](4608,We,We,[u,A]),l["\u0275mpd"](4608,ke,ke,[A]),l["\u0275mpd"](4608,be,be,[A]),l["\u0275mpd"](4608,ln,ln,[u,tn,en,A]),l["\u0275mpd"](4608,Ze,Ze,[U.a,d.G,Oe,ee,Ge,Ue]),l["\u0275mpd"](4608,Je,Je,[A,re,Se,Ze,ee,Oe,Me]),l["\u0275mpd"](4608,$e,$e,[Ne,d.G]),l["\u0275mpd"](4608,on,on,[u,A,Se,Pe,We,ke,be,ve,re,ln,Le,ie,Je,Oe,$e,Xe]),l["\u0275mpd"](4608,as,as,[ee]),l["\u0275mpd"](4608,ds,ds,[Ge,U.a,Ne,Xe,d.G,vn,Tn,u,A,ie,on,as]),l["\u0275mpd"](4608,Ru,Ru,[]),l["\u0275mpd"](4608,rv,rv,[U.a,d.G,T,R,Ru]),l["\u0275mpd"](4608,Er,Er,[A,u,Oe]),l["\u0275mpd"](4608,Dr,Dr,[u,A,Er]),l["\u0275mpd"](4608,Bn,Bn,[]),l["\u0275mpd"](4608,Gn,Xn,[l.Injector,Bn,Oe,ee,Re]),l["\u0275mpd"](4608,Zn,to,[l.Injector,Oe]),l["\u0275mpd"](135680,Du,Du,[l.Injector]),l["\u0275mpd"](4608,os,os,[d.G,u,Ae,Ze,R,Oe]),l["\u0275mpd"](135680,Qc,Qc,[l.Injector,os]),l["\u0275mpd"](135680,ey,ey,[l.Injector]),l["\u0275mpd"](4608,gn,gn,[l.Injector]),l["\u0275mpd"](4608,dn,dn,[d.G,d.O]),l["\u0275mpd"](4608,kn,kn,[]),l["\u0275mpd"](4608,ps,ps,[W.c,d.G,R,Ne,Ge,U.a,Ae]),l["\u0275mpd"](4608,Yn,Yn,[Ke,Kn]),l["\u0275mpd"](4608,Ed,Ed,[]),l["\u0275mpd"](4608,is,is,[Bn,Ne,ve,R]),l["\u0275mpd"](4608,Sn,Sn,[U.a]),l["\u0275mpd"](4608,l.NgModuleFactoryLoader,l.SystemJsNgModuleLoader,[l.Compiler,[2,l.SystemJsNgModuleLoaderConfig]]),l["\u0275mpd"](4608,Kd,Kd,[uw.h]),l["\u0275mpd"](4608,Ud,Ud,[u,Qd]),l["\u0275mpd"](4608,th,th,[u,nh]),l["\u0275mpd"](4608,qr,qr,[W.c,ee]),l["\u0275mpd"](4608,ch,ch,[U.a,Ze,Ge]),l["\u0275mpd"](4608,ca,ca,[l.ComponentFactoryResolver,p.a,l.ApplicationRef,d.O,l.Injector]),l["\u0275mpd"](4608,pk,pk,[On.b]),l["\u0275mpd"](4608,Bu,Bu,[U.a,l.Injector]),l["\u0275mpd"](4608,Wn.ModalWrapperAugmentService,Wn.ModalWrapperAugmentService,[yt.c,On.b]),l["\u0275mpd"](1073742336,yt.b,yt.b,[]),l["\u0275mpd"](512,U.a,U.a,[]),l["\u0275mpd"](512,l.ErrorHandler,kk,[U.a]),l["\u0275mpd"](512,R,R,[]),l["\u0275mpd"](512,p.a,p.a,[]),l["\u0275mpd"](512,T,T,[R]),l["\u0275mpd"](512,Pk,Pk,[R,p.a,T]),l["\u0275mpd"](512,yt.g,yt.r,[yt.s,[2,yt.a]]),l["\u0275mpd"](1024,Ik.b,function(){return[{states:[{name:"root",url:"/{projects}/{projectPath}",component:Kl,abstract:!0,params:{projectPath:{type:"path",value:null,squash:!0},projects:{type:"path",value:null,squash:!0}}}],useHash:!1,config:_k}]},[]),l["\u0275mpd"](1024,Ik.a,function(){return[{states:[{name:"root",url:"/{projects}/{projectPath}",component:Kl,abstract:!0,params:{projectPath:{type:"path",value:null,squash:!0},projects:{type:"path",value:null,squash:!0}}}],useHash:!1,config:_k},{states:[{name:"work-packages",parent:"root",component:hg,url:"/work_packages?query_id&query_props",abstract:!0,params:{query_id:{type:"query",dynamic:!0},query_props:{type:"opQueryString"}}},{name:"work-packages.new",url:"/new?type&parent_id",component:Cv,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"full-create"}},{name:"work-packages.copy",url:"/{copiedFromWorkPackageId:[0-9]+}/copy",component:Dv,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"full-create"}},{name:"work-packages.show",url:"/{workPackageId:[0-9]+}",redirectTo:"work-packages.show.activity",component:zp,data:{bodyClasses:"action-show"}},{name:"work-packages.show.activity",url:"/activity",component:Nh},{name:"work-packages.show.activity.details",url:"/activity/details/#{activity_no:d+}",component:Nh},{name:"work-packages.show.relations",url:"/relations",component:Df},{name:"work-packages.show.watchers",url:"/watchers",component:Lf},{name:"work-packages.list",url:"",component:ov,reloadOnSearch:!1,data:{bodyClasses:"action-index"}},{name:"work-packages.list.new",url:"/create_new?type&parent_id",component:Sv,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"action-create"}},{name:"work-packages.list.copy",url:"/details/{copiedFromWorkPackageId:[0-9]+}/copy",component:Lv,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"action-details"}},{name:"work-packages.list.details",redirectTo:"work-packages.list.details.overview",url:"/details/{workPackageId:[0-9]+}",component:Zd,reloadOnSearch:!1,params:{focus:{dynamic:!0,value:!0}},data:{bodyClasses:"action-details"}},{name:"work-packages.list.details.overview",url:"/overview",component:Xf},{name:"work-packages.list.details.activity",url:"/activity",component:Nh},{name:"work-packages.list.details.activity.details",url:"/activity/details/#{activity_no:d+}",component:Nh},{name:"work-packages.list.details.relations",url:"/relations",component:Df},{name:"work-packages.list.details.watchers",url:"/watchers",component:Lf}]},{states:[{name:"work-packages.calendar",url:"/calendar",component:hw,reloadOnSearch:!1}]}]},[]),l["\u0275mpd"](1024,d.P,yk.n,[yt.g,Ik.b,Ik.a,l.Injector]),l["\u0275mpd"](1024,d.O,yk.h,[d.P]),l["\u0275mpd"](512,W.n,W.n,[]),l["\u0275mpd"](2048,W.l,null,[W.n]),l["\u0275mpd"](512,W.j,W.j,[W.l]),l["\u0275mpd"](2048,W.b,null,[W.j]),l["\u0275mpd"](512,W.h,W.m,[W.b,l.Injector]),l["\u0275mpd"](512,W.c,W.c,[W.h]),l["\u0275mpd"](512,ee,ee,[l.Injector,W.c]),l["\u0275mpd"](512,co,co,[l.Injector]),l["\u0275mpd"](512,ta,ta,[l.Injector]),l["\u0275mpd"](1024,l.APP_INITIALIZER,function(e,n,t,l,i,o,r,u,s,c,d,p,h,f,g,m,v){return[uw.q(e),Sk(n),(y=t,function(){y.get(Bn).register("openProjectAngularBootstrap",function(){return[Xt]})}),yk.d(l),Ik.h(i,o),xk(r),Qk(u),sC(s),cC(c),pC.bootstrapAttributeGroups(d),fC(p),mC(h),function(){window.OpenProject.getPluginContext().then(function(e){e.services.editField.extendFieldType("select",["Budget"]);var n=e.services.displayField;n.extendFieldType("resource",["Budget"]),n.addFieldType(yC,"costs",["costsByType"]),n.addFieldType(bC,"currency",["laborCosts","materialCosts","overallCosts"]),e.services.halResource.registerResource("Budget",{cls:wC}),e.hooks.workPackageSingleContextMenu(function(e){return{key:"log_costs",icon:"icon-projects",indexBy:function(e){var n=_.findIndex(e,{key:"log_time"});return-1!==n?n+1:e.length},resource:"workPackage",link:"logCosts"}}),e.hooks.workPackageTableContextMenu(function(e){return{key:"log_costs",icon:"icon-projects",link:"logCosts",indexBy:function(e){var n=_.findIndex(e,{link:"logTime"});return-1!==n?n+1:e.length},text:I18n.t("js.button_log_costs")}}),e.services.states.add("budgets",Object(a.h)())})},function(){window.OpenProject.getPluginContext().then(function(e){e.services.halResource.registerResource("Document",{cls:CC}),e.services.states.add("documents",Object(a.h)())})},function(){window.OpenProject.getPluginContext().then(function(e){e.services.halResource.registerResource("Overview",{cls:IC}),e.services.states.add("overviews",Object(a.h)())})},ut(v)];var y},[[2,l.NgProbeToken],Pk,l.Injector,d.P,d.O,Ik.b,l.Injector,ee,co,ta,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector]),l["\u0275mpd"](512,l.ApplicationInitStatus,l.ApplicationInitStatus,[[2,l.APP_INITIALIZER]]),l["\u0275mpd"](131584,l.ApplicationRef,l.ApplicationRef,[l.NgZone,l["\u0275Console"],l.Injector,l.ErrorHandler,l.ComponentFactoryResolver,l.ApplicationInitStatus]),l["\u0275mpd"](1073742336,l.ApplicationModule,l.ApplicationModule,[l.ApplicationRef]),l["\u0275mpd"](1073742336,uw.a,uw.a,[[3,uw.a]]),l["\u0275mpd"](1073742336,Ik.d,Ik.d,[]),l["\u0275mpd"](1073742336,qi.r,qi.r,[]),l["\u0275mpd"](1073742336,qi.e,qi.e,[]),l["\u0275mpd"](1073742336,c.d,c.d,[]),l["\u0275mpd"](1073742336,Rk,Rk,[]),l["\u0275mpd"](1073742336,Tk,Tk,[]),l["\u0275mpd"](1073742336,Ek,Ek,[]),l["\u0275mpd"](1073742336,W.e,W.e,[]),l["\u0275mpd"](1073742336,W.d,W.d,[]),l["\u0275mpd"](1073742336,Uk,Uk,[]),l["\u0275mpd"](1073742336,_C,_C,[]),l["\u0275mpd"](1073742336,SC,SC,[]),l["\u0275mpd"](1073742336,dC,dC,[]),l["\u0275mpd"](1073742336,oy.ChartsModule,oy.ChartsModule,[]),l["\u0275mpd"](1073742336,Su.c,Su.c,[]),l["\u0275mpd"](1073742336,pC,pC,[]),l["\u0275mpd"](1073742336,RC,RC,[]),l["\u0275mpd"](1073742336,rw.b,rw.b,[]),l["\u0275mpd"](1073742336,TC,TC,[]),l["\u0275mpd"](1073742336,gC,gC,[]),l["\u0275mpd"](1073742336,vC,vC,[]),l["\u0275mpd"](1073742336,kC,kC,[]),l["\u0275mpd"](1073742336,PC,PC,[]),l["\u0275mpd"](1073742336,jC,jC,[]),l["\u0275mpd"](1073742336,xC,xC,[]),l["\u0275mpd"](1073742336,at,at,[]),l["\u0275mpd"](256,l["\u0275APP_ROOT"],!0,[]),l["\u0275mpd"](1024,EC.a,function(){return[[{name:"root",url:"/{projects}/{projectPath}",component:Kl,abstract:!0,params:{projectPath:{type:"path",value:null,squash:!0},projects:{type:"path",value:null,squash:!0}}}],[{name:"work-packages",parent:"root",component:hg,url:"/work_packages?query_id&query_props",abstract:!0,params:{query_id:{type:"query",dynamic:!0},query_props:{type:"opQueryString"}}},{name:"work-packages.new",url:"/new?type&parent_id",component:Cv,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"full-create"}},{name:"work-packages.copy",url:"/{copiedFromWorkPackageId:[0-9]+}/copy",component:Dv,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"full-create"}},{name:"work-packages.show",url:"/{workPackageId:[0-9]+}",redirectTo:"work-packages.show.activity",component:zp,data:{bodyClasses:"action-show"}},{name:"work-packages.show.activity",url:"/activity",component:Nh},{name:"work-packages.show.activity.details",url:"/activity/details/#{activity_no:d+}",component:Nh},{name:"work-packages.show.relations",url:"/relations",component:Df},{name:"work-packages.show.watchers",url:"/watchers",component:Lf},{name:"work-packages.list",url:"",component:ov,reloadOnSearch:!1,data:{bodyClasses:"action-index"}},{name:"work-packages.list.new",url:"/create_new?type&parent_id",component:Sv,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"action-create"}},{name:"work-packages.list.copy",url:"/details/{copiedFromWorkPackageId:[0-9]+}/copy",component:Lv,reloadOnSearch:!1,data:{allowMovingInEditMode:!0,bodyClasses:"action-details"}},{name:"work-packages.list.details",redirectTo:"work-packages.list.details.overview",url:"/details/{workPackageId:[0-9]+}",component:Zd,reloadOnSearch:!1,params:{focus:{dynamic:!0,value:!0}},data:{bodyClasses:"action-details"}},{name:"work-packages.list.details.overview",url:"/overview",component:Xf},{name:"work-packages.list.details.activity",url:"/activity",component:Nh},{name:"work-packages.list.details.activity.details",url:"/activity/details/#{activity_no:d+}",component:Nh},{name:"work-packages.list.details.relations",url:"/relations",component:Df},{name:"work-packages.list.details.watchers",url:"/watchers",component:Lf}],[{name:"work-packages.calendar",url:"/calendar",component:hw,reloadOnSearch:!1}]]},[]),l["\u0275mpd"](256,W.o,"XSRF-TOKEN",[]),l["\u0275mpd"](256,W.p,"X-XSRF-TOKEN",[]),l["\u0275mpd"](256,u,rt,[]),l["\u0275mpd"](256,Su.e,Su.a,[])])});window.global=window,t("FUyZ"),t("buKu"),o.a.production&&Object(l.enableProdMode)(),i(function(){uw.i().bootstrapModuleFactory(OC).then(function(e){i("body").addClass("__ng2-bootstrap-has-run")})})}},[[0,8,119]]]);